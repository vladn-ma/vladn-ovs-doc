<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: ovstest.util Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespaceovstest_1_1util.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ovstest.util Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad22640868fa23e9434094dcc9b8d844c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#ad22640868fa23e9434094dcc9b8d844c">str_ip</a> (ip_address)</td></tr>
<tr class="separator:ad22640868fa23e9434094dcc9b8d844c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b82a466b4d42696a0c07db915184469"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a5b82a466b4d42696a0c07db915184469">get_interface_mtu</a> (<a class="el" href="structiface.html">iface</a>)</td></tr>
<tr class="separator:a5b82a466b4d42696a0c07db915184469"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98f13d39395a3e14fdeb2e4b3ef593ba"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a98f13d39395a3e14fdeb2e4b3ef593ba">get_interface</a> (address)</td></tr>
<tr class="separator:a98f13d39395a3e14fdeb2e4b3ef593ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8be25ef85acd1b48b8d820dd41e7dece"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a8be25ef85acd1b48b8d820dd41e7dece">uname</a> ()</td></tr>
<tr class="separator:a8be25ef85acd1b48b8d820dd41e7dece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8359d953e94bab16ee0d9b9a3a346e1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a> (args)</td></tr>
<tr class="separator:ad8359d953e94bab16ee0d9b9a3a346e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4386ccef82d4d8258215a00eee33812"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#aa4386ccef82d4d8258215a00eee33812">get_driver</a> (<a class="el" href="structiface.html">iface</a>)</td></tr>
<tr class="separator:aa4386ccef82d4d8258215a00eee33812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e8cb2c3afd46f71c0d7db3d03f6588"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#ad5e8cb2c3afd46f71c0d7db3d03f6588">interface_up</a> (<a class="el" href="structiface.html">iface</a>)</td></tr>
<tr class="separator:ad5e8cb2c3afd46f71c0d7db3d03f6588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1c4daea0b7a352c778a1b4517b3fe13"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#ac1c4daea0b7a352c778a1b4517b3fe13">interface_assign_ip</a> (<a class="el" href="structiface.html">iface</a>, ip_addr, mask)</td></tr>
<tr class="separator:ac1c4daea0b7a352c778a1b4517b3fe13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a394629db655b0f1e0ae714160af38d68"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a394629db655b0f1e0ae714160af38d68">interface_get_ip</a> (<a class="el" href="structiface.html">iface</a>)</td></tr>
<tr class="separator:a394629db655b0f1e0ae714160af38d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b4c59e6f6811c059f2a9c45a93b5d97"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a2b4c59e6f6811c059f2a9c45a93b5d97">move_routes</a> (iface1, iface2)</td></tr>
<tr class="separator:a2b4c59e6f6811c059f2a9c45a93b5d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a337686b618bf654e9e487a4669824418"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a337686b618bf654e9e487a4669824418">get_interface_from_routing_decision</a> (<a class="el" href="datapath_2flow_8h.html#a898dda7a587e3b8e5f8e257c1cea69f6">ip</a>)</td></tr>
<tr class="separator:a337686b618bf654e9e487a4669824418"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad663fcfbbafbcd7df5849b16c02ea785"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#ad663fcfbbafbcd7df5849b16c02ea785">rpc_client</a> (<a class="el" href="datapath_2flow_8h.html#a898dda7a587e3b8e5f8e257c1cea69f6">ip</a>, <a class="el" href="structport.html">port</a>)</td></tr>
<tr class="separator:ad663fcfbbafbcd7df5849b16c02ea785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6175d3cc2de818be86c495aff701aad2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a6175d3cc2de818be86c495aff701aad2">sigint_intercept</a> ()</td></tr>
<tr class="separator:a6175d3cc2de818be86c495aff701aad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b1d7b14918b66466652a587c8e2a63"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a20b1d7b14918b66466652a587c8e2a63">start_local_server</a> (<a class="el" href="structport.html">port</a>)</td></tr>
<tr class="separator:a20b1d7b14918b66466652a587c8e2a63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90fccec6a5d682c2ac5cd90b9bff4524"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a90fccec6a5d682c2ac5cd90b9bff4524">get_datagram_sizes</a> (mtu1, mtu2)</td></tr>
<tr class="separator:a90fccec6a5d682c2ac5cd90b9bff4524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6a6368ea8edd00c27224fb4bcb502a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a8c6a6368ea8edd00c27224fb4bcb502a">ip_from_cidr</a> (string)</td></tr>
<tr class="separator:a8c6a6368ea8edd00c27224fb4bcb502a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cbe4a509429984f12f74bffb3caedc5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceovstest_1_1util.html#a2cbe4a509429984f12f74bffb3caedc5">bandwidth_to_string</a> (bwidth)</td></tr>
<tr class="separator:a2cbe4a509429984f12f74bffb3caedc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2cbe4a509429984f12f74bffb3caedc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.bandwidth_to_string </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bwidth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convert bandwidth from long to string and add units.</pre> <div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a2cbe4a509429984f12f74bffb3caedc5">bandwidth_to_string</a>(bwidth):</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Convert bandwidth from long to string and add units.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    bwidth = bwidth * 8  <span class="comment"># Convert back to bits/second</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> bwidth &gt;= 10000000:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">return</span> str(int(bwidth / 1000000)) + <span class="stringliteral">&quot;Mbps&quot;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">elif</span> bwidth &gt; 10000:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">return</span> str(int(bwidth / 1000)) + <span class="stringliteral">&quot;Kbps&quot;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span> str(int(bwidth)) + <span class="stringliteral">&quot;bps&quot;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<div class="ttc" id="namespaceovstest_1_1util_html_a2cbe4a509429984f12f74bffb3caedc5"><div class="ttname"><a href="namespaceovstest_1_1util.html#a2cbe4a509429984f12f74bffb3caedc5">ovstest.util.bandwidth_to_string</a></div><div class="ttdeci">def bandwidth_to_string(bwidth)</div><div class="ttdef"><b>Definition:</b> util.py:222</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a90fccec6a5d682c2ac5cd90b9bff4524"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.get_datagram_sizes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mtu1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mtu2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function calculates all the "interesting" datagram sizes so that
we test both - receive and send side with different packets sizes.
</pre> <div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a90fccec6a5d682c2ac5cd90b9bff4524">get_datagram_sizes</a>(mtu1, mtu2):</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="stringliteral">    This function calculates all the &quot;interesting&quot; datagram sizes so that</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="stringliteral">    we test both - receive and send side with different packets sizes.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    s1 = set([8, mtu1 - 100, mtu1 - 28, mtu1])</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    s2 = set([8, mtu2 - 100, mtu2 - 28, mtu2])</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span> sorted(s1.union(s2))</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a90fccec6a5d682c2ac5cd90b9bff4524"><div class="ttname"><a href="namespaceovstest_1_1util.html#a90fccec6a5d682c2ac5cd90b9bff4524">ovstest.util.get_datagram_sizes</a></div><div class="ttdeci">def get_datagram_sizes(mtu1, mtu2)</div><div class="ttdef"><b>Definition:</b> util.py:203</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4386ccef82d4d8258215a00eee33812"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.get_driver </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#aa4386ccef82d4d8258215a00eee33812">get_driver</a>(iface):</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    ret, out, _err = <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>([<span class="stringliteral">&quot;ethtool&quot;</span>, <span class="stringliteral">&quot;-i&quot;</span>, iface])</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> ret == 0:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        lines = out.splitlines()</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        driver = <span class="stringliteral">&quot;%s(%s)&quot;</span> % (lines[0], lines[1])  <span class="comment"># driver name + version</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        driver = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> driver</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_aa4386ccef82d4d8258215a00eee33812"><div class="ttname"><a href="namespaceovstest_1_1util.html#aa4386ccef82d4d8258215a00eee33812">ovstest.util.get_driver</a></div><div class="ttdeci">def get_driver(iface)</div><div class="ttdef"><b>Definition:</b> util.py:92</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a98f13d39395a3e14fdeb2e4b3ef593ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.get_interface </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Finds first interface that has given address
</pre> <div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a98f13d39395a3e14fdeb2e4b3ef593ba">get_interface</a>(address):</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="stringliteral">    Finds first interface that has given address</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    bytes = 256 * 32</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    names = array.array(<span class="stringliteral">&#39;B&#39;</span>, <span class="stringliteral">&#39;\0&#39;</span> * bytes)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    outbytes = struct.unpack(<span class="stringliteral">&#39;iL&#39;</span>, fcntl.ioctl(</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        s.fileno(),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        0x8912, <span class="comment"># SIOCGIFCONF</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        struct.pack(<span class="stringliteral">&#39;iL&#39;</span>, bytes, names.buffer_info()[0])</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    ))[0]</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    namestr = names.tostring()</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, outbytes, 40):</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        name = namestr[i:i + 16].split(<span class="stringliteral">&#39;\0&#39;</span>, 1)[0]</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">if</span> address == <a class="code" href="namespaceovstest_1_1util.html#ad22640868fa23e9434094dcc9b8d844c">str_ip</a>(namestr[i + 20:i + 24]):</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="keywordflow">return</span> name</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> <span class="keywordtype">None</span>  <span class="comment"># did not find interface we were looking for</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a98f13d39395a3e14fdeb2e4b3ef593ba"><div class="ttname"><a href="namespaceovstest_1_1util.html#a98f13d39395a3e14fdeb2e4b3ef593ba">ovstest.util.get_interface</a></div><div class="ttdeci">def get_interface(address)</div><div class="ttdef"><b>Definition:</b> util.py:54</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad22640868fa23e9434094dcc9b8d844c"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad22640868fa23e9434094dcc9b8d844c">ovstest.util.str_ip</a></div><div class="ttdeci">def str_ip(ip_address)</div><div class="ttdef"><b>Definition:</b> util.py:31</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a337686b618bf654e9e487a4669824418"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.get_interface_from_routing_decision </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ip</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function returns the interface through which the given ip address
is reachable.
</pre> <div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a337686b618bf654e9e487a4669824418">get_interface_from_routing_decision</a>(ip):</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral">    This function returns the interface through which the given ip address</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral">    is reachable.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    args = [<span class="stringliteral">&quot;ip&quot;</span>, <span class="stringliteral">&quot;route&quot;</span>, <span class="stringliteral">&quot;get&quot;</span>, ip]</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    ret, out, _err = <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>(args)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> ret == 0:</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        iface = re.search(<span class="stringliteral">r&#39;dev (\S+)&#39;</span>, out)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> iface:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">return</span> iface.group(1)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a337686b618bf654e9e487a4669824418"><div class="ttname"><a href="namespaceovstest_1_1util.html#a337686b618bf654e9e487a4669824418">ovstest.util.get_interface_from_routing_decision</a></div><div class="ttdeci">def get_interface_from_routing_decision(ip)</div><div class="ttdef"><b>Definition:</b> util.py:155</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5b82a466b4d42696a0c07db915184469"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.get_interface_mtu </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns MTU of the given interface.
</pre> <div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a5b82a466b4d42696a0c07db915184469">get_interface_mtu</a>(iface):</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="stringliteral">    Returns MTU of the given interface.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    indata = iface + (<span class="stringliteral">&#39;\0&#39;</span> * (32 - len(iface)))</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        outdata = fcntl.ioctl(s.fileno(), 0x8921, indata) <span class="comment">#  socket.SIOCGIFMTU</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        mtu = struct.unpack(<span class="stringliteral">&quot;16si12x&quot;</span>, outdata)[1]</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">except</span>:</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> 0</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordflow">return</span> mtu</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a5b82a466b4d42696a0c07db915184469"><div class="ttname"><a href="namespaceovstest_1_1util.html#a5b82a466b4d42696a0c07db915184469">ovstest.util.get_interface_mtu</a></div><div class="ttdeci">def get_interface_mtu(iface)</div><div class="ttdef"><b>Definition:</b> util.py:39</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac1c4daea0b7a352c778a1b4517b3fe13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.interface_assign_ip </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ip_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function allows to assign IP address to an interface. If mask is an
empty string then ifconfig will decide what kind of mask to use. The
caller can also specify the mask by using CIDR notation in ip argument by
leaving the mask argument as an empty string. In case of success this
function returns 0.
</pre> <div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#ac1c4daea0b7a352c778a1b4517b3fe13">interface_assign_ip</a>(iface, ip_addr, mask):</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral">    This function allows to assign IP address to an interface. If mask is an</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">    empty string then ifconfig will decide what kind of mask to use. The</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral">    caller can also specify the mask by using CIDR notation in ip argument by</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral">    leaving the mask argument as an empty string. In case of success this</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="stringliteral">    function returns 0.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    args = [<span class="stringliteral">&quot;ifconfig&quot;</span>, iface, ip_addr]</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        args.append(<span class="stringliteral">&quot;netmask&quot;</span>)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        args.append(mask)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    ret, _out, _err = <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>(args)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> ret</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_ac1c4daea0b7a352c778a1b4517b3fe13"><div class="ttname"><a href="namespaceovstest_1_1util.html#ac1c4daea0b7a352c778a1b4517b3fe13">ovstest.util.interface_assign_ip</a></div><div class="ttdeci">def interface_assign_ip(iface, ip_addr, mask)</div><div class="ttdef"><b>Definition:</b> util.py:110</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a394629db655b0f1e0ae714160af38d68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.interface_get_ip </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function returns tuple - ip and mask that was assigned to the
interface.
</pre> <div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a394629db655b0f1e0ae714160af38d68">interface_get_ip</a>(iface):</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="stringliteral">    This function returns tuple - ip and mask that was assigned to the</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="stringliteral">    interface.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    args = [<span class="stringliteral">&quot;ifconfig&quot;</span>, iface]</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    ret, out, _err = <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>(args)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> ret == 0:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        ip = re.search(<span class="stringliteral">r&#39;inet addr:(\S+)&#39;</span>, out)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        mask = re.search(<span class="stringliteral">r&#39;Mask:(\S+)&#39;</span>, out)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> ip <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> mask <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">return</span> (ip.group(1), mask.group(1))</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> ret</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a394629db655b0f1e0ae714160af38d68"><div class="ttname"><a href="namespaceovstest_1_1util.html#a394629db655b0f1e0ae714160af38d68">ovstest.util.interface_get_ip</a></div><div class="ttdeci">def interface_get_ip(iface)</div><div class="ttdef"><b>Definition:</b> util.py:126</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5e8cb2c3afd46f71c0d7db3d03f6588"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.interface_up </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function brings given iface up.
</pre> <div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#ad5e8cb2c3afd46f71c0d7db3d03f6588">interface_up</a>(iface):</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">    This function brings given iface up.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    ret, _out, _err = <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>([<span class="stringliteral">&quot;ifconfig&quot;</span>, iface, <span class="stringliteral">&quot;up&quot;</span>])</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> ret</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad5e8cb2c3afd46f71c0d7db3d03f6588"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad5e8cb2c3afd46f71c0d7db3d03f6588">ovstest.util.interface_up</a></div><div class="ttdeci">def interface_up(iface)</div><div class="ttdef"><b>Definition:</b> util.py:102</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c6a6368ea8edd00c27224fb4bcb502a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.ip_from_cidr </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function removes the netmask (if present) from the given string and
returns the IP address.
</pre> <div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a8c6a6368ea8edd00c27224fb4bcb502a">ip_from_cidr</a>(string):</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="stringliteral">    This function removes the netmask (if present) from the given string and</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="stringliteral">    returns the IP address.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    token = string.split(<span class="stringliteral">&quot;/&quot;</span>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> token[0]</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a8c6a6368ea8edd00c27224fb4bcb502a"><div class="ttname"><a href="namespaceovstest_1_1util.html#a8c6a6368ea8edd00c27224fb4bcb502a">ovstest.util.ip_from_cidr</a></div><div class="ttdeci">def ip_from_cidr(string)</div><div class="ttdef"><b>Definition:</b> util.py:213</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b4c59e6f6811c059f2a9c45a93b5d97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.move_routes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>iface2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function moves routes from iface1 to iface2.
</pre> <div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a2b4c59e6f6811c059f2a9c45a93b5d97">move_routes</a>(iface1, iface2):</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="stringliteral">    This function moves routes from iface1 to iface2.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    args = [<span class="stringliteral">&quot;ip&quot;</span>, <span class="stringliteral">&quot;route&quot;</span>, <span class="stringliteral">&quot;show&quot;</span>, <span class="stringliteral">&quot;dev&quot;</span>, iface1]</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    ret, out, _err = <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>(args)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> ret == 0:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">for</span> route <span class="keywordflow">in</span> out.splitlines():</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            args = [<span class="stringliteral">&quot;ip&quot;</span>, <span class="stringliteral">&quot;route&quot;</span>, <span class="stringliteral">&quot;replace&quot;</span>, <span class="stringliteral">&quot;dev&quot;</span>, iface2] + route.split()</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>(args)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a2b4c59e6f6811c059f2a9c45a93b5d97"><div class="ttname"><a href="namespaceovstest_1_1util.html#a2b4c59e6f6811c059f2a9c45a93b5d97">ovstest.util.move_routes</a></div><div class="ttdeci">def move_routes(iface1, iface2)</div><div class="ttdef"><b>Definition:</b> util.py:143</div></div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad663fcfbbafbcd7df5849b16c02ea785"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.rpc_client </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#ad663fcfbbafbcd7df5849b16c02ea785">rpc_client</a>(ip, port):</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> xmlrpclib.Server(<span class="stringliteral">&quot;http://%s:%u/&quot;</span> % (ip, port), allow_none=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad663fcfbbafbcd7df5849b16c02ea785"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad663fcfbbafbcd7df5849b16c02ea785">ovstest.util.rpc_client</a></div><div class="ttdeci">def rpc_client(ip, port)</div><div class="ttdef"><b>Definition:</b> util.py:169</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6175d3cc2de818be86c495aff701aad2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.sigint_intercept </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Intercept SIGINT from child (the local ovs-test server process).
</pre> <div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a6175d3cc2de818be86c495aff701aad2">sigint_intercept</a>():</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">    Intercept SIGINT from child (the local ovs-test server process).</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    signal.signal(signal.SIGINT, signal.SIG_IGN)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a6175d3cc2de818be86c495aff701aad2"><div class="ttname"><a href="namespaceovstest_1_1util.html#a6175d3cc2de818be86c495aff701aad2">ovstest.util.sigint_intercept</a></div><div class="ttdeci">def sigint_intercept()</div><div class="ttdef"><b>Definition:</b> util.py:173</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20b1d7b14918b66466652a587c8e2a63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.start_local_server </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function spawns an ovs-test server that listens on specified port
and blocks till the spawned ovs-test server is ready to accept XML RPC
connections.
</pre> <div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a20b1d7b14918b66466652a587c8e2a63">start_local_server</a>(port):</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">    This function spawns an ovs-test server that listens on specified port</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">    and blocks till the spawned ovs-test server is ready to accept XML RPC</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">    connections.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    p = subprocess.Popen([<span class="stringliteral">&quot;ovs-test&quot;</span>, <span class="stringliteral">&quot;-s&quot;</span>, str(port)],</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                         stdout=subprocess.PIPE, stderr=subprocess.PIPE,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                         preexec_fn=sigint_intercept)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    fcntl.fcntl( p.stdout.fileno(),fcntl.F_SETFL,</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        fcntl.fcntl(p.stdout.fileno(), fcntl.F_GETFL) | os.O_NONBLOCK)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">while</span> p.poll() <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        fd = select.select([p.stdout.fileno()], [], [])[0]</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> fd:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            out = p.stdout.readline()</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> out.startswith(<span class="stringliteral">&quot;Starting RPC server&quot;</span>):</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">break</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> p.poll() <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">raise</span> RuntimeError(<span class="stringliteral">&quot;Couldn&#39;t start local instance of ovs-test server&quot;</span>)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">return</span> p</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a20b1d7b14918b66466652a587c8e2a63"><div class="ttname"><a href="namespaceovstest_1_1util.html#a20b1d7b14918b66466652a587c8e2a63">ovstest.util.start_local_server</a></div><div class="ttdeci">def start_local_server(port)</div><div class="ttdef"><b>Definition:</b> util.py:180</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad8359d953e94bab16ee0d9b9a3a346e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.start_process </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">start_process</a>(args):</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        p = subprocess.Popen(args,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            stdin = subprocess.PIPE,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            stdout = subprocess.PIPE,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            stderr = subprocess.PIPE)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        out, err = p.communicate()</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="keywordflow">return</span> (p.returncode, out, err)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">except</span> exceptions.OSError:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">return</span> (-1, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad8359d953e94bab16ee0d9b9a3a346e1"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad8359d953e94bab16ee0d9b9a3a346e1">ovstest.util.start_process</a></div><div class="ttdeci">def start_process(args)</div><div class="ttdef"><b>Definition:</b> util.py:80</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad22640868fa23e9434094dcc9b8d844c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.str_ip </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>ip_address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts an IP address from binary format to a string.
</pre> <div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#ad22640868fa23e9434094dcc9b8d844c">str_ip</a>(ip_address):</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="stringliteral">    Converts an IP address from binary format to a string.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    (x1, x2, x3, x4) = struct.unpack(<span class="stringliteral">&quot;BBBB&quot;</span>, ip_address)</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> (<span class="stringliteral">&quot;%u.%u.%u.%u&quot;</span>) % (x1, x2, x3, x4)</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_ad22640868fa23e9434094dcc9b8d844c"><div class="ttname"><a href="namespaceovstest_1_1util.html#ad22640868fa23e9434094dcc9b8d844c">ovstest.util.str_ip</a></div><div class="ttdeci">def str_ip(ip_address)</div><div class="ttdef"><b>Definition:</b> util.py:31</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8be25ef85acd1b48b8d820dd41e7dece"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovstest.util.uname </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">def </span><a class="code" href="namespaceovstest_1_1util.html#a8be25ef85acd1b48b8d820dd41e7dece">uname</a>():</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    os_info = os.uname()</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> os_info[2]  <span class="comment"># return only the kernel version number</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="ttc" id="namespaceovstest_1_1util_html_a8be25ef85acd1b48b8d820dd41e7dece"><div class="ttname"><a href="namespaceovstest_1_1util.html#a8be25ef85acd1b48b8d820dd41e7dece">ovstest.util.uname</a></div><div class="ttdeci">def uname()</div><div class="ttdef"><b>Definition:</b> util.py:75</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceovstest.html">ovstest</a></li><li class="navelem"><a class="el" href="namespaceovstest_1_1util.html">util</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:08:09 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
