<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: ovs.db.idl.Transaction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classovs_1_1db_1_1idl_1_1Transaction.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">ovs.db.idl.Transaction Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ovs.db.idl.Transaction:</div>
<div class="dyncontent">
<div class="center"><img src="classovs_1_1db_1_1idl_1_1Transaction__inherit__graph.png" border="0" usemap="#ovs_8db_8idl_8Transaction_inherit__map" alt="Inheritance graph"/></div>
<map name="ovs_8db_8idl_8Transaction_inherit__map" id="ovs_8db_8idl_8Transaction_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ovs.db.idl.Transaction:</div>
<div class="dyncontent">
<div class="center"><img src="classovs_1_1db_1_1idl_1_1Transaction__coll__graph.png" border="0" usemap="#ovs_8db_8idl_8Transaction_coll__map" alt="Collaboration graph"/></div>
<map name="ovs_8db_8idl_8Transaction_coll__map" id="ovs_8db_8idl_8Transaction_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af940771eb21b5a1398c04c4a047e7c04"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#af940771eb21b5a1398c04c4a047e7c04">__init__</a> (self, <a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a4230d32b9b246620a71c2d23634ec4df">idl</a>)</td></tr>
<tr class="separator:af940771eb21b5a1398c04c4a047e7c04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af249cf012f0bd5e856623d6d7ac951d4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#af249cf012f0bd5e856623d6d7ac951d4">add_comment</a> (self, comment)</td></tr>
<tr class="separator:af249cf012f0bd5e856623d6d7ac951d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2597590da2ae920e71477335f078acc9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a2597590da2ae920e71477335f078acc9">wait</a> (self, poller)</td></tr>
<tr class="separator:a2597590da2ae920e71477335f078acc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48a0f69d9a3ec33bc8bab322aac780c2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a48a0f69d9a3ec33bc8bab322aac780c2">commit</a> (self)</td></tr>
<tr class="separator:a48a0f69d9a3ec33bc8bab322aac780c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55193535d1c4761c833127f1cfb08a36"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a55193535d1c4761c833127f1cfb08a36">commit_block</a> (self)</td></tr>
<tr class="separator:a55193535d1c4761c833127f1cfb08a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535df825826f3a0aa64453b455137873"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a535df825826f3a0aa64453b455137873">get_increment_new_value</a> (self)</td></tr>
<tr class="separator:a535df825826f3a0aa64453b455137873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a421873a96f5f4147f829f937f91d7a54"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a421873a96f5f4147f829f937f91d7a54">abort</a> (self)</td></tr>
<tr class="separator:a421873a96f5f4147f829f937f91d7a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8387f90a500a9c2bb93753382d9fe80a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a8387f90a500a9c2bb93753382d9fe80a">get_error</a> (self)</td></tr>
<tr class="separator:a8387f90a500a9c2bb93753382d9fe80a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eb48e15324fe08092bedbce96149b80"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a4eb48e15324fe08092bedbce96149b80">get_insert_uuid</a> (self, <a class="el" href="structuuid.html">uuid</a>)</td></tr>
<tr class="separator:a4eb48e15324fe08092bedbce96149b80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0041d300f3d67a633f2fcb4ee12ba6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#acf0041d300f3d67a633f2fcb4ee12ba6">insert</a></td></tr>
<tr class="separator:acf0041d300f3d67a633f2fcb4ee12ba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa7f8526c9b2d3643b2f8b964889ac843"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#aa7f8526c9b2d3643b2f8b964889ac843">status_to_string</a> (status)</td></tr>
<tr class="separator:aa7f8526c9b2d3643b2f8b964889ac843"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a4230d32b9b246620a71c2d23634ec4df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a4230d32b9b246620a71c2d23634ec4df">idl</a></td></tr>
<tr class="separator:a4230d32b9b246620a71c2d23634ec4df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f613f6e224c3a6c57dd12234502ec09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a8f613f6e224c3a6c57dd12234502ec09">dry_run</a></td></tr>
<tr class="separator:a8f613f6e224c3a6c57dd12234502ec09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a529ba342ee1b1f2ed433db4d62564ab8"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a529ba342ee1b1f2ed433db4d62564ab8">UNCOMMITTED</a> = &quot;uncommitted&quot;</td></tr>
<tr class="separator:a529ba342ee1b1f2ed433db4d62564ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc98556a18f47035386362e96f2aad1"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a0fc98556a18f47035386362e96f2aad1">UNCHANGED</a> = &quot;unchanged&quot;</td></tr>
<tr class="separator:a0fc98556a18f47035386362e96f2aad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a230e3fbbea879f5b2a43eef7a4a510ab"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a230e3fbbea879f5b2a43eef7a4a510ab">INCOMPLETE</a> = &quot;incomplete&quot;</td></tr>
<tr class="separator:a230e3fbbea879f5b2a43eef7a4a510ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c2be6ca6fc06fbbec1749bb946783a3"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a6c2be6ca6fc06fbbec1749bb946783a3">ABORTED</a> = &quot;aborted&quot;</td></tr>
<tr class="separator:a6c2be6ca6fc06fbbec1749bb946783a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c87112c11e3b9cc62399c54a9e1e7e"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a10c87112c11e3b9cc62399c54a9e1e7e">SUCCESS</a> = &quot;success&quot;</td></tr>
<tr class="separator:a10c87112c11e3b9cc62399c54a9e1e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcf1ae327501f8b3d10ede45194f9130"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#abcf1ae327501f8b3d10ede45194f9130">TRY_AGAIN</a> = &quot;try again&quot;</td></tr>
<tr class="separator:abcf1ae327501f8b3d10ede45194f9130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9563f20f8548659caed9af989cbec97f"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a9563f20f8548659caed9af989cbec97f">NOT_LOCKED</a> = &quot;not <a class="el" href="ofproto-dpif-upcall_8c.html#a4694448506513db6173803ebe4226664">locked</a>&quot;</td></tr>
<tr class="separator:a9563f20f8548659caed9af989cbec97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e06dc59dae254e704734c831832863"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html#a74e06dc59dae254e704734c831832863">ERROR</a> = &quot;error&quot;</td></tr>
<tr class="separator:a74e06dc59dae254e704734c831832863"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A transaction may modify the contents of a database by modifying the
values of columns, deleting rows, inserting rows, or adding checks that
columns in the database have not changed ("verify" operations), through
Row methods.

Reading and writing columns and inserting and deleting rows are all
straightforward.  The reasons to verify columns are less obvious.
Verification is the key to maintaining transactional integrity.  Because
OVSDB handles multiple clients, it can happen that between the time that
OVSDB client A reads a column and writes a new value, OVSDB client B has
written that column.  Client A's write should not ordinarily overwrite
client B's, especially if the column in question is a "map" column that
contains several more or less independent data items.  If client A adds a
"verify" operation before it writes the column, then the transaction fails
in case client B modifies it first.  Client A will then see the new value
of the column and compose a new transaction based on the new contents
written by client B.

When a transaction is complete, which must be before the next call to
Idl.run(), call Transaction.commit() or Transaction.abort().

The life-cycle of a transaction looks like this:

1. Create the transaction and record the initial sequence number:

    seqno = idl.change_seqno(idl)
    txn = Transaction(idl)

2. Modify the database with Row and Transaction methods.

3. Commit the transaction by calling Transaction.commit().  The first call
   to this function probably returns Transaction.INCOMPLETE.  The client
   must keep calling again along as this remains true, calling Idl.run() in
   between to let the IDL do protocol processing.  (If the client doesn't
   have anything else to do in the meantime, it can use
   Transaction.commit_block() to avoid having to loop itself.)

4. If the final status is Transaction.TRY_AGAIN, wait for Idl.change_seqno
   to change from the saved 'seqno' (it's possible that it's already
   changed, in which case the client should not wait at all), then start
   over from step 1.  Only a call to Idl.run() will change the return value
   of Idl.change_seqno.  (Transaction.commit_block() calls Idl.run().)</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af940771eb21b5a1398c04c4a047e7c04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>idl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Starts a new transaction on 'idl' (an instance of ovs.db.idl.Idl).
A given Idl may only have a single active transaction at a time.

A Transaction may modify the contents of a database by assigning new
values to columns (attributes of Row), deleting rows (with
Row.delete()), or inserting rows (with Transaction.insert()).  It may
also check that columns in the database have not changed with
Row.verify().

When a transaction is complete (which must be before the next call to
Idl.run()), call Transaction.commit() or Transaction.abort().</pre> <div class="fragment"><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keyword">def </span>__init__(self, idl):</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Starts a new transaction on &#39;idl&#39; (an instance of ovs.db.idl.Idl).</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="stringliteral">        A given Idl may only have a single active transaction at a time.</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="stringliteral">        A Transaction may modify the contents of a database by assigning new</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="stringliteral">        values to columns (attributes of Row), deleting rows (with</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="stringliteral">        Row.delete()), or inserting rows (with Transaction.insert()).  It may</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="stringliteral">        also check that columns in the database have not changed with</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="stringliteral">        Row.verify().</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="stringliteral">        When a transaction is complete (which must be before the next call to</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="stringliteral">        Idl.run()), call Transaction.commit() or Transaction.abort().&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keyword">assert</span> idl.txn <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        idl.txn = self</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        self._request_id = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        self.idl = idl</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        self.dry_run = <span class="keyword">False</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        self._txn_rows = {}</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        self._status = Transaction.UNCOMMITTED</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        self._error = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        self._comments = []</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        self._inc_row = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        self._inc_column = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        self._inserted_rows = {}  <span class="comment"># Map from UUID to _InsertedRow</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a421873a96f5f4147f829f937f91d7a54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.abort </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Aborts this transaction.  If Transaction.commit() has already been
called then the transaction might get committed anyhow.</pre> <div class="fragment"><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keyword">def </span>abort(self):</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Aborts this transaction.  If Transaction.commit() has already been</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="stringliteral">        called then the transaction might get committed anyhow.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        self.__disassemble()</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="keywordflow">if</span> self._status <span class="keywordflow">in</span> (Transaction.UNCOMMITTED,</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                            Transaction.INCOMPLETE):</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            self._status = Transaction.ABORTED</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af249cf012f0bd5e856623d6d7ac951d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.add_comment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>comment</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Appens 'comment' to the comments that will be passed to the OVSDB
server when this transaction is committed.  (The comment will be
committed to the OVSDB log, which "ovsdb-tool show-log" can print in a
relatively human-readable form.)</pre> <div class="fragment"><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keyword">def </span>add_comment(self, comment):</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Appens &#39;comment&#39; to the comments that will be passed to the OVSDB</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="stringliteral">        server when this transaction is committed.  (The comment will be</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="stringliteral">        committed to the OVSDB log, which &quot;ovsdb-tool show-log&quot; can print in a</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="stringliteral">        relatively human-readable form.)&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        self._comments.append(comment)</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48a0f69d9a3ec33bc8bab322aac780c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.commit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Attempts to commit 'txn'.  Returns the status of the commit
operation, one of the following constants:

  Transaction.INCOMPLETE:

      The transaction is in progress, but not yet complete.  The caller
      should call again later, after calling Idl.run() to let the
      IDL do OVSDB protocol processing.

  Transaction.UNCHANGED:

      The transaction is complete.  (It didn't actually change the
      database, so the IDL didn't send any request to the database
      server.)

  Transaction.ABORTED:

      The caller previously called Transaction.abort().

  Transaction.SUCCESS:

      The transaction was successful.  The update made by the
      transaction (and possibly other changes made by other database
      clients) should already be visible in the IDL.

  Transaction.TRY_AGAIN:

      The transaction failed for some transient reason, e.g. because a
      "verify" operation reported an inconsistency or due to a network
      problem.  The caller should wait for a change to the database,
      then compose a new transaction, and commit the new transaction.

      Use Idl.change_seqno to wait for a change in the database.  It is
      important to use its value *before* the initial call to
      Transaction.commit() as the baseline for this purpose, because
      the change that one should wait for can happen after the initial
      call but before the call that returns Transaction.TRY_AGAIN, and
      using some other baseline value in that situation could cause an
      indefinite wait if the database rarely changes.

  Transaction.NOT_LOCKED:

      The transaction failed because the IDL has been configured to
      require a database lock (with Idl.set_lock()) but didn't
      get it yet or has already lost it.

Committing a transaction rolls back all of the changes that it made to
the IDL's copy of the database.  If the transaction commits
successfully, then the database server will send an update and, thus,
the IDL will be updated with the committed changes.</pre> <div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keyword">def </span><a class="code" href="odp-util_8c.html#af7b562138020493c6cb1a1c59d881317">commit</a>(self):</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Attempts to commit &#39;txn&#39;.  Returns the status of the commit</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="stringliteral">        operation, one of the following constants:</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="stringliteral">          Transaction.INCOMPLETE:</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="stringliteral">              The transaction is in progress, but not yet complete.  The caller</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="stringliteral">              should call again later, after calling Idl.run() to let the</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="stringliteral">              IDL do OVSDB protocol processing.</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="stringliteral">          Transaction.UNCHANGED:</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="stringliteral">              The transaction is complete.  (It didn&#39;t actually change the</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="stringliteral">              database, so the IDL didn&#39;t send any request to the database</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="stringliteral">              server.)</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="stringliteral">          Transaction.ABORTED:</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="stringliteral">              The caller previously called Transaction.abort().</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="stringliteral">          Transaction.SUCCESS:</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="stringliteral">              The transaction was successful.  The update made by the</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="stringliteral">              transaction (and possibly other changes made by other database</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="stringliteral">              clients) should already be visible in the IDL.</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="stringliteral">          Transaction.TRY_AGAIN:</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="stringliteral">              The transaction failed for some transient reason, e.g. because a</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="stringliteral">              &quot;verify&quot; operation reported an inconsistency or due to a network</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="stringliteral">              problem.  The caller should wait for a change to the database,</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="stringliteral">              then compose a new transaction, and commit the new transaction.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="stringliteral">              Use Idl.change_seqno to wait for a change in the database.  It is</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="stringliteral">              important to use its value *before* the initial call to</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="stringliteral">              Transaction.commit() as the baseline for this purpose, because</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="stringliteral">              the change that one should wait for can happen after the initial</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="stringliteral">              call but before the call that returns Transaction.TRY_AGAIN, and</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="stringliteral">              using some other baseline value in that situation could cause an</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="stringliteral">              indefinite wait if the database rarely changes.</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="stringliteral">          Transaction.NOT_LOCKED:</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="stringliteral">              The transaction failed because the IDL has been configured to</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="stringliteral">              require a database lock (with Idl.set_lock()) but didn&#39;t</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="stringliteral">              get it yet or has already lost it.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="stringliteral">        Committing a transaction rolls back all of the changes that it made to</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="stringliteral">        the IDL&#39;s copy of the database.  If the transaction commits</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="stringliteral">        successfully, then the database server will send an update and, thus,</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="stringliteral">        the IDL will be updated with the committed changes.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="comment"># The status can only change if we&#39;re the active transaction.</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="comment"># (Otherwise, our status will change only in Idl.run().)</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">if</span> self != self.idl.txn:</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            <span class="keywordflow">return</span> self._status</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment"># If we need a lock but don&#39;t have it, give up quickly.</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">if</span> self.idl.lock_name <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.idl.has_lock:</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            self._status = Transaction.NOT_LOCKED</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            self.__disassemble()</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">return</span> self._status</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        operations = [self.idl._db.name]</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment"># Assert that we have the required lock (avoiding a race).</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">if</span> self.idl.lock_name:</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;            operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;assert&quot;</span>,</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                               <span class="stringliteral">&quot;lock&quot;</span>: self.idl.lock_name})</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="comment"># Add prerequisites and declarations of new rows.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <span class="keywordflow">for</span> row <span class="keywordflow">in</span> self._txn_rows.itervalues():</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="keywordflow">if</span> row._prereqs:</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                rows = {}</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                columns = []</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                <span class="keywordflow">for</span> column_name <span class="keywordflow">in</span> row._prereqs:</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    columns.append(column_name)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                    rows[column_name] = row._data[column_name].<a class="code" href="namespaceovs_1_1ovsuuid.html#a069db54f37d44bd8fde4028170ba6e17">to_json</a>()</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;wait&quot;</span>,</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                                   <span class="stringliteral">&quot;table&quot;</span>: row._table.name,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                                   <span class="stringliteral">&quot;timeout&quot;</span>: 0,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                   <span class="stringliteral">&quot;where&quot;</span>: _where_uuid_equals(row.uuid),</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                                   <span class="stringliteral">&quot;until&quot;</span>: <span class="stringliteral">&quot;==&quot;</span>,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                   <span class="stringliteral">&quot;columns&quot;</span>: columns,</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                                   <span class="stringliteral">&quot;rows&quot;</span>: [rows]})</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="comment"># Add updates.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        any_updates = <span class="keyword">False</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">for</span> row <span class="keywordflow">in</span> self._txn_rows.itervalues():</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            <span class="keywordflow">if</span> row._changes <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                <span class="keywordflow">if</span> row._table.is_root:</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;delete&quot;</span>,</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                                       <span class="stringliteral">&quot;table&quot;</span>: row._table.name,</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                                       <span class="stringliteral">&quot;where&quot;</span>: _where_uuid_equals(row.uuid)})</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    any_updates = <span class="keyword">True</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                    <span class="comment"># Let ovsdb-server decide whether to really delete it.</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">elif</span> row._changes:</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                op = {<span class="stringliteral">&quot;table&quot;</span>: row._table.name}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="keywordflow">if</span> row._data <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                    op[<span class="stringliteral">&quot;op&quot;</span>] = <span class="stringliteral">&quot;insert&quot;</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                    op[<span class="stringliteral">&quot;uuid-name&quot;</span>] = _uuid_name_from_uuid(row.uuid)</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                    any_updates = <span class="keyword">True</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    op_index = len(operations) - 1</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                    self._inserted_rows[row.uuid] = _InsertedRow(op_index)</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                    op[<span class="stringliteral">&quot;op&quot;</span>] = <span class="stringliteral">&quot;update&quot;</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                    op[<span class="stringliteral">&quot;where&quot;</span>] = _where_uuid_equals(row.uuid)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                row_json = {}</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                op[<span class="stringliteral">&quot;row&quot;</span>] = row_json</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <span class="keywordflow">for</span> column_name, datum <span class="keywordflow">in</span> row._changes.iteritems():</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                    <span class="keywordflow">if</span> row._data <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> <span class="keywordflow">not</span> datum.is_default():</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        row_json[column_name] = (</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                self._substitute_uuids(datum.to_json()))</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                        <span class="comment"># If anything really changed, consider it an update.</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                        <span class="comment"># We can&#39;t suppress not-really-changed values earlier</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                        <span class="comment"># or transactions would become nonatomic (see the big</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                        <span class="comment"># comment inside Transaction._write()).</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordflow">not</span> any_updates <span class="keywordflow">and</span> row._data <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                            row._data[column_name] != datum):</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                            any_updates = <span class="keyword">True</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">if</span> row._data <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> row_json:</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                    operations.append(op)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        <span class="comment"># Add increment.</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        <span class="keywordflow">if</span> self._inc_row <span class="keywordflow">and</span> any_updates:</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            self._inc_index = len(operations) - 1</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;mutate&quot;</span>,</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                               <span class="stringliteral">&quot;table&quot;</span>: self._inc_row._table.name,</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                               <span class="stringliteral">&quot;where&quot;</span>: self._substitute_uuids(</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                                   _where_uuid_equals(self._inc_row.uuid)),</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                               <span class="stringliteral">&quot;mutations&quot;</span>: [[self._inc_column, <span class="stringliteral">&quot;+=&quot;</span>, 1]]})</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;select&quot;</span>,</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                               <span class="stringliteral">&quot;table&quot;</span>: self._inc_row._table.name,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                               <span class="stringliteral">&quot;where&quot;</span>: self._substitute_uuids(</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                   _where_uuid_equals(self._inc_row.uuid)),</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                               <span class="stringliteral">&quot;columns&quot;</span>: [self._inc_column]})</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="comment"># Add comment.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">if</span> self._comments:</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;comment&quot;</span>,</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                               <span class="stringliteral">&quot;comment&quot;</span>: <span class="stringliteral">&quot;\n&quot;</span>.join(self._comments)})</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="comment"># Dry run?</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">if</span> self.dry_run:</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;            operations.append({<span class="stringliteral">&quot;op&quot;</span>: <span class="stringliteral">&quot;abort&quot;</span>})</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> any_updates:</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            self._status = Transaction.UNCHANGED</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            msg = <a class="code" href="classovs_1_1jsonrpc_1_1Message.html#a0f53397065436845c06c3d6b7a1597c6">ovs.jsonrpc.Message.create_request</a>(<span class="stringliteral">&quot;transact&quot;</span>, operations)</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            self._request_id = msg.id</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.idl._session.send(msg):</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                self.idl._outstanding_txns[self._request_id] = self</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                self._status = Transaction.INCOMPLETE</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                self._status = Transaction.TRY_AGAIN</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;        self.__disassemble()</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">return</span> self._status</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="ttc" id="namespaceovs_1_1ovsuuid_html_a069db54f37d44bd8fde4028170ba6e17"><div class="ttname"><a href="namespaceovs_1_1ovsuuid.html#a069db54f37d44bd8fde4028170ba6e17">ovs.ovsuuid.to_json</a></div><div class="ttdeci">def to_json(uuid_)</div><div class="ttdef"><b>Definition:</b> ovsuuid.py:59</div></div>
<div class="ttc" id="classovs_1_1jsonrpc_1_1Message_html_a0f53397065436845c06c3d6b7a1597c6"><div class="ttname"><a href="classovs_1_1jsonrpc_1_1Message.html#a0f53397065436845c06c3d6b7a1597c6">ovs.jsonrpc.Message.create_request</a></div><div class="ttdeci">def create_request(method, params)</div><div class="ttdef"><b>Definition:</b> jsonrpc.py:58</div></div>
<div class="ttc" id="odp-util_8c_html_af7b562138020493c6cb1a1c59d881317"><div class="ttname"><a href="odp-util_8c.html#af7b562138020493c6cb1a1c59d881317">commit</a></div><div class="ttdeci">static bool commit(enum ovs_key_attr attr, bool use_masked_set, const void *key, void *base, void *mask, size_t size, struct ofpbuf *odp_actions)</div><div class="ttdef"><b>Definition:</b> odp-util.c:4406</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a55193535d1c4761c833127f1cfb08a36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.commit_block </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Attempts to commit this transaction, blocking until the commit
either succeeds or fails.  Returns the final commit status, which may
be any Transaction.* value other than Transaction.INCOMPLETE.

This function calls Idl.run() on this transaction'ss IDL, so it may
cause Idl.change_seqno to change.</pre> <div class="fragment"><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keyword">def </span>commit_block(self):</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Attempts to commit this transaction, blocking until the commit</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="stringliteral">        either succeeds or fails.  Returns the final commit status, which may</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="stringliteral">        be any Transaction.* value other than Transaction.INCOMPLETE.</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="stringliteral">        This function calls Idl.run() on this transaction&#39;ss IDL, so it may</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="stringliteral">        cause Idl.change_seqno to change.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;            status = self.commit()</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keywordflow">if</span> status != Transaction.INCOMPLETE:</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                <span class="keywordflow">return</span> status</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            self.idl.run()</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;            poller = <a class="code" href="classovs_1_1poller_1_1Poller.html">ovs.poller.Poller</a>()</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            self.idl.wait(poller)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            self.wait(poller)</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            poller.block()</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="ttc" id="classovs_1_1poller_1_1Poller_html"><div class="ttname"><a href="classovs_1_1poller_1_1Poller.html">ovs.poller.Poller</a></div><div class="ttdef"><b>Definition:</b> poller.py:96</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8387f90a500a9c2bb93753382d9fe80a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.get_error </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns a string representing this transaction's current status,
suitable for use in log messages.</pre> <div class="fragment"><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keyword">def </span>get_error(self):</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Returns a string representing this transaction&#39;s current status,</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="stringliteral">        suitable for use in log messages.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">if</span> self._status != Transaction.ERROR:</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            <span class="keywordflow">return</span> Transaction.status_to_string(self._status)</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <span class="keywordflow">elif</span> self._error:</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            <span class="keywordflow">return</span> self._error</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;no error details available&quot;</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a535df825826f3a0aa64453b455137873"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.get_increment_new_value </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the final (incremented) value of the column in this
transaction that was set to be incremented by Row.increment.  This
transaction must have committed successfully.</pre> <div class="fragment"><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keyword">def </span>get_increment_new_value(self):</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Returns the final (incremented) value of the column in this</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="stringliteral">        transaction that was set to be incremented by Row.increment.  This</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="stringliteral">        transaction must have committed successfully.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <span class="keyword">assert</span> self._status == Transaction.SUCCESS</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">return</span> self._inc_new_value</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4eb48e15324fe08092bedbce96149b80"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.get_insert_uuid </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uuid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Finds and returns the permanent UUID that the database assigned to a
newly inserted row, given the UUID that Transaction.insert() assigned
locally to that row.

Returns None if 'uuid' is not a UUID assigned by Transaction.insert()
or if it was assigned by that function and then deleted by Row.delete()
within the same transaction.  (Rows that are inserted and then deleted
within a single transaction are never sent to the database server, so
it never assigns them a permanent UUID.)

This transaction must have completed successfully.</pre> <div class="fragment"><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keyword">def </span>get_insert_uuid(self, uuid):</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Finds and returns the permanent UUID that the database assigned to a</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="stringliteral">        newly inserted row, given the UUID that Transaction.insert() assigned</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="stringliteral">        locally to that row.</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="stringliteral">        Returns None if &#39;uuid&#39; is not a UUID assigned by Transaction.insert()</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="stringliteral">        or if it was assigned by that function and then deleted by Row.delete()</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="stringliteral">        within the same transaction.  (Rows that are inserted and then deleted</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="stringliteral">        within a single transaction are never sent to the database server, so</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="stringliteral">        it never assigns them a permanent UUID.)</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="stringliteral">        This transaction must have completed successfully.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keyword">assert</span> self._status <span class="keywordflow">in</span> (Transaction.SUCCESS,</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                                Transaction.UNCHANGED)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        inserted_row = self._inserted_rows.get(uuid)</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="keywordflow">if</span> inserted_row:</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            <span class="keywordflow">return</span> inserted_row.real</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acf0041d300f3d67a633f2fcb4ee12ba6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.insert </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>new_uuid</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Inserts and returns a new row in 'table', which must be one of the
ovs.db.schema.TableSchema objects in the Idl's 'tables' dict.

The new row is assigned a provisional UUID.  If 'uuid' is None then one
is randomly generated; otherwise 'uuid' should specify a randomly
generated uuid.UUID not otherwise in use.  ovsdb-server will assign a
different UUID when 'txn' is committed, but the IDL will replace any
uses of the provisional UUID in the data to be to be committed by the
UUID assigned by ovsdb-server.</pre> <div class="fragment"><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keyword">def </span>insert(self, table, new_uuid=None):</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Inserts and returns a new row in &#39;table&#39;, which must be one of the</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="stringliteral">        ovs.db.schema.TableSchema objects in the Idl&#39;s &#39;tables&#39; dict.</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="stringliteral">        The new row is assigned a provisional UUID.  If &#39;uuid&#39; is None then one</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="stringliteral">        is randomly generated; otherwise &#39;uuid&#39; should specify a randomly</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="stringliteral">        generated uuid.UUID not otherwise in use.  ovsdb-server will assign a</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="stringliteral">        different UUID when &#39;txn&#39; is committed, but the IDL will replace any</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="stringliteral">        uses of the provisional UUID in the data to be to be committed by the</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="stringliteral">        UUID assigned by ovsdb-server.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keyword">assert</span> self._status == Transaction.UNCOMMITTED</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">if</span> new_uuid <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            new_uuid = uuid.uuid4()</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        row = Row(self.idl, table, new_uuid, <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        table.rows[row.uuid] = row</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        self._txn_rows[row.uuid] = row</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">return</span> row</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa7f8526c9b2d3643b2f8b964889ac843"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.status_to_string </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Converts one of the status values that Transaction.commit() can
return into a human-readable string.

(The status values are in fact such strings already, so
there's nothing to do.)</pre> <div class="fragment"><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">def </span>status_to_string(status):</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Converts one of the status values that Transaction.commit() can</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="stringliteral">        return into a human-readable string.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="stringliteral">        (The status values are in fact such strings already, so</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="stringliteral">        there&#39;s nothing to do.)&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">return</span> status</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2597590da2ae920e71477335f078acc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Transaction.wait </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>poller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Causes poll_block() to wake up if this transaction has completed
committing.</pre> <div class="fragment"><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keyword">def </span><a class="code" href="sparse_2sys_2wait_8h.html#a776dc7d230fb83c691a628894de424f0">wait</a>(self, poller):</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Causes poll_block() to wake up if this transaction has completed</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="stringliteral">        committing.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">if</span> self._status <span class="keywordflow">not</span> <span class="keywordflow">in</span> (Transaction.UNCOMMITTED,</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                                Transaction.INCOMPLETE):</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            poller.immediate_wake()</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="ttc" id="sparse_2sys_2wait_8h_html_a776dc7d230fb83c691a628894de424f0"><div class="ttname"><a href="sparse_2sys_2wait_8h.html#a776dc7d230fb83c691a628894de424f0">wait</a></div><div class="ttdeci">#define wait(a)</div><div class="ttdef"><b>Definition:</b> wait.h:27</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a6c2be6ca6fc06fbbec1749bb946783a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.ABORTED = &quot;aborted&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8f613f6e224c3a6c57dd12234502ec09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Transaction.dry_run</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a74e06dc59dae254e704734c831832863"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.ERROR = &quot;error&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4230d32b9b246620a71c2d23634ec4df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Transaction.idl</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a230e3fbbea879f5b2a43eef7a4a510ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.INCOMPLETE = &quot;incomplete&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9563f20f8548659caed9af989cbec97f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.NOT_LOCKED = &quot;not <a class="el" href="ofproto-dpif-upcall_8c.html#a4694448506513db6173803ebe4226664">locked</a>&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a10c87112c11e3b9cc62399c54a9e1e7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.SUCCESS = &quot;success&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abcf1ae327501f8b3d10ede45194f9130"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.TRY_AGAIN = &quot;try again&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0fc98556a18f47035386362e96f2aad1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.UNCHANGED = &quot;unchanged&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a529ba342ee1b1f2ed433db4d62564ab8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ovs.db.idl.Transaction.UNCOMMITTED = &quot;uncommitted&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/vladn/git/ovs/python/ovs/db/<a class="el" href="idl_8py.html">idl.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceovs.html">ovs</a></li><li class="navelem"><a class="el" href="namespaceovs_1_1db.html">db</a></li><li class="navelem"><a class="el" href="namespaceovs_1_1db_1_1idl.html">idl</a></li><li class="navelem"><a class="el" href="classovs_1_1db_1_1idl_1_1Transaction.html">Transaction</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:08:09 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
