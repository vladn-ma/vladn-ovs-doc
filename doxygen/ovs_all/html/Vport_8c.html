<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: /home/vladn/git/ovs/datapath-windows/ovsext/Vport.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Vport_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Vport.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="precomp_8h_source.html">precomp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Jhash_8h_source.html">Jhash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Switch_8h_source.html">Switch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Vport_8h_source.html">Vport.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Event_8h_source.html">Event.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="User_8h_source.html">User.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Vxlan_8h_source.html">Vxlan.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Stt_8h_source.html">Stt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="IpHelper_8h_source.html">IpHelper.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Oid_8h_source.html">Oid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Datapath_8h_source.html">Datapath.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="Debug_8h_source.html">Debug.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Vport.c:</div>
<div class="dyncontent">
<div class="center"><img src="Vport_8c__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath-windows_2ovsext_2Vport_8c" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath-windows_2ovsext_2Vport_8c" id="_2home_2vladn_2git_2ovs_2datapath-windows_2ovsext_2Vport_8c">
<area shape="rect" id="node2" href="precomp_8h.html" title="precomp.h" alt="" coords="817,333,899,360"/><area shape="rect" id="node20" href="Jhash_8h.html" title="Jhash.h" alt="" coords="933,109,1001,136"/><area shape="rect" id="node21" href="Switch_8h.html" title="Switch.h" alt="" coords="989,184,1063,211"/><area shape="rect" id="node26" href="Vport_8h.html" title="Vport.h" alt="" coords="1077,109,1141,136"/><area shape="rect" id="node28" href="Stt_8h.html" title="Stt.h" alt="" coords="1182,184,1233,211"/><area shape="rect" id="node29" href="Event_8h.html" title="Event.h" alt="" coords="1215,109,1282,136"/><area shape="rect" id="node30" href="User_8h.html" title="User.h" alt="" coords="1306,109,1367,136"/><area shape="rect" id="node31" href="Datapath_8h.html" title="Datapath.h" alt="" coords="1297,184,1384,211"/><area shape="rect" id="node32" href="Vxlan_8h.html" title="Vxlan.h" alt="" coords="1414,184,1481,211"/><area shape="rect" id="node33" href="IpHelper_8h.html" title="IpHelper.h" alt="" coords="1493,109,1575,136"/><area shape="rect" id="node35" href="Oid_8h.html" title="Oid.h" alt="" coords="1599,109,1653,136"/><area shape="rect" id="node36" href="Debug_8h.html" title="Debug.h" alt="" coords="1677,109,1748,136"/><area shape="rect" id="node9" href="Types_8h.html" title="Types.h" alt="" coords="1066,647,1135,673"/><area shape="rect" id="node11" href="Util_8h.html" title="Util.h" alt="" coords="859,415,913,442"/><area shape="rect" id="node12" href="NetlinkError_8h.html" title="Netlink/NetlinkError.h" alt="" coords="937,415,1083,442"/><area shape="rect" id="node13" href="Netlink_8h.html" title="Netlink/Netlink.h" alt="" coords="1197,497,1316,524"/><area shape="rect" id="node14" href="NetlinkProto_8h.html" title="NetlinkProto.h" alt="" coords="1048,572,1153,599"/><area shape="rect" id="node18" href="DpInternal_8h.html" title="DpInternal.h" alt="" coords="1403,415,1497,442"/><area shape="rect" id="node15" href="NetlinkBuf_8h.html" title="NetlinkBuf.h" alt="" coords="1229,572,1324,599"/><area shape="rect" id="node22" href="NetProto_8h.html" title="NetProto.h" alt="" coords="1135,259,1221,285"/><area shape="rect" id="node24" href="BufferMgmt_8h.html" title="BufferMgmt.h" alt="" coords="895,259,997,285"/><area shape="rect" id="node25" href="TunnelIntf_8h.html" title="TunnelIntf.h" alt="" coords="1021,259,1111,285"/><area shape="rect" id="node23" href="Ethernet_8h.html" title="Ethernet.h" alt="" coords="1137,333,1219,360"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8655c430a9d067fca6b6323b4de3f3f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a8655c430a9d067fca6b6323b4de3f3f7">OVS_DBG_MOD</a>&#160;&#160;&#160;<a class="el" href="Debug_8h.html#a53d2c661d93d4f0ebb49456348c73478">OVS_DBG_VPORT</a></td></tr>
<tr class="separator:a8655c430a9d067fca6b6323b4de3f3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55453565a59d9c05b6e5db6eb77e1e65"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a>(_nic)</td></tr>
<tr class="separator:a55453565a59d9c05b6e5db6eb77e1e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa9b608a3f8a9159d710483a6f44686"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a>(_nic)</td></tr>
<tr class="separator:afaa9b608a3f8a9159d710483a6f44686"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8449c123cf66a3586cd0887b0581c86c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a>(_port)&#160;&#160;&#160;<a class="el" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(&quot;Enter: PortId: %x&quot;, _port-&gt;PortId)</td></tr>
<tr class="separator:a8449c123cf66a3586cd0887b0581c86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adce3d5d037b8682d498e06a0e6cc208a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a>(_port)&#160;&#160;&#160;<a class="el" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(&quot;Exit: PortId: %x&quot;, _port-&gt;PortId)</td></tr>
<tr class="separator:adce3d5d037b8682d498e06a0e6cc208a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64417133d18eabd436daf65e080affde"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a>&#160;&#160;&#160;100</td></tr>
<tr class="separator:a64417133d18eabd436daf65e080affde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3226e625319a7cd0c3c9a8231b03b977"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a3226e625319a7cd0c3c9a8231b03b977">OVS_TUNFLT_INIT_CONTEXT</a></td></tr>
<tr class="separator:a3226e625319a7cd0c3c9a8231b03b977"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e5730a863b1d13e6fbf09e9e62213f"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ae2e5730a863b1d13e6fbf09e9e62213f">POVS_TUNFLT_INIT_CONTEXT</a></td></tr>
<tr class="separator:ae2e5730a863b1d13e6fbf09e9e62213f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a76b3afcbed28aed006763e5a98a0bdf4"><td class="memItemLeft" align="right" valign="top">static VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a> (<a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, PNDIS_SWITCH_PORT_PARAMETERS portParam)</td></tr>
<tr class="separator:a76b3afcbed28aed006763e5a98a0bdf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6829f612e0080bf3f86f735d3db75bc0"><td class="memItemLeft" align="right" valign="top">static VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a6829f612e0080bf3f86f735d3db75bc0">OvsInitVportWithNicParam</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</td></tr>
<tr class="separator:a6829f612e0080bf3f86f735d3db75bc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50593469916d69cb6683418135f5b162"><td class="memItemLeft" align="right" valign="top">static VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a50593469916d69cb6683418135f5b162">OvsInitPhysNicVport</a> (<a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> physExtVPort, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> virtExtVport, UINT32 nicIndex)</td></tr>
<tr class="separator:a50593469916d69cb6683418135f5b162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a013a2e4d19263bcafe7c9623ee4ee9"><td class="memItemLeft" align="right" valign="top">static __inline VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, ULONG sleepMicroSec)</td></tr>
<tr class="separator:a3a013a2e4d19263bcafe7c9623ee4ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c0fe173bd8a2ff75b51bd927b8ef07"><td class="memItemLeft" align="right" valign="top">static NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a80c0fe173bd8a2ff75b51bd927b8ef07">OvsGetExtInfoIoctl</a> (<a class="el" href="DpInternal_8h.html#a5bded77307d7298cc2b780a0459d64bf">POVS_VPORT_GET</a> vportGet, <a class="el" href="DpInternal_8h.html#a4b0f2f53350455b737fc230fa636fd29">POVS_VPORT_EXT_INFO</a> extInfo)</td></tr>
<tr class="separator:a80c0fe173bd8a2ff75b51bd927b8ef07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae335836b5ca55bb12005cce2dcbbe631"><td class="memItemLeft" align="right" valign="top">static NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ae335836b5ca55bb12005cce2dcbbe631">CreateNetlinkMesgForNetdev</a> (<a class="el" href="DpInternal_8h.html#a4b0f2f53350455b737fc230fa636fd29">POVS_VPORT_EXT_INFO</a> info, <a class="el" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a> msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</td></tr>
<tr class="separator:ae335836b5ca55bb12005cce2dcbbe631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36642898aec68a2684a3b668f1b4a851"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a36642898aec68a2684a3b668f1b4a851">OvsFindVportByHvNameW</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PWSTR wsName, SIZE_T wstrSize)</td></tr>
<tr class="separator:a36642898aec68a2684a3b668f1b4a851"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af11338fec87aac46dcc120c74eb36b1a"><td class="memItemLeft" align="right" valign="top">static NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, BOOLEAN newPort)</td></tr>
<tr class="separator:af11338fec87aac46dcc120c74eb36b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47ddbc088b1793dff05ebe30b788cfcb"><td class="memItemLeft" align="right" valign="top">static NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a47ddbc088b1793dff05ebe30b788cfcb">OvsRemoveTunnelVport</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, <a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, BOOLEAN hvDelete, BOOLEAN ovsDelete)</td></tr>
<tr class="separator:a47ddbc088b1793dff05ebe30b788cfcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac03074bde235c54e2618cfa7b6b08297"><td class="memItemLeft" align="right" valign="top">static VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ac03074bde235c54e2618cfa7b6b08297">OvsTunnelVportPendingInit</a> (PVOID context, NTSTATUS status, UINT32 *replyLen)</td></tr>
<tr class="separator:ac03074bde235c54e2618cfa7b6b08297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad7166913610bf8a40ebc23dae4ee2d"><td class="memItemLeft" align="right" valign="top">static VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a7ad7166913610bf8a40ebc23dae4ee2d">OvsTunnelVportPendingRemove</a> (PVOID context, NTSTATUS status, UINT32 *replyLen)</td></tr>
<tr class="separator:a7ad7166913610bf8a40ebc23dae4ee2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68a1a0e87aa1564ac6cc654ff5ade7f4"><td class="memItemLeft" align="right" valign="top">NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a68a1a0e87aa1564ac6cc654ff5ade7f4">HvCreatePort</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_PORT_PARAMETERS portParam)</td></tr>
<tr class="separator:a68a1a0e87aa1564ac6cc654ff5ade7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af992899df255a772e5ad4f1828d28e64"><td class="memItemLeft" align="right" valign="top">NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#af992899df255a772e5ad4f1828d28e64">HvUpdatePort</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_PORT_PARAMETERS portParam)</td></tr>
<tr class="separator:af992899df255a772e5ad4f1828d28e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ebc3002c437a9ee6505a219872360b"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a04ebc3002c437a9ee6505a219872360b">HvTeardownPort</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_PORT_PARAMETERS portParam)</td></tr>
<tr class="separator:a04ebc3002c437a9ee6505a219872360b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af234f0c57852f534cd96fc4adeb9a5fd"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#af234f0c57852f534cd96fc4adeb9a5fd">HvDeletePort</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_PORT_PARAMETERS portParams)</td></tr>
<tr class="separator:af234f0c57852f534cd96fc4adeb9a5fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39ad0d1a51ae0353065c9998a009c1fd"><td class="memItemLeft" align="right" valign="top">NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a39ad0d1a51ae0353065c9998a009c1fd">HvCreateNic</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</td></tr>
<tr class="separator:a39ad0d1a51ae0353065c9998a009c1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2748ff6de7eb5b8bed3704e61da3c2e7"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a2748ff6de7eb5b8bed3704e61da3c2e7">HvConnectNic</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</td></tr>
<tr class="separator:a2748ff6de7eb5b8bed3704e61da3c2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bcbe970c3ad7407e13d5fffd345f288"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a6bcbe970c3ad7407e13d5fffd345f288">HvUpdateNic</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</td></tr>
<tr class="separator:a6bcbe970c3ad7407e13d5fffd345f288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9a0cb63e46305c3f302d9801c27a202"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ac9a0cb63e46305c3f302d9801c27a202">HvDisconnectNic</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</td></tr>
<tr class="separator:ac9a0cb63e46305c3f302d9801c27a202"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e98590d5cb72ac8519df90d87a57f03"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a8e98590d5cb72ac8519df90d87a57f03">HvDeleteNic</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</td></tr>
<tr class="separator:a8e98590d5cb72ac8519df90d87a57f03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a090f0c9c725e5a23d2e1a968b7d9f7ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, UINT32 portNo)</td></tr>
<tr class="separator:a090f0c9c725e5a23d2e1a968b7d9f7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cae03cb2cffdbd2577ba5ceac57468a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a3cae03cb2cffdbd2577ba5ceac57468a">OvsFindTunnelVportByDstPort</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, UINT16 dstPort, <a class="el" href="OvsDpInterfaceExt_8h.html#a4662d316777fe03a616ac573ed86b0f3">OVS_VPORT_TYPE</a> ovsPortType)</td></tr>
<tr class="separator:a3cae03cb2cffdbd2577ba5ceac57468a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b1bcf9f40b33a92023a597c4886c3aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PSTR name)</td></tr>
<tr class="separator:a0b1bcf9f40b33a92023a597c4886c3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17e310b20a6deebddb71ffbabb053b36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a17e310b20a6deebddb71ffbabb053b36">OvsFindVportByHvNameA</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, PSTR name)</td></tr>
<tr class="separator:a17e310b20a6deebddb71ffbabb053b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17cc616b760eefd28b8465a9ad9bdfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</td></tr>
<tr class="separator:ab17cc616b760eefd28b8465a9ad9bdfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c874912fad0be0f4232e22e307ea731"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a> (VOID)</td></tr>
<tr class="separator:a7c874912fad0be0f4232e22e307ea731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18d7b1f5ae328614eb0c7bd6cd91841b"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a18d7b1f5ae328614eb0c7bd6cd91841b">OvsInitTunnelVport</a> (PVOID userContext, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, <a class="el" href="OvsDpInterfaceExt_8h.html#a4662d316777fe03a616ac573ed86b0f3">OVS_VPORT_TYPE</a> ovsType, UINT16 dstPort)</td></tr>
<tr class="separator:a18d7b1f5ae328614eb0c7bd6cd91841b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b442ba8bfbcc429a4ef4441688a1549"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a1b442ba8bfbcc429a4ef4441688a1549">OvsInitBridgeInternalVport</a> (<a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>)</td></tr>
<tr class="separator:a1b442ba8bfbcc429a4ef4441688a1549"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23fa800c92350d30e541f03112e91474"><td class="memItemLeft" align="right" valign="top">static VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a23fa800c92350d30e541f03112e91474">AssignNicNameSpecial</a> (<a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>)</td></tr>
<tr class="separator:a23fa800c92350d30e541f03112e91474"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc578327abf94fc45ef88a25a626914"><td class="memItemLeft" align="right" valign="top">NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a7cc578327abf94fc45ef88a25a626914">InitOvsVportCommon</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>)</td></tr>
<tr class="separator:a7cc578327abf94fc45ef88a25a626914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83bf787fa4f3e5fef189edfa60c7656"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a> (PVOID usrParamsContext, <a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext, <a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, BOOLEAN hvDelete, BOOLEAN ovsDelete)</td></tr>
<tr class="separator:ac83bf787fa4f3e5fef189edfa60c7656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac6271bcb5e3c1edbe58caa3e2a4d6a"><td class="memItemLeft" align="right" valign="top">NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#afac6271bcb5e3c1edbe58caa3e2a4d6a">OvsAddConfiguredSwitchPorts</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext)</td></tr>
<tr class="separator:afac6271bcb5e3c1edbe58caa3e2a4d6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ec60888c6368da16b90df513c16aff"><td class="memItemLeft" align="right" valign="top">NDIS_STATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ab3ec60888c6368da16b90df513c16aff">OvsInitConfiguredSwitchNics</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext)</td></tr>
<tr class="separator:ab3ec60888c6368da16b90df513c16aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abea9e2b6b6d38ddf38feb9a40c983581"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#abea9e2b6b6d38ddf38feb9a40c983581">OvsClearAllSwitchVports</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext)</td></tr>
<tr class="separator:abea9e2b6b6d38ddf38feb9a40c983581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f3127e58fe11d798433487b10a68952"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a2f3127e58fe11d798433487b10a68952">OvsConvertIfCountedStrToAnsiStr</a> (PIF_COUNTED_STRING wStr, CHAR *str, UINT16 maxStrLen)</td></tr>
<tr class="separator:a2f3127e58fe11d798433487b10a68952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dfea6d106a453002f047889dfaf9f4a"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a4dfea6d106a453002f047889dfaf9f4a">OvsGetNetdevCmdHandler</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a4dfea6d106a453002f047889dfaf9f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249132e832c59938a505c8ddb578b4cb"><td class="memItemLeft" align="right" valign="top">static NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a> (<a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> <a class="el" href="structvport.html">vport</a>, <a class="el" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a> msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</td></tr>
<tr class="separator:a249132e832c59938a505c8ddb578b4cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f71cd0008bbff5d9a9fc843489835a9"><td class="memItemLeft" align="right" valign="top">static NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a3f71cd0008bbff5d9a9fc843489835a9">OvsGetVportDumpNext</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a3f71cd0008bbff5d9a9fc843489835a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45aeb618c44d93486b3d7d388c92ccd3"><td class="memItemLeft" align="right" valign="top">static NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a45aeb618c44d93486b3d7d388c92ccd3">OvsGetVport</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a45aeb618c44d93486b3d7d388c92ccd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6b5727c7f3db4ec4a65b00755fee22"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a7a6b5727c7f3db4ec4a65b00755fee22">OvsGetVportCmdHandler</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a7a6b5727c7f3db4ec4a65b00755fee22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20a81513890208f58a777fa20ae21417"><td class="memItemLeft" align="right" valign="top">static UINT32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a20a81513890208f58a777fa20ae21417">OvsComputeVportNo</a> (<a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> switchContext)</td></tr>
<tr class="separator:a20a81513890208f58a777fa20ae21417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40154f02a9c1e5bd800a36a22ee93b8b"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a40154f02a9c1e5bd800a36a22ee93b8b">OvsNewVportCmdHandler</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a40154f02a9c1e5bd800a36a22ee93b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d395aa833983572b755f541bd0aa8d0"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a8d395aa833983572b755f541bd0aa8d0">OvsSetVportCmdHandler</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a8d395aa833983572b755f541bd0aa8d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d07962a3469e85305abe45dff1ec839"><td class="memItemLeft" align="right" valign="top">NTSTATUS&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#a9d07962a3469e85305abe45dff1ec839">OvsDeleteVportCmdHandler</a> (<a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx, UINT32 *replyLen)</td></tr>
<tr class="separator:a9d07962a3469e85305abe45dff1ec839"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae4e8c266508b5f55fa33d7d21941daf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></td></tr>
<tr class="separator:ae4e8c266508b5f55fa33d7d21941daf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a8655c430a9d067fca6b6323b4de3f3f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OVS_DBG_MOD&#160;&#160;&#160;<a class="el" href="Debug_8h.html#a53d2c661d93d4f0ebb49456348c73478">OVS_DBG_VPORT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a64417133d18eabd436daf65e080affde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a55453565a59d9c05b6e5db6eb77e1e65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VPORT_NIC_ENTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_nic</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Enter: PortId: %x, NicIndex: %d&quot;</span>, _nic-&gt;PortId, \</div>
<div class="line">                                                     _nic-&gt;NicIndex)</div>
<div class="ttc" id="Debug_8h_html_a4086cc5daa809afb1615e2ae9f38075a"><div class="ttname"><a href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a></div><div class="ttdeci">#define OVS_LOG_TRACE(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afaa9b608a3f8a9159d710483a6f44686"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VPORT_NIC_EXIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_nic</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Exit: PortId: %x, NicIndex: %d&quot;</span>, _nic-&gt;PortId, \</div>
<div class="line">                                                    _nic-&gt;NicIndex)</div>
<div class="ttc" id="Debug_8h_html_a4086cc5daa809afb1615e2ae9f38075a"><div class="ttname"><a href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a></div><div class="ttdeci">#define OVS_LOG_TRACE(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8449c123cf66a3586cd0887b0581c86c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VPORT_PORT_ENTER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_port</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(&quot;Enter: PortId: %x&quot;, _port-&gt;PortId)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="adce3d5d037b8682d498e06a0e6cc208a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VPORT_PORT_EXIT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_port</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(&quot;Exit: PortId: %x&quot;, _port-&gt;PortId)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a3226e625319a7cd0c3c9a8231b03b977"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a>  <a class="el" href="Vport_8c.html#a3226e625319a7cd0c3c9a8231b03b977">OVS_TUNFLT_INIT_CONTEXT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae2e5730a863b1d13e6fbf09e9e62213f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a> * <a class="el" href="Vport_8c.html#ae2e5730a863b1d13e6fbf09e9e62213f">POVS_TUNFLT_INIT_CONTEXT</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a23fa800c92350d30e541f03112e91474"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VOID AssignNicNameSpecial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordtype">size_t</span> len;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> == NdisSwitchPortTypeExternal) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> == 0) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> == 0);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            RtlStringCbPrintfW(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.String,</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                               IF_MAX_STRING_SIZE,</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                               <a class="code" href="meta-flow_8c.html#aa73214aa5f2f94f63d90bb4e3d99fe53">L</a><span class="stringliteral">&quot;%s.virtualAdapter&quot;</span>, <a class="code" href="Vport_8h.html#a3b534a82134f38cf3c9c121bf4e74135">OVS_DPPORT_EXTERNAL_NAME_W</a>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;            RtlStringCbPrintfW(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.String,</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                               IF_MAX_STRING_SIZE,</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                               <a class="code" href="meta-flow_8c.html#aa73214aa5f2f94f63d90bb4e3d99fe53">L</a><span class="stringliteral">&quot;%s.%lu&quot;</span>, <a class="code" href="Vport_8h.html#a3b534a82134f38cf3c9c121bf4e74135">OVS_DPPORT_EXTERNAL_NAME_W</a>,</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                               (UINT32)vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        RtlStringCbPrintfW(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.String,</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                           IF_MAX_STRING_SIZE,</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                           <a class="code" href="meta-flow_8c.html#aa73214aa5f2f94f63d90bb4e3d99fe53">L</a><span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="Vport_8h.html#a3a110c8faa3813ec90e05f349fa0bbf9">OVS_DPPORT_INTERNAL_NAME_W</a>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    RtlStringCbLengthW(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.String, IF_MAX_STRING_SIZE,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                       &amp;len);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.Length = (USHORT)len;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div>
<div class="ttc" id="meta-flow_8c_html_aa73214aa5f2f94f63d90bb4e3d99fe53"><div class="ttname"><a href="meta-flow_8c.html#aa73214aa5f2f94f63d90bb4e3d99fe53">L</a></div><div class="ttdeci">#define L</div></div>
<div class="ttc" id="Vport_8h_html_a3a110c8faa3813ec90e05f349fa0bbf9"><div class="ttname"><a href="Vport_8h.html#a3a110c8faa3813ec90e05f349fa0bbf9">OVS_DPPORT_INTERNAL_NAME_W</a></div><div class="ttdeci">#define OVS_DPPORT_INTERNAL_NAME_W</div><div class="ttdef"><b>Definition:</b> Vport.h:38</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="Vport_8h_html_a3b534a82134f38cf3c9c121bf4e74135"><div class="ttname"><a href="Vport_8h.html#a3b534a82134f38cf3c9c121bf4e74135">OVS_DPPORT_EXTERNAL_NAME_W</a></div><div class="ttdeci">#define OVS_DPPORT_EXTERNAL_NAME_W</div><div class="ttdef"><b>Definition:</b> Vport.h:40</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3d3cf73768a68e5b623f4759635f217a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">_OVS_VPORT_ENTRY::portFriendlyName</a></div><div class="ttdeci">IF_COUNTED_STRING portFriendlyName</div><div class="ttdef"><b>Definition:</b> Vport.h:113</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae335836b5ca55bb12005cce2dcbbe631"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NTSTATUS CreateNetlinkMesgForNetdev </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="DpInternal_8h.html#a4b0f2f53350455b737fc230fa636fd29">POVS_VPORT_EXT_INFO</a>&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>&#160;</td>
          <td class="paramname"><em>msgIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PVOID&#160;</td>
          <td class="paramname"><em>outBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>outBufLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpIfIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;{</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="struct__NL__BUF.html">NL_BUFFER</a> nlBuffer;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    BOOLEAN ok;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a> nlMsg;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    UINT32 netdevFlags = 0;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="NetlinkBuf_8c.html#a3bf87c3d1c483b3584dbb2dd93fef166">NlBufInit</a>(&amp;nlBuffer, outBuffer, outBufLen);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    ok = <a class="code" href="Netlink_8c.html#ab7a04ec2aaf32b159a91b39f94b4ce03">NlFillOvsMsg</a>(&amp;nlBuffer, msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#ac3d4c36f077c5b965fc24092a135f5c1">nlmsgType</a>, <a class="code" href="NetlinkProto_8h.html#a245e7fde2fbbdeb3860899f50213ff35">NLM_F_MULTI</a>,</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                      msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a70240418e0ed64797a2552406daddaef">nlmsgSeq</a>, msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#ad5019307f94d29ae0dc68645a784d877">nlmsgPid</a>,</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                      msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a3c4bc71966cd34423839812673b44856">genlMsg</a>.<a class="code" href="struct__GENL__MSG__HDR.html#a7da6729294b8a9c7477e81853ee81742">cmd</a>, msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a3c4bc71966cd34423839812673b44856">genlMsg</a>.<a class="code" href="struct__GENL__MSG__HDR.html#a6a99723866a38852938519222bc14294">version</a>,</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                      dpIfIndex);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    }</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaad7f5e5006e82757114c4d8fff6d94252">OVS_WIN_NETDEV_ATTR_PORT_NO</a>,</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                         info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a2f985a5912dbcfafbecdf01246a747e3">portNo</a>);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa324b34a37b72e1d7387064edeaf22a3a">OVS_WIN_NETDEV_ATTR_TYPE</a>, info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a6b753bce04ae63eef6edf0a3db99a0b4">type</a>);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    ok = <a class="code" href="Netlink_8c.html#a586503ed86bd1da0033d941a901c9034">NlMsgPutTailString</a>(&amp;nlBuffer, <a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa9cc4b6dc2b4442a31485383603d680d1">OVS_WIN_NETDEV_ATTR_NAME</a>,</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                            info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#ac7866cce537f9820e987a60702d92a3e">name</a>);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    }</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    ok = <a class="code" href="Netlink_8c.html#a1d72727b952218ed8df4d9e131e07459">NlMsgPutTailUnspec</a>(&amp;nlBuffer, <a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa2a61e106ffc34859e17f7f1af26c7005">OVS_WIN_NETDEV_ATTR_MAC_ADDR</a>,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;             (PCHAR)info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a75e17d5e4cdfdce76d9a2fc6fd7d5db3">macAddress</a>, sizeof (info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a75e17d5e4cdfdce76d9a2fc6fd7d5db3">macAddress</a>));</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa580f8df420c1fc03ba40d7ad014bcdaa">OVS_WIN_NETDEV_ATTR_MTU</a>, info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a2983598a82c89620810b915e7ffaaf64">mtu</a>);</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">if</span> (info-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a696e62816b066d68729244aaf390fc48">status</a> != <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a>) {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        netdevFlags = <a class="code" href="OvsDpInterfaceExt_8h.html#a6023f27488a50694970877793b7fcf0b">OVS_WIN_NETDEV_IFF_UP</a>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaadec0845d727cd997910b937f63cd6415">OVS_WIN_NETDEV_ATTR_IF_FLAGS</a>,</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                         netdevFlags);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="comment">     * XXX: add netdev_stats when we have the definition available in the</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">     * kernel.</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    nlMsg = (<a class="code" href="NetlinkProto_8h.html#a4802a11c465d5c20e45c9a5060839220">PNL_MSG_HDR</a>)<a class="code" href="NetlinkBuf_8c.html#a81e9d2e4eb21d1d0582e3ec9b3331149">NlBufAt</a>(&amp;nlBuffer, 0, 0);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    nlMsg-&gt;<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a> = <a class="code" href="NetlinkBuf_8h.html#a67ec1c3dccb7a0f4d5b9acea805f0bb9">NlBufSize</a>(&amp;nlBuffer);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;}</div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a70240418e0ed64797a2552406daddaef"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a70240418e0ed64797a2552406daddaef">_NL_MSG_HDR::nlmsgSeq</a></div><div class="ttdeci">UINT32 nlmsgSeq</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:82</div></div>
<div class="ttc" id="NetlinkBuf_8c_html_a81e9d2e4eb21d1d0582e3ec9b3331149"><div class="ttname"><a href="NetlinkBuf_8c.html#a81e9d2e4eb21d1d0582e3ec9b3331149">NlBufAt</a></div><div class="ttdeci">PCHAR NlBufAt(PNL_BUFFER nlBuf, UINT32 offset, UINT32 bufLen)</div><div class="ttdef"><b>Definition:</b> NetlinkBuf.c:285</div></div>
<div class="ttc" id="struct__NL__BUF_html"><div class="ttname"><a href="struct__NL__BUF.html">_NL_BUF</a></div><div class="ttdef"><b>Definition:</b> NetlinkBuf.h:20</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a696e62816b066d68729244aaf390fc48"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a696e62816b066d68729244aaf390fc48">_OVS_VPORT_EXT_INFO::status</a></div><div class="ttdeci">uint32_t status</div><div class="ttdef"><b>Definition:</b> DpInternal.h:52</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_ac7866cce537f9820e987a60702d92a3e"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#ac7866cce537f9820e987a60702d92a3e">_OVS_VPORT_EXT_INFO::name</a></div><div class="ttdeci">char name[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:51</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaad7f5e5006e82757114c4d8fff6d94252"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaad7f5e5006e82757114c4d8fff6d94252">OVS_WIN_NETDEV_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:143</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaa9cc4b6dc2b4442a31485383603d680d1"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa9cc4b6dc2b4442a31485383603d680d1">OVS_WIN_NETDEV_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:145</div></div>
<div class="ttc" id="struct__GENL__MSG__HDR_html_a6a99723866a38852938519222bc14294"><div class="ttname"><a href="struct__GENL__MSG__HDR.html#a6a99723866a38852938519222bc14294">_GENL_MSG_HDR::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:96</div></div>
<div class="ttc" id="Netlink_8c_html_ab7a04ec2aaf32b159a91b39f94b4ce03"><div class="ttname"><a href="Netlink_8c.html#ab7a04ec2aaf32b159a91b39f94b4ce03">NlFillOvsMsg</a></div><div class="ttdeci">BOOLEAN NlFillOvsMsg(PNL_BUFFER nlBuf, UINT16 nlmsgType, UINT16 nlmsgFlags, UINT32 nlmsgSeq, UINT32 nlmsgPid, UINT8 genlCmd, UINT8 genlVer, UINT32 dpNo)</div><div class="ttdef"><b>Definition:</b> Netlink.c:43</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a4802a11c465d5c20e45c9a5060839220"><div class="ttname"><a href="NetlinkProto_8h.html#a4802a11c465d5c20e45c9a5060839220">PNL_MSG_HDR</a></div><div class="ttdeci">struct _NL_MSG_HDR * PNL_MSG_HDR</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_a6023f27488a50694970877793b7fcf0b"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#a6023f27488a50694970877793b7fcf0b">OVS_WIN_NETDEV_IFF_UP</a></div><div class="ttdeci">#define OVS_WIN_NETDEV_IFF_UP</div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:153</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaadec0845d727cd997910b937f63cd6415"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaadec0845d727cd997910b937f63cd6415">OVS_WIN_NETDEV_ATTR_IF_FLAGS</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:148</div></div>
<div class="ttc" id="struct__OVS__MESSAGE_html_a3c4bc71966cd34423839812673b44856"><div class="ttname"><a href="struct__OVS__MESSAGE.html#a3c4bc71966cd34423839812673b44856">_OVS_MESSAGE::genlMsg</a></div><div class="ttdeci">GENL_MSG_HDR genlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:30</div></div>
<div class="ttc" id="Netlink_8c_html_aa2017d84e37c7fbddbe0bbf86d2e54f6"><div class="ttname"><a href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a></div><div class="ttdeci">BOOLEAN NlMsgPutTailU32(PNL_BUFFER buf, UINT16 type, UINT32 value)</div><div class="ttdef"><b>Definition:</b> Netlink.c:302</div></div>
<div class="ttc" id="Netlink_8c_html_a586503ed86bd1da0033d941a901c9034"><div class="ttname"><a href="Netlink_8c.html#a586503ed86bd1da0033d941a901c9034">NlMsgPutTailString</a></div><div class="ttdeci">BOOLEAN NlMsgPutTailString(PNL_BUFFER buf, UINT16 type, PCHAR value)</div><div class="ttdef"><b>Definition:</b> Netlink.c:326</div></div>
<div class="ttc" id="struct__GENL__MSG__HDR_html_a7da6729294b8a9c7477e81853ee81742"><div class="ttname"><a href="struct__GENL__MSG__HDR.html#a7da6729294b8a9c7477e81853ee81742">_GENL_MSG_HDR::cmd</a></div><div class="ttdeci">UINT8 cmd</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:95</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:285</div></div>
<div class="ttc" id="struct__OVS__MESSAGE_html_a32c769d75a0cf4c1ccc469a35bf4da57"><div class="ttname"><a href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">_OVS_MESSAGE::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:29</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaa580f8df420c1fc03ba40d7ad014bcdaa"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa580f8df420c1fc03ba40d7ad014bcdaa">OVS_WIN_NETDEV_ATTR_MTU</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:147</div></div>
<div class="ttc" id="NetlinkBuf_8h_html_a67ec1c3dccb7a0f4d5b9acea805f0bb9"><div class="ttname"><a href="NetlinkBuf_8h.html#a67ec1c3dccb7a0f4d5b9acea805f0bb9">NlBufSize</a></div><div class="ttdeci">static __inline UINT32 NlBufSize(PNL_BUFFER nlBuf)</div><div class="ttdef"><b>Definition:</b> NetlinkBuf.h:49</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaa324b34a37b72e1d7387064edeaf22a3a"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa324b34a37b72e1d7387064edeaf22a3a">OVS_WIN_NETDEV_ATTR_TYPE</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:144</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaa2a61e106ffc34859e17f7f1af26c7005"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa2a61e106ffc34859e17f7f1af26c7005">OVS_WIN_NETDEV_ATTR_MAC_ADDR</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:146</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a6b753bce04ae63eef6edf0a3db99a0b4"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a6b753bce04ae63eef6edf0a3db99a0b4">_OVS_VPORT_EXT_INFO::type</a></div><div class="ttdeci">uint32_t type</div><div class="ttdef"><b>Definition:</b> DpInternal.h:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a2f985a5912dbcfafbecdf01246a747e3"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a2f985a5912dbcfafbecdf01246a747e3">_OVS_VPORT_EXT_INFO::portNo</a></div><div class="ttdeci">uint32_t portNo</div><div class="ttdef"><b>Definition:</b> DpInternal.h:43</div></div>
<div class="ttc" id="NetlinkBuf_8c_html_a3bf87c3d1c483b3584dbb2dd93fef166"><div class="ttname"><a href="NetlinkBuf_8c.html#a3bf87c3d1c483b3584dbb2dd93fef166">NlBufInit</a></div><div class="ttdeci">VOID NlBufInit(PNL_BUFFER nlBuf, PCHAR base, UINT32 size)</div><div class="ttdef"><b>Definition:</b> NetlinkBuf.c:85</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_ac3d4c36f077c5b965fc24092a135f5c1"><div class="ttname"><a href="struct__NL__MSG__HDR.html#ac3d4c36f077c5b965fc24092a135f5c1">_NL_MSG_HDR::nlmsgType</a></div><div class="ttdeci">UINT16 nlmsgType</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:80</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_ad5019307f94d29ae0dc68645a784d877"><div class="ttname"><a href="struct__NL__MSG__HDR.html#ad5019307f94d29ae0dc68645a784d877">_NL_MSG_HDR::nlmsgPid</a></div><div class="ttdeci">UINT32 nlmsgPid</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:83</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a245e7fde2fbbdeb3860899f50213ff35"><div class="ttname"><a href="NetlinkProto_8h.html#a245e7fde2fbbdeb3860899f50213ff35">NLM_F_MULTI</a></div><div class="ttdeci">#define NLM_F_MULTI</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a75e17d5e4cdfdce76d9a2fc6fd7d5db3"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a75e17d5e4cdfdce76d9a2fc6fd7d5db3">_OVS_VPORT_EXT_INFO::macAddress</a></div><div class="ttdeci">uint8_t macAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:44</div></div>
<div class="ttc" id="Netlink_8c_html_a1d72727b952218ed8df4d9e131e07459"><div class="ttname"><a href="Netlink_8c.html#a1d72727b952218ed8df4d9e131e07459">NlMsgPutTailUnspec</a></div><div class="ttdeci">BOOLEAN NlMsgPutTailUnspec(PNL_BUFFER buf, UINT16 type, PCHAR data, UINT16 len)</div><div class="ttdef"><b>Definition:</b> Netlink.c:236</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a2983598a82c89620810b915e7ffaaf64"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a2983598a82c89620810b915e7ffaaf64">_OVS_VPORT_EXT_INFO::mtu</a></div><div class="ttdeci">uint32_t mtu</div><div class="ttdef"><b>Definition:</b> DpInternal.h:50</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2748ff6de7eb5b8bed3704e61da3c2e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID HvConnectNic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_NIC_PARAMETERS&#160;</td>
          <td class="paramname"><em>nicParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    UINT32 portNo = 0;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a>(nicParam);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">/* Wait for lists to be initialized. */</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a>(switchContext, <a class="code" href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span> (!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">isActivated</a>) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Switch is not activated yet.&quot;</span>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                            nicParam-&gt;PortId,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                            nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Vport not present.&quot;</span>);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        ASSERT(0);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = NdisSwitchNicStateConnected;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    portNo = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">/* XXX only if portNo != INVALID or always? */</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a>(portNo, <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489">OVS_EVENT_LINK_UP</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (nicParam-&gt;NicType == NdisSwitchNicTypeInternal) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="IpHelper_8c.html#a846ef09653848eeff3d67e4c7dff69f2">OvsInternalAdapterUp</a>(portNo, &amp;nicParam-&gt;NetCfgInstanceId);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;done:</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a>(nicParam);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="ttc" id="IpHelper_8c_html_a846ef09653848eeff3d67e4c7dff69f2"><div class="ttname"><a href="IpHelper_8c.html#a846ef09653848eeff3d67e4c7dff69f2">OvsInternalAdapterUp</a></div><div class="ttdeci">VOID OvsInternalAdapterUp(UINT32 portNo, GUID *netCfgInstanceId)</div><div class="ttdef"><b>Definition:</b> IpHelper.c:1073</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489">OVS_EVENT_LINK_UP</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:287</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Vport_8c_html_a55453565a59d9c05b6e5db6eb77e1e65"><div class="ttname"><a href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a></div><div class="ttdeci">#define VPORT_NIC_ENTER(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:35</div></div>
<div class="ttc" id="Vport_8c_html_a64417133d18eabd436daf65e080affde"><div class="ttname"><a href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a></div><div class="ttdeci">#define OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</div><div class="ttdef"><b>Definition:</b> Vport.c:49</div></div>
<div class="ttc" id="Event_8c_html_af0f59d3cef029d077a5180b23cfc525e"><div class="ttname"><a href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a></div><div class="ttdeci">VOID OvsPostEvent(UINT32 portNo, UINT32 status)</div><div class="ttdef"><b>Definition:</b> Event.c:115</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab490af00156750aaea5a3afeb810ee6a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">_OVS_SWITCH_CONTEXT::isActivated</a></div><div class="ttdeci">BOOLEAN isActivated</div><div class="ttdef"><b>Definition:</b> Switch.h:93</div></div>
<div class="ttc" id="Vport_8c_html_afaa9b608a3f8a9159d710483a6f44686"><div class="ttname"><a href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a></div><div class="ttdeci">#define VPORT_NIC_EXIT(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:39</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="Vport_8c_html_a3a013a2e4d19263bcafe7c9623ee4ee9"><div class="ttname"><a href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a></div><div class="ttdeci">static __inline VOID OvsWaitActivate(POVS_SWITCH_CONTEXT switchContext, ULONG sleepMicroSec)</div><div class="ttdef"><b>Definition:</b> Vport.c:1749</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a39ad0d1a51ae0353065c9998a009c1fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NDIS_STATUS HvCreateNic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_NIC_PARAMETERS&#160;</td>
          <td class="paramname"><em>nicParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    UINT32 portNo = 0;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    UINT32 <span class="keyword">event</span> = 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    NDIS_STATUS status = NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a>(nicParam);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">/* Wait for lists to be initialized. */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a>(switchContext, <a class="code" href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a>);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">isActivated</a>) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Switch is not activated yet.&quot;</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">/* Veto the creation of nic */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        status = NDIS_STATUS_NOT_SUPPORTED;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext, nicParam-&gt;PortId, 0);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a>(<span class="stringliteral">&quot;Create NIC without Switch Port,&quot;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                      <span class="stringliteral">&quot; PortId: %x, NicIndex: %d&quot;</span>,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                      nicParam-&gt;PortId, nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        status = NDIS_STATUS_INVALID_PARAMETER;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">goto</span> add_nic_done;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (nicParam-&gt;NicType == NdisSwitchNicTypeExternal &amp;&amp;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        nicParam-&gt;NicIndex != 0) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> virtExtVport =</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            (<a class="code" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>)switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        vport = (<a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a>)<a class="code" href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            status = NDIS_STATUS_RESOURCES;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">goto</span> add_nic_done;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="Vport_8c.html#a50593469916d69cb6683418135f5b162">OvsInitPhysNicVport</a>(vport, virtExtVport, nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        status = <a class="code" href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a>(switchContext, vport, TRUE);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="keywordflow">if</span> (status != NDIS_STATUS_SUCCESS) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">goto</span> add_nic_done;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="Vport_8c.html#a6829f612e0080bf3f86f735d3db75bc0">OvsInitVportWithNicParam</a>(switchContext, vport, nicParam);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    portNo = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keyword">event</span> = <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a> | <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489">OVS_EVENT_LINK_UP</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keyword">event</span> = <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;add_nic_done:</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (portNo != <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a> &amp;&amp; event) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a>(portNo, event);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;done:</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a>(nicParam);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Exit: status %8x.\n&quot;</span>, status);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_af65b9cf76d47a93178b3be08f4a8dd82"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">_OVS_SWITCH_CONTEXT::virtualExternalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY virtualExternalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:131</div></div>
<div class="ttc" id="Debug_8h_html_a4086cc5daa809afb1615e2ae9f38075a"><div class="ttname"><a href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a></div><div class="ttdeci">#define OVS_LOG_TRACE(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:65</div></div>
<div class="ttc" id="Vport_8c_html_a50593469916d69cb6683418135f5b162"><div class="ttname"><a href="Vport_8c.html#a50593469916d69cb6683418135f5b162">OvsInitPhysNicVport</a></div><div class="ttdeci">static VOID OvsInitPhysNicVport(POVS_VPORT_ENTRY physExtVPort, POVS_VPORT_ENTRY virtExtVport, UINT32 nicIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:872</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489">OVS_EVENT_LINK_UP</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:287</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Vport_8c_html_a55453565a59d9c05b6e5db6eb77e1e65"><div class="ttname"><a href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a></div><div class="ttdeci">#define VPORT_NIC_ENTER(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:35</div></div>
<div class="ttc" id="Vport_8c_html_a64417133d18eabd436daf65e080affde"><div class="ttname"><a href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a></div><div class="ttdeci">#define OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</div><div class="ttdef"><b>Definition:</b> Vport.c:49</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="Event_8c_html_af0f59d3cef029d077a5180b23cfc525e"><div class="ttname"><a href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a></div><div class="ttdeci">VOID OvsPostEvent(UINT32 portNo, UINT32 status)</div><div class="ttdef"><b>Definition:</b> Event.c:115</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:285</div></div>
<div class="ttc" id="Switch_8h_html_a41a0a7a50d232916d005ffcc68b9f9f1"><div class="ttname"><a href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a></div><div class="ttdeci">struct _OVS_VPORT_ENTRY * POVS_VPORT_ENTRY</div><div class="ttdef"><b>Definition:</b> Switch.h:47</div></div>
<div class="ttc" id="Debug_8h_html_aaf451970c4433dca3e83f5a1e7e5b794"><div class="ttname"><a href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a></div><div class="ttdeci">#define OVS_LOG_ERROR(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:68</div></div>
<div class="ttc" id="Vport_8c_html_a6829f612e0080bf3f86f735d3db75bc0"><div class="ttname"><a href="Vport_8c.html#a6829f612e0080bf3f86f735d3db75bc0">OvsInitVportWithNicParam</a></div><div class="ttdeci">static VOID OvsInitVportWithNicParam(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</div><div class="ttdef"><b>Definition:</b> Vport.c:818</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:55</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="Vport_8c_html_af11338fec87aac46dcc120c74eb36b1a"><div class="ttname"><a href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a></div><div class="ttdeci">static NDIS_STATUS InitHvVportCommon(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN newPort)</div><div class="ttdef"><b>Definition:</b> Vport.c:1016</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab490af00156750aaea5a3afeb810ee6a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">_OVS_SWITCH_CONTEXT::isActivated</a></div><div class="ttdeci">BOOLEAN isActivated</div><div class="ttdef"><b>Definition:</b> Switch.h:93</div></div>
<div class="ttc" id="Vport_8c_html_afaa9b608a3f8a9159d710483a6f44686"><div class="ttname"><a href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a></div><div class="ttdeci">#define VPORT_NIC_EXIT(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:39</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="Vport_8c_html_a3a013a2e4d19263bcafe7c9623ee4ee9"><div class="ttname"><a href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a></div><div class="ttdeci">static __inline VOID OvsWaitActivate(POVS_SWITCH_CONTEXT switchContext, ULONG sleepMicroSec)</div><div class="ttdef"><b>Definition:</b> Vport.c:1749</div></div>
<div class="ttc" id="Vport_8c_html_a7c874912fad0be0f4232e22e307ea731"><div class="ttname"><a href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsAllocateVport(VOID)</div><div class="ttdef"><b>Definition:</b> Vport.c:752</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a68a1a0e87aa1564ac6cc654ff5ade7f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NDIS_STATUS HvCreatePort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_PORT_PARAMETERS&#160;</td>
          <td class="paramname"><em>portParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    NDIS_STATUS status = NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    BOOLEAN newPort = FALSE;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a>(portParam);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">/* Lookup by port ID. */</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                            portParam-&gt;PortId, 0);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> (vport != NULL) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a>(<span class="stringliteral">&quot;Port add failed due to duplicate port name, &quot;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                      <span class="stringliteral">&quot;port Id: %u&quot;</span>, portParam-&gt;PortId);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        status = STATUS_DATA_NOT_ACCEPTED;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">goto</span> create_port_done;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">     * Lookup by port name to see if this port with this name had been added</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">     * (and deleted) previously.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    vport = <a class="code" href="Vport_8c.html#a36642898aec68a2684a3b668f1b4a851">OvsFindVportByHvNameW</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                  portParam-&gt;PortFriendlyName.String,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                  portParam-&gt;PortFriendlyName.Length);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">if</span> (vport &amp;&amp; vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> == FALSE) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a>(<span class="stringliteral">&quot;Port add failed since a port already exists on &quot;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                      <span class="stringliteral">&quot;the specified port Id: %u, ovsName: %s&quot;</span>,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                      portParam-&gt;PortId, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        status = STATUS_DATA_NOT_ACCEPTED;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">goto</span> create_port_done;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (vport != NULL) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> != <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">         * It should be possible to simply just mark this port as &quot;not deleted&quot;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">         * given that the port Id and the name are the same and also provided</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">         * that the other properties that we cache have not changed.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> != portParam-&gt;PortType) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <a class="code" href="Debug_8h.html#a37173c262a73867ab875e165e9baf6b6">OVS_LOG_INFO</a>(<span class="stringliteral">&quot;Port add failed due to PortType change, port Id: %u&quot;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                         <span class="stringliteral">&quot; old: %u, new: %u&quot;</span>, portParam-&gt;PortId,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                         vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a>, portParam-&gt;PortType);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            status = STATUS_DATA_NOT_ACCEPTED;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">goto</span> create_port_done;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> = FALSE;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        vport = (<a class="code" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>)<a class="code" href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            status = NDIS_STATUS_RESOURCES;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">goto</span> create_port_done;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        newPort = TRUE;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a>(vport, portParam);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a>(switchContext, vport, newPort);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;create_port_done:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a>(portParam);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="Debug_8h_html_a37173c262a73867ab875e165e9baf6b6"><div class="ttname"><a href="Debug_8h.html#a37173c262a73867ab875e165e9baf6b6">OVS_LOG_INFO</a></div><div class="ttdeci">#define OVS_LOG_INFO(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:62</div></div>
<div class="ttc" id="Vport_8c_html_adce3d5d037b8682d498e06a0e6cc208a"><div class="ttname"><a href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a></div><div class="ttdeci">#define VPORT_PORT_EXIT(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:46</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="Vport_8c_html_a76b3afcbed28aed006763e5a98a0bdf4"><div class="ttname"><a href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a></div><div class="ttdeci">static VOID OvsInitVportWithPortParam(POVS_VPORT_ENTRY vport, PNDIS_SWITCH_PORT_PARAMETERS portParam)</div><div class="ttdef"><b>Definition:</b> Vport.c:773</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_a41a0a7a50d232916d005ffcc68b9f9f1"><div class="ttname"><a href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a></div><div class="ttdeci">struct _OVS_VPORT_ENTRY * POVS_VPORT_ENTRY</div><div class="ttdef"><b>Definition:</b> Switch.h:47</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="Debug_8h_html_aaf451970c4433dca3e83f5a1e7e5b794"><div class="ttname"><a href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a></div><div class="ttdeci">#define OVS_LOG_ERROR(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:68</div></div>
<div class="ttc" id="Vport_8c_html_af11338fec87aac46dcc120c74eb36b1a"><div class="ttname"><a href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a></div><div class="ttdeci">static NDIS_STATUS InitHvVportCommon(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN newPort)</div><div class="ttdef"><b>Definition:</b> Vport.c:1016</div></div>
<div class="ttc" id="Vport_8c_html_a36642898aec68a2684a3b668f1b4a851"><div class="ttname"><a href="Vport_8c.html#a36642898aec68a2684a3b668f1b4a851">OvsFindVportByHvNameW</a></div><div class="ttdeci">static POVS_VPORT_ENTRY OvsFindVportByHvNameW(POVS_SWITCH_CONTEXT switchContext, PWSTR wsName, SIZE_T wstrSize)</div><div class="ttdef"><b>Definition:</b> Vport.c:649</div></div>
<div class="ttc" id="Vport_8c_html_a8449c123cf66a3586cd0887b0581c86c"><div class="ttname"><a href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a></div><div class="ttdeci">#define VPORT_PORT_ENTER(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:43</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="Vport_8c_html_a7c874912fad0be0f4232e22e307ea731"><div class="ttname"><a href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsAllocateVport(VOID)</div><div class="ttdef"><b>Definition:</b> Vport.c:752</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e98590d5cb72ac8519df90d87a57f03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID HvDeleteNic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_NIC_PARAMETERS&#160;</td>
          <td class="paramname"><em>nicParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    UINT32 portNo = 0;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a>(nicParam);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">/* Wait for lists to be initialized. */</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a>(switchContext, <a class="code" href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">isActivated</a>) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Switch is not activated yet.&quot;</span>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                            nicParam-&gt;PortId,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                            nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Vport not present.&quot;</span>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = NdisSwitchNicStateUnknown;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    portNo = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> == NdisSwitchPortTypeExternal &amp;&amp;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> != 0) {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a>(NULL, switchContext, vport, TRUE, FALSE);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="comment">/* XXX if portNo != INVALID or always? */</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <a class="code" href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a>(portNo, <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a296aabcee1efde54badbb9919f223df3">OVS_EVENT_DISCONNECT</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;done:</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a>(nicParam);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;}</div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:54</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Vport_8c_html_a55453565a59d9c05b6e5db6eb77e1e65"><div class="ttname"><a href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a></div><div class="ttdeci">#define VPORT_NIC_ENTER(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:35</div></div>
<div class="ttc" id="Vport_8c_html_ac83bf787fa4f3e5fef189edfa60c7656"><div class="ttname"><a href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a></div><div class="ttdeci">NTSTATUS OvsRemoveAndDeleteVport(PVOID usrParamsContext, POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN hvDelete, BOOLEAN ovsDelete)</div><div class="ttdef"><b>Definition:</b> Vport.c:1143</div></div>
<div class="ttc" id="Vport_8c_html_a64417133d18eabd436daf65e080affde"><div class="ttname"><a href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a></div><div class="ttdeci">#define OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</div><div class="ttdef"><b>Definition:</b> Vport.c:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="Event_8c_html_af0f59d3cef029d077a5180b23cfc525e"><div class="ttname"><a href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a></div><div class="ttdeci">VOID OvsPostEvent(UINT32 portNo, UINT32 status)</div><div class="ttdef"><b>Definition:</b> Event.c:115</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0a296aabcee1efde54badbb9919f223df3"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a296aabcee1efde54badbb9919f223df3">OVS_EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:286</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab490af00156750aaea5a3afeb810ee6a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">_OVS_SWITCH_CONTEXT::isActivated</a></div><div class="ttdeci">BOOLEAN isActivated</div><div class="ttdef"><b>Definition:</b> Switch.h:93</div></div>
<div class="ttc" id="Vport_8c_html_afaa9b608a3f8a9159d710483a6f44686"><div class="ttname"><a href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a></div><div class="ttdeci">#define VPORT_NIC_EXIT(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:39</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="Vport_8c_html_a3a013a2e4d19263bcafe7c9623ee4ee9"><div class="ttname"><a href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a></div><div class="ttdeci">static __inline VOID OvsWaitActivate(POVS_SWITCH_CONTEXT switchContext, ULONG sleepMicroSec)</div><div class="ttdef"><b>Definition:</b> Vport.c:1749</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af234f0c57852f534cd96fc4adeb9a5fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID HvDeletePort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_PORT_PARAMETERS&#160;</td>
          <td class="paramname"><em>portParams</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a>(portParams);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                            portParams-&gt;PortId, 0);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">     * XXX: we can only destroy and remove the port if its datapath port</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">     * counterpart was deleted. If the datapath port counterpart is present,</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">     * we only mark the vport for deletion, so that a netlink command vport</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">     * delete will delete the vport.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (vport) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a>(NULL, switchContext, vport, TRUE, FALSE);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Vport not present.&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a>(portParams);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;}</div>
<div class="ttc" id="Vport_8c_html_adce3d5d037b8682d498e06a0e6cc208a"><div class="ttname"><a href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a></div><div class="ttdeci">#define VPORT_PORT_EXIT(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:46</div></div>
<div class="ttc" id="Vport_8c_html_ac83bf787fa4f3e5fef189edfa60c7656"><div class="ttname"><a href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a></div><div class="ttdeci">NTSTATUS OvsRemoveAndDeleteVport(PVOID usrParamsContext, POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN hvDelete, BOOLEAN ovsDelete)</div><div class="ttdef"><b>Definition:</b> Vport.c:1143</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="Vport_8c_html_a8449c123cf66a3586cd0887b0581c86c"><div class="ttname"><a href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a></div><div class="ttdeci">#define VPORT_PORT_ENTER(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:43</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9a0cb63e46305c3f302d9801c27a202"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID HvDisconnectNic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_NIC_PARAMETERS&#160;</td>
          <td class="paramname"><em>nicParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;{</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    UINT32 portNo = 0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    BOOLEAN isInternalPort = FALSE;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a>(nicParam);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">/* Wait for lists to be initialized. */</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a>(switchContext, <a class="code" href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">isActivated</a>) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Switch is not activated yet.&quot;</span>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                            nicParam-&gt;PortId,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                            nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Vport not present.&quot;</span>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">goto</span> done;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = NdisSwitchNicStateDisconnected;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    portNo = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a>) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        isInternalPort = TRUE;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="comment">/* XXX if portNo != INVALID or always? */</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a>(portNo, <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a200bd0cf1b367f24165db97f8ac6f13a">OVS_EVENT_LINK_DOWN</a>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (isInternalPort) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="IpHelper_8c.html#af83b0e7e4223cf6ee9e16603d22dd881">OvsInternalAdapterDown</a>();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;done:</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a>(nicParam);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Vport_8c_html_a55453565a59d9c05b6e5db6eb77e1e65"><div class="ttname"><a href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a></div><div class="ttdeci">#define VPORT_NIC_ENTER(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:35</div></div>
<div class="ttc" id="Vport_8c_html_a64417133d18eabd436daf65e080affde"><div class="ttname"><a href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a></div><div class="ttdeci">#define OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</div><div class="ttdef"><b>Definition:</b> Vport.c:49</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0a200bd0cf1b367f24165db97f8ac6f13a"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a200bd0cf1b367f24165db97f8ac6f13a">OVS_EVENT_LINK_DOWN</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:288</div></div>
<div class="ttc" id="Event_8c_html_af0f59d3cef029d077a5180b23cfc525e"><div class="ttname"><a href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a></div><div class="ttdeci">VOID OvsPostEvent(UINT32 portNo, UINT32 status)</div><div class="ttdef"><b>Definition:</b> Event.c:115</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:55</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab490af00156750aaea5a3afeb810ee6a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">_OVS_SWITCH_CONTEXT::isActivated</a></div><div class="ttdeci">BOOLEAN isActivated</div><div class="ttdef"><b>Definition:</b> Switch.h:93</div></div>
<div class="ttc" id="IpHelper_8c_html_af83b0e7e4223cf6ee9e16603d22dd881"><div class="ttname"><a href="IpHelper_8c.html#af83b0e7e4223cf6ee9e16603d22dd881">OvsInternalAdapterDown</a></div><div class="ttdeci">VOID OvsInternalAdapterDown(VOID)</div><div class="ttdef"><b>Definition:</b> IpHelper.c:1059</div></div>
<div class="ttc" id="Vport_8c_html_afaa9b608a3f8a9159d710483a6f44686"><div class="ttname"><a href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a></div><div class="ttdeci">#define VPORT_NIC_EXIT(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:39</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="Vport_8c_html_a3a013a2e4d19263bcafe7c9623ee4ee9"><div class="ttname"><a href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a></div><div class="ttdeci">static __inline VOID OvsWaitActivate(POVS_SWITCH_CONTEXT switchContext, ULONG sleepMicroSec)</div><div class="ttdef"><b>Definition:</b> Vport.c:1749</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a04ebc3002c437a9ee6505a219872360b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID HvTeardownPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_PORT_PARAMETERS&#160;</td>
          <td class="paramname"><em>portParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a>(portParam);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                            portParam-&gt;PortId, 0);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (vport) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">/* add assertion here */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">portState</a> = NdisSwitchPortStateTeardown;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500aa42e8647086285b51403db48417f4bbc">OVS_STATE_PORT_TEAR_DOWN</a>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Vport not present.&quot;</span>);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a>(portParam);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div>
<div class="ttc" id="Vport_8c_html_adce3d5d037b8682d498e06a0e6cc208a"><div class="ttname"><a href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a></div><div class="ttdeci">#define VPORT_PORT_EXIT(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:46</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500aa42e8647086285b51403db48417f4bbc"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500aa42e8647086285b51403db48417f4bbc">OVS_STATE_PORT_TEAR_DOWN</a></div><div class="ttdef"><b>Definition:</b> Vport.h:57</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ae6e1b57f475d44b6725b1d79b9f0d218"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">_OVS_VPORT_ENTRY::portState</a></div><div class="ttdeci">NDIS_SWITCH_PORT_STATE portState</div><div class="ttdef"><b>Definition:</b> Vport.h:104</div></div>
<div class="ttc" id="Vport_8c_html_a8449c123cf66a3586cd0887b0581c86c"><div class="ttname"><a href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a></div><div class="ttdeci">#define VPORT_PORT_ENTER(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:43</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6bcbe970c3ad7407e13d5fffd345f288"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID HvUpdateNic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_NIC_PARAMETERS&#160;</td>
          <td class="paramname"><em>nicParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    UINT32 status = 0, portNo = 0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a>(nicParam);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">/* Wait for lists to be initialized. */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a>(switchContext, <a class="code" href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">isActivated</a>) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Switch is not activated yet.&quot;</span>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">goto</span> update_nic_done;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                            nicParam-&gt;PortId,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                            nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;Vport search failed.&quot;</span>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">goto</span> update_nic_done;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">switch</span> (nicParam-&gt;NicType) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicTypeExternal:</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicTypeInternal:</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        RtlCopyMemory(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a69dfb4f7110f50466b749274415d29c3">netCfgInstanceId</a>, &amp;nicParam-&gt;NetCfgInstanceId,</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                      sizeof (GUID));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicTypeSynthetic:</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicTypeEmulated:</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (!RtlEqualMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>, nicParam-&gt;VMMacAddress,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                           sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>))) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            status |= <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a04063ecafc058fadb9f4224a129a7b18">OVS_EVENT_MAC_CHANGE</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>, nicParam-&gt;VMMacAddress,</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                          sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>));</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        ASSERT(0);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">if</span> (!RtlEqualMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>, nicParam-&gt;PermanentMacAddress,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                        sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>))) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>, nicParam-&gt;PermanentMacAddress,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                      sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>));</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        status |= <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a04063ecafc058fadb9f4224a129a7b18">OVS_EVENT_MAC_CHANGE</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (!RtlEqualMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>, nicParam-&gt;CurrentMacAddress,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                        sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>))) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>, nicParam-&gt;CurrentMacAddress,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                      sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>));</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        status |= <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a04063ecafc058fadb9f4224a129a7b18">OVS_EVENT_MAC_CHANGE</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">mtu</a> != nicParam-&gt;MTU) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">mtu</a> = nicParam-&gt;MTU;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        status |= <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a9da2e094ebfdffc1ad09d3ba5bb600d7">OVS_EVENT_MTU_CHANGE</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a96a25fbfb88459dabc2d6a4d086d2dd5">numaNodeId</a> = nicParam-&gt;NumaNodeId;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    portNo = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">if</span> (status &amp;&amp; portNo) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a>(portNo, status);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;update_nic_done:</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a>(nicParam);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0a9da2e094ebfdffc1ad09d3ba5bb600d7"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a9da2e094ebfdffc1ad09d3ba5bb600d7">OVS_EVENT_MTU_CHANGE</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:290</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0a04063ecafc058fadb9f4224a129a7b18"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a04063ecafc058fadb9f4224a129a7b18">OVS_EVENT_MAC_CHANGE</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:289</div></div>
<div class="ttc" id="Vport_8c_html_a55453565a59d9c05b6e5db6eb77e1e65"><div class="ttname"><a href="Vport_8c.html#a55453565a59d9c05b6e5db6eb77e1e65">VPORT_NIC_ENTER</a></div><div class="ttdeci">#define VPORT_NIC_ENTER(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:35</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb72915fafa7a4d3be436aad7f702623"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">_OVS_VPORT_ENTRY::currMacAddress</a></div><div class="ttdeci">UINT8 currMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:109</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a76a534b71ed4c7bbdc5dd6a9b5c0675d"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">_OVS_VPORT_ENTRY::vmMacAddress</a></div><div class="ttdeci">UINT8 vmMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:110</div></div>
<div class="ttc" id="Vport_8c_html_a64417133d18eabd436daf65e080affde"><div class="ttname"><a href="Vport_8c.html#a64417133d18eabd436daf65e080affde">OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</a></div><div class="ttdeci">#define OVS_VPORT_DEFAULT_WAIT_TIME_MICROSEC</div><div class="ttdef"><b>Definition:</b> Vport.c:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aa7c2d32b73f95f428a9c6a0999c60278"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">_OVS_VPORT_ENTRY::permMacAddress</a></div><div class="ttdeci">UINT8 permMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:108</div></div>
<div class="ttc" id="Event_8c_html_af0f59d3cef029d077a5180b23cfc525e"><div class="ttname"><a href="Event_8c.html#af0f59d3cef029d077a5180b23cfc525e">OvsPostEvent</a></div><div class="ttdeci">VOID OvsPostEvent(UINT32 portNo, UINT32 status)</div><div class="ttdef"><b>Definition:</b> Event.c:115</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a96a25fbfb88459dabc2d6a4d086d2dd5"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a96a25fbfb88459dabc2d6a4d086d2dd5">_OVS_VPORT_ENTRY::numaNodeId</a></div><div class="ttdeci">UINT16 numaNodeId</div><div class="ttdef"><b>Definition:</b> Vport.h:103</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab490af00156750aaea5a3afeb810ee6a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">_OVS_SWITCH_CONTEXT::isActivated</a></div><div class="ttdeci">BOOLEAN isActivated</div><div class="ttdef"><b>Definition:</b> Switch.h:93</div></div>
<div class="ttc" id="Vport_8c_html_afaa9b608a3f8a9159d710483a6f44686"><div class="ttname"><a href="Vport_8c.html#afaa9b608a3f8a9159d710483a6f44686">VPORT_NIC_EXIT</a></div><div class="ttdeci">#define VPORT_NIC_EXIT(_nic)</div><div class="ttdef"><b>Definition:</b> Vport.c:39</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a69dfb4f7110f50466b749274415d29c3"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a69dfb4f7110f50466b749274415d29c3">_OVS_VPORT_ENTRY::netCfgInstanceId</a></div><div class="ttdeci">GUID netCfgInstanceId</div><div class="ttdef"><b>Definition:</b> Vport.h:116</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="Vport_8c_html_a3a013a2e4d19263bcafe7c9623ee4ee9"><div class="ttname"><a href="Vport_8c.html#a3a013a2e4d19263bcafe7c9623ee4ee9">OvsWaitActivate</a></div><div class="ttdeci">static __inline VOID OvsWaitActivate(POVS_SWITCH_CONTEXT switchContext, ULONG sleepMicroSec)</div><div class="ttdef"><b>Definition:</b> Vport.c:1749</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a819342a37140dc28d6c23fd59814ef4e"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">_OVS_VPORT_ENTRY::mtu</a></div><div class="ttdeci">UINT32 mtu</div><div class="ttdef"><b>Definition:</b> Vport.h:96</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af992899df255a772e5ad4f1828d28e64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NDIS_STATUS HvUpdatePort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_PORT_PARAMETERS&#160;</td>
          <td class="paramname"><em>portParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500">OVS_VPORT_STATE</a> ovsState;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    NDIS_SWITCH_NIC_STATE nicState;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a>(portParam);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                            portParam-&gt;PortId, 0);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">     * Update properties only for NETDEV ports for supprting PS script</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">     * We don&#39;t allow changing the names of the internal or external ports</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (vport == NULL || (( vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> != NdisSwitchPortTypeSynthetic) &amp;&amp;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        ( vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> != NdisSwitchPortTypeEmulated))) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">goto</span> update_port_done;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">/* Store the nic and the OVS states as Nic Create won&#39;t be called */</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    ovsState = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    nicState = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">     * Currently only the port friendly name is being updated</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">     * Make sure that no other properties are changed</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    ASSERT(portParam-&gt;PortId == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    ASSERT(portParam-&gt;PortState == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">portState</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    ASSERT(portParam-&gt;PortType == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">     * Call the set parameters function the handle all properties</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">     * change in a single place in case future version supports change of</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     * other properties</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a>(vport, portParam);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">/* Retore the nic and OVS states */</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = nicState;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = ovsState;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;update_port_done:</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a>(portParam);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">/* Must always return success */</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">return</span> NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="ttc" id="Vport_8c_html_adce3d5d037b8682d498e06a0e6cc208a"><div class="ttname"><a href="Vport_8c.html#adce3d5d037b8682d498e06a0e6cc208a">VPORT_PORT_EXIT</a></div><div class="ttdeci">#define VPORT_PORT_EXIT(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:46</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Vport_8c_html_a76b3afcbed28aed006763e5a98a0bdf4"><div class="ttname"><a href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a></div><div class="ttdeci">static VOID OvsInitVportWithPortParam(POVS_VPORT_ENTRY vport, PNDIS_SWITCH_PORT_PARAMETERS portParam)</div><div class="ttdef"><b>Definition:</b> Vport.c:773</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500">OVS_VPORT_STATE</a></div><div class="ttdeci">OVS_VPORT_STATE</div><div class="ttdef"><b>Definition:</b> Vport.h:52</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ae6e1b57f475d44b6725b1d79b9f0d218"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">_OVS_VPORT_ENTRY::portState</a></div><div class="ttdeci">NDIS_SWITCH_PORT_STATE portState</div><div class="ttdef"><b>Definition:</b> Vport.h:104</div></div>
<div class="ttc" id="Vport_8c_html_a8449c123cf66a3586cd0887b0581c86c"><div class="ttname"><a href="Vport_8c.html#a8449c123cf66a3586cd0887b0581c86c">VPORT_PORT_ENTER</a></div><div class="ttdeci">#define VPORT_PORT_ENTER(_port)</div><div class="ttdef"><b>Definition:</b> Vport.c:43</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af11338fec87aac46dcc120c74eb36b1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NDIS_STATUS InitHvVportCommon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOLEAN&#160;</td>
          <td class="paramname"><em>newPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;{</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    UINT32 hash;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">switch</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a>) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeExternal:</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">         * Overwrite the &#39;portFriendlyName&#39; of this external vport. The reason</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">         * for having this in common code is to be able to call it from the NDIS</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">         * Port callback as well as the NDIS NIC callback.</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <a class="code" href="Vport_8c.html#a23fa800c92350d30e541f03112e91474">AssignNicNameSpecial</a>(vport);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> == 0) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a65334e167df16ba6fa1c3b169f239424">virtualExternalPortId</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a> = vport;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a4b0443361638f3ab588f3fb34344fb2c">numPhysicalNics</a>++;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeInternal:</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a> == FALSE);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="comment">/* Overwrite the &#39;portFriendlyName&#39; of the internal vport. */</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <a class="code" href="Vport_8c.html#a23fa800c92350d30e541f03112e91474">AssignNicNameSpecial</a>(vport);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a32b1e8d96a1b48d9520b079e1685f397">internalPortId</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a> = vport;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeSynthetic:</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeEmulated:</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">     * It is important to not insert vport corresponding to virtual external</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">     * port into the &#39;portIdHashArray&#39; since the port should not be exposed to</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">     * OVS userspace.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> == NdisSwitchPortTypeExternal &amp;&amp;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> == 0) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">return</span> NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">     * NOTE: OvsJhashWords has portId as &quot;1&quot; word. This should be ok, even</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">     * though sizeof(NDIS_SWITCH_PORT_ID) = 4, not 2, because the</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">     * hyper-v switch seems to use only 2 bytes out of 4.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    hash = <a class="code" href="Jhash_8c.html#a32f537458a183199bddfc7cde2a7bfee">OvsJhashWords</a>(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a>, 1, <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    InsertHeadList(&amp;switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">portIdHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>],</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                   &amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">portIdLink</a>);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> (newPort) {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#afc160fac68c247864577246ac2b7f417">numHvVports</a>++;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">return</span> NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_af65b9cf76d47a93178b3be08f4a8dd82"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">_OVS_SWITCH_CONTEXT::virtualExternalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY virtualExternalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:131</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_afc160fac68c247864577246ac2b7f417"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#afc160fac68c247864577246ac2b7f417">_OVS_SWITCH_CONTEXT::numHvVports</a></div><div class="ttdeci">UINT32 numHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:163</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a79acfa977569d531ce6212c632515b93"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">_OVS_SWITCH_CONTEXT::internalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY internalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:132</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a97cf517c028a820ff5c955c3b3bf7e10"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">_OVS_SWITCH_CONTEXT::portIdHashArray</a></div><div class="ttdeci">PLIST_ENTRY portIdHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:154</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="Vport_8c_html_a23fa800c92350d30e541f03112e91474"><div class="ttname"><a href="Vport_8c.html#a23fa800c92350d30e541f03112e91474">AssignNicNameSpecial</a></div><div class="ttdeci">static VOID AssignNicNameSpecial(POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Vport.c:976</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a4b0443361638f3ab588f3fb34344fb2c"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a4b0443361638f3ab588f3fb34344fb2c">_OVS_SWITCH_CONTEXT::numPhysicalNics</a></div><div class="ttdeci">UINT32 numPhysicalNics</div><div class="ttdef"><b>Definition:</b> Switch.h:161</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adcb291580e34ece712b9d089677972bf"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">_OVS_VPORT_ENTRY::portIdLink</a></div><div class="ttdeci">LIST_ENTRY portIdLink</div><div class="ttdef"><b>Definition:</b> Vport.h:87</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a65334e167df16ba6fa1c3b169f239424"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a65334e167df16ba6fa1c3b169f239424">_OVS_SWITCH_CONTEXT::virtualExternalPortId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID virtualExternalPortId</div><div class="ttdef"><b>Definition:</b> Switch.h:129</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a32b1e8d96a1b48d9520b079e1685f397"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a32b1e8d96a1b48d9520b079e1685f397">_OVS_SWITCH_CONTEXT::internalPortId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID internalPortId</div><div class="ttdef"><b>Definition:</b> Switch.h:130</div></div>
<div class="ttc" id="Switch_8h_html_af4d564aefaa4a7d097a2eb263dee396a"><div class="ttname"><a href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a></div><div class="ttdeci">#define OVS_HASH_BASIS</div><div class="ttdef"><b>Definition:</b> Switch.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
<div class="ttc" id="Jhash_8c_html_a32f537458a183199bddfc7cde2a7bfee"><div class="ttname"><a href="Jhash_8c.html#a32f537458a183199bddfc7cde2a7bfee">OvsJhashWords</a></div><div class="ttdeci">UINT32 OvsJhashWords(const UINT32 *p, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7cc578327abf94fc45ef88a25a626914"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NDIS_STATUS InitOvsVportCommon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;{</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    UINT32 hash;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">switch</span>(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>) {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a>:</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a>:</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        UINT16 dstPort = <a class="code" href="Vport_8h.html#a325ed79687efd244fe187535c096e09f">GetPortFromPriv</a>(vport);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        hash = <a class="code" href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a>(&amp;dstPort,</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                             <span class="keyword">sizeof</span>(dstPort),</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                             <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        InsertHeadList(</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            &amp;<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab9a1af0ee641044bd10adb415b67d88a">tunnelVportsArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>],</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            &amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">tunnelVportLink</a>);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">numNonHvVports</a>++;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a>:</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a>) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">numNonHvVports</a>++;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        }</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">     * Insert the port into the hash array of ports: by port number and ovs</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">     * and ovs (datapath) port name.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">     * NOTE: OvsJhashWords has portNo as &quot;1&quot; word. This is ok, because the</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">     * portNo is stored in 2 bytes only (max port number = MAXUINT16).</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    hash = <a class="code" href="Jhash_8c.html#a32f537458a183199bddfc7cde2a7bfee">OvsJhashWords</a>(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>, 1, <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    InsertHeadList(&amp;<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">portNoHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>],</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                   &amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">portNoLink</a>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    hash = <a class="code" href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a>(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>, strlen(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>) + 1,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                         <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    InsertHeadList(</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        &amp;<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a56854c5ea63ed7a29b0f0954fedfc19b">ovsPortNameHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>],</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        &amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">ovsNameLink</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;}</div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a6e93c14bb3e3a25f2e05187e26aa2562"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">_OVS_SWITCH_CONTEXT::numNonHvVports</a></div><div class="ttdeci">UINT32 numNonHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:164</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a27fef079a0a083f0312ae858c8a987bd"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">_OVS_VPORT_ENTRY::ovsNameLink</a></div><div class="ttdeci">LIST_ENTRY ovsNameLink</div><div class="ttdef"><b>Definition:</b> Vport.h:86</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab9a1af0ee641044bd10adb415b67d88a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab9a1af0ee641044bd10adb415b67d88a">_OVS_SWITCH_CONTEXT::tunnelVportsArray</a></div><div class="ttdeci">PLIST_ENTRY tunnelVportsArray</div><div class="ttdef"><b>Definition:</b> Switch.h:156</div></div>
<div class="ttc" id="Vport_8h_html_a325ed79687efd244fe187535c096e09f"><div class="ttname"><a href="Vport_8h.html#a325ed79687efd244fe187535c096e09f">GetPortFromPriv</a></div><div class="ttdeci">static __inline UINT16 GetPortFromPriv(POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Vport.h:227</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a56854c5ea63ed7a29b0f0954fedfc19b"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a56854c5ea63ed7a29b0f0954fedfc19b">_OVS_SWITCH_CONTEXT::ovsPortNameHashArray</a></div><div class="ttdeci">PLIST_ENTRY ovsPortNameHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:157</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:232</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a4a86b816c7f31ea51b1d9b8733dd3e07"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">_OVS_VPORT_ENTRY::tunnelVportLink</a></div><div class="ttdeci">LIST_ENTRY tunnelVportLink</div><div class="ttdef"><b>Definition:</b> Vport.h:89</div></div>
<div class="ttc" id="Jhash_8c_html_adb3244bfa1a09fa88e21ce1eb9508c1b"><div class="ttname"><a href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a></div><div class="ttdeci">UINT32 OvsJhashBytes(const VOID *p_, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:101</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac54c2fc2ad8eaf2184ac4422f5d9a1d0"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">_OVS_VPORT_ENTRY::portNoLink</a></div><div class="ttdeci">LIST_ENTRY portNoLink</div><div class="ttdef"><b>Definition:</b> Vport.h:88</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:229</div></div>
<div class="ttc" id="Switch_8h_html_af4d564aefaa4a7d097a2eb263dee396a"><div class="ttname"><a href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a></div><div class="ttdeci">#define OVS_HASH_BASIS</div><div class="ttdef"><b>Definition:</b> Switch.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_acacc0274b94607fd2a33eff3fa44f6ba"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">_OVS_SWITCH_CONTEXT::portNoHashArray</a></div><div class="ttdeci">PLIST_ENTRY portNoHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:155</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="Jhash_8c_html_a32f537458a183199bddfc7cde2a7bfee"><div class="ttname"><a href="Jhash_8c.html#a32f537458a183199bddfc7cde2a7bfee">OvsJhashWords</a></div><div class="ttdeci">UINT32 OvsJhashWords(const UINT32 *p, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afac6271bcb5e3c1edbe58caa3e2a4d6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NDIS_STATUS OvsAddConfiguredSwitchPorts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;{</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    NDIS_STATUS status = NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    ULONG arrIndex;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    PNDIS_SWITCH_PORT_PARAMETERS portParam;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    PNDIS_SWITCH_PORT_ARRAY portArray = NULL;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Enter: switchContext:%p&quot;</span>, switchContext);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    status = <a class="code" href="Oid_8c.html#acdf50fa496e437f5f9affeba03d70707">OvsGetPortsOnSwitch</a>(switchContext, &amp;portArray);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">if</span> (status != NDIS_STATUS_SUCCESS) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <span class="keywordflow">for</span> (arrIndex = 0; arrIndex &lt; portArray-&gt;NumElements; arrIndex++) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;         portParam = NDIS_SWITCH_PORT_AT_ARRAY_INDEX(portArray, arrIndex);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;         <span class="keywordflow">if</span> (portParam-&gt;IsValidationPort) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;             <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;         }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;         vport = (<a class="code" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>)<a class="code" href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a>();</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;         <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;             status = NDIS_STATUS_RESOURCES;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;             <span class="keywordflow">goto</span> <a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;         }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;         <a class="code" href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a>(vport, portParam);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;         status = <a class="code" href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a>(switchContext, vport, TRUE);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;         <span class="keywordflow">if</span> (status != NDIS_STATUS_SUCCESS) {</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;             <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;             <span class="keywordflow">goto</span> <a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;         }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>:</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">if</span> (status != NDIS_STATUS_SUCCESS) {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <a class="code" href="Vport_8c.html#abea9e2b6b6d38ddf38feb9a40c983581">OvsClearAllSwitchVports</a>(switchContext);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    <a class="code" href="Oid_8c.html#a54eee3ad62026c7b73625c1c3d73f38f">OvsFreeSwitchPortsArray</a>(portArray);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Exit: status: %x&quot;</span>, status);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;}</div>
<div class="ttc" id="Debug_8h_html_a4086cc5daa809afb1615e2ae9f38075a"><div class="ttname"><a href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a></div><div class="ttdeci">#define OVS_LOG_TRACE(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:65</div></div>
<div class="ttc" id="Oid_8c_html_acdf50fa496e437f5f9affeba03d70707"><div class="ttname"><a href="Oid_8c.html#acdf50fa496e437f5f9affeba03d70707">OvsGetPortsOnSwitch</a></div><div class="ttdeci">NDIS_STATUS OvsGetPortsOnSwitch(POVS_SWITCH_CONTEXT switchContext, PNDIS_SWITCH_PORT_ARRAY *portArrayOut)</div><div class="ttdef"><b>Definition:</b> Oid.c:763</div></div>
<div class="ttc" id="Vport_8c_html_a76b3afcbed28aed006763e5a98a0bdf4"><div class="ttname"><a href="Vport_8c.html#a76b3afcbed28aed006763e5a98a0bdf4">OvsInitVportWithPortParam</a></div><div class="ttdeci">static VOID OvsInitVportWithPortParam(POVS_VPORT_ENTRY vport, PNDIS_SWITCH_PORT_PARAMETERS portParam)</div><div class="ttdef"><b>Definition:</b> Vport.c:773</div></div>
<div class="ttc" id="Vport_8c_html_abea9e2b6b6d38ddf38feb9a40c983581"><div class="ttname"><a href="Vport_8c.html#abea9e2b6b6d38ddf38feb9a40c983581">OvsClearAllSwitchVports</a></div><div class="ttdeci">VOID OvsClearAllSwitchVports(POVS_SWITCH_CONTEXT switchContext)</div><div class="ttdef"><b>Definition:</b> Vport.c:1421</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_a41a0a7a50d232916d005ffcc68b9f9f1"><div class="ttname"><a href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a></div><div class="ttdeci">struct _OVS_VPORT_ENTRY * POVS_VPORT_ENTRY</div><div class="ttdef"><b>Definition:</b> Switch.h:47</div></div>
<div class="ttc" id="Vport_8c_html_af11338fec87aac46dcc120c74eb36b1a"><div class="ttname"><a href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a></div><div class="ttdeci">static NDIS_STATUS InitHvVportCommon(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN newPort)</div><div class="ttdef"><b>Definition:</b> Vport.c:1016</div></div>
<div class="ttc" id="Oid_8c_html_a54eee3ad62026c7b73625c1c3d73f38f"><div class="ttname"><a href="Oid_8c.html#a54eee3ad62026c7b73625c1c3d73f38f">OvsFreeSwitchPortsArray</a></div><div class="ttdeci">VOID OvsFreeSwitchPortsArray(PNDIS_SWITCH_PORT_ARRAY portsArray)</div><div class="ttdef"><b>Definition:</b> Oid.c:870</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="ovstest_8c_html_a5c6551bf9ea9cf51ae7f2076c4cbe8ef"><div class="ttname"><a href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a></div><div class="ttdeci">static void cleanup(void)</div><div class="ttdef"><b>Definition:</b> ovstest.c:109</div></div>
<div class="ttc" id="Vport_8c_html_a7c874912fad0be0f4232e22e307ea731"><div class="ttname"><a href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsAllocateVport(VOID)</div><div class="ttdef"><b>Definition:</b> Vport.c:752</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c874912fad0be0f4232e22e307ea731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsAllocateVport </td>
          <td>(</td>
          <td class="paramtype">VOID&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;{</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    vport = (<a class="code" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>)<a class="code" href="Util_8c.html#ac8f761db04ca2512e0c5b157ab5a8e6a">OvsAllocateMemoryWithTag</a>(</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keyword">sizeof</span>(<a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>), <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    RtlZeroMemory(vport, <span class="keyword">sizeof</span> (<a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>));</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500adc88cddc7f2519b554249a6b1bb5e0bf">OVS_STATE_UNKNOWN</a>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> = FALSE;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> = <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">ovsNameLink</a>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">portIdLink</a>);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">portNoLink</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a27fef079a0a083f0312ae858c8a987bd"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">_OVS_VPORT_ENTRY::ovsNameLink</a></div><div class="ttdeci">LIST_ENTRY ovsNameLink</div><div class="ttdef"><b>Definition:</b> Vport.h:86</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="Util_8c_html_ac8f761db04ca2512e0c5b157ab5a8e6a"><div class="ttname"><a href="Util_8c.html#ac8f761db04ca2512e0c5b157ab5a8e6a">OvsAllocateMemoryWithTag</a></div><div class="ttdeci">VOID * OvsAllocateMemoryWithTag(size_t size, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:28</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500adc88cddc7f2519b554249a6b1bb5e0bf"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500adc88cddc7f2519b554249a6b1bb5e0bf">OVS_STATE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> Vport.h:53</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_a41a0a7a50d232916d005ffcc68b9f9f1"><div class="ttname"><a href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a></div><div class="ttdeci">struct _OVS_VPORT_ENTRY * POVS_VPORT_ENTRY</div><div class="ttdef"><b>Definition:</b> Switch.h:47</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adcb291580e34ece712b9d089677972bf"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">_OVS_VPORT_ENTRY::portIdLink</a></div><div class="ttdeci">LIST_ENTRY portIdLink</div><div class="ttdef"><b>Definition:</b> Vport.h:87</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac54c2fc2ad8eaf2184ac4422f5d9a1d0"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">_OVS_VPORT_ENTRY::portNoLink</a></div><div class="ttdeci">LIST_ENTRY portNoLink</div><div class="ttdef"><b>Definition:</b> Vport.h:88</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abea9e2b6b6d38ddf38feb9a40c983581"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID OvsClearAllSwitchVports </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;{</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">for</span> (UINT hash = 0; hash &lt; <a class="code" href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a>; hash++) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;        PLIST_ENTRY head, link, next;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">portIdHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>]);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <a class="code" href="Util_8h.html#a4f83c1d58b548b526c02215da93eb7ed">LIST_FORALL_SAFE</a>(head, link, next) {</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portIdLink);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;            <a class="code" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a>(NULL, switchContext, vport, TRUE, TRUE);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">     * Remove &#39;virtualExternalVport&#39; as well. This port is not part of the</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">     * &#39;portIdHashArray&#39;.</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span> (switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a>) {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <a class="code" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a>(NULL, switchContext,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            (<a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a>)switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a>, TRUE, TRUE);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">for</span> (UINT hash = 0; hash &lt; <a class="code" href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a>; hash++) {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;        PLIST_ENTRY head, link, next;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">portNoHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>]);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <a class="code" href="Util_8h.html#a4f83c1d58b548b526c02215da93eb7ed">LIST_FORALL_SAFE</a>(head, link, next) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portNoLink);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            ASSERT(<a class="code" href="Vport_8h.html#ae88d9a409778eaa19e4f153867bcf879">OvsIsTunnelVportType</a>(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>) ||</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;                   (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a> &amp;&amp;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a>) || vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> == TRUE);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            <a class="code" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a>(NULL, switchContext, vport, TRUE, TRUE);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    ASSERT(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a> == NULL);</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    ASSERT(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a> == NULL);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;}</div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_af65b9cf76d47a93178b3be08f4a8dd82"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">_OVS_SWITCH_CONTEXT::virtualExternalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY virtualExternalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:131</div></div>
<div class="ttc" id="Switch_8h_html_a2f7fcf0301ee7f5328a98c343dc37a6d"><div class="ttname"><a href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a></div><div class="ttdeci">#define OVS_MAX_VPORT_ARRAY_SIZE</div><div class="ttdef"><b>Definition:</b> Switch.h:27</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a79acfa977569d531ce6212c632515b93"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">_OVS_SWITCH_CONTEXT::internalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY internalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:132</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="Vport_8c_html_ac83bf787fa4f3e5fef189edfa60c7656"><div class="ttname"><a href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a></div><div class="ttdeci">NTSTATUS OvsRemoveAndDeleteVport(PVOID usrParamsContext, POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN hvDelete, BOOLEAN ovsDelete)</div><div class="ttdef"><b>Definition:</b> Vport.c:1143</div></div>
<div class="ttc" id="Util_8h_html_a4f83c1d58b548b526c02215da93eb7ed"><div class="ttname"><a href="Util_8h.html#a4f83c1d58b548b526c02215da93eb7ed">LIST_FORALL_SAFE</a></div><div class="ttdeci">#define LIST_FORALL_SAFE(_headPtr, _itemPtr, _nextPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:50</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a97cf517c028a820ff5c955c3b3bf7e10"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">_OVS_SWITCH_CONTEXT::portIdHashArray</a></div><div class="ttdeci">PLIST_ENTRY portIdHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:154</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_acacc0274b94607fd2a33eff3fa44f6ba"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">_OVS_SWITCH_CONTEXT::portNoHashArray</a></div><div class="ttdeci">PLIST_ENTRY portNoHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:155</div></div>
<div class="ttc" id="Vport_8h_html_ae88d9a409778eaa19e4f153867bcf879"><div class="ttname"><a href="Vport_8h.html#ae88d9a409778eaa19e4f153867bcf879">OvsIsTunnelVportType</a></div><div class="ttdeci">static __inline BOOLEAN OvsIsTunnelVportType(OVS_VPORT_TYPE ovsType)</div><div class="ttdef"><b>Definition:</b> Vport.h:180</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20a81513890208f58a777fa20ae21417"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static UINT32 OvsComputeVportNo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;{</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="comment">/* we are not allowed to create the port OVS_DPPORT_NUMBER_LOCAL */</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordflow">for</span> (ULONG i = <a class="code" href="Vport_8h.html#ac8c8f74b299f1a5c397e1e3e068ca726">OVS_DPPORT_NUMBER_LOCAL</a> + 1; i &lt; MAXUINT16; ++i) {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        vport = <a class="code" href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a>(switchContext, i);</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    }</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>;</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;}</div>
<div class="ttc" id="Vport_8h_html_ac8c8f74b299f1a5c397e1e3e068ca726"><div class="ttname"><a href="Vport_8h.html#ac8c8f74b299f1a5c397e1e3e068ca726">OVS_DPPORT_NUMBER_LOCAL</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_LOCAL</div><div class="ttdef"><b>Definition:</b> Vport.h:35</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Vport_8c_html_a090f0c9c725e5a23d2e1a968b7d9f7ae"><div class="ttname"><a href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortNo(POVS_SWITCH_CONTEXT switchContext, UINT32 portNo)</div><div class="ttdef"><b>Definition:</b> Vport.c:586</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f3127e58fe11d798433487b10a68952"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsConvertIfCountedStrToAnsiStr </td>
          <td>(</td>
          <td class="paramtype">PIF_COUNTED_STRING&#160;</td>
          <td class="paramname"><em>wStr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CHAR *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT16&#160;</td>
          <td class="paramname"><em>maxStrLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;{</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    ANSI_STRING astr;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    UNICODE_STRING ustr;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    NTSTATUS status;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    UINT32 size;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    ustr.Buffer = wStr-&gt;String;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;    ustr.Length = wStr-&gt;Length;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    ustr.MaximumLength = IF_MAX_STRING_SIZE;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    astr.Buffer = str;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    astr.MaximumLength = maxStrLen;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    astr.Length = 0;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    size = RtlUnicodeStringToAnsiSize(&amp;ustr);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">if</span> (size &gt; maxStrLen) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;        <span class="keywordflow">return</span> STATUS_BUFFER_OVERFLOW;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    }</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    status = RtlUnicodeStringToAnsiString(&amp;astr, &amp;ustr, FALSE);</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    ASSERT(status == STATUS_SUCCESS);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordflow">if</span> (status != STATUS_SUCCESS) {</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    ASSERT(astr.Length &lt;= maxStrLen);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    str[astr.Length] = 0;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a249132e832c59938a505c8ddb578b4cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NTSTATUS OvsCreateMsgFromVport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>&#160;</td>
          <td class="paramname"><em>msgIn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PVOID&#160;</td>
          <td class="paramname"><em>outBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>outBufLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpIfIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;{</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="struct__NL__BUF.html">NL_BUFFER</a> nlBuffer;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <a class="code" href="struct__OVS__VPORT__FULL__STATS.html">OVS_VPORT_FULL_STATS</a> vportStats;</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    BOOLEAN ok;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;    <a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a> nlMsg;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <a class="code" href="NetlinkBuf_8c.html#a3bf87c3d1c483b3584dbb2dd93fef166">NlBufInit</a>(&amp;nlBuffer, outBuffer, outBufLen);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    ok = <a class="code" href="Netlink_8c.html#ab7a04ec2aaf32b159a91b39f94b4ce03">NlFillOvsMsg</a>(&amp;nlBuffer, msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#ac3d4c36f077c5b965fc24092a135f5c1">nlmsgType</a>, <a class="code" href="NetlinkProto_8h.html#a245e7fde2fbbdeb3860899f50213ff35">NLM_F_MULTI</a>,</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                      msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a70240418e0ed64797a2552406daddaef">nlmsgSeq</a>, msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#ad5019307f94d29ae0dc68645a784d877">nlmsgPid</a>,</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                      msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a3c4bc71966cd34423839812673b44856">genlMsg</a>.<a class="code" href="struct__GENL__MSG__HDR.html#a7da6729294b8a9c7477e81853ee81742">cmd</a>, msgIn-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a3c4bc71966cd34423839812673b44856">genlMsg</a>.<a class="code" href="struct__GENL__MSG__HDR.html#a6a99723866a38852938519222bc14294">version</a>,</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                      dpIfIndex);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    }</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    }</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>);</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    ok = <a class="code" href="Netlink_8c.html#a586503ed86bd1da0033d941a901c9034">NlMsgPutTailString</a>(&amp;nlBuffer, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;<span class="comment">     * XXX: when we implement OVS_DP_ATTR_USER_FEATURES in datapath,</span></div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;<span class="comment">     * we&#39;ll need to check the OVS_DP_F_VPORT_PIDS flag: if it is set,</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;<span class="comment">     * it means we have an array of pids, instead of a single pid.</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;<span class="comment">     * ATM we assume we have one pid only.</span></div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    ok = <a class="code" href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a>(&amp;nlBuffer, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>,</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                         vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">upcallPid</a>);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    }</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="comment">/*stats*/</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    vportStats.rxPackets = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a273ac6beee117c9d5d6bf07d48d9950b">stats</a>.<a class="code" href="struct__OVS__VPORT__STATS.html#ad0bf9230caee3a15a80643aea0495f2e">rxPackets</a>;</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    vportStats.rxBytes = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a273ac6beee117c9d5d6bf07d48d9950b">stats</a>.<a class="code" href="struct__OVS__VPORT__STATS.html#a0501a78adfcaaee9fb0545d6ba024e69">rxBytes</a>;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    vportStats.txPackets = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a273ac6beee117c9d5d6bf07d48d9950b">stats</a>.<a class="code" href="struct__OVS__VPORT__STATS.html#a6d334e34db7769b04b3383dd1f0bbc36">txPackets</a>;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    vportStats.txBytes = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a273ac6beee117c9d5d6bf07d48d9950b">stats</a>.<a class="code" href="struct__OVS__VPORT__STATS.html#ac0af2f22bae23862f967bd827f0563fd">txBytes</a>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    vportStats.rxErrors = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#af5cffe51ac24d76701314f93438a21cd">errStats</a>.<a class="code" href="struct__OVS__VPORT__ERR__STATS.html#a105f5e003f448924525989012179c843">rxErrors</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    vportStats.txErrors = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#af5cffe51ac24d76701314f93438a21cd">errStats</a>.<a class="code" href="struct__OVS__VPORT__ERR__STATS.html#a6af2219b20dd7f3bb5711c204c41b98d">txErrors</a>;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    vportStats.rxDropped = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#af5cffe51ac24d76701314f93438a21cd">errStats</a>.<a class="code" href="struct__OVS__VPORT__ERR__STATS.html#ac4cace7baa873f9b01fafe2458cba7a7">rxDropped</a>;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    vportStats.txDropped = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#af5cffe51ac24d76701314f93438a21cd">errStats</a>.<a class="code" href="struct__OVS__VPORT__ERR__STATS.html#a529fb027d95724100e634829bdc43ef5">txDropped</a>;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    ok = <a class="code" href="Netlink_8c.html#a1d72727b952218ed8df4d9e131e07459">NlMsgPutTailUnspec</a>(&amp;nlBuffer, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dadab030c40c3510bf42f3e33d3986fbaa">OVS_VPORT_ATTR_STATS</a>,</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                            (PCHAR)&amp;vportStats,</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;                            <span class="keyword">sizeof</span>(<a class="code" href="struct__OVS__VPORT__FULL__STATS.html">OVS_VPORT_FULL_STATS</a>));</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span> (!ok) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;<span class="comment">     * XXX: when vxlan udp dest port becomes configurable, we will also need</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment">     * to add vport options</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    nlMsg = (<a class="code" href="NetlinkProto_8h.html#a4802a11c465d5c20e45c9a5060839220">PNL_MSG_HDR</a>)<a class="code" href="NetlinkBuf_8c.html#a81e9d2e4eb21d1d0582e3ec9b3331149">NlBufAt</a>(&amp;nlBuffer, 0, 0);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    nlMsg-&gt;<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a> = <a class="code" href="NetlinkBuf_8h.html#a67ec1c3dccb7a0f4d5b9acea805f0bb9">NlBufSize</a>(&amp;nlBuffer);</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;}</div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a70240418e0ed64797a2552406daddaef"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a70240418e0ed64797a2552406daddaef">_NL_MSG_HDR::nlmsgSeq</a></div><div class="ttdeci">UINT32 nlmsgSeq</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:82</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:271</div></div>
<div class="ttc" id="NetlinkBuf_8c_html_a81e9d2e4eb21d1d0582e3ec9b3331149"><div class="ttname"><a href="NetlinkBuf_8c.html#a81e9d2e4eb21d1d0582e3ec9b3331149">NlBufAt</a></div><div class="ttdeci">PCHAR NlBufAt(PNL_BUFFER nlBuf, UINT32 offset, UINT32 bufLen)</div><div class="ttdef"><b>Definition:</b> NetlinkBuf.c:285</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__VPORT__ERR__STATS_html_a529fb027d95724100e634829bdc43ef5"><div class="ttname"><a href="struct__OVS__VPORT__ERR__STATS.html#a529fb027d95724100e634829bdc43ef5">_OVS_VPORT_ERR_STATS::txDropped</a></div><div class="ttdeci">UINT64 txDropped</div><div class="ttdef"><b>Definition:</b> Vport.h:72</div></div>
<div class="ttc" id="struct__NL__BUF_html"><div class="ttname"><a href="struct__NL__BUF.html">_NL_BUF</a></div><div class="ttdef"><b>Definition:</b> NetlinkBuf.h:20</div></div>
<div class="ttc" id="struct__OVS__VPORT__STATS_html_a6d334e34db7769b04b3383dd1f0bbc36"><div class="ttname"><a href="struct__OVS__VPORT__STATS.html#a6d334e34db7769b04b3383dd1f0bbc36">_OVS_VPORT_STATS::txPackets</a></div><div class="ttdeci">UINT64 txPackets</div><div class="ttdef"><b>Definition:</b> Vport.h:63</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a273ac6beee117c9d5d6bf07d48d9950b"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a273ac6beee117c9d5d6bf07d48d9950b">_OVS_VPORT_ENTRY::stats</a></div><div class="ttdeci">OVS_VPORT_STATS stats</div><div class="ttdef"><b>Definition:</b> Vport.h:93</div></div>
<div class="ttc" id="struct__OVS__VPORT__ERR__STATS_html_a105f5e003f448924525989012179c843"><div class="ttname"><a href="struct__OVS__VPORT__ERR__STATS.html#a105f5e003f448924525989012179c843">_OVS_VPORT_ERR_STATS::rxErrors</a></div><div class="ttdeci">UINT64 rxErrors</div><div class="ttdef"><b>Definition:</b> Vport.h:69</div></div>
<div class="ttc" id="struct__OVS__VPORT__STATS_html_ac0af2f22bae23862f967bd827f0563fd"><div class="ttname"><a href="struct__OVS__VPORT__STATS.html#ac0af2f22bae23862f967bd827f0563fd">_OVS_VPORT_STATS::txBytes</a></div><div class="ttdeci">UINT64 txBytes</div><div class="ttdef"><b>Definition:</b> Vport.h:65</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="struct__GENL__MSG__HDR_html_a6a99723866a38852938519222bc14294"><div class="ttname"><a href="struct__GENL__MSG__HDR.html#a6a99723866a38852938519222bc14294">_GENL_MSG_HDR::version</a></div><div class="ttdeci">UINT8 version</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:96</div></div>
<div class="ttc" id="Netlink_8c_html_ab7a04ec2aaf32b159a91b39f94b4ce03"><div class="ttname"><a href="Netlink_8c.html#ab7a04ec2aaf32b159a91b39f94b4ce03">NlFillOvsMsg</a></div><div class="ttdeci">BOOLEAN NlFillOvsMsg(PNL_BUFFER nlBuf, UINT16 nlmsgType, UINT16 nlmsgFlags, UINT32 nlmsgSeq, UINT32 nlmsgPid, UINT8 genlCmd, UINT8 genlVer, UINT32 dpNo)</div><div class="ttdef"><b>Definition:</b> Netlink.c:43</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a00587ba4288da005a3dfcb7491787616"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">_OVS_VPORT_ENTRY::upcallPid</a></div><div class="ttdeci">UINT32 upcallPid</div><div class="ttdef"><b>Definition:</b> Vport.h:133</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a4802a11c465d5c20e45c9a5060839220"><div class="ttname"><a href="NetlinkProto_8h.html#a4802a11c465d5c20e45c9a5060839220">PNL_MSG_HDR</a></div><div class="ttdeci">struct _NL_MSG_HDR * PNL_MSG_HDR</div></div>
<div class="ttc" id="struct__OVS__VPORT__FULL__STATS_html"><div class="ttname"><a href="struct__OVS__VPORT__FULL__STATS.html">_OVS_VPORT_FULL_STATS</a></div><div class="ttdef"><b>Definition:</b> Vport.h:76</div></div>
<div class="ttc" id="struct__OVS__VPORT__ERR__STATS_html_ac4cace7baa873f9b01fafe2458cba7a7"><div class="ttname"><a href="struct__OVS__VPORT__ERR__STATS.html#ac4cace7baa873f9b01fafe2458cba7a7">_OVS_VPORT_ERR_STATS::rxDropped</a></div><div class="ttdeci">UINT64 rxDropped</div><div class="ttdef"><b>Definition:</b> Vport.h:71</div></div>
<div class="ttc" id="struct__OVS__MESSAGE_html_a3c4bc71966cd34423839812673b44856"><div class="ttname"><a href="struct__OVS__MESSAGE.html#a3c4bc71966cd34423839812673b44856">_OVS_MESSAGE::genlMsg</a></div><div class="ttdeci">GENL_MSG_HDR genlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:30</div></div>
<div class="ttc" id="Netlink_8c_html_aa2017d84e37c7fbddbe0bbf86d2e54f6"><div class="ttname"><a href="Netlink_8c.html#aa2017d84e37c7fbddbe0bbf86d2e54f6">NlMsgPutTailU32</a></div><div class="ttdeci">BOOLEAN NlMsgPutTailU32(PNL_BUFFER buf, UINT16 type, UINT32 value)</div><div class="ttdef"><b>Definition:</b> Netlink.c:302</div></div>
<div class="ttc" id="Netlink_8c_html_a586503ed86bd1da0033d941a901c9034"><div class="ttname"><a href="Netlink_8c.html#a586503ed86bd1da0033d941a901c9034">NlMsgPutTailString</a></div><div class="ttdeci">BOOLEAN NlMsgPutTailString(PNL_BUFFER buf, UINT16 type, PCHAR value)</div><div class="ttdef"><b>Definition:</b> Netlink.c:326</div></div>
<div class="ttc" id="struct__GENL__MSG__HDR_html_a7da6729294b8a9c7477e81853ee81742"><div class="ttname"><a href="struct__GENL__MSG__HDR.html#a7da6729294b8a9c7477e81853ee81742">_GENL_MSG_HDR::cmd</a></div><div class="ttdeci">UINT8 cmd</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:95</div></div>
<div class="ttc" id="struct__OVS__MESSAGE_html_a32c769d75a0cf4c1ccc469a35bf4da57"><div class="ttname"><a href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">_OVS_MESSAGE::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:29</div></div>
<div class="ttc" id="NetlinkBuf_8h_html_a67ec1c3dccb7a0f4d5b9acea805f0bb9"><div class="ttname"><a href="NetlinkBuf_8h.html#a67ec1c3dccb7a0f4d5b9acea805f0bb9">NlBufSize</a></div><div class="ttdeci">static __inline UINT32 NlBufSize(PNL_BUFFER nlBuf)</div><div class="ttdef"><b>Definition:</b> NetlinkBuf.h:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__STATS_html_a0501a78adfcaaee9fb0545d6ba024e69"><div class="ttname"><a href="struct__OVS__VPORT__STATS.html#a0501a78adfcaaee9fb0545d6ba024e69">_OVS_VPORT_STATS::rxBytes</a></div><div class="ttdeci">UINT64 rxBytes</div><div class="ttdef"><b>Definition:</b> Vport.h:64</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:274</div></div>
<div class="ttc" id="struct__OVS__VPORT__ERR__STATS_html_a6af2219b20dd7f3bb5711c204c41b98d"><div class="ttname"><a href="struct__OVS__VPORT__ERR__STATS.html#a6af2219b20dd7f3bb5711c204c41b98d">_OVS_VPORT_ERR_STATS::txErrors</a></div><div class="ttdeci">UINT64 txErrors</div><div class="ttdef"><b>Definition:</b> Vport.h:70</div></div>
<div class="ttc" id="NetlinkBuf_8c_html_a3bf87c3d1c483b3584dbb2dd93fef166"><div class="ttname"><a href="NetlinkBuf_8c.html#a3bf87c3d1c483b3584dbb2dd93fef166">NlBufInit</a></div><div class="ttdeci">VOID NlBufInit(PNL_BUFFER nlBuf, PCHAR base, UINT32 size)</div><div class="ttdef"><b>Definition:</b> NetlinkBuf.c:85</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_ac3d4c36f077c5b965fc24092a135f5c1"><div class="ttname"><a href="struct__NL__MSG__HDR.html#ac3d4c36f077c5b965fc24092a135f5c1">_NL_MSG_HDR::nlmsgType</a></div><div class="ttdeci">UINT16 nlmsgType</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:80</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:270</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_ad5019307f94d29ae0dc68645a784d877"><div class="ttname"><a href="struct__NL__MSG__HDR.html#ad5019307f94d29ae0dc68645a784d877">_NL_MSG_HDR::nlmsgPid</a></div><div class="ttdeci">UINT32 nlmsgPid</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:83</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a245e7fde2fbbdeb3860899f50213ff35"><div class="ttname"><a href="NetlinkProto_8h.html#a245e7fde2fbbdeb3860899f50213ff35">NLM_F_MULTI</a></div><div class="ttdeci">#define NLM_F_MULTI</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__STATS_html_ad0bf9230caee3a15a80643aea0495f2e"><div class="ttname"><a href="struct__OVS__VPORT__STATS.html#ad0bf9230caee3a15a80643aea0495f2e">_OVS_VPORT_STATS::rxPackets</a></div><div class="ttdeci">UINT64 rxPackets</div><div class="ttdef"><b>Definition:</b> Vport.h:62</div></div>
<div class="ttc" id="Netlink_8c_html_a1d72727b952218ed8df4d9e131e07459"><div class="ttname"><a href="Netlink_8c.html#a1d72727b952218ed8df4d9e131e07459">NlMsgPutTailUnspec</a></div><div class="ttdeci">BOOLEAN NlMsgPutTailUnspec(PNL_BUFFER buf, UINT16 type, PCHAR data, UINT16 len)</div><div class="ttdef"><b>Definition:</b> Netlink.c:236</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_af5cffe51ac24d76701314f93438a21cd"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#af5cffe51ac24d76701314f93438a21cd">_OVS_VPORT_ENTRY::errStats</a></div><div class="ttdeci">OVS_VPORT_ERR_STATS errStats</div><div class="ttdef"><b>Definition:</b> Vport.h:94</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464dadab030c40c3510bf42f3e33d3986fbaa"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dadab030c40c3510bf42f3e33d3986fbaa">OVS_VPORT_ATTR_STATS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:276</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9d07962a3469e85305abe45dff1ec839"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsDeleteVportCmdHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;{</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    NDIS_STATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    PSTR portName = NULL;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    UINT32 portNameLen = 0;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__NL__POLICY.html">NL_POLICY</a> ovsVportPolicy[] = {</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] = { .<a class="code" href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">type</a> = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = TRUE },</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a>, .maxLen = <a class="code" href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a>,</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                                  .optional = TRUE },</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    };</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> vportAttrs[<a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy)];</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a> != NULL);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn,</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <a class="code" href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a>,</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <a class="code" href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn),</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;        ovsVportPolicy, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy),</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        vportAttrs, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(vportAttrs))) {</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    }</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="comment">/* Output buffer has been validated while validating transact dev op. */</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    ASSERT(msgOut != NULL &amp;&amp; usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a> &gt;= <span class="keyword">sizeof</span> *msgOut);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    NdisAcquireRWLockWrite(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] != NULL) {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;        portName = <a class="code" href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        portNameLen = <a class="code" href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="comment">/* the port name is expected to be null-terminated */</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;        ASSERT(portName[portNameLen - 1] == <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;        vport = <a class="code" href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, portName);</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    }</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] != NULL) {</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        vport = <a class="code" href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>,</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>]));</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    }</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a>;</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    }</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    status = <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport, msgIn, usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>,</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;                                   usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>,</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;                                   <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment">     * Mark the port as deleted from OVS userspace. If the port does not exist</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment">     * on the Hyper-V switch, it gets deallocated. Otherwise, it stays.</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    status = <a class="code" href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a>(usrParamsCtx,</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;                                     <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>,</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;                                     vport,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                                     FALSE,</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                                     TRUE);</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">if</span> (status) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a>(status);</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    }</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;Cleanup:</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordflow">if</span> ((nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>) &amp;&amp; (nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a6b06db35fcc63fd516b270d58e64ed1e">NL_ERROR_PENDING</a>)) {</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>)</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;            usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    }</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <span class="keywordflow">return</span> (status == STATUS_PENDING) ? STATUS_PENDING : STATUS_SUCCESS;</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="NetlinkError_8h_html_a38751c98cd93e07a0640906c35240f72"><div class="ttname"><a href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a></div><div class="ttdeci">static __inline NlMapStatusToNlErr(NTSTATUS status)</div><div class="ttdef"><b>Definition:</b> NetlinkError.h:205</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a68fbbe51bd90e0cdc0c832f8617d7552"><div class="ttname"><a href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a></div><div class="ttdeci">#define NLMSG_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:114</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="Netlink_8c_html_a04e9e923292d2fafae3b7d0d5f7086ac"><div class="ttname"><a href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a></div><div class="ttdeci">UINT32 NlAttrGetU32(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:921</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:29</div></div>
<div class="ttc" id="struct__NL__POLICY_html"><div class="ttname"><a href="struct__NL__POLICY.html">_NL_POLICY</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:64</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="Netlink_8c_html_aaf271cb15547bb69ad81531657bf10ab"><div class="ttname"><a href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a></div><div class="ttdeci">UINT32 NlMsgAttrsLen(const PNL_MSG_HDR nlh)</div><div class="ttdef"><b>Definition:</b> Netlink.c:665</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a5cacfa504d6e21aca543ef5f3c7b920e"><div class="ttname"><a href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a></div><div class="ttdeci">#define OVS_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:116</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="Vport_8c_html_ac83bf787fa4f3e5fef189edfa60c7656"><div class="ttname"><a href="Vport_8c.html#ac83bf787fa4f3e5fef189edfa60c7656">OvsRemoveAndDeleteVport</a></div><div class="ttdeci">NTSTATUS OvsRemoveAndDeleteVport(PVOID usrParamsContext, POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN hvDelete, BOOLEAN ovsDelete)</div><div class="ttdef"><b>Definition:</b> Vport.c:1143</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="DpInternal_8h_html_acd06da230a96d3b7e6f193c5b3142002"><div class="ttname"><a href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a></div><div class="ttdeci">#define IFNAMSIZ</div><div class="ttdef"><b>Definition:</b> DpInternal.h:21</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a6b06db35fcc63fd516b270d58e64ed1e"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a6b06db35fcc63fd516b270d58e64ed1e">NL_ERROR_PENDING</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:201</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:66</div></div>
<div class="ttc" id="Vport_8c_html_a090f0c9c725e5a23d2e1a968b7d9f7ae"><div class="ttname"><a href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortNo(POVS_SWITCH_CONTEXT switchContext, UINT32 portNo)</div><div class="ttdef"><b>Definition:</b> Vport.c:586</div></div>
<div class="ttc" id="Netlink_8c_html_a18aba720e92e88602da80f252d1535d5"><div class="ttname"><a href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a></div><div class="ttdeci">UINT32 NlAttrGetSize(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:808</div></div>
<div class="ttc" id="Util_8h_html_af4761d64884360f7fb99d05371fc53f0"><div class="ttname"><a href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:69</div></div>
<div class="ttc" id="Netlink_8c_html_a7fcd17b677a86abb0d962e287269ea5d"><div class="ttname"><a href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a></div><div class="ttdeci">const PVOID NlAttrGet(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:819</div></div>
<div class="ttc" id="Vport_8c_html_a0b1bcf9f40b33a92023a597c4886c3aa"><div class="ttname"><a href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByOvsName(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:626</div></div>
<div class="ttc" id="NetlinkProto_8h_html_ae613cef4b7f9f12345978d605230f78f"><div class="ttname"><a href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a></div><div class="ttdeci">#define GENL_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:115</div></div>
<div class="ttc" id="struct__NL__ATTR_html"><div class="ttname"><a href="struct__NL__ATTR.html">_NL_ATTR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:102</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:270</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__NL__POLICY_html_aa03de43c15a9f143c7fba8924f5b630f"><div class="ttname"><a href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">_NL_POLICY::type</a></div><div class="ttdeci">NL_ATTR_TYPE type</div><div class="ttdef"><b>Definition:</b> Netlink.h:66</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a7992da73dff83938486e53dbe879e35b"><div class="ttname"><a href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a></div><div class="ttdeci">BOOLEAN NlAttrParse(const PNL_MSG_HDR nlMsg, UINT32 attrOffset, UINT32 totalAttrLen, const NL_POLICY policy[], const UINT32 numPolicy, PNL_ATTR attrs[], UINT32 numAttrs)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1047</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:52</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3cae03cb2cffdbd2577ba5ceac57468a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsFindTunnelVportByDstPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT16&#160;</td>
          <td class="paramname"><em>dstPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="OvsDpInterfaceExt_8h.html#a4662d316777fe03a616ac573ed86b0f3">OVS_VPORT_TYPE</a>&#160;</td>
          <td class="paramname"><em>ovsPortType</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    PLIST_ENTRY head, link;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    UINT32 hash = <a class="code" href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a>((<span class="keyword">const</span> VOID *)&amp;dstPort, <span class="keyword">sizeof</span>(dstPort),</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab9a1af0ee641044bd10adb415b67d88a">tunnelVportsArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>]);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, tunnelVportLink);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Vport_8h.html#a325ed79687efd244fe187535c096e09f">GetPortFromPriv</a>(vport) == dstPort &amp;&amp;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> == ovsPortType) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div>
<div class="ttc" id="Util_8h_html_a0dea3b8fd64bbe42903d57549280b219"><div class="ttname"><a href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a></div><div class="ttdeci">#define LIST_FORALL(_headPtr, _itemPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab9a1af0ee641044bd10adb415b67d88a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab9a1af0ee641044bd10adb415b67d88a">_OVS_SWITCH_CONTEXT::tunnelVportsArray</a></div><div class="ttdeci">PLIST_ENTRY tunnelVportsArray</div><div class="ttdef"><b>Definition:</b> Switch.h:156</div></div>
<div class="ttc" id="Vport_8h_html_a325ed79687efd244fe187535c096e09f"><div class="ttname"><a href="Vport_8h.html#a325ed79687efd244fe187535c096e09f">GetPortFromPriv</a></div><div class="ttdeci">static __inline UINT16 GetPortFromPriv(POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Vport.h:227</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="Jhash_8c_html_adb3244bfa1a09fa88e21ce1eb9508c1b"><div class="ttname"><a href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a></div><div class="ttdeci">UINT32 OvsJhashBytes(const VOID *p_, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:101</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_af4d564aefaa4a7d097a2eb263dee396a"><div class="ttname"><a href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a></div><div class="ttdeci">#define OVS_HASH_BASIS</div><div class="ttdef"><b>Definition:</b> Switch.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a17e310b20a6deebddb71ffbabb053b36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsFindVportByHvNameA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PSTR&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="comment">/* &#39;portFriendlyName&#39; is not NUL-terminated. */</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    SIZE_T length = strlen(<a class="code" href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">name</a>);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    SIZE_T wstrSize = length * <span class="keyword">sizeof</span>(WCHAR);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    UINT i;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    PWSTR wsName = <a class="code" href="Util_8c.html#ac8f761db04ca2512e0c5b157ab5a8e6a">OvsAllocateMemoryWithTag</a>(wstrSize, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (!wsName) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; length; i++) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        wsName[i] = <a class="code" href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">name</a>[i];</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    vport = <a class="code" href="Vport_8c.html#a36642898aec68a2684a3b668f1b4a851">OvsFindVportByHvNameW</a>(switchContext, wsName, wstrSize);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(wsName, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;}</div>
<div class="ttc" id="Util_8c_html_ac8f761db04ca2512e0c5b157ab5a8e6a"><div class="ttname"><a href="Util_8c.html#ac8f761db04ca2512e0c5b157ab5a8e6a">OvsAllocateMemoryWithTag</a></div><div class="ttdeci">VOID * OvsAllocateMemoryWithTag(size_t size, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:28</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Vport_8c_html_a36642898aec68a2684a3b668f1b4a851"><div class="ttname"><a href="Vport_8c.html#a36642898aec68a2684a3b668f1b4a851">OvsFindVportByHvNameW</a></div><div class="ttdeci">static POVS_VPORT_ENTRY OvsFindVportByHvNameW(POVS_SWITCH_CONTEXT switchContext, PWSTR wsName, SIZE_T wstrSize)</div><div class="ttdef"><b>Definition:</b> Vport.c:649</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="namespacesetup_html_a61de3710bf6c9d78c0afa352263f8b09"><div class="ttname"><a href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">setup.name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> setup.py:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a36642898aec68a2684a3b668f1b4a851"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsFindVportByHvNameW </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PWSTR&#160;</td>
          <td class="paramname"><em>wsName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SIZE_T&#160;</td>
          <td class="paramname"><em>wstrSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    PLIST_ENTRY head, link;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    UINT i;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a>; i++) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">portIdHashArray</a>[i]);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portIdLink);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">             * NOTE about portFriendlyName:</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">             * If the string is NULL-terminated, the Length member does not</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">             * include the terminating NULL character.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.Length == wstrSize &amp;&amp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                RtlEqualMemory(wsName, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.String,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                               vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.Length)) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            vport = NULL;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        }</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">     * Look in the list of ports that were added from the Hyper-V switch and</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">     * deleted.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a>; i++) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">portNoHashArray</a>[i]);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portNoLink);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.Length == wstrSize &amp;&amp;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                    RtlEqualMemory(wsName, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.String,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                   vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>.Length)) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                    <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                vport = NULL;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    }</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;Cleanup:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="ttc" id="Util_8h_html_a0dea3b8fd64bbe42903d57549280b219"><div class="ttname"><a href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a></div><div class="ttdeci">#define LIST_FORALL(_headPtr, _itemPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:45</div></div>
<div class="ttc" id="Switch_8h_html_a2f7fcf0301ee7f5328a98c343dc37a6d"><div class="ttname"><a href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a></div><div class="ttdeci">#define OVS_MAX_VPORT_ARRAY_SIZE</div><div class="ttdef"><b>Definition:</b> Switch.h:27</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a97cf517c028a820ff5c955c3b3bf7e10"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">_OVS_SWITCH_CONTEXT::portIdHashArray</a></div><div class="ttdeci">PLIST_ENTRY portIdHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:154</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3d3cf73768a68e5b623f4759635f217a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">_OVS_VPORT_ENTRY::portFriendlyName</a></div><div class="ttdeci">IF_COUNTED_STRING portFriendlyName</div><div class="ttdef"><b>Definition:</b> Vport.h:113</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_acacc0274b94607fd2a33eff3fa44f6ba"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">_OVS_SWITCH_CONTEXT::portNoHashArray</a></div><div class="ttdeci">PLIST_ENTRY portNoHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:155</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b1bcf9f40b33a92023a597c4886c3aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsFindVportByOvsName </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PSTR&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    PLIST_ENTRY head, link;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    UINT32 hash;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    SIZE_T length = strlen(<a class="code" href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">name</a>) + 1;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    hash = <a class="code" href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a>((<span class="keyword">const</span> VOID *)<a class="code" href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">name</a>, length, <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a56854c5ea63ed7a29b0f0954fedfc19b">ovsPortNameHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>]);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, ovsNameLink);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">if</span> (!strcmp(<a class="code" href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">name</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>)) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="ttc" id="Util_8h_html_a0dea3b8fd64bbe42903d57549280b219"><div class="ttname"><a href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a></div><div class="ttdeci">#define LIST_FORALL(_headPtr, _itemPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:45</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a56854c5ea63ed7a29b0f0954fedfc19b"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a56854c5ea63ed7a29b0f0954fedfc19b">_OVS_SWITCH_CONTEXT::ovsPortNameHashArray</a></div><div class="ttdeci">PLIST_ENTRY ovsPortNameHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:157</div></div>
<div class="ttc" id="Jhash_8c_html_adb3244bfa1a09fa88e21ce1eb9508c1b"><div class="ttname"><a href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a></div><div class="ttdeci">UINT32 OvsJhashBytes(const VOID *p_, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:101</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_af4d564aefaa4a7d097a2eb263dee396a"><div class="ttname"><a href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a></div><div class="ttdeci">#define OVS_HASH_BASIS</div><div class="ttdef"><b>Definition:</b> Switch.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="namespacesetup_html_a61de3710bf6c9d78c0afa352263f8b09"><div class="ttname"><a href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">setup.name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> setup.py:30</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab17cc616b760eefd28b8465a9ad9bdfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsFindVportByPortIdAndNicIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NDIS_SWITCH_PORT_ID&#160;</td>
          <td class="paramname"><em>portId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NDIS_SWITCH_NIC_INDEX&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> (switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a> &amp;&amp;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            portId == switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a65334e167df16ba6fa1c3b169f239424">virtualExternalPortId</a> &amp;&amp;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            index == switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a>-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a>) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a>)switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a> &amp;&amp;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;               portId == switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a32b1e8d96a1b48d9520b079e1685f397">internalPortId</a> &amp;&amp;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;               index == switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a>-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a>) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a>)switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        PLIST_ENTRY head, link;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        UINT32 hash;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        hash = <a class="code" href="Jhash_8c.html#a32f537458a183199bddfc7cde2a7bfee">OvsJhashWords</a>((UINT32 *)&amp;portId, 1, <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">portIdHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>]);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portIdLink);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">if</span> (portId == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a> &amp;&amp; index == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a>) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_af65b9cf76d47a93178b3be08f4a8dd82"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">_OVS_SWITCH_CONTEXT::virtualExternalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY virtualExternalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:131</div></div>
<div class="ttc" id="Util_8h_html_a0dea3b8fd64bbe42903d57549280b219"><div class="ttname"><a href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a></div><div class="ttdeci">#define LIST_FORALL(_headPtr, _itemPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:45</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a79acfa977569d531ce6212c632515b93"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">_OVS_SWITCH_CONTEXT::internalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY internalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:132</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a97cf517c028a820ff5c955c3b3bf7e10"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a97cf517c028a820ff5c955c3b3bf7e10">_OVS_SWITCH_CONTEXT::portIdHashArray</a></div><div class="ttdeci">PLIST_ENTRY portIdHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:154</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a65334e167df16ba6fa1c3b169f239424"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a65334e167df16ba6fa1c3b169f239424">_OVS_SWITCH_CONTEXT::virtualExternalPortId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID virtualExternalPortId</div><div class="ttdef"><b>Definition:</b> Switch.h:129</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a32b1e8d96a1b48d9520b079e1685f397"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a32b1e8d96a1b48d9520b079e1685f397">_OVS_SWITCH_CONTEXT::internalPortId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID internalPortId</div><div class="ttdef"><b>Definition:</b> Switch.h:130</div></div>
<div class="ttc" id="Switch_8h_html_af4d564aefaa4a7d097a2eb263dee396a"><div class="ttname"><a href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a></div><div class="ttdeci">#define OVS_HASH_BASIS</div><div class="ttdef"><b>Definition:</b> Switch.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
<div class="ttc" id="Jhash_8c_html_a32f537458a183199bddfc7cde2a7bfee"><div class="ttname"><a href="Jhash_8c.html#a32f537458a183199bddfc7cde2a7bfee">OvsJhashWords</a></div><div class="ttdeci">UINT32 OvsJhashWords(const UINT32 *p, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:64</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a090f0c9c725e5a23d2e1a968b7d9f7ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a> OvsFindVportByPortNo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>portNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    PLIST_ENTRY head, link;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    UINT32 hash = <a class="code" href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a>((<span class="keyword">const</span> VOID *)&amp;portNo, <span class="keyword">sizeof</span>(portNo),</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                <a class="code" href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    head = &amp;(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">portNoHashArray</a>[hash &amp; <a class="code" href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a>]);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portNoLink);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> == portNo) {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;}</div>
<div class="ttc" id="Util_8h_html_a0dea3b8fd64bbe42903d57549280b219"><div class="ttname"><a href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a></div><div class="ttdeci">#define LIST_FORALL(_headPtr, _itemPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:45</div></div>
<div class="ttc" id="Switch_8h_html_aa74f66d8afe68b9421b14fd14899ea9b"><div class="ttname"><a href="Switch_8h.html#aa74f66d8afe68b9421b14fd14899ea9b">OVS_VPORT_MASK</a></div><div class="ttdeci">#define OVS_VPORT_MASK</div><div class="ttdef"><b>Definition:</b> Switch.h:30</div></div>
<div class="ttc" id="Jhash_8c_html_adb3244bfa1a09fa88e21ce1eb9508c1b"><div class="ttname"><a href="Jhash_8c.html#adb3244bfa1a09fa88e21ce1eb9508c1b">OvsJhashBytes</a></div><div class="ttdeci">UINT32 OvsJhashBytes(const VOID *p_, SIZE_T n, UINT32 basis)</div><div class="ttdef"><b>Definition:</b> Jhash.c:101</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_af4d564aefaa4a7d097a2eb263dee396a"><div class="ttname"><a href="Switch_8h.html#af4d564aefaa4a7d097a2eb263dee396a">OVS_HASH_BASIS</a></div><div class="ttdeci">#define OVS_HASH_BASIS</div><div class="ttdef"><b>Definition:</b> Switch.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_acacc0274b94607fd2a33eff3fa44f6ba"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">_OVS_SWITCH_CONTEXT::portNoHashArray</a></div><div class="ttdeci">PLIST_ENTRY portNoHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:155</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80c0fe173bd8a2ff75b51bd927b8ef07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsGetExtInfoIoctl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="DpInternal_8h.html#a5bded77307d7298cc2b780a0459d64bf">POVS_VPORT_GET</a>&#160;</td>
          <td class="paramname"><em>vportGet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="DpInternal_8h.html#a4b0f2f53350455b737fc230fa636fd29">POVS_VPORT_EXT_INFO</a>&#160;</td>
          <td class="paramname"><em>extInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;{</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keywordtype">size_t</span> len;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    NTSTATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    BOOLEAN doConvert = FALSE;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    RtlZeroMemory(extInfo, <span class="keyword">sizeof</span> (<a class="code" href="struct__OVS__VPORT__EXT__INFO.html">POVS_VPORT_EXT_INFO</a>));</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    NdisAcquireRWLockRead(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">if</span> (vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">portNo</a> == 0) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        StringCbLengthA(vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">name</a>, <a class="code" href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a> - 1, &amp;len);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        vport = <a class="code" href="Vport_8c.html#a17e310b20a6deebddb71ffbabb053b36">OvsFindVportByHvNameA</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">name</a>);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <span class="keywordflow">if</span> (vport != NULL) {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;            <span class="comment">/* If the port is not a Hyper-V port and it has been added earlier,</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment">             * we&#39;ll find it in &#39;ovsPortNameHashArray&#39;. */</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;            vport = <a class="code" href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">name</a>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        }</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        vport = <a class="code" href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">portNo</a>);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (vport == NULL || (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> != <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a> &amp;&amp;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                          vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> != <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>)) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        <span class="keywordflow">if</span> (vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">portNo</a>) {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;vport %u does not exist any more&quot;</span>, vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">portNo</a>);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            <a class="code" href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a>(<span class="stringliteral">&quot;vport %s does not exist any more&quot;</span>, vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">name</a>);</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        }</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        status = STATUS_DEVICE_DOES_NOT_EXIST;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <span class="keywordflow">goto</span> ext_info_done;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    }</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a15613d0787ab8db53d58daa21a36a5a8">dpNo</a> = vportGet-&gt;<a class="code" href="struct__OVS__VPORT__GET.html#a066d2f69a033cee9bace4f80e6601f1d">dpNo</a>;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a2f985a5912dbcfafbecdf01246a747e3">portNo</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    RtlCopyMemory(extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a75e17d5e4cdfdce76d9a2fc6fd7d5db3">macAddress</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>,</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                  sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>));</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    RtlCopyMemory(extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a9d7a9cc664eab9e619814ff751d033c8">permMACAddress</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>,</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                  sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>));</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a>) {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;        RtlCopyMemory(extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a60e380d5ade77b129e7ac3f367aa1da6">vmMACAddress</a>, vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>,</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                      sizeof (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>));</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a391fdfcca7a37d5d7fa04f441abc9d9e">nicIndex</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a896c5b5f41247112dc91f1085ced70e3">portId</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a6b753bce04ae63eef6edf0a3db99a0b4">type</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a2983598a82c89620810b915e7ffaaf64">mtu</a> = vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">mtu</a>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">     * TO be revisit XXX</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>) {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;       extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a696e62816b066d68729244aaf390fc48">status</a> = <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a> | <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a200bd0cf1b367f24165db97f8ac6f13a">OVS_EVENT_LINK_DOWN</a>;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>) {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;       extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a696e62816b066d68729244aaf390fc48">status</a> = <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a> | <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489">OVS_EVENT_LINK_UP</a>;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;       extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a696e62816b066d68729244aaf390fc48">status</a> = <a class="code" href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a296aabcee1efde54badbb9919f223df3">OVS_EVENT_DISCONNECT</a>;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a6b753bce04ae63eef6edf0a3db99a0b4">type</a> == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a> &amp;&amp;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;        (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>  ||</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;         vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>)) {</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        doConvert = TRUE;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a8060d19b668984518bba33918b9492d7">vmUUID</a>[0] = 0;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a306dc85c70acbf82737f04a2a01f0585">vifUUID</a>[0] = 0;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordflow">if</span> (doConvert) {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        status = <a class="code" href="Vport_8c.html#a2f3127e58fe11d798433487b10a68952">OvsConvertIfCountedStrToAnsiStr</a>(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>,</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                                 extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#ac7866cce537f9820e987a60702d92a3e">name</a>,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                                                 <a class="code" href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a>);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;        <span class="keywordflow">if</span> (status != STATUS_SUCCESS) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            <a class="code" href="Debug_8h.html#a37173c262a73867ab875e165e9baf6b6">OVS_LOG_INFO</a>(<span class="stringliteral">&quot;Fail to convert NIC name.&quot;</span>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;            extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a8060d19b668984518bba33918b9492d7">vmUUID</a>[0] = 0;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        }</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        status = <a class="code" href="Vport_8c.html#a2f3127e58fe11d798433487b10a68952">OvsConvertIfCountedStrToAnsiStr</a>(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac38dabf00b4f72777c007823717f7ed5">vmName</a>,</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                                                 extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a8060d19b668984518bba33918b9492d7">vmUUID</a>,</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                                                 <a class="code" href="DpInternal_8h.html#aaa97f38984e9452bdd88fe7e62ef3296">OVS_MAX_VM_UUID_LEN</a>);</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">if</span> (status != STATUS_SUCCESS) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            <a class="code" href="Debug_8h.html#a37173c262a73867ab875e165e9baf6b6">OVS_LOG_INFO</a>(<span class="stringliteral">&quot;Fail to convert VM name.&quot;</span>);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a8060d19b668984518bba33918b9492d7">vmUUID</a>[0] = 0;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        status = <a class="code" href="Vport_8c.html#a2f3127e58fe11d798433487b10a68952">OvsConvertIfCountedStrToAnsiStr</a>(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a1acd80b0796c389084b6139d8577fb54">nicName</a>,</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                                                 extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a306dc85c70acbf82737f04a2a01f0585">vifUUID</a>,</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                                                 <a class="code" href="DpInternal_8h.html#af2e7b05b4810496aa937ea16936cdb32">OVS_MAX_VIF_UUID_LEN</a>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keywordflow">if</span> (status != STATUS_SUCCESS) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            <a class="code" href="Debug_8h.html#a37173c262a73867ab875e165e9baf6b6">OVS_LOG_INFO</a>(<span class="stringliteral">&quot;Fail to convert nic UUID&quot;</span>);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            extInfo-&gt;<a class="code" href="struct__OVS__VPORT__EXT__INFO.html#a306dc85c70acbf82737f04a2a01f0585">vifUUID</a>[0] = 0;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment">         * for now ignore status</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;        status = STATUS_SUCCESS;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;ext_info_done:</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;}</div>
<div class="ttc" id="Vport_8c_html_a2f3127e58fe11d798433487b10a68952"><div class="ttname"><a href="Vport_8c.html#a2f3127e58fe11d798433487b10a68952">OvsConvertIfCountedStrToAnsiStr</a></div><div class="ttdeci">NTSTATUS OvsConvertIfCountedStrToAnsiStr(PIF_COUNTED_STRING wStr, CHAR *str, UINT16 maxStrLen)</div><div class="ttdef"><b>Definition:</b> Vport.c:1463</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a9d7a9cc664eab9e619814ff751d033c8"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a9d7a9cc664eab9e619814ff751d033c8">_OVS_VPORT_EXT_INFO::permMACAddress</a></div><div class="ttdeci">uint8_t permMACAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:45</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a8060d19b668984518bba33918b9492d7"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a8060d19b668984518bba33918b9492d7">_OVS_VPORT_EXT_INFO::vmUUID</a></div><div class="ttdeci">char vmUUID[OVS_MAX_VM_UUID_LEN]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:53</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a60e380d5ade77b129e7ac3f367aa1da6"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a60e380d5ade77b129e7ac3f367aa1da6">_OVS_VPORT_EXT_INFO::vmMACAddress</a></div><div class="ttdeci">uint8_t vmMACAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:46</div></div>
<div class="ttc" id="Debug_8h_html_a37173c262a73867ab875e165e9baf6b6"><div class="ttname"><a href="Debug_8h.html#a37173c262a73867ab875e165e9baf6b6">OVS_LOG_INFO</a></div><div class="ttdeci">#define OVS_LOG_INFO(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:62</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0abeac18c1c5cbd6fb12773b947a8dd489">OVS_EVENT_LINK_UP</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:287</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a696e62816b066d68729244aaf390fc48"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a696e62816b066d68729244aaf390fc48">_OVS_VPORT_EXT_INFO::status</a></div><div class="ttdeci">uint32_t status</div><div class="ttdef"><b>Definition:</b> DpInternal.h:52</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a15613d0787ab8db53d58daa21a36a5a8"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a15613d0787ab8db53d58daa21a36a5a8">_OVS_VPORT_EXT_INFO::dpNo</a></div><div class="ttdeci">uint32_t dpNo</div><div class="ttdef"><b>Definition:</b> DpInternal.h:42</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_ac7866cce537f9820e987a60702d92a3e"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#ac7866cce537f9820e987a60702d92a3e">_OVS_VPORT_EXT_INFO::name</a></div><div class="ttdeci">char name[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:51</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a391fdfcca7a37d5d7fa04f441abc9d9e"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a391fdfcca7a37d5d7fa04f441abc9d9e">_OVS_VPORT_EXT_INFO::nicIndex</a></div><div class="ttdeci">uint16_t nicIndex</div><div class="ttdef"><b>Definition:</b> DpInternal.h:47</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb72915fafa7a4d3be436aad7f702623"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">_OVS_VPORT_ENTRY::currMacAddress</a></div><div class="ttdeci">UINT8 currMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:109</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a896c5b5f41247112dc91f1085ced70e3"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a896c5b5f41247112dc91f1085ced70e3">_OVS_VPORT_EXT_INFO::portId</a></div><div class="ttdeci">uint32_t portId</div><div class="ttdef"><b>Definition:</b> DpInternal.h:48</div></div>
<div class="ttc" id="struct__OVS__VPORT__GET_html_a492c4fc618fc6a659b9bea80c2b7496b"><div class="ttname"><a href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">_OVS_VPORT_GET::portNo</a></div><div class="ttdeci">uint32_t portNo</div><div class="ttdef"><b>Definition:</b> DpInternal.h:34</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a76a534b71ed4c7bbdc5dd6a9b5c0675d"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">_OVS_VPORT_ENTRY::vmMacAddress</a></div><div class="ttdeci">UINT8 vmMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:110</div></div>
<div class="ttc" id="DpInternal_8h_html_a2210aaf6c60e310f898fb6fd768272ae"><div class="ttname"><a href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a></div><div class="ttdeci">#define OVS_MAX_PORT_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> DpInternal.h:30</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html">_OVS_VPORT_EXT_INFO</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:41</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aa7c2d32b73f95f428a9c6a0999c60278"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">_OVS_VPORT_ENTRY::permMacAddress</a></div><div class="ttdeci">UINT8 permMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:108</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0a200bd0cf1b367f24165db97f8ac6f13a"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a200bd0cf1b367f24165db97f8ac6f13a">OVS_EVENT_LINK_DOWN</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:288</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac38dabf00b4f72777c007823717f7ed5"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac38dabf00b4f72777c007823717f7ed5">_OVS_VPORT_ENTRY::vmName</a></div><div class="ttdeci">NDIS_VM_NAME vmName</div><div class="ttdef"><b>Definition:</b> Vport.h:115</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0a296aabcee1efde54badbb9919f223df3"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0a296aabcee1efde54badbb9919f223df3">OVS_EVENT_DISCONNECT</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:286</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="DpInternal_8h_html_ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff"><div class="ttname"><a href="DpInternal_8h.html#ae8a3b6a5d0d3244ed73924ab2421a0d0aea11cc0b6a794b832ccea8393fa28eff">OVS_EVENT_CONNECT</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:285</div></div>
<div class="ttc" id="DpInternal_8h_html_af2e7b05b4810496aa937ea16936cdb32"><div class="ttname"><a href="DpInternal_8h.html#af2e7b05b4810496aa937ea16936cdb32">OVS_MAX_VIF_UUID_LEN</a></div><div class="ttdeci">#define OVS_MAX_VIF_UUID_LEN</div><div class="ttdef"><b>Definition:</b> DpInternal.h:39</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:226</div></div>
<div class="ttc" id="Vport_8c_html_a17e310b20a6deebddb71ffbabb053b36"><div class="ttname"><a href="Vport_8c.html#a17e310b20a6deebddb71ffbabb053b36">OvsFindVportByHvNameA</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByHvNameA(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:701</div></div>
<div class="ttc" id="Debug_8h_html_a6ed653e133701e7cd29fadae3753d029"><div class="ttname"><a href="Debug_8h.html#a6ed653e133701e7cd29fadae3753d029">OVS_LOG_WARN</a></div><div class="ttdeci">#define OVS_LOG_WARN(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:71</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a6b753bce04ae63eef6edf0a3db99a0b4"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a6b753bce04ae63eef6edf0a3db99a0b4">_OVS_VPORT_EXT_INFO::type</a></div><div class="ttdeci">uint32_t type</div><div class="ttdef"><b>Definition:</b> DpInternal.h:49</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3d3cf73768a68e5b623f4759635f217a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">_OVS_VPORT_ENTRY::portFriendlyName</a></div><div class="ttdeci">IF_COUNTED_STRING portFriendlyName</div><div class="ttdef"><b>Definition:</b> Vport.h:113</div></div>
<div class="ttc" id="Vport_8c_html_a090f0c9c725e5a23d2e1a968b7d9f7ae"><div class="ttname"><a href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortNo(POVS_SWITCH_CONTEXT switchContext, UINT32 portNo)</div><div class="ttdef"><b>Definition:</b> Vport.c:586</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:55</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a2f985a5912dbcfafbecdf01246a747e3"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a2f985a5912dbcfafbecdf01246a747e3">_OVS_VPORT_EXT_INFO::portNo</a></div><div class="ttdeci">uint32_t portNo</div><div class="ttdef"><b>Definition:</b> DpInternal.h:43</div></div>
<div class="ttc" id="struct__OVS__VPORT__GET_html_af1ef202347853b73328a6d9f9558fbf6"><div class="ttname"><a href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">_OVS_VPORT_GET::name</a></div><div class="ttdeci">char name[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:35</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a306dc85c70acbf82737f04a2a01f0585"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a306dc85c70acbf82737f04a2a01f0585">_OVS_VPORT_EXT_INFO::vifUUID</a></div><div class="ttdeci">char vifUUID[OVS_MAX_VIF_UUID_LEN]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:54</div></div>
<div class="ttc" id="Vport_8c_html_a0b1bcf9f40b33a92023a597c4886c3aa"><div class="ttname"><a href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByOvsName(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:626</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a1acd80b0796c389084b6139d8577fb54"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a1acd80b0796c389084b6139d8577fb54">_OVS_VPORT_ENTRY::nicName</a></div><div class="ttdeci">NDIS_SWITCH_NIC_NAME nicName</div><div class="ttdef"><b>Definition:</b> Vport.h:114</div></div>
<div class="ttc" id="struct__OVS__VPORT__GET_html_a066d2f69a033cee9bace4f80e6601f1d"><div class="ttname"><a href="struct__OVS__VPORT__GET.html#a066d2f69a033cee9bace4f80e6601f1d">_OVS_VPORT_GET::dpNo</a></div><div class="ttdeci">uint32_t dpNo</div><div class="ttdef"><b>Definition:</b> DpInternal.h:33</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a819342a37140dc28d6c23fd59814ef4e"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">_OVS_VPORT_ENTRY::mtu</a></div><div class="ttdeci">UINT32 mtu</div><div class="ttdef"><b>Definition:</b> Vport.h:96</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a75e17d5e4cdfdce76d9a2fc6fd7d5db3"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a75e17d5e4cdfdce76d9a2fc6fd7d5db3">_OVS_VPORT_EXT_INFO::macAddress</a></div><div class="ttdeci">uint8_t macAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:44</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html_a2983598a82c89620810b915e7ffaaf64"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html#a2983598a82c89620810b915e7ffaaf64">_OVS_VPORT_EXT_INFO::mtu</a></div><div class="ttdeci">uint32_t mtu</div><div class="ttdef"><b>Definition:</b> DpInternal.h:50</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="DpInternal_8h_html_aaa97f38984e9452bdd88fe7e62ef3296"><div class="ttname"><a href="DpInternal_8h.html#aaa97f38984e9452bdd88fe7e62ef3296">OVS_MAX_VM_UUID_LEN</a></div><div class="ttdeci">#define OVS_MAX_VM_UUID_LEN</div><div class="ttdef"><b>Definition:</b> DpInternal.h:38</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4dfea6d106a453002f047889dfaf9f4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsGetNetdevCmdHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    NTSTATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <a class="code" href="struct__OVS__VPORT__GET.html">OVS_VPORT_GET</a> vportGet;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <a class="code" href="struct__OVS__VPORT__EXT__INFO.html">OVS_VPORT_EXT_INFO</a> info;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__NL__POLICY.html">NL_POLICY</a> ovsNetdevPolicy[] = {</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        [<a class="code" href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa9cc4b6dc2b4442a31485383603d680d1">OVS_WIN_NETDEV_ATTR_NAME</a>] = { .<a class="code" href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">type</a> = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a>,</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                                       .minLen = 2,</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                                       .maxLen = <a class="code" href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a> },</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    };</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> netdevAttrs[<a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsNetdevPolicy)];</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">/* input buffer has been validated while validating transaction dev op. */</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a> != NULL &amp;&amp;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;           usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#af6501eb4355a39fd39b5bbe8fcc0c921">inputLength</a> &gt; <span class="keyword">sizeof</span> *msgIn);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">if</span> (msgOut == NULL || usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a> &lt; <span class="keyword">sizeof</span> *msgOut) {</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_BUFFER_SIZE;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    }</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn,</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <a class="code" href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a>,</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <a class="code" href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn),</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        ovsNetdevPolicy, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsNetdevPolicy),</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        netdevAttrs, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(netdevAttrs))) {</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    }</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    vportGet.<a class="code" href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">portNo</a> = 0;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    RtlCopyMemory(&amp;vportGet.<a class="code" href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">name</a>, <a class="code" href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a>(netdevAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]),</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                  <a class="code" href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a>(netdevAttrs[OVS_VPORT_ATTR_NAME]));</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    status = <a class="code" href="Vport_8c.html#a80c0fe173bd8a2ff75b51bd927b8ef07">OvsGetExtInfoIoctl</a>(&amp;vportGet, &amp;info);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> (status == STATUS_DEVICE_DOES_NOT_EXIST) {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    }</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    status = <a class="code" href="Vport_8c.html#ae335836b5ca55bb12005cce2dcbbe631">CreateNetlinkMesgForNetdev</a>(&amp;info, msgIn,</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                 usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>, usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>,</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                 <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="keywordflow">if</span> (status == STATUS_SUCCESS) {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    }</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>:</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordflow">if</span> (nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>)</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a68fbbe51bd90e0cdc0c832f8617d7552"><div class="ttname"><a href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a></div><div class="ttdeci">#define NLMSG_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:114</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_af6501eb4355a39fd39b5bbe8fcc0c921"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#af6501eb4355a39fd39b5bbe8fcc0c921">_OVS_USER_PARAMS_CONTEXT::inputLength</a></div><div class="ttdeci">UINT32 inputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:89</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__VPORT__GET_html"><div class="ttname"><a href="struct__OVS__VPORT__GET.html">_OVS_VPORT_GET</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:32</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="Vport_8c_html_ae335836b5ca55bb12005cce2dcbbe631"><div class="ttname"><a href="Vport_8c.html#ae335836b5ca55bb12005cce2dcbbe631">CreateNetlinkMesgForNetdev</a></div><div class="ttdeci">static NTSTATUS CreateNetlinkMesgForNetdev(POVS_VPORT_EXT_INFO info, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1679</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:29</div></div>
<div class="ttc" id="struct__NL__POLICY_html"><div class="ttname"><a href="struct__NL__POLICY.html">_NL_POLICY</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:64</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="Netlink_8c_html_aaf271cb15547bb69ad81531657bf10ab"><div class="ttname"><a href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a></div><div class="ttdeci">UINT32 NlMsgAttrsLen(const PNL_MSG_HDR nlh)</div><div class="ttdef"><b>Definition:</b> Netlink.c:665</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a5cacfa504d6e21aca543ef5f3c7b920e"><div class="ttname"><a href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a></div><div class="ttdeci">#define OVS_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:116</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_afb3b010cfa85c074d4ce6280dda1c4eaa9cc4b6dc2b4442a31485383603d680d1"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#afb3b010cfa85c074d4ce6280dda1c4eaa9cc4b6dc2b4442a31485383603d680d1">OVS_WIN_NETDEV_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:145</div></div>
<div class="ttc" id="struct__OVS__VPORT__GET_html_a492c4fc618fc6a659b9bea80c2b7496b"><div class="ttname"><a href="struct__OVS__VPORT__GET.html#a492c4fc618fc6a659b9bea80c2b7496b">_OVS_VPORT_GET::portNo</a></div><div class="ttdeci">uint32_t portNo</div><div class="ttdef"><b>Definition:</b> DpInternal.h:34</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="DpInternal_8h_html_acd06da230a96d3b7e6f193c5b3142002"><div class="ttname"><a href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a></div><div class="ttdeci">#define IFNAMSIZ</div><div class="ttdef"><b>Definition:</b> DpInternal.h:21</div></div>
<div class="ttc" id="struct__OVS__VPORT__EXT__INFO_html"><div class="ttname"><a href="struct__OVS__VPORT__EXT__INFO.html">_OVS_VPORT_EXT_INFO</a></div><div class="ttdef"><b>Definition:</b> DpInternal.h:41</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="Vport_8c_html_a80c0fe173bd8a2ff75b51bd927b8ef07"><div class="ttname"><a href="Vport_8c.html#a80c0fe173bd8a2ff75b51bd927b8ef07">OvsGetExtInfoIoctl</a></div><div class="ttdeci">static NTSTATUS OvsGetExtInfoIoctl(POVS_VPORT_GET vportGet, POVS_VPORT_EXT_INFO extInfo)</div><div class="ttdef"><b>Definition:</b> Vport.c:1503</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:66</div></div>
<div class="ttc" id="Netlink_8c_html_a18aba720e92e88602da80f252d1535d5"><div class="ttname"><a href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a></div><div class="ttdeci">UINT32 NlAttrGetSize(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:808</div></div>
<div class="ttc" id="Util_8h_html_af4761d64884360f7fb99d05371fc53f0"><div class="ttname"><a href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:69</div></div>
<div class="ttc" id="struct__OVS__VPORT__GET_html_af1ef202347853b73328a6d9f9558fbf6"><div class="ttname"><a href="struct__OVS__VPORT__GET.html#af1ef202347853b73328a6d9f9558fbf6">_OVS_VPORT_GET::name</a></div><div class="ttdeci">char name[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> DpInternal.h:35</div></div>
<div class="ttc" id="Netlink_8c_html_a7fcd17b677a86abb0d962e287269ea5d"><div class="ttname"><a href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a></div><div class="ttdeci">const PVOID NlAttrGet(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:819</div></div>
<div class="ttc" id="NetlinkProto_8h_html_ae613cef4b7f9f12345978d605230f78f"><div class="ttname"><a href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a></div><div class="ttdeci">#define GENL_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:115</div></div>
<div class="ttc" id="struct__NL__ATTR_html"><div class="ttname"><a href="struct__NL__ATTR.html">_NL_ATTR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:102</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__NL__POLICY_html_aa03de43c15a9f143c7fba8924f5b630f"><div class="ttname"><a href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">_NL_POLICY::type</a></div><div class="ttdeci">NL_ATTR_TYPE type</div><div class="ttdef"><b>Definition:</b> Netlink.h:66</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a7992da73dff83938486e53dbe879e35b"><div class="ttname"><a href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a></div><div class="ttdeci">BOOLEAN NlAttrParse(const PNL_MSG_HDR nlMsg, UINT32 attrOffset, UINT32 totalAttrLen, const NL_POLICY policy[], const UINT32 numPolicy, PNL_ATTR attrs[], UINT32 numAttrs)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1047</div></div>
<div class="ttc" id="ovstest_8c_html_a5c6551bf9ea9cf51ae7f2076c4cbe8ef"><div class="ttname"><a href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a></div><div class="ttdeci">static void cleanup(void)</div><div class="ttdef"><b>Definition:</b> ovstest.c:109</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a45aeb618c44d93486b3d7d388c92ccd3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NTSTATUS OvsGetVport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;{</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    NTSTATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    PCHAR portName = NULL;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    UINT32 portNameLen = 0;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    UINT32 portNumber = <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__NL__POLICY.html">NL_POLICY</a> ovsVportPolicy[] = {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] = { .<a class="code" href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">type</a> = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = TRUE },</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a>,</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                                  .minLen = 2,</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                                  .maxLen = <a class="code" href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a>,</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                                  .optional = TRUE},</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    };</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> vportAttrs[<a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy)];</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="comment">/* input buffer has been validated while validating write dev op. */</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a> != NULL);</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn,</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <a class="code" href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a>,</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <a class="code" href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn),</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        ovsVportPolicy, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy),</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        vportAttrs, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(vportAttrs))) {</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="comment">/* Output buffer has been validated while validating transact dev op. */</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    ASSERT(msgOut != NULL &amp;&amp; usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a> &gt;= <span class="keyword">sizeof</span> *msgOut);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    NdisAcquireRWLockRead(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] != NULL) {</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        portName = <a class="code" href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        portNameLen = <a class="code" href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="comment">/* the port name is expected to be null-terminated */</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        ASSERT(portName[portNameLen - 1] == <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        vport = <a class="code" href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, portName);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] != NULL) {</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        portNumber = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>]);</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        vport = <a class="code" href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, portNumber);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    }</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a>;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    }</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    status = <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport, msgIn, usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>,</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                                   usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>,</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                                   <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;Cleanup:</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordflow">if</span> (nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>)</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    }</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a68fbbe51bd90e0cdc0c832f8617d7552"><div class="ttname"><a href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a></div><div class="ttdeci">#define NLMSG_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:114</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="Netlink_8c_html_a04e9e923292d2fafae3b7d0d5f7086ac"><div class="ttname"><a href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a></div><div class="ttdeci">UINT32 NlAttrGetU32(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:921</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:29</div></div>
<div class="ttc" id="struct__NL__POLICY_html"><div class="ttname"><a href="struct__NL__POLICY.html">_NL_POLICY</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:64</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="Netlink_8c_html_aaf271cb15547bb69ad81531657bf10ab"><div class="ttname"><a href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a></div><div class="ttdeci">UINT32 NlMsgAttrsLen(const PNL_MSG_HDR nlh)</div><div class="ttdef"><b>Definition:</b> Netlink.c:665</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a5cacfa504d6e21aca543ef5f3c7b920e"><div class="ttname"><a href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a></div><div class="ttdeci">#define OVS_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:116</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:72</div></div>
<div class="ttc" id="DpInternal_8h_html_acd06da230a96d3b7e6f193c5b3142002"><div class="ttname"><a href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a></div><div class="ttdeci">#define IFNAMSIZ</div><div class="ttdef"><b>Definition:</b> DpInternal.h:21</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:66</div></div>
<div class="ttc" id="Vport_8c_html_a090f0c9c725e5a23d2e1a968b7d9f7ae"><div class="ttname"><a href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortNo(POVS_SWITCH_CONTEXT switchContext, UINT32 portNo)</div><div class="ttdef"><b>Definition:</b> Vport.c:586</div></div>
<div class="ttc" id="Netlink_8c_html_a18aba720e92e88602da80f252d1535d5"><div class="ttname"><a href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a></div><div class="ttdeci">UINT32 NlAttrGetSize(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:808</div></div>
<div class="ttc" id="Util_8h_html_af4761d64884360f7fb99d05371fc53f0"><div class="ttname"><a href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:69</div></div>
<div class="ttc" id="Netlink_8c_html_a7fcd17b677a86abb0d962e287269ea5d"><div class="ttname"><a href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a></div><div class="ttdeci">const PVOID NlAttrGet(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:819</div></div>
<div class="ttc" id="Vport_8c_html_a0b1bcf9f40b33a92023a597c4886c3aa"><div class="ttname"><a href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByOvsName(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:626</div></div>
<div class="ttc" id="NetlinkProto_8h_html_ae613cef4b7f9f12345978d605230f78f"><div class="ttname"><a href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a></div><div class="ttdeci">#define GENL_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:115</div></div>
<div class="ttc" id="struct__NL__ATTR_html"><div class="ttname"><a href="struct__NL__ATTR.html">_NL_ATTR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:102</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:270</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__NL__POLICY_html_aa03de43c15a9f143c7fba8924f5b630f"><div class="ttname"><a href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">_NL_POLICY::type</a></div><div class="ttdeci">NL_ATTR_TYPE type</div><div class="ttdef"><b>Definition:</b> Netlink.h:66</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a7992da73dff83938486e53dbe879e35b"><div class="ttname"><a href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a></div><div class="ttdeci">BOOLEAN NlAttrParse(const PNL_MSG_HDR nlMsg, UINT32 attrOffset, UINT32 totalAttrLen, const NL_POLICY policy[], const UINT32 numPolicy, PNL_ATTR attrs[], UINT32 numAttrs)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1047</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:52</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a6b5727c7f3db4ec4a65b00755fee22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsGetVportCmdHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;{</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    *replyLen = 0;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">switch</span> (usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#aeb869873eb6e301681111d2cfdcc7259">devOp</a>) {</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="Datapath_8h.html#a2c95885be5dabe3ad990f8f2d3f9b3a8">OVS_WRITE_DEV_OP</a>:</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Datapath_8c.html#a893146cfb10968fa82bfb7b5279bda79">OvsSetupDumpStart</a>(usrParamsCtx);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="Datapath_8h.html#aa02de7af55c2fc52c3e906cef798160b">OVS_READ_DEV_OP</a>:</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Vport_8c.html#a3f71cd0008bbff5d9a9fc843489835a9">OvsGetVportDumpNext</a>(usrParamsCtx, replyLen);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="Datapath_8h.html#ace0b1ef2cfc3e05079e8581048df9141">OVS_TRANSACTION_DEV_OP</a>:</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Vport_8c.html#a45aeb618c44d93486b3d7d388c92ccd3">OvsGetVport</a>(usrParamsCtx, replyLen);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_DEVICE_REQUEST;</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;}</div>
<div class="ttc" id="Datapath_8c_html_a893146cfb10968fa82bfb7b5279bda79"><div class="ttname"><a href="Datapath_8c.html#a893146cfb10968fa82bfb7b5279bda79">OvsSetupDumpStart</a></div><div class="ttdeci">NTSTATUS OvsSetupDumpStart(POVS_USER_PARAMS_CONTEXT usrParamsCtx)</div><div class="ttdef"><b>Definition:</b> Datapath.c:1411</div></div>
<div class="ttc" id="Datapath_8h_html_ace0b1ef2cfc3e05079e8581048df9141"><div class="ttname"><a href="Datapath_8h.html#ace0b1ef2cfc3e05079e8581048df9141">OVS_TRANSACTION_DEV_OP</a></div><div class="ttdeci">#define OVS_TRANSACTION_DEV_OP</div><div class="ttdef"><b>Definition:</b> Datapath.h:34</div></div>
<div class="ttc" id="Vport_8c_html_a3f71cd0008bbff5d9a9fc843489835a9"><div class="ttname"><a href="Vport_8c.html#a3f71cd0008bbff5d9a9fc843489835a9">OvsGetVportDumpNext</a></div><div class="ttdeci">static NTSTATUS OvsGetVportDumpNext(POVS_USER_PARAMS_CONTEXT usrParamsCtx, UINT32 *replyLen)</div><div class="ttdef"><b>Definition:</b> Vport.c:1838</div></div>
<div class="ttc" id="Datapath_8h_html_a2c95885be5dabe3ad990f8f2d3f9b3a8"><div class="ttname"><a href="Datapath_8h.html#a2c95885be5dabe3ad990f8f2d3f9b3a8">OVS_WRITE_DEV_OP</a></div><div class="ttdeci">#define OVS_WRITE_DEV_OP</div><div class="ttdef"><b>Definition:</b> Datapath.h:33</div></div>
<div class="ttc" id="Datapath_8h_html_aa02de7af55c2fc52c3e906cef798160b"><div class="ttname"><a href="Datapath_8h.html#aa02de7af55c2fc52c3e906cef798160b">OVS_READ_DEV_OP</a></div><div class="ttdeci">#define OVS_READ_DEV_OP</div><div class="ttdef"><b>Definition:</b> Datapath.h:32</div></div>
<div class="ttc" id="Vport_8c_html_a45aeb618c44d93486b3d7d388c92ccd3"><div class="ttname"><a href="Vport_8c.html#a45aeb618c44d93486b3d7d388c92ccd3">OvsGetVport</a></div><div class="ttdeci">static NTSTATUS OvsGetVport(POVS_USER_PARAMS_CONTEXT usrParamsCtx, UINT32 *replyLen)</div><div class="ttdef"><b>Definition:</b> Vport.c:1949</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_aeb869873eb6e301681111d2cfdcc7259"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#aeb869873eb6e301681111d2cfdcc7259">_OVS_USER_PARAMS_CONTEXT::devOp</a></div><div class="ttdeci">UINT32 devOp</div><div class="ttdef"><b>Definition:</b> Datapath.h:86</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f71cd0008bbff5d9a9fc843489835a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NTSTATUS OvsGetVportDumpNext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;{</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <a class="code" href="struct__OVS__OPEN__INSTANCE.html">POVS_OPEN_INSTANCE</a> instance =</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        (<a class="code" href="Datapath_8h.html#a8c7ee7ee691996300ef366044d39e722">POVS_OPEN_INSTANCE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a1528626b0ac338602d6979ea1f97be5c">ovsInstance</a>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    UINT32 i = <a class="code" href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a>;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="comment">     * XXX: this function shares some code with other dump command(s).</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">     * In the future, we will need to refactor the dump functions</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#aeb869873eb6e301681111d2cfdcc7259">devOp</a> == <a class="code" href="Datapath_8h.html#aa02de7af55c2fc52c3e906cef798160b">OVS_READ_DEV_OP</a>);</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (instance-&gt;<a class="code" href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">dumpState</a>.<a class="code" href="struct__OVS__OPEN__INSTANCE.html#aff5d0321601a9d3f4a489c30ddc62f5e">ovsMsg</a> == NULL) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        ASSERT(FALSE);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_DEVICE_STATE;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="comment">/* Output buffer has been validated while validating read dev op. */</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a> != NULL);</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    msgIn = instance-&gt;<a class="code" href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">dumpState</a>.<a class="code" href="struct__OVS__OPEN__INSTANCE.html#aff5d0321601a9d3f4a489c30ddc62f5e">ovsMsg</a>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;<span class="comment">     * XXX: when we implement OVS_DP_ATTR_USER_FEATURES in datapath,</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="comment">     * we&#39;ll need to check the OVS_DP_F_VPORT_PIDS flag: if it is set,</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="comment">     * it means we have an array of pids, instead of a single pid.</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="comment">     * ATM we assume we have one pid only.</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    NdisAcquireRWLockRead(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#afc160fac68c247864577246ac2b7f417">numHvVports</a> &gt; 0 ||</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">numNonHvVports</a> &gt; 0) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <span class="comment">/* inBucket: the bucket, used for lookup */</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        UINT32 inBucket = instance-&gt;<a class="code" href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">dumpState</a>.<a class="code" href="struct__OVS__OPEN__INSTANCE.html#a5141c03db8869e74be02c371b5c257a6">index</a>[0];</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="comment">/* inIndex: index within the given bucket, used for lookup */</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        UINT32 inIndex = instance-&gt;<a class="code" href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">dumpState</a>.<a class="code" href="struct__OVS__OPEN__INSTANCE.html#a5141c03db8869e74be02c371b5c257a6">index</a>[1];</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="comment">/* the bucket to be used for the next dump operation */</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        UINT32 outBucket = 0;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <span class="comment">/* the index within the outBucket to be used for the next dump */</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;        UINT32 outIndex = 0;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="keywordflow">for</span> (i = inBucket; i &lt; <a class="code" href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a>; i++) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            PLIST_ENTRY head, link;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            head = &amp;(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">portNoHashArray</a>[i]);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            outIndex = 0;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            <a class="code" href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a>(head, link) {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">                 * if one or more dumps were previously done on this same bucket,</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;<span class="comment">                 * inIndex will be &gt; 0, so we&#39;ll need to reply with the</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">                 * inIndex + 1 vport from the bucket.</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<span class="comment">                */</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                <span class="keywordflow">if</span> (outIndex &gt;= inIndex) {</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                    vport = CONTAINING_RECORD(link, <a class="code" href="struct__OVS__VPORT__ENTRY.html">OVS_VPORT_ENTRY</a>, portNoLink);</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                    ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> != <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                    <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport, msgIn,</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                                          usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>,</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                                          usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>,</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                                          <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                    ++outIndex;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                ++outIndex;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;            }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            <span class="keywordflow">if</span> (vport) {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">             * if no vport was found above, check the next bucket, beginning</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="comment">             * with the first (i.e. index 0) elem from within that bucket</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;<span class="comment">            */</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;            inIndex = 0;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        }</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        outBucket = i;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <span class="comment">/* XXX: what about NLMSG_DONE (as msg type)? */</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        instance-&gt;<a class="code" href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">dumpState</a>.<a class="code" href="struct__OVS__OPEN__INSTANCE.html#a5141c03db8869e74be02c371b5c257a6">index</a>[0] = outBucket;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        instance-&gt;<a class="code" href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">dumpState</a>.<a class="code" href="struct__OVS__OPEN__INSTANCE.html#a5141c03db8869e74be02c371b5c257a6">index</a>[1] = outIndex;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    }</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="comment">/* if i &lt; OVS_MAX_VPORT_ARRAY_SIZE =&gt; vport was found */</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <span class="keywordflow">if</span> (i &lt; OVS_MAX_VPORT_ARRAY_SIZE) {</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;        <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        *replyLen = msgOut-&gt;<a class="code" href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment">         * if i &gt;= OVS_MAX_VPORT_ARRAY_SIZE =&gt; vport was not found =&gt;</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">         * it&#39;s dump done</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        *replyLen = 0;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        <span class="comment">/* Free up the dump state, since there&#39;s no more data to continue. */</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        <a class="code" href="Datapath_8c.html#af653495f5aa5887b7bde814afc2ebdca">FreeUserDumpState</a>(instance);</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    }</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="struct__OVS__OPEN__INSTANCE_html_aff5d0321601a9d3f4a489c30ddc62f5e"><div class="ttname"><a href="struct__OVS__OPEN__INSTANCE.html#aff5d0321601a9d3f4a489c30ddc62f5e">_OVS_OPEN_INSTANCE::ovsMsg</a></div><div class="ttdeci">POVS_MESSAGE ovsMsg</div><div class="ttdef"><b>Definition:</b> Datapath.h:56</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a1528626b0ac338602d6979ea1f97be5c"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a1528626b0ac338602d6979ea1f97be5c">_OVS_USER_PARAMS_CONTEXT::ovsInstance</a></div><div class="ttdeci">POVS_OPEN_INSTANCE ovsInstance</div><div class="ttdef"><b>Definition:</b> Datapath.h:85</div></div>
<div class="ttc" id="Util_8h_html_a0dea3b8fd64bbe42903d57549280b219"><div class="ttname"><a href="Util_8h.html#a0dea3b8fd64bbe42903d57549280b219">LIST_FORALL</a></div><div class="ttdeci">#define LIST_FORALL(_headPtr, _itemPtr)</div><div class="ttdef"><b>Definition:</b> Util.h:45</div></div>
<div class="ttc" id="Switch_8h_html_a2f7fcf0301ee7f5328a98c343dc37a6d"><div class="ttname"><a href="Switch_8h.html#a2f7fcf0301ee7f5328a98c343dc37a6d">OVS_MAX_VPORT_ARRAY_SIZE</a></div><div class="ttdeci">#define OVS_MAX_VPORT_ARRAY_SIZE</div><div class="ttdef"><b>Definition:</b> Switch.h:27</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_afc160fac68c247864577246ac2b7f417"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#afc160fac68c247864577246ac2b7f417">_OVS_SWITCH_CONTEXT::numHvVports</a></div><div class="ttdeci">UINT32 numHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:163</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a6e93c14bb3e3a25f2e05187e26aa2562"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">_OVS_SWITCH_CONTEXT::numNonHvVports</a></div><div class="ttdeci">UINT32 numNonHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:164</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="struct__OVS__OPEN__INSTANCE_html_ac8e87d7bf13c7395fb624d1c1abf16b9"><div class="ttname"><a href="struct__OVS__OPEN__INSTANCE.html#ac8e87d7bf13c7395fb624d1c1abf16b9">_OVS_OPEN_INSTANCE::dumpState</a></div><div class="ttdeci">struct _OVS_OPEN_INSTANCE::@47 dumpState</div></div>
<div class="ttc" id="struct__OVS__OPEN__INSTANCE_html_a5141c03db8869e74be02c371b5c257a6"><div class="ttname"><a href="struct__OVS__OPEN__INSTANCE.html#a5141c03db8869e74be02c371b5c257a6">_OVS_OPEN_INSTANCE::index</a></div><div class="ttdeci">UINT32 index[2]</div><div class="ttdef"><b>Definition:</b> Datapath.h:57</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__OPEN__INSTANCE_html"><div class="ttname"><a href="struct__OVS__OPEN__INSTANCE.html">_OVS_OPEN_INSTANCE</a></div><div class="ttdef"><b>Definition:</b> Datapath.h:48</div></div>
<div class="ttc" id="struct__OVS__MESSAGE_html_a32c769d75a0cf4c1ccc469a35bf4da57"><div class="ttname"><a href="struct__OVS__MESSAGE.html#a32c769d75a0cf4c1ccc469a35bf4da57">_OVS_MESSAGE::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:29</div></div>
<div class="ttc" id="Datapath_8c_html_af653495f5aa5887b7bde814afc2ebdca"><div class="ttname"><a href="Datapath_8c.html#af653495f5aa5887b7bde814afc2ebdca">FreeUserDumpState</a></div><div class="ttdeci">VOID FreeUserDumpState(POVS_OPEN_INSTANCE instance)</div><div class="ttdef"><b>Definition:</b> Datapath.c:372</div></div>
<div class="ttc" id="Datapath_8h_html_aa02de7af55c2fc52c3e906cef798160b"><div class="ttname"><a href="Datapath_8h.html#aa02de7af55c2fc52c3e906cef798160b">OVS_READ_DEV_OP</a></div><div class="ttdeci">#define OVS_READ_DEV_OP</div><div class="ttdef"><b>Definition:</b> Datapath.h:32</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="Datapath_8h_html_a8c7ee7ee691996300ef366044d39e722"><div class="ttname"><a href="Datapath_8h.html#a8c7ee7ee691996300ef366044d39e722">POVS_OPEN_INSTANCE</a></div><div class="ttdeci">struct _OVS_OPEN_INSTANCE * POVS_OPEN_INSTANCE</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_acacc0274b94607fd2a33eff3fa44f6ba"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#acacc0274b94607fd2a33eff3fa44f6ba">_OVS_SWITCH_CONTEXT::portNoHashArray</a></div><div class="ttdeci">PLIST_ENTRY portNoHashArray</div><div class="ttdef"><b>Definition:</b> Switch.h:155</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_aeb869873eb6e301681111d2cfdcc7259"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#aeb869873eb6e301681111d2cfdcc7259">_OVS_USER_PARAMS_CONTEXT::devOp</a></div><div class="ttdeci">UINT32 devOp</div><div class="ttdef"><b>Definition:</b> Datapath.h:86</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1b442ba8bfbcc429a4ef4441688a1549"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsInitBridgeInternalVport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;{</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a> = TRUE;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> = <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">/* Mark the status to be connected, since there is no other initialization</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">     * for this port. */</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3ec60888c6368da16b90df513c16aff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NDIS_STATUS OvsInitConfiguredSwitchNics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;{</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    NDIS_STATUS status = NDIS_STATUS_SUCCESS;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    PNDIS_SWITCH_NIC_ARRAY nicArray = NULL;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    ULONG arrIndex;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    PNDIS_SWITCH_NIC_PARAMETERS nicParam;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Enter: switchContext: %p&quot;</span>, switchContext);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">     * Now, get NIC list.</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    status = <a class="code" href="Oid_8c.html#a16e91333eba04487c80be3adf6d1721c">OvsGetNicsOnSwitch</a>(switchContext, &amp;nicArray);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (status != NDIS_STATUS_SUCCESS) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <span class="keywordflow">for</span> (arrIndex = 0; arrIndex &lt; nicArray-&gt;NumElements; ++arrIndex) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        nicParam = NDIS_SWITCH_NIC_AT_ARRAY_INDEX(nicArray, arrIndex);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">         * XXX: Check if the port is configured with a VLAN. Disallow such a</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">         * configuration, since we don&#39;t support tag-in-tag.</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">         * XXX: Check if the port is connected to a VF. Disconnect the VF in</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">         * such a case.</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <span class="keywordflow">if</span> (nicParam-&gt;NicType == NdisSwitchNicTypeExternal &amp;&amp;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            nicParam-&gt;NicIndex != 0) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;            <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> virtExtVport =</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                   (<a class="code" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>)switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;            vport = <a class="code" href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a>();</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            <span class="keywordflow">if</span> (vport) {</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                <a class="code" href="Vport_8c.html#a50593469916d69cb6683418135f5b162">OvsInitPhysNicVport</a>(vport, virtExtVport,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                                    nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                status = <a class="code" href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a>(switchContext, vport, TRUE);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                <span class="keywordflow">if</span> (status != NDIS_STATUS_SUCCESS) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                    <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                    vport = NULL;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            vport = <a class="code" href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a>(switchContext,</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                                                    nicParam-&gt;PortId,</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                                                    nicParam-&gt;NicIndex);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        }</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            <a class="code" href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a>(<span class="stringliteral">&quot;Fail to allocate vport&quot;</span>);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="Vport_8c.html#a6829f612e0080bf3f86f735d3db75bc0">OvsInitVportWithNicParam</a>(switchContext, vport, nicParam);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">if</span> (nicParam-&gt;NicType == NdisSwitchNicTypeInternal) {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            <a class="code" href="IpHelper_8c.html#a846ef09653848eeff3d67e4c7dff69f2">OvsInternalAdapterUp</a>(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a>, &amp;nicParam-&gt;NetCfgInstanceId);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;<a class="code" href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a>:</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="Oid_8c.html#ae3764e0ed5a29eef599d4e9a4ca682f9">OvsFreeSwitchNicsArray</a>(nicArray);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a>(<span class="stringliteral">&quot;Exit: status: %x&quot;</span>, status);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;}</div>
<div class="ttc" id="Oid_8c_html_ae3764e0ed5a29eef599d4e9a4ca682f9"><div class="ttname"><a href="Oid_8c.html#ae3764e0ed5a29eef599d4e9a4ca682f9">OvsFreeSwitchNicsArray</a></div><div class="ttdeci">VOID OvsFreeSwitchNicsArray(PNDIS_SWITCH_NIC_ARRAY nicsArray)</div><div class="ttdef"><b>Definition:</b> Oid.c:877</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_af65b9cf76d47a93178b3be08f4a8dd82"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">_OVS_SWITCH_CONTEXT::virtualExternalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY virtualExternalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:131</div></div>
<div class="ttc" id="Debug_8h_html_a4086cc5daa809afb1615e2ae9f38075a"><div class="ttname"><a href="Debug_8h.html#a4086cc5daa809afb1615e2ae9f38075a">OVS_LOG_TRACE</a></div><div class="ttdeci">#define OVS_LOG_TRACE(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:65</div></div>
<div class="ttc" id="IpHelper_8c_html_a846ef09653848eeff3d67e4c7dff69f2"><div class="ttname"><a href="IpHelper_8c.html#a846ef09653848eeff3d67e4c7dff69f2">OvsInternalAdapterUp</a></div><div class="ttdeci">VOID OvsInternalAdapterUp(UINT32 portNo, GUID *netCfgInstanceId)</div><div class="ttdef"><b>Definition:</b> IpHelper.c:1073</div></div>
<div class="ttc" id="Vport_8c_html_a50593469916d69cb6683418135f5b162"><div class="ttname"><a href="Vport_8c.html#a50593469916d69cb6683418135f5b162">OvsInitPhysNicVport</a></div><div class="ttdeci">static VOID OvsInitPhysNicVport(POVS_VPORT_ENTRY physExtVPort, POVS_VPORT_ENTRY virtExtVport, UINT32 nicIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:872</div></div>
<div class="ttc" id="Oid_8c_html_a16e91333eba04487c80be3adf6d1721c"><div class="ttname"><a href="Oid_8c.html#a16e91333eba04487c80be3adf6d1721c">OvsGetNicsOnSwitch</a></div><div class="ttdeci">NDIS_STATUS OvsGetNicsOnSwitch(POVS_SWITCH_CONTEXT switchContext, PNDIS_SWITCH_NIC_ARRAY *nicArrayOut)</div><div class="ttdef"><b>Definition:</b> Oid.c:820</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_a41a0a7a50d232916d005ffcc68b9f9f1"><div class="ttname"><a href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a></div><div class="ttdeci">struct _OVS_VPORT_ENTRY * POVS_VPORT_ENTRY</div><div class="ttdef"><b>Definition:</b> Switch.h:47</div></div>
<div class="ttc" id="Debug_8h_html_aaf451970c4433dca3e83f5a1e7e5b794"><div class="ttname"><a href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a></div><div class="ttdeci">#define OVS_LOG_ERROR(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:68</div></div>
<div class="ttc" id="Vport_8c_html_a6829f612e0080bf3f86f735d3db75bc0"><div class="ttname"><a href="Vport_8c.html#a6829f612e0080bf3f86f735d3db75bc0">OvsInitVportWithNicParam</a></div><div class="ttdeci">static VOID OvsInitVportWithNicParam(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, PNDIS_SWITCH_NIC_PARAMETERS nicParam)</div><div class="ttdef"><b>Definition:</b> Vport.c:818</div></div>
<div class="ttc" id="Vport_8c_html_af11338fec87aac46dcc120c74eb36b1a"><div class="ttname"><a href="Vport_8c.html#af11338fec87aac46dcc120c74eb36b1a">InitHvVportCommon</a></div><div class="ttdeci">static NDIS_STATUS InitHvVportCommon(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN newPort)</div><div class="ttdef"><b>Definition:</b> Vport.c:1016</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="Vport_8c_html_ab17cc616b760eefd28b8465a9ad9bdfb"><div class="ttname"><a href="Vport_8c.html#ab17cc616b760eefd28b8465a9ad9bdfb">OvsFindVportByPortIdAndNicIndex</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortIdAndNicIndex(POVS_SWITCH_CONTEXT switchContext, NDIS_SWITCH_PORT_ID portId, NDIS_SWITCH_NIC_INDEX index)</div><div class="ttdef"><b>Definition:</b> Vport.c:723</div></div>
<div class="ttc" id="ovstest_8c_html_a5c6551bf9ea9cf51ae7f2076c4cbe8ef"><div class="ttname"><a href="ovstest_8c.html#a5c6551bf9ea9cf51ae7f2076c4cbe8ef">cleanup</a></div><div class="ttdeci">static void cleanup(void)</div><div class="ttdef"><b>Definition:</b> ovstest.c:109</div></div>
<div class="ttc" id="Vport_8c_html_a7c874912fad0be0f4232e22e307ea731"><div class="ttname"><a href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsAllocateVport(VOID)</div><div class="ttdef"><b>Definition:</b> Vport.c:752</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a50593469916d69cb6683418135f5b162"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VOID OvsInitPhysNicVport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>physExtVPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>virtExtVport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32&#160;</td>
          <td class="paramname"><em>nicIndex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    physExtVport-&gt;portType = virtExtVport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    physExtVport-&gt;portState = virtExtVport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">portState</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    physExtVport-&gt;portId = virtExtVport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    physExtVport-&gt;nicState = NdisSwitchNicStateUnknown;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    physExtVport-&gt;ovsType = <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a>;</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    physExtVport-&gt;isExternal = TRUE;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    physExtVport-&gt;isBridgeInternal = FALSE;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    physExtVport-&gt;nicIndex = (NDIS_SWITCH_NIC_INDEX)physNicIndex;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    RtlCopyMemory(&amp;physExtVport-&gt;hvPortName, &amp;virtExtVport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac0216ae815d64b53517ac042c9c004f1">hvPortName</a>,</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                  sizeof (NDIS_SWITCH_PORT_NAME));</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="comment">/* &#39;portFriendlyName&#39; is overwritten later. */</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    RtlCopyMemory(&amp;physExtVport-&gt;portFriendlyName,</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                  &amp;virtExtVport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>,</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                  <span class="keyword">sizeof</span>(NDIS_SWITCH_PORT_FRIENDLYNAME));</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    physExtVport-&gt;ovsState = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:54</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac0216ae815d64b53517ac042c9c004f1"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac0216ae815d64b53517ac042c9c004f1">_OVS_VPORT_ENTRY::hvPortName</a></div><div class="ttdeci">NDIS_SWITCH_PORT_NAME hvPortName</div><div class="ttdef"><b>Definition:</b> Vport.h:112</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:226</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3d3cf73768a68e5b623f4759635f217a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">_OVS_VPORT_ENTRY::portFriendlyName</a></div><div class="ttdeci">IF_COUNTED_STRING portFriendlyName</div><div class="ttdef"><b>Definition:</b> Vport.h:113</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ae6e1b57f475d44b6725b1d79b9f0d218"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">_OVS_VPORT_ENTRY::portState</a></div><div class="ttdeci">NDIS_SWITCH_PORT_STATE portState</div><div class="ttdef"><b>Definition:</b> Vport.h:104</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a18d7b1f5ae328614eb0c7bd6cd91841b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsInitTunnelVport </td>
          <td>(</td>
          <td class="paramtype">PVOID&#160;</td>
          <td class="paramname"><em>userContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="OvsDpInterfaceExt_8h.html#a4662d316777fe03a616ac573ed86b0f3">OVS_VPORT_TYPE</a>&#160;</td>
          <td class="paramname"><em>ovsType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT16&#160;</td>
          <td class="paramname"><em>dstPort</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;{</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    NTSTATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx =</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        (<a class="code" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>)userContext;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a> = FALSE;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> = ovsType;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a>;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">switch</span> (ovsType) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaf65a369c5ba48431dc28ec57a839068d">OVS_VPORT_TYPE_GRE</a>:</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a>:</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">POVS_TUNFLT_INIT_CONTEXT</a> tunnelContext = NULL;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        tunnelContext = <a class="code" href="Util_8c.html#ac8f761db04ca2512e0c5b157ab5a8e6a">OvsAllocateMemoryWithTag</a>(<span class="keyword">sizeof</span>(*tunnelContext),</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                                 <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="keywordflow">if</span> (tunnelContext == NULL) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            status = STATUS_INSUFFICIENT_RESOURCES;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">inputBuffer</a> = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">outputBuffer</a> = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">outputLength</a> = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">vport</a> = vport;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        status = <a class="code" href="Vxlan_8c.html#a00ae84f3dc522dc2ab8433f6b5414ecf">OvsInitVxlanTunnel</a>(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a62897133c5bab84e74c88b538931124c">irp</a>,</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                                    vport,</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                    dstPort,</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                    <a class="code" href="Vport_8c.html#ac03074bde235c54e2618cfa7b6b08297">OvsTunnelVportPendingInit</a>,</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                                    (PVOID)tunnelContext);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">if</span> (status != STATUS_PENDING) {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;            <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(tunnelContext, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            tunnelContext = NULL;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a>:</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        status = <a class="code" href="Stt_8c.html#aa368b6f3a71f1b3c21fc46dafe8f3477">OvsInitSttTunnel</a>(vport, dstPort);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        ASSERT(0);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;}</div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:54</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_ae3e6fa878eeb47950b4fee9661efa692"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">_OVS_TUNFLT_INIT_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:56</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aaf65a369c5ba48431dc28ec57a839068d"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaf65a369c5ba48431dc28ec57a839068d">OVS_VPORT_TYPE_GRE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:228</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html">_OVS_USER_PARAMS_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Datapath.h:83</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a6e994bc6c28e6a6bec4e748e0bf5cfee"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">_OVS_TUNFLT_INIT_CONTEXT::vport</a></div><div class="ttdeci">POVS_VPORT_ENTRY vport</div><div class="ttdef"><b>Definition:</b> Vport.c:58</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="Vxlan_8c_html_a00ae84f3dc522dc2ab8433f6b5414ecf"><div class="ttname"><a href="Vxlan_8c.html#a00ae84f3dc522dc2ab8433f6b5414ecf">OvsInitVxlanTunnel</a></div><div class="ttdeci">NTSTATUS OvsInitVxlanTunnel(PIRP irp, POVS_VPORT_ENTRY vport, UINT16 udpDestPort, PFNTunnelVportPendingOp callback, PVOID tunnelContext)</div><div class="ttdef"><b>Definition:</b> Vxlan.c:97</div></div>
<div class="ttc" id="Util_8c_html_ac8f761db04ca2512e0c5b157ab5a8e6a"><div class="ttname"><a href="Util_8c.html#ac8f761db04ca2512e0c5b157ab5a8e6a">OvsAllocateMemoryWithTag</a></div><div class="ttdeci">VOID * OvsAllocateMemoryWithTag(size_t size, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:28</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a62897133c5bab84e74c88b538931124c"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a62897133c5bab84e74c88b538931124c">_OVS_USER_PARAMS_CONTEXT::irp</a></div><div class="ttdeci">PIRP irp</div><div class="ttdef"><b>Definition:</b> Datapath.h:84</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:232</div></div>
<div class="ttc" id="Vport_8c_html_ac03074bde235c54e2618cfa7b6b08297"><div class="ttname"><a href="Vport_8c.html#ac03074bde235c54e2618cfa7b6b08297">OvsTunnelVportPendingInit</a></div><div class="ttdeci">static VOID OvsTunnelVportPendingInit(PVOID context, NTSTATUS status, UINT32 *replyLen)</div><div class="ttdef"><b>Definition:</b> Vport.c:2553</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="Datapath_8h_html_a1ba5df4e5b845af8001c5fd1942eed93"><div class="ttname"><a href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a></div><div class="ttdeci">struct _OVS_USER_PARAMS_CONTEXT * POVS_USER_PARAMS_CONTEXT</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_aa8586f9064f77a00a96d1fb3312b8442"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">_OVS_TUNFLT_INIT_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Vport.c:55</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:229</div></div>
<div class="ttc" id="Stt_8c_html_aa368b6f3a71f1b3c21fc46dafe8f3477"><div class="ttname"><a href="Stt_8c.html#aa368b6f3a71f1b3c21fc46dafe8f3477">OvsInitSttTunnel</a></div><div class="ttdeci">NTSTATUS OvsInitSttTunnel(POVS_VPORT_ENTRY vport, UINT16 tcpDestPort)</div><div class="ttdef"><b>Definition:</b> Stt.c:53</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Vport.c:53</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_afca65b867310b384a387abd05dbd309a"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">_OVS_TUNFLT_INIT_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6829f612e0080bf3f86f735d3db75bc0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VOID OvsInitVportWithNicParam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_NIC_PARAMETERS&#160;</td>
          <td class="paramname"><em>nicParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a> == nicParam-&gt;PortId);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> == <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    UNREFERENCED_PARAMETER(switchContext);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">permMacAddress</a>, nicParam-&gt;PermanentMacAddress,</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                  sizeof (nicParam-&gt;PermanentMacAddress));</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">currMacAddress</a>, nicParam-&gt;CurrentMacAddress,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                  sizeof (nicParam-&gt;CurrentMacAddress));</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">if</span> (nicParam-&gt;NicType == NdisSwitchNicTypeSynthetic ||</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        nicParam-&gt;NicType == NdisSwitchNicTypeEmulated) {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">vmMacAddress</a>, nicParam-&gt;VMMacAddress,</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                      sizeof (nicParam-&gt;VMMacAddress));</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        RtlCopyMemory(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac38dabf00b4f72777c007823717f7ed5">vmName</a>, &amp;nicParam-&gt;VmName,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                      sizeof (nicParam-&gt;VmName));</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        RtlCopyMemory(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a69dfb4f7110f50466b749274415d29c3">netCfgInstanceId</a>, &amp;nicParam-&gt;NetCfgInstanceId,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                      sizeof (nicParam-&gt;NetCfgInstanceId));</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    RtlCopyMemory(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a1acd80b0796c389084b6139d8577fb54">nicName</a>, &amp;nicParam-&gt;NicName,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                  sizeof (nicParam-&gt;NicName));</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">mtu</a> = nicParam-&gt;MTU;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = nicParam-&gt;NicState;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> = nicParam-&gt;NicIndex;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a96a25fbfb88459dabc2d6a4d086d2dd5">numaNodeId</a> = nicParam-&gt;NumaNodeId;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordflow">switch</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a>) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicStateCreated:</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicStateConnected:</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicStateDisconnected:</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">case</span> NdisSwitchNicStateDeleted:</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:54</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb72915fafa7a4d3be436aad7f702623"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb72915fafa7a4d3be436aad7f702623">_OVS_VPORT_ENTRY::currMacAddress</a></div><div class="ttdeci">UINT8 currMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:109</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a76a534b71ed4c7bbdc5dd6a9b5c0675d"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a76a534b71ed4c7bbdc5dd6a9b5c0675d">_OVS_VPORT_ENTRY::vmMacAddress</a></div><div class="ttdeci">UINT8 vmMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:110</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aa7c2d32b73f95f428a9c6a0999c60278"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aa7c2d32b73f95f428a9c6a0999c60278">_OVS_VPORT_ENTRY::permMacAddress</a></div><div class="ttdeci">UINT8 permMacAddress[ETH_ADDR_LEN]</div><div class="ttdef"><b>Definition:</b> Vport.h:108</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac38dabf00b4f72777c007823717f7ed5"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac38dabf00b4f72777c007823717f7ed5">_OVS_VPORT_ENTRY::vmName</a></div><div class="ttdeci">NDIS_VM_NAME vmName</div><div class="ttdef"><b>Definition:</b> Vport.h:115</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a96a25fbfb88459dabc2d6a4d086d2dd5"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a96a25fbfb88459dabc2d6a4d086d2dd5">_OVS_VPORT_ENTRY::numaNodeId</a></div><div class="ttdeci">UINT16 numaNodeId</div><div class="ttdef"><b>Definition:</b> Vport.h:103</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500accd1d056cf3ad846f5ab14ffd60ec9ce">OVS_STATE_NIC_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:55</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a1acd80b0796c389084b6139d8577fb54"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a1acd80b0796c389084b6139d8577fb54">_OVS_VPORT_ENTRY::nicName</a></div><div class="ttdeci">NDIS_SWITCH_NIC_NAME nicName</div><div class="ttdef"><b>Definition:</b> Vport.h:114</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a69dfb4f7110f50466b749274415d29c3"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a69dfb4f7110f50466b749274415d29c3">_OVS_VPORT_ENTRY::netCfgInstanceId</a></div><div class="ttdeci">GUID netCfgInstanceId</div><div class="ttdef"><b>Definition:</b> Vport.h:116</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a819342a37140dc28d6c23fd59814ef4e"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a819342a37140dc28d6c23fd59814ef4e">_OVS_VPORT_ENTRY::mtu</a></div><div class="ttdeci">UINT32 mtu</div><div class="ttdef"><b>Definition:</b> Vport.h:96</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76b3afcbed28aed006763e5a98a0bdf4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VOID OvsInitVportWithPortParam </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PNDIS_SWITCH_PORT_PARAMETERS&#160;</td>
          <td class="paramname"><em>portParam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;{</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a> = portParam-&gt;PortType;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">portState</a> = portParam-&gt;PortState;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">portId</a> = portParam-&gt;PortId;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = NdisSwitchNicStateUnknown;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a8a99ffc44307e2a46d0b63f7a2404ee6">isExternal</a> = FALSE;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a> = FALSE;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">switch</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">portType</a>) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeExternal:</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a8a99ffc44307e2a46d0b63f7a2404ee6">isExternal</a> = TRUE;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> = <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a>;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeInternal:</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> = <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeSynthetic:</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortTypeEmulated:</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> = <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    RtlCopyMemory(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac0216ae815d64b53517ac042c9c004f1">hvPortName</a>, &amp;portParam-&gt;PortName,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                  sizeof (NDIS_SWITCH_PORT_NAME));</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="comment">/* For external and internal ports, &#39;portFriendlyName&#39; is overwritten</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">     * later. */</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    RtlCopyMemory(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">portFriendlyName</a>, &amp;portParam-&gt;PortFriendlyName,</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                  <span class="keyword">sizeof</span>(NDIS_SWITCH_PORT_FRIENDLYNAME));</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">switch</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">portState</a>) {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortStateCreated:</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortStateTeardown:</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500aa42e8647086285b51403db48417f4bbc">OVS_STATE_PORT_TEAR_DOWN</a>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">case</span> NdisSwitchPortStateDeleted:</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a18f5d18a42973f1011c1171fffc12aeb">OVS_STATE_PORT_DELETED</a>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;}</div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a104dff900611aecef40cc4f5a03beaeb">OVS_STATE_PORT_CREATED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:54</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a8a99ffc44307e2a46d0b63f7a2404ee6"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a8a99ffc44307e2a46d0b63f7a2404ee6">_OVS_VPORT_ENTRY::isExternal</a></div><div class="ttdeci">BOOLEAN isExternal</div><div class="ttdef"><b>Definition:</b> Vport.h:132</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac0216ae815d64b53517ac042c9c004f1"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac0216ae815d64b53517ac042c9c004f1">_OVS_VPORT_ENTRY::hvPortName</a></div><div class="ttdeci">NDIS_SWITCH_PORT_NAME hvPortName</div><div class="ttdef"><b>Definition:</b> Vport.h:112</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500aa42e8647086285b51403db48417f4bbc"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500aa42e8647086285b51403db48417f4bbc">OVS_STATE_PORT_TEAR_DOWN</a></div><div class="ttdef"><b>Definition:</b> Vport.h:57</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a18f5d18a42973f1011c1171fffc12aeb"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a18f5d18a42973f1011c1171fffc12aeb">OVS_STATE_PORT_DELETED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:58</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a16d0ef70bf7036bc8dc654c243b27da7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a16d0ef70bf7036bc8dc654c243b27da7">_OVS_VPORT_ENTRY::portType</a></div><div class="ttdeci">NDIS_SWITCH_PORT_TYPE portType</div><div class="ttdef"><b>Definition:</b> Vport.h:106</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:226</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3d3cf73768a68e5b623f4759635f217a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3d3cf73768a68e5b623f4759635f217a">_OVS_VPORT_ENTRY::portFriendlyName</a></div><div class="ttdeci">IF_COUNTED_STRING portFriendlyName</div><div class="ttdef"><b>Definition:</b> Vport.h:113</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ae6e1b57f475d44b6725b1d79b9f0d218"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ae6e1b57f475d44b6725b1d79b9f0d218">_OVS_VPORT_ENTRY::portState</a></div><div class="ttdeci">NDIS_SWITCH_PORT_STATE portState</div><div class="ttdef"><b>Definition:</b> Vport.h:104</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_abd37a1763a5faec6de597c672bf1a590"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#abd37a1763a5faec6de597c672bf1a590">_OVS_VPORT_ENTRY::portId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID portId</div><div class="ttdef"><b>Definition:</b> Vport.h:101</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a40154f02a9c1e5bd800a36a22ee93b8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsNewVportCmdHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    NDIS_STATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    PCHAR portName;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    ULONG portNameLen;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    UINT32 portType;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    BOOLEAN isBridgeInternal = FALSE;</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    BOOLEAN vportAllocated = FALSE, vportInitialized = FALSE;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    BOOLEAN addInternalPortAsNetdev = FALSE;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__NL__POLICY.html">NL_POLICY</a> ovsVportPolicy[] = {</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] = { .<a class="code" href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">type</a> = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = TRUE },</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = FALSE },</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a>, .maxLen = <a class="code" href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a>,</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                                  .optional = FALSE},</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a>,</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                                        .optional = FALSE },</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824">NL_A_NESTED</a>, .optional = TRUE },</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    };</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> vportAttrs[<a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy)];</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="comment">/* input buffer has been validated while validating write dev op. */</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a> != NULL);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="comment">/* Output buffer has been validated while validating transact dev op. */</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    ASSERT(msgOut != NULL &amp;&amp; usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a> &gt;= <span class="keyword">sizeof</span> *msgOut);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn,</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <a class="code" href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a>,</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <a class="code" href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn),</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;        ovsVportPolicy, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy),</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        vportAttrs, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(vportAttrs))) {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER;</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    }</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    portName = <a class="code" href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    portNameLen = <a class="code" href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    portType = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>]);</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="comment">/* we are expecting null terminated strings to be passed */</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    ASSERT(portName[portNameLen - 1] == <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    NdisAcquireRWLockWrite(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    vport = <a class="code" href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, portName);</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    <span class="keywordflow">if</span> (vport) {</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66">NL_ERROR_EXIST</a>;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    }</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    <span class="keywordflow">if</span> (portName &amp;&amp; portType == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a> &amp;&amp;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        !strcmp(<a class="code" href="Vport_8h.html#a7eb3f392042222a0f697da05a6abe360">OVS_DPPORT_INTERNAL_NAME_A</a>, portName)) {</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        addInternalPortAsNetdev = TRUE;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">if</span> (portName &amp;&amp; portType == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a> &amp;&amp;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;        strcmp(<a class="code" href="Vport_8h.html#a7eb3f392042222a0f697da05a6abe360">OVS_DPPORT_INTERNAL_NAME_A</a>, portName)) {</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        isBridgeInternal = TRUE;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordflow">if</span> (portType == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a> &amp;&amp; !isBridgeInternal) {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        vport = <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a>;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (portType == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a>) {</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        <span class="comment">/* External ports can also be looked up like VIF ports. */</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        vport = <a class="code" href="Vport_8c.html#a17e310b20a6deebddb71ffbabb053b36">OvsFindVportByHvNameA</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, portName);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        ASSERT(<a class="code" href="Vport_8h.html#ae88d9a409778eaa19e4f153867bcf879">OvsIsTunnelVportType</a>(portType) ||</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;               (portType == <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a> &amp;&amp; isBridgeInternal));</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        vport = (<a class="code" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>)<a class="code" href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a>();</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">if</span> (vport == NULL) {</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a">NL_ERROR_NOMEM</a>;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;            <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        }</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        vportAllocated = TRUE;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="Vport_8h.html#ae88d9a409778eaa19e4f153867bcf879">OvsIsTunnelVportType</a>(portType)) {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            UINT16 transportPortDest = 0;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;            <span class="keywordflow">switch</span> (portType) {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a>:</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                transportPortDest = <a class="code" href="Vxlan_8h.html#a6c0513e1706bbd0d51693c391adf1a6f">VXLAN_UDP_PORT</a>;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a>:</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                transportPortDest = <a class="code" href="Stt_8h.html#a88c069ed4628b043d50b7f429e8f5133">STT_TCP_PORT</a>;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> attr = <a class="code" href="Netlink_8c.html#abf8885608e031e26a8dc228260ddaa59">NlAttrFindNested</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>],</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                                             <a class="code" href="openvswitch_8h.html#a96a58e29e8dbf2b5bdeb775cba46556eae2bec9320cf2cc32228c9783e1bba39a">OVS_TUNNEL_ATTR_DST_PORT</a>);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            <span class="keywordflow">if</span> (attr) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                transportPortDest = <a class="code" href="Netlink_8c.html#a515755a27f691400b4d7c6f6f8c01d14">NlAttrGetU16</a>(attr);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            }</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            status = <a class="code" href="Vport_8c.html#a18d7b1f5ae328614eb0c7bd6cd91841b">OvsInitTunnelVport</a>(usrParamsCtx,</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                                        vport,</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                                        portType,</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                                        transportPortDest);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a>(status);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;            <a class="code" href="Vport_8c.html#a1b442ba8bfbcc429a4ef4441688a1549">OvsInitBridgeInternalVport</a>(vport);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        vportInitialized = TRUE;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        <span class="keywordflow">if</span> (nlError == <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>) {</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>;</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = NdisSwitchNicStateConnected;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment">             * Allow the vport to be deleted, because there is no</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="comment">             * corresponding hyper-v switch part.</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> = TRUE;</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;            <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        }</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    }</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    }</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> != <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>) {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66">NL_ERROR_EXIST</a>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;    <span class="comment">/* Initialize the vport with OVS specific properties. */</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordflow">if</span> (addInternalPortAsNetdev != TRUE) {</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> = portType;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    }</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] != NULL) {</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">         * XXX: when we implement the limit for ovs port number to be</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">         * MAXUINT16, we&#39;ll need to check the port number received from the</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">         * userspace.</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>]);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> = <a class="code" href="Vport_8c.html#a20a81513890208f58a777fa20ae21417">OvsComputeVportNo</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> == <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>) {</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a">NL_ERROR_NOMEM</a>;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;        }</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    }</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <span class="comment">/* The ovs port name must be uninitialized. */</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>[0] == <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    ASSERT(portNameLen &lt;= <a class="code" href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a>);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>, portName, portNameLen);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="comment">/* if we don&#39;t have options, then vport-&gt;portOptions will be NULL */</span></div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a39aeaa3afa3831eda24b4e48654bc01e">portOptions</a> = vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>];</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">     * XXX: when we implement OVS_DP_ATTR_USER_FEATURES in datapath,</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">     * we&#39;ll need to check the OVS_DP_F_VPORT_PIDS flag: if it is set,</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">     * it means we have an array of pids, instead of a single pid.</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment">     * ATM we assume we have one pid only.</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">upcallPid</a> = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>]);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    status = <a class="code" href="Vport_8c.html#a7cc578327abf94fc45ef88a25a626914">InitOvsVportCommon</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, vport);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    ASSERT(status == STATUS_SUCCESS);</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    status = <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport, msgIn, usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>,</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                                   usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>,</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                                   <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;Cleanup:</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="keywordflow">if</span> ((nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>) &amp;&amp; (nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a6b06db35fcc63fd516b270d58e64ed1e">NL_ERROR_PENDING</a>)) {</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>)</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        <a class="code" href="netdev_8c.html#a2a63c6207d7307d0ce1967cec3a820a6">if</a> (vport &amp;&amp; vportAllocated == TRUE) {</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            <span class="keywordflow">if</span> (vportInitialized == TRUE) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="Vport_8h.html#ae88d9a409778eaa19e4f153867bcf879">OvsIsTunnelVportType</a>(portType)) {</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                    <span class="keywordflow">switch</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>) {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a>:</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                        <a class="code" href="Vxlan_8c.html#a928226a9155a29ea40ab915384e24c64">OvsCleanupVxlanTunnel</a>(NULL, vport, NULL, NULL);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a>:</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                        <a class="code" href="Stt_8c.html#a0e152abdb66074f2198809f80b8c9541">OvsCleanupSttTunnel</a>(vport);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                        ASSERT(!<span class="stringliteral">&quot;Invalid tunnel port type&quot;</span>);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                    }</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                }</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            }</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;        }</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">return</span> (status == STATUS_PENDING) ? STATUS_PENDING : STATUS_SUCCESS;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:271</div></div>
<div class="ttc" id="Stt_8h_html_a88c069ed4628b043d50b7f429e8f5133"><div class="ttname"><a href="Stt_8h.html#a88c069ed4628b043d50b7f429e8f5133">STT_TCP_PORT</a></div><div class="ttdeci">#define STT_TCP_PORT</div><div class="ttdef"><b>Definition:</b> Stt.h:20</div></div>
<div class="ttc" id="NetlinkError_8h_html_a38751c98cd93e07a0640906c35240f72"><div class="ttname"><a href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a></div><div class="ttdeci">static __inline NlMapStatusToNlErr(NTSTATUS status)</div><div class="ttdef"><b>Definition:</b> NetlinkError.h:205</div></div>
<div class="ttc" id="Vport_8c_html_a18d7b1f5ae328614eb0c7bd6cd91841b"><div class="ttname"><a href="Vport_8c.html#a18d7b1f5ae328614eb0c7bd6cd91841b">OvsInitTunnelVport</a></div><div class="ttdeci">NTSTATUS OvsInitTunnelVport(PVOID userContext, POVS_VPORT_ENTRY vport, OVS_VPORT_TYPE ovsType, UINT16 dstPort)</div><div class="ttdef"><b>Definition:</b> Vport.c:902</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a68fbbe51bd90e0cdc0c832f8617d7552"><div class="ttname"><a href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a></div><div class="ttdeci">#define NLMSG_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:114</div></div>
<div class="ttc" id="Vport_8c_html_a20a81513890208f58a777fa20ae21417"><div class="ttname"><a href="Vport_8c.html#a20a81513890208f58a777fa20ae21417">OvsComputeVportNo</a></div><div class="ttdeci">static UINT32 OvsComputeVportNo(POVS_SWITCH_CONTEXT switchContext)</div><div class="ttdef"><b>Definition:</b> Vport.c:2061</div></div>
<div class="ttc" id="Vxlan_8c_html_a928226a9155a29ea40ab915384e24c64"><div class="ttname"><a href="Vxlan_8c.html#a928226a9155a29ea40ab915384e24c64">OvsCleanupVxlanTunnel</a></div><div class="ttdeci">NTSTATUS OvsCleanupVxlanTunnel(PIRP irp, POVS_VPORT_ENTRY vport, PFNTunnelVportPendingOp callback, PVOID tunnelContext)</div><div class="ttdef"><b>Definition:</b> Vxlan.c:138</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="Netlink_8c_html_a04e9e923292d2fafae3b7d0d5f7086ac"><div class="ttname"><a href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a></div><div class="ttdeci">UINT32 NlAttrGetU32(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:921</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66">NL_ERROR_EXIST</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:62</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a79acfa977569d531ce6212c632515b93"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">_OVS_SWITCH_CONTEXT::internalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY internalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:132</div></div>
<div class="ttc" id="Vport_8c_html_a7cc578327abf94fc45ef88a25a626914"><div class="ttname"><a href="Vport_8c.html#a7cc578327abf94fc45ef88a25a626914">InitOvsVportCommon</a></div><div class="ttdeci">NDIS_STATUS InitOvsVportCommon(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Vport.c:1084</div></div>
<div class="ttc" id="Stt_8c_html_a0e152abdb66074f2198809f80b8c9541"><div class="ttname"><a href="Stt_8c.html#a0e152abdb66074f2198809f80b8c9541">OvsCleanupSttTunnel</a></div><div class="ttdeci">void OvsCleanupSttTunnel(POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Stt.c:78</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:29</div></div>
<div class="ttc" id="Vport_8c_html_a1b442ba8bfbcc429a4ef4441688a1549"><div class="ttname"><a href="Vport_8c.html#a1b442ba8bfbcc429a4ef4441688a1549">OvsInitBridgeInternalVport</a></div><div class="ttdeci">NTSTATUS OvsInitBridgeInternalVport(POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Vport.c:959</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__NL__POLICY_html"><div class="ttname"><a href="struct__NL__POLICY.html">_NL_POLICY</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:64</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="Netlink_8c_html_aaf271cb15547bb69ad81531657bf10ab"><div class="ttname"><a href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a></div><div class="ttdeci">UINT32 NlMsgAttrsLen(const PNL_MSG_HDR nlh)</div><div class="ttdef"><b>Definition:</b> Netlink.c:665</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a5cacfa504d6e21aca543ef5f3c7b920e"><div class="ttname"><a href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a></div><div class="ttdeci">#define OVS_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:116</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824">NL_A_NESTED</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:58</div></div>
<div class="ttc" id="Netlink_8c_html_abf8885608e031e26a8dc228260ddaa59"><div class="ttname"><a href="Netlink_8c.html#abf8885608e031e26a8dc228260ddaa59">NlAttrFindNested</a></div><div class="ttdeci">const PNL_ATTR NlAttrFindNested(const PNL_ATTR nla, UINT16 type)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1029</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:72</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:232</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a00587ba4288da005a3dfcb7491787616"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">_OVS_VPORT_ENTRY::upcallPid</a></div><div class="ttdeci">UINT32 upcallPid</div><div class="ttdef"><b>Definition:</b> Vport.h:133</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a">NL_ERROR_NOMEM</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:53</div></div>
<div class="ttc" id="DpInternal_8h_html_a2210aaf6c60e310f898fb6fd768272ae"><div class="ttname"><a href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a></div><div class="ttdeci">#define OVS_MAX_PORT_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> DpInternal.h:30</div></div>
<div class="ttc" id="DpInternal_8h_html_acd06da230a96d3b7e6f193c5b3142002"><div class="ttname"><a href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a></div><div class="ttdeci">#define IFNAMSIZ</div><div class="ttdef"><b>Definition:</b> DpInternal.h:21</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a6b06db35fcc63fd516b270d58e64ed1e"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a6b06db35fcc63fd516b270d58e64ed1e">NL_ERROR_PENDING</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:201</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:273</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Switch_8h_html_a41a0a7a50d232916d005ffcc68b9f9f1"><div class="ttname"><a href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a></div><div class="ttdeci">struct _OVS_VPORT_ENTRY * POVS_VPORT_ENTRY</div><div class="ttdef"><b>Definition:</b> Switch.h:47</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:48</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:226</div></div>
<div class="ttc" id="Netlink_8c_html_a515755a27f691400b4d7c6f6f8c01d14"><div class="ttname"><a href="Netlink_8c.html#a515755a27f691400b4d7c6f6f8c01d14">NlAttrGetU16</a></div><div class="ttdeci">UINT16 NlAttrGetU16(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:909</div></div>
<div class="ttc" id="Vport_8c_html_a17e310b20a6deebddb71ffbabb053b36"><div class="ttname"><a href="Vport_8c.html#a17e310b20a6deebddb71ffbabb053b36">OvsFindVportByHvNameA</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByHvNameA(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:701</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a18aba720e92e88602da80f252d1535d5"><div class="ttname"><a href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a></div><div class="ttdeci">UINT32 NlAttrGetSize(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:808</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:274</div></div>
<div class="ttc" id="Util_8h_html_af4761d64884360f7fb99d05371fc53f0"><div class="ttname"><a href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:69</div></div>
<div class="ttc" id="Netlink_8c_html_a7fcd17b677a86abb0d962e287269ea5d"><div class="ttname"><a href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a></div><div class="ttdeci">const PVOID NlAttrGet(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:819</div></div>
<div class="ttc" id="Vport_8c_html_a0b1bcf9f40b33a92023a597c4886c3aa"><div class="ttname"><a href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByOvsName(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:626</div></div>
<div class="ttc" id="NetlinkProto_8h_html_ae613cef4b7f9f12345978d605230f78f"><div class="ttname"><a href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a></div><div class="ttdeci">#define GENL_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:115</div></div>
<div class="ttc" id="struct__NL__ATTR_html"><div class="ttname"><a href="struct__NL__ATTR.html">_NL_ATTR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:102</div></div>
<div class="ttc" id="netdev_8c_html_a2a63c6207d7307d0ce1967cec3a820a6"><div class="ttname"><a href="netdev_8c.html#a2a63c6207d7307d0ce1967cec3a820a6">if</a></div><div class="ttdeci">if(netdev_lookup_class(new_class-&gt;type))</div><div class="ttdef"><b>Definition:</b> netdev.c:227</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="openvswitch_8h_html_a96a58e29e8dbf2b5bdeb775cba46556eae2bec9320cf2cc32228c9783e1bba39a"><div class="ttname"><a href="openvswitch_8h.html#a96a58e29e8dbf2b5bdeb775cba46556eae2bec9320cf2cc32228c9783e1bba39a">OVS_TUNNEL_ATTR_DST_PORT</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:294</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:229</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:270</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Vxlan_8h_html_a6c0513e1706bbd0d51693c391adf1a6f"><div class="ttname"><a href="Vxlan_8h.html#a6c0513e1706bbd0d51693c391adf1a6f">VXLAN_UDP_PORT</a></div><div class="ttdeci">#define VXLAN_UDP_PORT</div><div class="ttdef"><b>Definition:</b> Vxlan.h:86</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__NL__POLICY_html_aa03de43c15a9f143c7fba8924f5b630f"><div class="ttname"><a href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">_NL_POLICY::type</a></div><div class="ttdeci">NL_ATTR_TYPE type</div><div class="ttdef"><b>Definition:</b> Netlink.h:66</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a7992da73dff83938486e53dbe879e35b"><div class="ttname"><a href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a></div><div class="ttdeci">BOOLEAN NlAttrParse(const PNL_MSG_HDR nlMsg, UINT32 attrOffset, UINT32 totalAttrLen, const NL_POLICY policy[], const UINT32 numPolicy, PNL_ATTR attrs[], UINT32 numAttrs)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1047</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:52</div></div>
<div class="ttc" id="Vport_8c_html_a7c874912fad0be0f4232e22e307ea731"><div class="ttname"><a href="Vport_8c.html#a7c874912fad0be0f4232e22e307ea731">OvsAllocateVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsAllocateVport(VOID)</div><div class="ttdef"><b>Definition:</b> Vport.c:752</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
<div class="ttc" id="Vport_8h_html_ae88d9a409778eaa19e4f153867bcf879"><div class="ttname"><a href="Vport_8h.html#ae88d9a409778eaa19e4f153867bcf879">OvsIsTunnelVportType</a></div><div class="ttdeci">static __inline BOOLEAN OvsIsTunnelVportType(OVS_VPORT_TYPE ovsType)</div><div class="ttdef"><b>Definition:</b> Vport.h:180</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a39aeaa3afa3831eda24b4e48654bc01e"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a39aeaa3afa3831eda24b4e48654bc01e">_OVS_VPORT_ENTRY::portOptions</a></div><div class="ttdeci">PNL_ATTR portOptions</div><div class="ttdef"><b>Definition:</b> Vport.h:134</div></div>
<div class="ttc" id="Vport_8h_html_a7eb3f392042222a0f697da05a6abe360"><div class="ttname"><a href="Vport_8h.html#a7eb3f392042222a0f697da05a6abe360">OVS_DPPORT_INTERNAL_NAME_A</a></div><div class="ttdeci">#define OVS_DPPORT_INTERNAL_NAME_A</div><div class="ttdef"><b>Definition:</b> Vport.h:37</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac83bf787fa4f3e5fef189edfa60c7656"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsRemoveAndDeleteVport </td>
          <td>(</td>
          <td class="paramtype">PVOID&#160;</td>
          <td class="paramname"><em>usrParamsContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOLEAN&#160;</td>
          <td class="paramname"><em>hvDelete</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOLEAN&#160;</td>
          <td class="paramname"><em>ovsDelete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html">POVS_USER_PARAMS_CONTEXT</a> usrParamsCtx =</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        (<a class="code" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>)usrParamsContext;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    BOOLEAN hvSwitchPort = FALSE;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    BOOLEAN deletedOnOvs = FALSE;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    BOOLEAN deletedOnHv = FALSE;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">switch</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>) {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a>:</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        <span class="keywordflow">if</span> (!vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">isBridgeInternal</a>) {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="keywordflow">if</span> (hvDelete &amp;&amp; vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> == FALSE) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a32b1e8d96a1b48d9520b079e1685f397">internalPortId</a> = 0;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">internalVport</a> = NULL;</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                <a class="code" href="IpHelper_8c.html#af83b0e7e4223cf6ee9e16603d22dd881">OvsInternalAdapterDown</a>();</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            hvSwitchPort = TRUE;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a>:</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        NTSTATUS status;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        status = <a class="code" href="Vport_8c.html#a47ddbc088b1793dff05ebe30b788cfcb">OvsRemoveTunnelVport</a>(usrParamsCtx, switchContext, vport,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                                      hvDelete, ovsDelete);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        <span class="keywordflow">if</span> (status != STATUS_SUCCESS) {</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;            <span class="keywordflow">return</span> status;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a>:</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <a class="code" href="Stt_8c.html#a0e152abdb66074f2198809f80b8c9541">OvsCleanupSttTunnel</a>(vport);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaf65a369c5ba48431dc28ec57a839068d">OVS_VPORT_TYPE_GRE</a>:</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a>:</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a8a99ffc44307e2a46d0b63f7a2404ee6">isExternal</a>) {</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> == 0) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="comment">/* Such a vport is not part of any of the hash tables, since it</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">                 * is not exposed to userspace. See Vport.h for explanation. */</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                ASSERT(hvDelete == TRUE);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                ASSERT(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a4b0443361638f3ab588f3fb34344fb2c">numPhysicalNics</a> == 0);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a65334e167df16ba6fa1c3b169f239424">virtualExternalPortId</a> = 0;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">virtualExternalVport</a> = NULL;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        hvSwitchPort = TRUE;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">     * &#39;hvDelete&#39; == TRUE indicates that the port should be removed from the</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">     * &#39;portIdHashArray&#39;, while &#39;ovsDelete&#39; == TRUE indicates that the port</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">     * should be removed from &#39;portNoHashArray&#39; and the &#39;ovsPortNameHashArray&#39;.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">     * Both &#39;hvDelete&#39; and &#39;ovsDelete&#39; can be set to TRUE by the caller.</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> == TRUE) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        deletedOnHv = TRUE;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> == <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>) {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        deletedOnOvs = TRUE;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">if</span> (hvDelete &amp;&amp; !deletedOnHv) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> = TRUE;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a8a99ffc44307e2a46d0b63f7a2404ee6">isExternal</a>) {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">nicIndex</a> != 0);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            ASSERT(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a4b0443361638f3ab588f3fb34344fb2c">numPhysicalNics</a>);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a4b0443361638f3ab588f3fb34344fb2c">numPhysicalNics</a>--;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="comment">/* Remove the port from the relevant lists. */</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">portIdLink</a>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">portIdLink</a>);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        deletedOnHv = TRUE;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    }</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">if</span> (ovsDelete &amp;&amp; !deletedOnOvs) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> = <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="comment">/* Remove the port from the relevant lists. */</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">ovsNameLink</a>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">ovsNameLink</a>);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">portNoLink</a>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">portNoLink</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a> == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a> ||</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            <a class="code" href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a> == vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>) {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">tunnelVportLink</a>);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            InitializeListHead(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">tunnelVportLink</a>);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;        deletedOnOvs = TRUE;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">     * Deallocate the port if it has been deleted on the Hyper-V switch as well</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">     * as OVS userspace.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (deletedOnHv &amp;&amp; deletedOnOvs) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">if</span> (hvSwitchPort) {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#afc160fac68c247864577246ac2b7f417">numHvVports</a>--;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">numNonHvVports</a>--;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    }</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;}</div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_af65b9cf76d47a93178b3be08f4a8dd82"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#af65b9cf76d47a93178b3be08f4a8dd82">_OVS_SWITCH_CONTEXT::virtualExternalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY virtualExternalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:131</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_afc160fac68c247864577246ac2b7f417"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#afc160fac68c247864577246ac2b7f417">_OVS_SWITCH_CONTEXT::numHvVports</a></div><div class="ttdeci">UINT32 numHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:163</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a8a99ffc44307e2a46d0b63f7a2404ee6"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a8a99ffc44307e2a46d0b63f7a2404ee6">_OVS_VPORT_ENTRY::isExternal</a></div><div class="ttdeci">BOOLEAN isExternal</div><div class="ttdef"><b>Definition:</b> Vport.h:132</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a6e93c14bb3e3a25f2e05187e26aa2562"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">_OVS_SWITCH_CONTEXT::numNonHvVports</a></div><div class="ttdeci">UINT32 numNonHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:164</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a79acfa977569d531ce6212c632515b93"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a79acfa977569d531ce6212c632515b93">_OVS_SWITCH_CONTEXT::internalVport</a></div><div class="ttdeci">POVS_VPORT_ENTRY internalVport</div><div class="ttdef"><b>Definition:</b> Switch.h:132</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a27fef079a0a083f0312ae858c8a987bd"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">_OVS_VPORT_ENTRY::ovsNameLink</a></div><div class="ttdeci">LIST_ENTRY ovsNameLink</div><div class="ttdef"><b>Definition:</b> Vport.h:86</div></div>
<div class="ttc" id="Stt_8c_html_a0e152abdb66074f2198809f80b8c9541"><div class="ttname"><a href="Stt_8c.html#a0e152abdb66074f2198809f80b8c9541">OvsCleanupSttTunnel</a></div><div class="ttdeci">void OvsCleanupSttTunnel(POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Stt.c:78</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aaf65a369c5ba48431dc28ec57a839068d"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaf65a369c5ba48431dc28ec57a839068d">OVS_VPORT_TYPE_GRE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:228</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html">_OVS_USER_PARAMS_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Datapath.h:83</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="Vport_8c_html_a47ddbc088b1793dff05ebe30b788cfcb"><div class="ttname"><a href="Vport_8c.html#a47ddbc088b1793dff05ebe30b788cfcb">OvsRemoveTunnelVport</a></div><div class="ttdeci">static NTSTATUS OvsRemoveTunnelVport(POVS_USER_PARAMS_CONTEXT usrParamsCtx, POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport, BOOLEAN hvDelete, BOOLEAN ovsDelete)</div><div class="ttdef"><b>Definition:</b> Vport.c:1261</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aaae60ab231553b32a64b09211537fdaf5">OVS_VPORT_TYPE_STT</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:232</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a4a86b816c7f31ea51b1d9b8733dd3e07"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">_OVS_VPORT_ENTRY::tunnelVportLink</a></div><div class="ttdeci">LIST_ENTRY tunnelVportLink</div><div class="ttdef"><b>Definition:</b> Vport.h:89</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ad4a74979cfb52cb0c9f6e1fd23ec6f66"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ad4a74979cfb52cb0c9f6e1fd23ec6f66">_OVS_VPORT_ENTRY::nicIndex</a></div><div class="ttdeci">NDIS_SWITCH_NIC_INDEX nicIndex</div><div class="ttdef"><b>Definition:</b> Vport.h:102</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="Datapath_8h_html_a1ba5df4e5b845af8001c5fd1942eed93"><div class="ttname"><a href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a></div><div class="ttdeci">struct _OVS_USER_PARAMS_CONTEXT * POVS_USER_PARAMS_CONTEXT</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a4b0443361638f3ab588f3fb34344fb2c"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a4b0443361638f3ab588f3fb34344fb2c">_OVS_SWITCH_CONTEXT::numPhysicalNics</a></div><div class="ttdeci">UINT32 numPhysicalNics</div><div class="ttdef"><b>Definition:</b> Switch.h:161</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adcb291580e34ece712b9d089677972bf"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adcb291580e34ece712b9d089677972bf">_OVS_VPORT_ENTRY::portIdLink</a></div><div class="ttdeci">LIST_ENTRY portIdLink</div><div class="ttdef"><b>Definition:</b> Vport.h:87</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6e4ac2b0b398a29e69f898179a47c6f7"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6e4ac2b0b398a29e69f898179a47c6f7">_OVS_VPORT_ENTRY::isBridgeInternal</a></div><div class="ttdeci">BOOLEAN isBridgeInternal</div><div class="ttdef"><b>Definition:</b> Vport.h:131</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa825efa4a45bf501996d8d8fbb83887dd">OVS_VPORT_TYPE_NETDEV</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:226</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a65334e167df16ba6fa1c3b169f239424"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a65334e167df16ba6fa1c3b169f239424">_OVS_SWITCH_CONTEXT::virtualExternalPortId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID virtualExternalPortId</div><div class="ttdef"><b>Definition:</b> Switch.h:129</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a32b1e8d96a1b48d9520b079e1685f397"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a32b1e8d96a1b48d9520b079e1685f397">_OVS_SWITCH_CONTEXT::internalPortId</a></div><div class="ttdeci">NDIS_SWITCH_PORT_ID internalPortId</div><div class="ttdef"><b>Definition:</b> Switch.h:130</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac54c2fc2ad8eaf2184ac4422f5d9a1d0"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">_OVS_VPORT_ENTRY::portNoLink</a></div><div class="ttdeci">LIST_ENTRY portNoLink</div><div class="ttdef"><b>Definition:</b> Vport.h:88</div></div>
<div class="ttc" id="IpHelper_8c_html_af83b0e7e4223cf6ee9e16603d22dd881"><div class="ttname"><a href="IpHelper_8c.html#af83b0e7e4223cf6ee9e16603d22dd881">OvsInternalAdapterDown</a></div><div class="ttdeci">VOID OvsInternalAdapterDown(VOID)</div><div class="ttdef"><b>Definition:</b> IpHelper.c:1059</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aa99034286803fd0adf04dde0fa7e69f00">OVS_VPORT_TYPE_INTERNAL</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:227</div></div>
<div class="ttc" id="openvswitch_8h_html_a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0"><div class="ttname"><a href="openvswitch_8h.html#a9a1b861aa99bd83177a2b10b34745b0aabd94b320598ca17b189318d8e27ac1b0">OVS_VPORT_TYPE_VXLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:229</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47ddbc088b1793dff05ebe30b788cfcb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NTSTATUS OvsRemoveTunnelVport </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a41a0a7a50d232916d005ffcc68b9f9f1">POVS_VPORT_ENTRY</a>&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOLEAN&#160;</td>
          <td class="paramname"><em>hvDelete</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOLEAN&#160;</td>
          <td class="paramname"><em>ovsDelete</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;{</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">POVS_TUNFLT_INIT_CONTEXT</a> tunnelContext = NULL;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    PIRP irp = NULL;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    tunnelContext = <a class="code" href="Util_8c.html#a16a2d82d02eb60fb978a7bf9ecb26905">OvsAllocateMemory</a>(<span class="keyword">sizeof</span>(*tunnelContext));</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (tunnelContext == NULL) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">return</span> STATUS_INSUFFICIENT_RESOURCES;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    RtlZeroMemory(tunnelContext, <span class="keyword">sizeof</span>(*tunnelContext));</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a18717b40bf21e46e51d301211d6a1b0e">switchContext</a> = switchContext;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a0afd51cd1e39e3c875490ce2b452b106">hvSwitchPort</a> = FALSE;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a743780521978b10cb9227c0ef3dc54b0">hvDelete</a> = hvDelete;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#adb9d0f0066d039b0b8574da776aa2e5c">ovsDelete</a> = ovsDelete;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">vport</a> = vport;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> (usrParamsCtx) {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">inputBuffer</a> = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">outputBuffer</a> = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">outputLength</a> = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        irp = usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a62897133c5bab84e74c88b538931124c">irp</a>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="Vxlan_8c.html#a928226a9155a29ea40ab915384e24c64">OvsCleanupVxlanTunnel</a>(irp, vport, <a class="code" href="Vport_8c.html#a7ad7166913610bf8a40ebc23dae4ee2d">OvsTunnelVportPendingRemove</a>,</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                 tunnelContext);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;}</div>
<div class="ttc" id="Vxlan_8c_html_a928226a9155a29ea40ab915384e24c64"><div class="ttname"><a href="Vxlan_8c.html#a928226a9155a29ea40ab915384e24c64">OvsCleanupVxlanTunnel</a></div><div class="ttdeci">NTSTATUS OvsCleanupVxlanTunnel(PIRP irp, POVS_VPORT_ENTRY vport, PFNTunnelVportPendingOp callback, PVOID tunnelContext)</div><div class="ttdef"><b>Definition:</b> Vxlan.c:138</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_ae3e6fa878eeb47950b4fee9661efa692"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">_OVS_TUNFLT_INIT_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:56</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a6e994bc6c28e6a6bec4e748e0bf5cfee"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">_OVS_TUNFLT_INIT_CONTEXT::vport</a></div><div class="ttdeci">POVS_VPORT_ENTRY vport</div><div class="ttdef"><b>Definition:</b> Vport.c:58</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_adb9d0f0066d039b0b8574da776aa2e5c"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#adb9d0f0066d039b0b8574da776aa2e5c">_OVS_TUNFLT_INIT_CONTEXT::ovsDelete</a></div><div class="ttdeci">BOOLEAN ovsDelete</div><div class="ttdef"><b>Definition:</b> Vport.c:61</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a62897133c5bab84e74c88b538931124c"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a62897133c5bab84e74c88b538931124c">_OVS_USER_PARAMS_CONTEXT::irp</a></div><div class="ttdeci">PIRP irp</div><div class="ttdef"><b>Definition:</b> Datapath.h:84</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a0afd51cd1e39e3c875490ce2b452b106"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a0afd51cd1e39e3c875490ce2b452b106">_OVS_TUNFLT_INIT_CONTEXT::hvSwitchPort</a></div><div class="ttdeci">BOOLEAN hvSwitchPort</div><div class="ttdef"><b>Definition:</b> Vport.c:59</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a18717b40bf21e46e51d301211d6a1b0e"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a18717b40bf21e46e51d301211d6a1b0e">_OVS_TUNFLT_INIT_CONTEXT::switchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT switchContext</div><div class="ttdef"><b>Definition:</b> Vport.c:54</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_aa8586f9064f77a00a96d1fb3312b8442"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">_OVS_TUNFLT_INIT_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Vport.c:55</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a743780521978b10cb9227c0ef3dc54b0"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a743780521978b10cb9227c0ef3dc54b0">_OVS_TUNFLT_INIT_CONTEXT::hvDelete</a></div><div class="ttdeci">BOOLEAN hvDelete</div><div class="ttdef"><b>Definition:</b> Vport.c:60</div></div>
<div class="ttc" id="Util_8c_html_a16a2d82d02eb60fb978a7bf9ecb26905"><div class="ttname"><a href="Util_8c.html#a16a2d82d02eb60fb978a7bf9ecb26905">OvsAllocateMemory</a></div><div class="ttdeci">VOID * OvsAllocateMemory(size_t size)</div><div class="ttdef"><b>Definition:</b> Util.c:43</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Vport.c:53</div></div>
<div class="ttc" id="Vport_8c_html_a7ad7166913610bf8a40ebc23dae4ee2d"><div class="ttname"><a href="Vport_8c.html#a7ad7166913610bf8a40ebc23dae4ee2d">OvsTunnelVportPendingRemove</a></div><div class="ttdeci">static VOID OvsTunnelVportPendingRemove(PVOID context, NTSTATUS status, UINT32 *replyLen)</div><div class="ttdef"><b>Definition:</b> Vport.c:2500</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_afca65b867310b384a387abd05dbd309a"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">_OVS_TUNFLT_INIT_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8d395aa833983572b755f541bd0aa8d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NTSTATUS OvsSetVportCmdHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Datapath_8h.html#a1ba5df4e5b845af8001c5fd1942eed93">POVS_USER_PARAMS_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>usrParamsCtx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;{</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    NDIS_STATUS status = STATUS_SUCCESS;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a>;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = NULL;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__NL__POLICY.html">NL_POLICY</a> ovsVportPolicy[] = {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] = { .<a class="code" href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">type</a> = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = TRUE },</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = TRUE },</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a>, .maxLen = <a class="code" href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a>,</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                  .optional = TRUE },</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a>,</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;                                        .optional = TRUE },</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dadab030c40c3510bf42f3e33d3986fbaa">OVS_VPORT_ATTR_STATS</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a>,</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                   .minLen = <span class="keyword">sizeof</span>(<a class="code" href="Vport_8h.html#a75c956547b85efb61c9f98b7b9e9e8fd">OVS_VPORT_FULL_STATS</a>),</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                                   .maxLen = <span class="keyword">sizeof</span>(<a class="code" href="struct__OVS__VPORT__FULL__STATS.html">OVS_VPORT_FULL_STATS</a>),</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;                                   .optional = TRUE },</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;        [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824">NL_A_NESTED</a>, .optional = TRUE },</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    };</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> vportAttrs[<a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy)];</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    ASSERT(usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">inputBuffer</a> != NULL);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn,</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;        <a class="code" href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a>,</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;        <a class="code" href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn),</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        ovsVportPolicy, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy),</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;        vportAttrs, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(vportAttrs))) {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        <span class="keywordflow">return</span> STATUS_INVALID_PARAMETER;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="comment">/* Output buffer has been validated while validating transact dev op. */</span></div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    ASSERT(msgOut != NULL &amp;&amp; usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a> &gt;= <span class="keyword">sizeof</span> *msgOut);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    NdisAcquireRWLockWrite(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] != NULL) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        PSTR portName = <a class="code" href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="preprocessor">#ifdef DBG</span></div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        UINT32 portNameLen = <a class="code" href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        <span class="comment">/* the port name is expected to be null-terminated */</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        ASSERT(portName[portNameLen - 1] == <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        vport = <a class="code" href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, portName);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] != NULL) {</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        vport = <a class="code" href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                    <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>]));</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    }</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">if</span> (!vport) {</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a>;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    }</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="comment">     * XXX: when we implement OVS_DP_ATTR_USER_FEATURES in datapath,</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="comment">     * we&#39;ll need to check the OVS_DP_F_VPORT_PIDS flag: if it is set,</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="comment">     * it means we have an array of pids, instead of a single pid.</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="comment">     * Currently, we support only one pid.</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>]) {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">upcallPid</a> = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[OVS_VPORT_ATTR_UPCALL_PID]);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>]) {</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        <a class="code" href="OvsDpInterfaceExt_8h.html#a4662d316777fe03a616ac573ed86b0f3">OVS_VPORT_TYPE</a> <a class="code" href="datapath_2flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a> = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[OVS_VPORT_ATTR_TYPE]);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;        <span class="keywordflow">if</span> (type != vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">ovsType</a>) {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a>;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;            <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        }</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    }</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>]) {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <a class="code" href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a>(<span class="stringliteral">&quot;Vport options not supported&quot;</span>);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aa720e3726e4d95b07dd0a91208dd86f9">NL_ERROR_NOTSUPP</a>;</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;        <span class="keywordflow">goto</span> Cleanup;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    }</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    status = <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport, msgIn, usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>,</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                                   usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">outputLength</a>,</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                                   <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;Cleanup:</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    NdisReleaseRWLock(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;    <span class="keywordflow">if</span> (nlError != <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>) {</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;        <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>)</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;            usrParamsCtx-&gt;<a class="code" href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">outputBuffer</a>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;        *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    }</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keywordflow">return</span> STATUS_SUCCESS;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:271</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a68fbbe51bd90e0cdc0c832f8617d7552"><div class="ttname"><a href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a></div><div class="ttdeci">#define NLMSG_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:114</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a0a421a5594267176b7f9cb2c242a6a24"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a0a421a5594267176b7f9cb2c242a6a24">_OVS_USER_PARAMS_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:90</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_adb13b4c5be2916f7576370f66b41523a"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#adb13b4c5be2916f7576370f66b41523a">_OVS_VPORT_ENTRY::ovsType</a></div><div class="ttdeci">OVS_VPORT_TYPE ovsType</div><div class="ttdef"><b>Definition:</b> Vport.h:92</div></div>
<div class="ttc" id="Netlink_8c_html_a04e9e923292d2fafae3b7d0d5f7086ac"><div class="ttname"><a href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a></div><div class="ttdeci">UINT32 NlAttrGetU32(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:921</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818aa720e3726e4d95b07dd0a91208dd86f9"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aa720e3726e4d95b07dd0a91208dd86f9">NL_ERROR_NOTSUPP</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:177</div></div>
<div class="ttc" id="OvsDpInterfaceExt_8h_html_a4662d316777fe03a616ac573ed86b0f3"><div class="ttname"><a href="OvsDpInterfaceExt_8h.html#a4662d316777fe03a616ac573ed86b0f3">OVS_VPORT_TYPE</a></div><div class="ttdeci">enum ovs_vport_type OVS_VPORT_TYPE</div><div class="ttdef"><b>Definition:</b> OvsDpInterfaceExt.h:157</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:29</div></div>
<div class="ttc" id="struct__NL__POLICY_html"><div class="ttname"><a href="struct__NL__POLICY.html">_NL_POLICY</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:64</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_ae713efa94c570f15b3097f5f7fa23716"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#ae713efa94c570f15b3097f5f7fa23716">_OVS_USER_PARAMS_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Datapath.h:92</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="struct__OVS__USER__PARAMS__CONTEXT_html_a41beba71b744aca9e1ad9c23a9fbfb4b"><div class="ttname"><a href="struct__OVS__USER__PARAMS__CONTEXT.html#a41beba71b744aca9e1ad9c23a9fbfb4b">_OVS_USER_PARAMS_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Datapath.h:88</div></div>
<div class="ttc" id="Netlink_8c_html_aaf271cb15547bb69ad81531657bf10ab"><div class="ttname"><a href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a></div><div class="ttdeci">UINT32 NlMsgAttrsLen(const PNL_MSG_HDR nlh)</div><div class="ttdef"><b>Definition:</b> Netlink.c:665</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a5cacfa504d6e21aca543ef5f3c7b920e"><div class="ttname"><a href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a></div><div class="ttdeci">#define OVS_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:116</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824">NL_A_NESTED</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:58</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:72</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a00587ba4288da005a3dfcb7491787616"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">_OVS_VPORT_ENTRY::upcallPid</a></div><div class="ttdeci">UINT32 upcallPid</div><div class="ttdef"><b>Definition:</b> Vport.h:133</div></div>
<div class="ttc" id="struct__OVS__VPORT__FULL__STATS_html"><div class="ttname"><a href="struct__OVS__VPORT__FULL__STATS.html">_OVS_VPORT_FULL_STATS</a></div><div class="ttdef"><b>Definition:</b> Vport.h:76</div></div>
<div class="ttc" id="DpInternal_8h_html_acd06da230a96d3b7e6f193c5b3142002"><div class="ttname"><a href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a></div><div class="ttdeci">#define IFNAMSIZ</div><div class="ttdef"><b>Definition:</b> DpInternal.h:21</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:273</div></div>
<div class="ttc" id="Vport_8h_html_a75c956547b85efb61c9f98b7b9e9e8fd"><div class="ttname"><a href="Vport_8h.html#a75c956547b85efb61c9f98b7b9e9e8fd">OVS_VPORT_FULL_STATS</a></div><div class="ttdeci">struct _OVS_VPORT_FULL_STATS OVS_VPORT_FULL_STATS</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="Debug_8h_html_aaf451970c4433dca3e83f5a1e7e5b794"><div class="ttname"><a href="Debug_8h.html#aaf451970c4433dca3e83f5a1e7e5b794">OVS_LOG_ERROR</a></div><div class="ttdeci">#define OVS_LOG_ERROR(_format,...)</div><div class="ttdef"><b>Definition:</b> Debug.h:68</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:48</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a2973184ca5dc0155122d0a3cd83f1461">NL_ERROR_NODEV</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:66</div></div>
<div class="ttc" id="Vport_8c_html_a090f0c9c725e5a23d2e1a968b7d9f7ae"><div class="ttname"><a href="Vport_8c.html#a090f0c9c725e5a23d2e1a968b7d9f7ae">OvsFindVportByPortNo</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByPortNo(POVS_SWITCH_CONTEXT switchContext, UINT32 portNo)</div><div class="ttdef"><b>Definition:</b> Vport.c:586</div></div>
<div class="ttc" id="Netlink_8c_html_a18aba720e92e88602da80f252d1535d5"><div class="ttname"><a href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a></div><div class="ttdeci">UINT32 NlAttrGetSize(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:808</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:274</div></div>
<div class="ttc" id="Util_8h_html_af4761d64884360f7fb99d05371fc53f0"><div class="ttname"><a href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:69</div></div>
<div class="ttc" id="Netlink_8c_html_a7fcd17b677a86abb0d962e287269ea5d"><div class="ttname"><a href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a></div><div class="ttdeci">const PVOID NlAttrGet(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:819</div></div>
<div class="ttc" id="Vport_8c_html_a0b1bcf9f40b33a92023a597c4886c3aa"><div class="ttname"><a href="Vport_8c.html#a0b1bcf9f40b33a92023a597c4886c3aa">OvsFindVportByOvsName</a></div><div class="ttdeci">POVS_VPORT_ENTRY OvsFindVportByOvsName(POVS_SWITCH_CONTEXT switchContext, PSTR name)</div><div class="ttdef"><b>Definition:</b> Vport.c:626</div></div>
<div class="ttc" id="NetlinkProto_8h_html_ae613cef4b7f9f12345978d605230f78f"><div class="ttname"><a href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a></div><div class="ttdeci">#define GENL_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:115</div></div>
<div class="ttc" id="struct__NL__ATTR_html"><div class="ttname"><a href="struct__NL__ATTR.html">_NL_ATTR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:102</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:270</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__NL__POLICY_html_aa03de43c15a9f143c7fba8924f5b630f"><div class="ttname"><a href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">_NL_POLICY::type</a></div><div class="ttdeci">NL_ATTR_TYPE type</div><div class="ttdef"><b>Definition:</b> Netlink.h:66</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a7992da73dff83938486e53dbe879e35b"><div class="ttname"><a href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a></div><div class="ttdeci">BOOLEAN NlAttrParse(const PNL_MSG_HDR nlMsg, UINT32 attrOffset, UINT32 totalAttrLen, const NL_POLICY policy[], const UINT32 numPolicy, PNL_ATTR attrs[], UINT32 numAttrs)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1047</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:52</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464dadab030c40c3510bf42f3e33d3986fbaa"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dadab030c40c3510bf42f3e33d3986fbaa">OVS_VPORT_ATTR_STATS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:276</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
<div class="ttc" id="datapath_2flow_8h_html_ab22aaab04f806700def00f32823fcb9e"><div class="ttname"><a href="datapath_2flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a></div><div class="ttdeci">__be16 type</div><div class="ttdef"><b>Definition:</b> flow.h:117</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac03074bde235c54e2618cfa7b6b08297"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VOID OvsTunnelVportPendingInit </td>
          <td>(</td>
          <td class="paramtype">PVOID&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NTSTATUS&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;{</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">POVS_TUNFLT_INIT_CONTEXT</a> tunnelContext =</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        (<a class="code" href="Vport_8c.html#ae2e5730a863b1d13e6fbf09e9e62213f">POVS_TUNFLT_INIT_CONTEXT</a>) context;</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">vport</a>;</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">inputBuffer</a>;</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">outputBuffer</a>;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    PCHAR portName;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    ULONG portNameLen = 0;</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    UINT32 portType = 0;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a>;</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;    BOOLEAN <a class="code" href="netdev_8c.html#ab70064e6ae258de4a1d0811824412152">error</a> = TRUE;</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <span class="keywordflow">if</span> (!NT_SUCCESS(status)) {</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a>(status);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;        }</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct__NL__POLICY.html">NL_POLICY</a> ovsVportPolicy[] = {</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;            [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] = { .<a class="code" href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">type</a> = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = TRUE },</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;            [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a>, .optional = FALSE },</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a>, .maxLen = <a class="code" href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a>,</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            .optional = FALSE },</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;            [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a>,</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;            .optional = FALSE },</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            [<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>] = { .type = <a class="code" href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824">NL_A_NESTED</a>, .optional = TRUE },</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        };</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <a class="code" href="struct__NL__ATTR.html">PNL_ATTR</a> vportAttrs[<a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy)];</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="comment">/* input buffer has been validated while validating write dev op. */</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        ASSERT(msgIn != NULL);</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;        <span class="comment">/* Output buffer has been validated while validating transact dev op. */</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;        ASSERT(msgOut != NULL &amp;&amp; tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">outputLength</a> &gt;= <span class="keyword">sizeof</span> *msgOut);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn,</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;            <a class="code" href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a> + <a class="code" href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a>,</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;            <a class="code" href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a>((<a class="code" href="struct__NL__MSG__HDR.html">PNL_MSG_HDR</a>)msgIn),</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;            ovsVportPolicy, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(ovsVportPolicy),</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;            vportAttrs, <a class="code" href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a>(vportAttrs))) {</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a>;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        }</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        portName = <a class="code" href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        portNameLen = <a class="code" href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a>]);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        portType = <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a>]);</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> != <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>) {</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;            nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66">NL_ERROR_EXIST</a>;</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;        }</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">ovsState</a> = <a class="code" href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a>;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">nicState</a> = NdisSwitchNicStateConnected;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment">         * Allow the vport to be deleted, because there is no</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment">         * corresponding hyper-v switch part.</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> = TRUE;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        <span class="keywordflow">if</span> (vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>] != NULL) {</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;            <span class="comment">/*</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">             * XXX: when we implement the limit for OVS port number to be</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment">             * MAXUINT16, we&#39;ll need to check the port number received from the</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment">             * userspace.</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> =</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;                <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a>]);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;            vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> =</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;                <a class="code" href="Vport_8c.html#a20a81513890208f58a777fa20ae21417">OvsComputeVportNo</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;            <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> == <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>) {</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;                nlError = <a class="code" href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a">NL_ERROR_NOMEM</a>;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;            }</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;        }</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        <span class="comment">/* The ovs port name must be uninitialized. */</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;        ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>[0] == <span class="charliteral">&#39;\0&#39;</span>);</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        ASSERT(portNameLen &lt;= <a class="code" href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a>);</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;        RtlCopyMemory(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">ovsName</a>, portName, portNameLen);</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;        <span class="comment">/* if we don&#39;t have options, then vport-&gt;portOptions will be NULL */</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a39aeaa3afa3831eda24b4e48654bc01e">portOptions</a> = vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>];</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="comment">         * XXX: when we implement OVS_DP_ATTR_USER_FEATURES in datapath,</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="comment">         * we&#39;ll need to check the OVS_DP_F_VPORT_PIDS flag: if it is set,</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="comment">         * it means we have an array of pids, instead of a single pid.</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">         * ATM we assume we have one pid only.</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">upcallPid</a> =</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;            <a class="code" href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a>(vportAttrs[<a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>]);</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        status = <a class="code" href="Vport_8c.html#a7cc578327abf94fc45ef88a25a626914">InitOvsVportCommon</a>(<a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>, vport);</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        ASSERT(status == STATUS_SUCCESS);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;        <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport,</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                              msgIn,</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                              msgOut,</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                              tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">outputLength</a>,</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;                              <a class="code" href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a>-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;        *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;        error = FALSE;</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    } <span class="keywordflow">while</span> (error);</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="keywordflow">if</span> (error) {</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;        <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>) msgOut;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <a class="code" href="Vxlan_8c.html#a928226a9155a29ea40ab915384e24c64">OvsCleanupVxlanTunnel</a>(NULL, vport, NULL, NULL);</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;        <a class="code" href="Util_8c.html#ac1f0c2dfc6d42c35b4e6817f9c5b9e61">OvsFreeMemory</a>(vport);</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;        <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;        *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    }</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da84ada86f1005907daaf7dc8eb0c0a637">OVS_VPORT_ATTR_TYPE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:271</div></div>
<div class="ttc" id="NetlinkError_8h_html_a38751c98cd93e07a0640906c35240f72"><div class="ttname"><a href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a></div><div class="ttdeci">static __inline NlMapStatusToNlErr(NTSTATUS status)</div><div class="ttdef"><b>Definition:</b> NetlinkError.h:205</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a68fbbe51bd90e0cdc0c832f8617d7552"><div class="ttname"><a href="NetlinkProto_8h.html#a68fbbe51bd90e0cdc0c832f8617d7552">NLMSG_HDRLEN</a></div><div class="ttdeci">#define NLMSG_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:114</div></div>
<div class="ttc" id="Vport_8c_html_a20a81513890208f58a777fa20ae21417"><div class="ttname"><a href="Vport_8c.html#a20a81513890208f58a777fa20ae21417">OvsComputeVportNo</a></div><div class="ttdeci">static UINT32 OvsComputeVportNo(POVS_SWITCH_CONTEXT switchContext)</div><div class="ttdef"><b>Definition:</b> Vport.c:2061</div></div>
<div class="ttc" id="Vxlan_8c_html_a928226a9155a29ea40ab915384e24c64"><div class="ttname"><a href="Vxlan_8c.html#a928226a9155a29ea40ab915384e24c64">OvsCleanupVxlanTunnel</a></div><div class="ttdeci">NTSTATUS OvsCleanupVxlanTunnel(PIRP irp, POVS_VPORT_ENTRY vport, PFNTunnelVportPendingOp callback, PVOID tunnelContext)</div><div class="ttdef"><b>Definition:</b> Vxlan.c:138</div></div>
<div class="ttc" id="Netlink_8c_html_a04e9e923292d2fafae3b7d0d5f7086ac"><div class="ttname"><a href="Netlink_8c.html#a04e9e923292d2fafae3b7d0d5f7086ac">NlAttrGetU32</a></div><div class="ttdeci">UINT32 NlAttrGetU32(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:921</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818aad777b7d31b90ec0097eeb1387700c66">NL_ERROR_EXIST</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:62</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_ae3e6fa878eeb47950b4fee9661efa692"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">_OVS_TUNFLT_INIT_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:56</div></div>
<div class="ttc" id="Vport_8c_html_a7cc578327abf94fc45ef88a25a626914"><div class="ttname"><a href="Vport_8c.html#a7cc578327abf94fc45ef88a25a626914">InitOvsVportCommon</a></div><div class="ttdeci">NDIS_STATUS InitOvsVportCommon(POVS_SWITCH_CONTEXT switchContext, POVS_VPORT_ENTRY vport)</div><div class="ttdef"><b>Definition:</b> Vport.c:1084</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html"><div class="ttname"><a href="struct__NL__MSG__HDR.html">_NL_MSG_HDR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:78</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="Vport_8c_html_ae2e5730a863b1d13e6fbf09e9e62213f"><div class="ttname"><a href="Vport_8c.html#ae2e5730a863b1d13e6fbf09e9e62213f">POVS_TUNFLT_INIT_CONTEXT</a></div><div class="ttdeci">struct _OVS_TUNFLT_INIT_CONTEXT * POVS_TUNFLT_INIT_CONTEXT</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a6e994bc6c28e6a6bec4e748e0bf5cfee"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">_OVS_TUNFLT_INIT_CONTEXT::vport</a></div><div class="ttdeci">POVS_VPORT_ENTRY vport</div><div class="ttdef"><b>Definition:</b> Vport.c:58</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a00238e5fa4e0ca9c1752b4ac89d78d09">NL_ERROR_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:29</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_aac53fa02e3879901b16a6dd441b1b0d8"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#aac53fa02e3879901b16a6dd441b1b0d8">_OVS_VPORT_ENTRY::ovsState</a></div><div class="ttdeci">OVS_VPORT_STATE ovsState</div><div class="ttdef"><b>Definition:</b> Vport.h:91</div></div>
<div class="ttc" id="struct__NL__POLICY_html"><div class="ttname"><a href="struct__NL__POLICY.html">_NL_POLICY</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:64</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="Netlink_8c_html_aaf271cb15547bb69ad81531657bf10ab"><div class="ttname"><a href="Netlink_8c.html#aaf271cb15547bb69ad81531657bf10ab">NlMsgAttrsLen</a></div><div class="ttdeci">UINT32 NlMsgAttrsLen(const PNL_MSG_HDR nlh)</div><div class="ttdef"><b>Definition:</b> Netlink.c:665</div></div>
<div class="ttc" id="Vport_8c_html_ae4e8c266508b5f55fa33d7d21941daf9"><div class="ttname"><a href="Vport_8c.html#ae4e8c266508b5f55fa33d7d21941daf9">gOvsSwitchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT gOvsSwitchContext</div><div class="ttdef"><b>Definition:</b> Switch.c:37</div></div>
<div class="ttc" id="NetlinkProto_8h_html_a5cacfa504d6e21aca543ef5f3c7b920e"><div class="ttname"><a href="NetlinkProto_8h.html#a5cacfa504d6e21aca543ef5f3c7b920e">OVS_HDRLEN</a></div><div class="ttdeci">#define OVS_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:116</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aa70bb91b02c8d63b75d171676ba85824">NL_A_NESTED</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:58</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464daef39b12d8a0cb39f2248d82f435bec3c">OVS_VPORT_ATTR_NAME</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:272</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a7d8a05d8cb3c073cde6df6e361e6406b">NL_ERROR_INVAL</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:72</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a00587ba4288da005a3dfcb7491787616"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a00587ba4288da005a3dfcb7491787616">_OVS_VPORT_ENTRY::upcallPid</a></div><div class="ttdeci">UINT32 upcallPid</div><div class="ttdef"><b>Definition:</b> Vport.h:133</div></div>
<div class="ttc" id="NetlinkError_8h_html_ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a"><div class="ttname"><a href="NetlinkError_8h.html#ad341523f7e07a10afd51455df5a0b818a8452e299986b7747a955c85f842eaa3a">NL_ERROR_NOMEM</a></div><div class="ttdef"><b>Definition:</b> NetlinkError.h:53</div></div>
<div class="ttc" id="DpInternal_8h_html_a2210aaf6c60e310f898fb6fd768272ae"><div class="ttname"><a href="DpInternal_8h.html#a2210aaf6c60e310f898fb6fd768272ae">OVS_MAX_PORT_NAME_LENGTH</a></div><div class="ttdeci">#define OVS_MAX_PORT_NAME_LENGTH</div><div class="ttdef"><b>Definition:</b> DpInternal.h:30</div></div>
<div class="ttc" id="DpInternal_8h_html_acd06da230a96d3b7e6f193c5b3142002"><div class="ttname"><a href="DpInternal_8h.html#acd06da230a96d3b7e6f193c5b3142002">IFNAMSIZ</a></div><div class="ttdeci">#define IFNAMSIZ</div><div class="ttdef"><b>Definition:</b> DpInternal.h:21</div></div>
<div class="ttc" id="Util_8c_html_ac1f0c2dfc6d42c35b4e6817f9c5b9e61"><div class="ttname"><a href="Util_8c.html#ac1f0c2dfc6d42c35b4e6817f9c5b9e61">OvsFreeMemory</a></div><div class="ttdeci">VOID OvsFreeMemory(VOID *ptr)</div><div class="ttdef"><b>Definition:</b> Util.c:72</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:273</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_aa8586f9064f77a00a96d1fb3312b8442"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">_OVS_TUNFLT_INIT_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Vport.c:55</div></div>
<div class="ttc" id="netdev_8c_html_ab70064e6ae258de4a1d0811824412152"><div class="ttname"><a href="netdev_8c.html#ab70064e6ae258de4a1d0811824412152">error</a></div><div class="ttdeci">return error</div><div class="ttdef"><b>Definition:</b> netdev.c:248</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a0350c48c494f285dd59681f4c38fb8c2">NL_A_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:48</div></div>
<div class="ttc" id="Vport_8h_html_abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a"><div class="ttname"><a href="Vport_8h.html#abb7621346fd1817c79de758a7fa38500a92e85d37d1e9c24506a040f4dc02a28a">OVS_STATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> Vport.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a18aba720e92e88602da80f252d1535d5"><div class="ttname"><a href="Netlink_8c.html#a18aba720e92e88602da80f252d1535d5">NlAttrGetSize</a></div><div class="ttdeci">UINT32 NlAttrGetSize(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:808</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:274</div></div>
<div class="ttc" id="Util_8h_html_af4761d64884360f7fb99d05371fc53f0"><div class="ttname"><a href="Util_8h.html#af4761d64884360f7fb99d05371fc53f0">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:69</div></div>
<div class="ttc" id="Netlink_8c_html_a7fcd17b677a86abb0d962e287269ea5d"><div class="ttname"><a href="Netlink_8c.html#a7fcd17b677a86abb0d962e287269ea5d">NlAttrGet</a></div><div class="ttdeci">const PVOID NlAttrGet(const PNL_ATTR nla)</div><div class="ttdef"><b>Definition:</b> Netlink.c:819</div></div>
<div class="ttc" id="NetlinkProto_8h_html_ae613cef4b7f9f12345978d605230f78f"><div class="ttname"><a href="NetlinkProto_8h.html#ae613cef4b7f9f12345978d605230f78f">GENL_HDRLEN</a></div><div class="ttdeci">#define GENL_HDRLEN</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:115</div></div>
<div class="ttc" id="struct__NL__ATTR_html"><div class="ttname"><a href="struct__NL__ATTR.html">_NL_ATTR</a></div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:102</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da08e4cd652a0f6cd6eeeaac1db3bdf503">OVS_VPORT_ATTR_PORT_NO</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:270</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__NL__POLICY_html_aa03de43c15a9f143c7fba8924f5b630f"><div class="ttname"><a href="struct__NL__POLICY.html#aa03de43c15a9f143c7fba8924f5b630f">_NL_POLICY::type</a></div><div class="ttdeci">NL_ATTR_TYPE type</div><div class="ttdef"><b>Definition:</b> Netlink.h:66</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Vport.c:53</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a9cfaf48c00ce38e60a335ab82718b0d2"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a9cfaf48c00ce38e60a335ab82718b0d2">_OVS_VPORT_ENTRY::ovsName</a></div><div class="ttdeci">CHAR ovsName[OVS_MAX_PORT_NAME_LENGTH]</div><div class="ttdef"><b>Definition:</b> Vport.h:98</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0aac10710a888673fa40471a1fc9770584">NL_A_STRING</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:56</div></div>
<div class="ttc" id="Netlink_8c_html_a7992da73dff83938486e53dbe879e35b"><div class="ttname"><a href="Netlink_8c.html#a7992da73dff83938486e53dbe879e35b">NlAttrParse</a></div><div class="ttdeci">BOOLEAN NlAttrParse(const PNL_MSG_HDR nlMsg, UINT32 attrOffset, UINT32 totalAttrLen, const NL_POLICY policy[], const UINT32 numPolicy, PNL_ATTR attrs[], UINT32 numAttrs)</div><div class="ttdef"><b>Definition:</b> Netlink.c:1047</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a002502c438503829073020f06cd20e15"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a002502c438503829073020f06cd20e15">_OVS_VPORT_ENTRY::nicState</a></div><div class="ttdeci">NDIS_SWITCH_NIC_STATE nicState</div><div class="ttdef"><b>Definition:</b> Vport.h:105</div></div>
<div class="ttc" id="Netlink_8h_html_a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c"><div class="ttname"><a href="Netlink_8h.html#a5650a8e1bf93ac6a6fba8a6f4c0743b0a343995c3e75fcfa5c1dfcd0cc7eda82c">NL_A_U32</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:52</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a39aeaa3afa3831eda24b4e48654bc01e"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a39aeaa3afa3831eda24b4e48654bc01e">_OVS_VPORT_ENTRY::portOptions</a></div><div class="ttdeci">PNL_ATTR portOptions</div><div class="ttdef"><b>Definition:</b> Vport.h:134</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_afca65b867310b384a387abd05dbd309a"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">_OVS_TUNFLT_INIT_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:57</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ad7166913610bf8a40ebc23dae4ee2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static VOID OvsTunnelVportPendingRemove </td>
          <td>(</td>
          <td class="paramtype">PVOID&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NTSTATUS&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT32 *&#160;</td>
          <td class="paramname"><em>replyLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;{</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html">POVS_TUNFLT_INIT_CONTEXT</a> tunnelContext =</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;        (<a class="code" href="Vport_8c.html#ae2e5730a863b1d13e6fbf09e9e62213f">POVS_TUNFLT_INIT_CONTEXT</a>) context;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <a class="code" href="struct__OVS__SWITCH__CONTEXT.html">POVS_SWITCH_CONTEXT</a> switchContext = tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a18717b40bf21e46e51d301211d6a1b0e">switchContext</a>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <a class="code" href="struct__OVS__VPORT__ENTRY.html">POVS_VPORT_ENTRY</a> <a class="code" href="structvport.html">vport</a> = tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">vport</a>;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgIn = (<a class="code" href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a>)tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">inputBuffer</a>;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;    <a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a> msgOut = (<a class="code" href="struct__OVS__MESSAGE.html">POVS_MESSAGE</a>)tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">outputBuffer</a>;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <a class="code" href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a> nlError = <a class="code" href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a>(status);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    LOCK_STATE_EX lockState;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    NdisAcquireRWLockWrite(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState, 0);</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">if</span> (msgIn &amp;&amp; msgOut) {</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        <span class="comment">/* Check the received status to reply to the caller. */</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="keywordflow">if</span> (STATUS_SUCCESS == status) {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            <a class="code" href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a>(vport,</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                                  msgIn,</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                                  msgOut,</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                                  tunnelContext-&gt;<a class="code" href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">outputLength</a>,</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                                  switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">dpNo</a>);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;            *replyLen = msgOut-&gt;nlMsg.nlmsgLen;</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;            <a class="code" href="struct__OVS__MESSAGE__ERROR.html">POVS_MESSAGE_ERROR</a> msgError = (<a class="code" href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a>)msgOut;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;            <a class="code" href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a>(msgIn, msgError, nlError);</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;            *replyLen = msgError-&gt;<a class="code" href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">nlMsg</a>.<a class="code" href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">nlmsgLen</a>;</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        }</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    }</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">isAbsentOnHv</a> == TRUE);</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    ASSERT(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">portNo</a> != <a class="code" href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a>);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="comment">/* Remove the port from the relevant lists. */</span></div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">numNonHvVports</a>--;</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">ovsNameLink</a>);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">portNoLink</a>);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    RemoveEntryList(&amp;vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">tunnelVportLink</a>);</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4973465117a6179699f6347a0ad98ac4">priv</a>) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4973465117a6179699f6347a0ad98ac4">priv</a>, <a class="code" href="Util_8h.html#a32be619c783a725524c8b62e59f6e0aa">OVS_VXLAN_POOL_TAG</a>);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        vport-&gt;<a class="code" href="struct__OVS__VPORT__ENTRY.html#a4973465117a6179699f6347a0ad98ac4">priv</a> = NULL;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    }</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <a class="code" href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a>(vport, <a class="code" href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a>);</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    NdisReleaseRWLock(switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">dispatchLock</a>, &amp;lockState);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;}</div>
<div class="ttc" id="struct__OVS__MESSAGE_html"><div class="ttname"><a href="struct__OVS__MESSAGE.html">_OVS_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:28</div></div>
<div class="ttc" id="NetlinkError_8h_html_a38751c98cd93e07a0640906c35240f72"><div class="ttname"><a href="NetlinkError_8h.html#a38751c98cd93e07a0640906c35240f72">NlMapStatusToNlErr</a></div><div class="ttdeci">static __inline NlMapStatusToNlErr(NTSTATUS status)</div><div class="ttdef"><b>Definition:</b> NetlinkError.h:205</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a6df479a183f045b104375a67609d5dee"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a6df479a183f045b104375a67609d5dee">_OVS_VPORT_ENTRY::isAbsentOnHv</a></div><div class="ttdeci">BOOLEAN isAbsentOnHv</div><div class="ttdef"><b>Definition:</b> Vport.h:135</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a3da017a4244dd9919a974790b7b93677"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a3da017a4244dd9919a974790b7b93677">_OVS_SWITCH_CONTEXT::dpNo</a></div><div class="ttdeci">UINT32 dpNo</div><div class="ttdef"><b>Definition:</b> Switch.h:96</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a6e93c14bb3e3a25f2e05187e26aa2562"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a6e93c14bb3e3a25f2e05187e26aa2562">_OVS_SWITCH_CONTEXT::numNonHvVports</a></div><div class="ttdeci">UINT32 numNonHvVports</div><div class="ttdef"><b>Definition:</b> Switch.h:164</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html">_OVS_SWITCH_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Switch.h:88</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_ae3e6fa878eeb47950b4fee9661efa692"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#ae3e6fa878eeb47950b4fee9661efa692">_OVS_TUNFLT_INIT_CONTEXT::outputBuffer</a></div><div class="ttdeci">PVOID outputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:56</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a27fef079a0a083f0312ae858c8a987bd"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a27fef079a0a083f0312ae858c8a987bd">_OVS_VPORT_ENTRY::ovsNameLink</a></div><div class="ttdeci">LIST_ENTRY ovsNameLink</div><div class="ttdef"><b>Definition:</b> Vport.h:86</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html">_OVS_MESSAGE_ERROR</a></div><div class="ttdef"><b>Definition:</b> Netlink.h:38</div></div>
<div class="ttc" id="struct__OVS__MESSAGE__ERROR_html_a267d2dc51922e7ba1d3170b068d24cd8"><div class="ttname"><a href="struct__OVS__MESSAGE__ERROR.html#a267d2dc51922e7ba1d3170b068d24cd8">_OVS_MESSAGE_ERROR::nlMsg</a></div><div class="ttdeci">NL_MSG_HDR nlMsg</div><div class="ttdef"><b>Definition:</b> Netlink.h:39</div></div>
<div class="ttc" id="Vport_8h_html_ab1d1db4e6e156a4c4c99da1b5cbb4f04"><div class="ttname"><a href="Vport_8h.html#ab1d1db4e6e156a4c4c99da1b5cbb4f04">OVS_DPPORT_NUMBER_INVALID</a></div><div class="ttdeci">#define OVS_DPPORT_NUMBER_INVALID</div><div class="ttdef"><b>Definition:</b> Vport.h:25</div></div>
<div class="ttc" id="Vport_8c_html_ae2e5730a863b1d13e6fbf09e9e62213f"><div class="ttname"><a href="Vport_8c.html#ae2e5730a863b1d13e6fbf09e9e62213f">POVS_TUNFLT_INIT_CONTEXT</a></div><div class="ttdeci">struct _OVS_TUNFLT_INIT_CONTEXT * POVS_TUNFLT_INIT_CONTEXT</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a6e994bc6c28e6a6bec4e748e0bf5cfee"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a6e994bc6c28e6a6bec4e748e0bf5cfee">_OVS_TUNFLT_INIT_CONTEXT::vport</a></div><div class="ttdeci">POVS_VPORT_ENTRY vport</div><div class="ttdef"><b>Definition:</b> Vport.c:58</div></div>
<div class="ttc" id="Netlink_8h_html_a3815a86e915e0d06dd2e818f0f22d950"><div class="ttname"><a href="Netlink_8h.html#a3815a86e915e0d06dd2e818f0f22d950">POVS_MESSAGE</a></div><div class="ttdeci">struct _OVS_MESSAGE * POVS_MESSAGE</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a4973465117a6179699f6347a0ad98ac4"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a4973465117a6179699f6347a0ad98ac4">_OVS_VPORT_ENTRY::priv</a></div><div class="ttdeci">PVOID priv</div><div class="ttdef"><b>Definition:</b> Vport.h:100</div></div>
<div class="ttc" id="Vport_8c_html_a249132e832c59938a505c8ddb578b4cb"><div class="ttname"><a href="Vport_8c.html#a249132e832c59938a505c8ddb578b4cb">OvsCreateMsgFromVport</a></div><div class="ttdeci">static NTSTATUS OvsCreateMsgFromVport(POVS_VPORT_ENTRY vport, POVS_MESSAGE msgIn, PVOID outBuffer, UINT32 outBufLen, int dpIfIndex)</div><div class="ttdef"><b>Definition:</b> Vport.c:1760</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a4a86b816c7f31ea51b1d9b8733dd3e07"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a4a86b816c7f31ea51b1d9b8733dd3e07">_OVS_VPORT_ENTRY::tunnelVportLink</a></div><div class="ttdeci">LIST_ENTRY tunnelVportLink</div><div class="ttdef"><b>Definition:</b> Vport.h:89</div></div>
<div class="ttc" id="Util_8c_html_a0157966a9647ad0512c5314a245c010a"><div class="ttname"><a href="Util_8c.html#a0157966a9647ad0512c5314a245c010a">OvsFreeMemoryWithTag</a></div><div class="ttdeci">VOID OvsFreeMemoryWithTag(VOID *ptr, ULONG tag)</div><div class="ttdef"><b>Definition:</b> Util.c:36</div></div>
<div class="ttc" id="Netlink_8h_html_a0e1f9a10cc5eaa25fbb059d54cf5a22a"><div class="ttname"><a href="Netlink_8h.html#a0e1f9a10cc5eaa25fbb059d54cf5a22a">POVS_MESSAGE_ERROR</a></div><div class="ttdeci">struct _OVS_MESSAGE_ERROR * POVS_MESSAGE_ERROR</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:105</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_a18717b40bf21e46e51d301211d6a1b0e"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#a18717b40bf21e46e51d301211d6a1b0e">_OVS_TUNFLT_INIT_CONTEXT::switchContext</a></div><div class="ttdeci">POVS_SWITCH_CONTEXT switchContext</div><div class="ttdef"><b>Definition:</b> Vport.c:54</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_aa8586f9064f77a00a96d1fb3312b8442"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#aa8586f9064f77a00a96d1fb3312b8442">_OVS_TUNFLT_INIT_CONTEXT::outputLength</a></div><div class="ttdeci">UINT32 outputLength</div><div class="ttdef"><b>Definition:</b> Vport.c:55</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_ac54c2fc2ad8eaf2184ac4422f5d9a1d0"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#ac54c2fc2ad8eaf2184ac4422f5d9a1d0">_OVS_VPORT_ENTRY::portNoLink</a></div><div class="ttdeci">LIST_ENTRY portNoLink</div><div class="ttdef"><b>Definition:</b> Vport.h:88</div></div>
<div class="ttc" id="Util_8h_html_a32be619c783a725524c8b62e59f6e0aa"><div class="ttname"><a href="Util_8h.html#a32be619c783a725524c8b62e59f6e0aa">OVS_VXLAN_POOL_TAG</a></div><div class="ttdeci">#define OVS_VXLAN_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:30</div></div>
<div class="ttc" id="struct__NL__MSG__HDR_html_a978e1a29f667ea4adc41b8a9198f875e"><div class="ttname"><a href="struct__NL__MSG__HDR.html#a978e1a29f667ea4adc41b8a9198f875e">_NL_MSG_HDR::nlmsgLen</a></div><div class="ttdeci">UINT32 nlmsgLen</div><div class="ttdef"><b>Definition:</b> NetlinkProto.h:79</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html">_OVS_VPORT_ENTRY</a></div><div class="ttdef"><b>Definition:</b> Vport.h:85</div></div>
<div class="ttc" id="Netlink_8c_html_abe61ec7ede4288c7cb21d85842e30a6a"><div class="ttname"><a href="Netlink_8c.html#abe61ec7ede4288c7cb21d85842e30a6a">NlBuildErrorMsg</a></div><div class="ttdeci">VOID NlBuildErrorMsg(POVS_MESSAGE msgIn, POVS_MESSAGE_ERROR msgError, UINT errorCode)</div><div class="ttdef"><b>Definition:</b> Netlink.c:111</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html">_OVS_TUNFLT_INIT_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> Vport.c:53</div></div>
<div class="ttc" id="Util_8h_html_a186f710164dd337b2eee76cdd0b3917d"><div class="ttname"><a href="Util_8h.html#a186f710164dd337b2eee76cdd0b3917d">OVS_VPORT_POOL_TAG</a></div><div class="ttdeci">#define OVS_VPORT_POOL_TAG</div><div class="ttdef"><b>Definition:</b> Util.h:35</div></div>
<div class="ttc" id="struct__OVS__VPORT__ENTRY_html_a3a9d3df1b8e22f200bffe63a1871f407"><div class="ttname"><a href="struct__OVS__VPORT__ENTRY.html#a3a9d3df1b8e22f200bffe63a1871f407">_OVS_VPORT_ENTRY::portNo</a></div><div class="ttdeci">UINT32 portNo</div><div class="ttdef"><b>Definition:</b> Vport.h:95</div></div>
<div class="ttc" id="NetlinkError_8h_html_a100188bc5698e6df35db97dc461ac6d3"><div class="ttname"><a href="NetlinkError_8h.html#a100188bc5698e6df35db97dc461ac6d3">NL_ERROR</a></div><div class="ttdeci">enum _NL_ERROR_ NL_ERROR</div></div>
<div class="ttc" id="struct__OVS__TUNFLT__INIT__CONTEXT_html_afca65b867310b384a387abd05dbd309a"><div class="ttname"><a href="struct__OVS__TUNFLT__INIT__CONTEXT.html#afca65b867310b384a387abd05dbd309a">_OVS_TUNFLT_INIT_CONTEXT::inputBuffer</a></div><div class="ttdeci">PVOID inputBuffer</div><div class="ttdef"><b>Definition:</b> Vport.c:57</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ae75190b6802ef70c189e0c9dabbff982"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ae75190b6802ef70c189e0c9dabbff982">_OVS_SWITCH_CONTEXT::dispatchLock</a></div><div class="ttdeci">PNDIS_RW_LOCK_EX dispatchLock</div><div class="ttdef"><b>Definition:</b> Switch.h:167</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3a013a2e4d19263bcafe7c9623ee4ee9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static __inline VOID OvsWaitActivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a>&#160;</td>
          <td class="paramname"><em>switchContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ULONG&#160;</td>
          <td class="paramname"><em>sleepMicroSec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;{</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    <span class="keywordflow">while</span> ((!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">isActivated</a>) &amp;&amp;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;          (!switchContext-&gt;<a class="code" href="struct__OVS__SWITCH__CONTEXT.html#a8a6ae8c9b5858f831e841c9b3165063f">isActivateFailed</a>)) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <span class="comment">/* Wait for the switch to be active and</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="comment">         * the list of ports in OVS to be initialized. */</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        NdisMSleep(sleepMicroSec);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    }</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;}</div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_ab490af00156750aaea5a3afeb810ee6a"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#ab490af00156750aaea5a3afeb810ee6a">_OVS_SWITCH_CONTEXT::isActivated</a></div><div class="ttdeci">BOOLEAN isActivated</div><div class="ttdef"><b>Definition:</b> Switch.h:93</div></div>
<div class="ttc" id="struct__OVS__SWITCH__CONTEXT_html_a8a6ae8c9b5858f831e841c9b3165063f"><div class="ttname"><a href="struct__OVS__SWITCH__CONTEXT.html#a8a6ae8c9b5858f831e841c9b3165063f">_OVS_SWITCH_CONTEXT::isActivateFailed</a></div><div class="ttdeci">BOOLEAN isActivateFailed</div><div class="ttdef"><b>Definition:</b> Switch.h:94</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ae4e8c266508b5f55fa33d7d21941daf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Switch_8h.html#a7503a5ce08b160390615596c9d86bc09">POVS_SWITCH_CONTEXT</a> gOvsSwitchContext</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_36ad3adc1aabcd87770fae1b41e5ac14.html">ovs</a></li><li class="navelem"><a class="el" href="dir_f2900611ffc28c38a5f48f852f1327f6.html">datapath-windows</a></li><li class="navelem"><a class="el" href="dir_edd792a05d1f2ac16301a0c4190fb123.html">ovsext</a></li><li class="navelem"><a class="el" href="Vport_8c.html">Vport.c</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:07:25 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
