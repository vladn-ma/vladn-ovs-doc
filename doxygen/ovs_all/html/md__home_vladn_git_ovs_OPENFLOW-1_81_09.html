<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: OpenFlow 1.1+ support in Open vSwitch</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_vladn_git_ovs_OPENFLOW-1_81_09.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">OpenFlow 1.1+ support in Open vSwitch </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Open vSwitch support for OpenFlow 1.1 and beyond is a work in progress. This file describes the work still to be done.</p>
<h2>The Plan </h2>
<p>OpenFlow version support is not a build-time option. A single build of Open vSwitch must be able to handle all supported versions of OpenFlow. Ideally, even at runtime it should be able to support all protocol versions at the same time on different OpenFlow bridges (and perhaps even on the same bridge).</p>
<p>At the same time, it would be a shame to litter the core of the OVS code with lots of ugly code concerned with the details of various OpenFlow protocol versions.</p>
<p>The primary approach to compatibility is to abstract most of the details of the differences from the core code, by adding a protocol layer that translates between OF1.x and a slightly higher-level abstract representation. The core of this approach is the many struct ofputil_* structures in <a class="el" href="ofp-util_8h.html">lib/ofp-util.h</a>.</p>
<p>As a consequence of this approach, OVS cannot use OpenFlow protocol definitions that closely resemble those in the OpenFlow specification, because <a class="el" href="openflow_8h.html">openflow.h</a> in different versions of the OpenFlow specification defines the same identifier with different values. Instead, <a class="el" href="openflow-common_8h.html">openflow-common.h</a> contains definitions that are common to all the specifications and separate protocol version-specific headers contain protocol-specific definitions renamed so as not to conflict, e.g. OFPAT10_ENQUEUE and OFPAT11_ENQUEUE for the OpenFlow 1.0 and 1.1 values for OFPAT_ENQUEUE. Generally, in cases of conflict, the protocol layer will define a more abstract OFPUTIL_* or struct ofputil_*.</p>
<p>Here are the current approaches in a few tricky areas:</p>
<ul>
<li>Port numbering. OpenFlow 1.0 has 16-bit port numbers and later OpenFlow versions have 32-bit port numbers. For now, OVS support for later protocol versions requires all port numbers to fall into the 16-bit range, translating the reserved OFPP_* port numbers.</li>
<li>Actions. OpenFlow 1.0 and later versions have very different ideas of actions. OVS reconciles by translating all the versions' actions (and instructions) to and from a common internal representation.</li>
</ul>
<h2>OpenFlow 1.1 </h2>
<p>The list of remaining work items for OpenFlow 1.1 is below. It is probably incomplete.</p>
<ul>
<li>Match and set double-tagged VLANs (QinQ). This requires kernel work for reasonable performance. [optional for OF1.1+]</li>
<li>VLANs tagged with 88a8 Ethertype. This requires kernel work for reasonable performance. [required for OF1.1+]</li>
</ul>
<h2>OpenFlow 1.2 </h2>
<p>OpenFlow 1.2 support requires OpenFlow 1.1 as a prerequisite. All the additional work specific to Openflow 1.2 are complete. (This is based on the change log at the end of the OF1.2 spec. I didn't compare the specs carefully yet.)</p>
<h2>OpenFlow 1.3 </h2>
<p>OpenFlow 1.3 support requires OpenFlow 1.2 as a prerequisite, plus the following additional work. (This is based on the change log at the end of the OF1.3 spec, reusing most of the section titles directly. I didn't compare the specs carefully yet.)</p>
<ul>
<li>Add support for multipart requests. Currently we always report OFPBRC_MULTIPART_BUFFER_OVERFLOW. [optional for OF1.3+]</li>
<li>IPv6 extension header handling support. Fully implementing this requires kernel support. This likely will take some careful and probably time-consuming design work. The actual coding, once that is all done, is probably 2 or 3 days work. [optional for OF1.3+]</li>
<li>Per-flow meters. OpenFlow protocol support is now implemented. Support for the special OFPM_SLOWPATH and OFPM_CONTROLLER meters is missing. Support for the software switch is under review. [optional for OF1.3+]</li>
<li>Auxiliary connections. An implementation in generic code might be a week's worth of work. The value of an implementation in generic code is questionable, though, since much of the benefit of axuiliary connections is supposed to be to take advantage of hardware support. (We could make the kernel module somehow send packets across the auxiliary connections directly, for some kind of "hardware" support, if we judged it useful enough.) [optional for OF1.3+]</li>
<li>Provider Backbone Bridge tagging. I don't plan to implement this (but we'd accept an implementation). [optional for OF1.3+]</li>
<li>On-demand flow counters. I think this might be a real optimization in some cases for the software switch. [optional for OF1.3+]</li>
</ul>
<h2>OpenFlow 1.4 &amp; ONF Extensions for 1.3.X Pack1 </h2>
<p>The following features are both defined as a set of ONF Extensions for 1.3 and integrated in 1.4. When defined as an ONF Extension for 1.3, the feature is using the Experimenter mechanism with the ONF Experimenter ID. When defined integrated in 1.4, the feature use the standard OpenFlow structures (for example defined in <a class="el" href="openflow-1_84_8h.html">openflow-1.4.h</a>). The two definitions for each feature are independant and can exist in parallel in OVS.</p>
<ul>
<li>Flow entry notifications This seems to be modelled after OVS's NXST_FLOW_MONITOR. (Simon Horman is working on this.) [EXT-187] [optional for OF1.4+]</li>
<li>Role Status Already implemented as a 1.4 feature. [EXT-191] [required for OF1.4+]</li>
<li>Flow entry eviction OVS has flow eviction functionality. table_mod OFPTC_EVICTION, flow_mod 'importance', and table_desc ofp_table_mod_prop_eviction need to be implemented. [EXT-192-e] [optional for OF1.4+]</li>
<li>Vacancy events [EXT-192-v] [optional for OF1.4+]</li>
<li>Bundle Transactional modification. OpenFlow 1.4 requires to support flow_mods and port_mods in a bundle if bundle is supported. (Not related to OVS's 'ofbundle' stuff.) Implemented as an OpenFlow 1.4 feature. Only flow_mods and port_mods are supported in a bundle. If the bundle includes port mods, it may not specify the OFPBF_ATOMIC flag. Nevertheless, port mods and flow mods in a bundle are always applied in order and consecutive flow mods between port mods are made available to lookups atomically. [EXT-230] [optional for OF1.4+]</li>
<li>Table synchronisation Probably not so useful to the software switch. [EXT-232] [optional for OF1.4+]</li>
<li>Group and Meter change notifications [EXT-235] [optional for OF1.4+]</li>
<li>Bad flow entry priority error Probably not so useful to the software switch. [EXT-236] [optional for OF1.4+]</li>
<li>Set async config error [EXT-237] [optional for OF1.4+]</li>
<li>PBB UCA header field See comment on Provider Backbone Bridge in section about OpenFlow 1.3. [EXT-256] [optional for OF1.4+]</li>
<li>Multipart timeout error [EXT-264] [required for OF1.4+]</li>
</ul>
<h2>OpenFlow 1.4 only </h2>
<p>Those features are those only available in OpenFlow 1.4, other OpenFlow 1.4 features are listed in the previous section.</p>
<ul>
<li>More extensible wire protocol Many on-wire structures got TLVs. Already implemented: port desc properties, port mod properties, port stats properties, table mod properties, queue stats, unified property errors. Remaining required: set-async, queue desc Remaining optional: table desc, table-status [EXT-262] [required for OF1.4+]</li>
<li>More descriptive reasons for packet-in Distinguish OFPR_APPLY_ACTION, OFPR_ACTION_SET, OFPR_GROUP, OFPR_PACKET_OUT. NO_MATCH was renamed to OFPR_TABLE_MISS. (OFPR_ACTION_SET and OFPR_GROUP are now supported) [EXT-136] [required for OF1.4+]</li>
<li>Optical port properties [EXT-154] [optional for OF1.4+]</li>
</ul>
<h2>OpenFlow 1.5 &amp; ONF Extensions for 1.3.X Pack2 </h2>
<p>The following features are both defined as a set of ONF Extensions for 1.3 and integrated in 1.5. Note that this list is not definitive as those are not yet published. When defined as an ONF Extension for 1.3, the feature is using the Experimenter mechanism with the ONF Experimenter ID. When defined integrated in 1.5, the feature use the standard OpenFlow structures (for example defined in <a class="el" href="openflow-1_85_8h.html">openflow-1.5.h</a>). The two definitions for each feature are independant and can exist in parallel in OVS.</p>
<ul>
<li>Time scheduled bundles [EXT-340] [optional for OF1.5+]</li>
</ul>
<h2>OpenFlow 1.5 only </h2>
<p>Those features are those only available in OpenFlow 1.5, other OpenFlow 1.5 features are listed in the previous section. Note that this list is not definitive as OpenFlow 1.5 is not yet published.</p>
<ul>
<li>Egress Tables [EXT-306] [optional for OF1.5+]</li>
<li>Packet Type aware pipeline Prototype for OVS was done during specification. [EXT-112] [optional for OF1.5+]</li>
<li>Extensible Flow Entry Statistics [EXT-334] [required for OF1.5+]</li>
<li>Flow Entry Statistics Trigger [EXT-335] [optional for OF1.5+]</li>
<li>Controller connection status Prototype for OVS was done during specification. [EXT-454] [optional for OF1.5+]</li>
<li>Meter action [EXT-379] [required for OF1.5+ if metering is supported]</li>
<li>Enable setting all pipeline fields in packet-out Prototype for OVS was done during specification. [EXT-427] [required for OF1.5+]</li>
<li>Port properties for pipeline fields Prototype for OVS was done during specification. [EXT-388] [optional for OF1.5+]</li>
<li>Port property for recirculation Prototype for OVS was done during specification. [EXT-399] [optional for OF1.5+]</li>
</ul>
<h2>General </h2>
<ul>
<li>ovs-ofctl(8) often lists as Nicira extensions features that later OpenFlow versions support in standard ways.</li>
</ul>
<h2>How to contribute </h2>
<p>If you plan to contribute code for a feature, please let everyone know on ovs-dev before you start work. This will help avoid duplicating work.</p>
<p>Please consider the following:</p>
<ul>
<li>Testing. Please test your code.</li>
<li>Unit tests. Please consider writing some. The tests directory has many examples that you can use as a starting point.</li>
<li>ovs-ofctl. If you add a feature that is useful for some ovs-ofctl command then you should add support for it there.</li>
<li>Documentation. If you add a user-visible feature, then you should document it in the appropriate manpage and mention it in NEWS as well.</li>
<li>Coding style (see the <a class="el" href="CodingStyle_8md.html">CodingStyle.md</a> file at the top of the source tree).</li>
<li>The patch submission guidelines (see <a class="el" href="CONTRIBUTING_8md.html">CONTRIBUTING.md</a>). I recommend using "git send-email", which automatically follows a lot of those guidelines.</li>
</ul>
<h2>Bug Reporting </h2>
<p>Please report problems to <a href="#" onclick="location.href='mai'+'lto:'+'bug'+'s@'+'ope'+'nv'+'swi'+'tc'+'h.o'+'rg'; return false;">bugs@<span style="display: none;">.nosp@m.</span>open<span style="display: none;">.nosp@m.</span>vswit<span style="display: none;">.nosp@m.</span>ch.o<span style="display: none;">.nosp@m.</span>rg</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Sep 9 2015 19:08:08 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
