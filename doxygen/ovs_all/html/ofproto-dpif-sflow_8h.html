<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: /home/vladn/git/ovs/ofproto/ofproto-dpif-sflow.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ofproto-dpif-sflow_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ofproto-dpif-sflow.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;<a class="el" href="svec_8h_source.html">svec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="odp-util_8h_source.html">lib/odp-util.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ofproto-dpif-sflow.h:</div>
<div class="dyncontent">
<div class="center"><img src="ofproto-dpif-sflow_8h__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2ofproto_2ofproto-dpif-sflow_8h" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2ofproto_2ofproto-dpif-sflow_8h" id="_2home_2vladn_2git_2ovs_2ofproto_2ofproto-dpif-sflow_8h">
<area shape="rect" id="node3" href="svec_8h.html" title="svec.h" alt="" coords="2611,557,2672,584"/><area shape="rect" id="node6" href="odp-util_8h.html" title="lib/odp&#45;util.h" alt="" coords="2714,109,2806,136"/><area shape="rect" id="node5" href="stddef_8h.html" title="stddef.h" alt="" coords="2352,632,2421,659"/><area shape="rect" id="node7" href="string_8h.html" title="string.h" alt="" coords="2981,632,3046,659"/><area shape="rect" id="node8" href="lib_2flow_8h.html" title="flow.h" alt="" coords="1743,184,1801,211"/><area shape="rect" id="node14" href="lib_2util_8h.html" title="util.h" alt="" coords="1581,557,1632,584"/><area shape="rect" id="node26" href="openflow_8h.html" title="openflow/openflow.h" alt="" coords="560,408,701,435"/><area shape="rect" id="node37" href="hash_8h.html" title="hash.h" alt="" coords="2661,483,2723,509"/><area shape="rect" id="node47" href="hmap_8h.html" title="hmap.h" alt="" coords="2189,483,2254,509"/><area shape="rect" id="node48" href="odp-netlink_8h.html" title="odp&#45;netlink.h" alt="" coords="5,259,101,285"/><area shape="rect" id="node11" href="bitmap_8h.html" title="bitmap.h" alt="" coords="1601,483,1673,509"/><area shape="rect" id="node24" href="byte-order_8h.html" title="byte&#45;order.h" alt="" coords="877,557,968,584"/><area shape="rect" id="node25" href="nicira-ext_8h.html" title="openflow/nicira&#45;ext.h" alt="" coords="719,333,862,360"/><area shape="rect" id="node34" href="packets_8h.html" title="packets.h" alt="" coords="1473,259,1551,285"/><area shape="rect" id="node18" href="stdio_8h.html" title="stdio.h" alt="" coords="1845,632,1907,659"/><area shape="rect" id="node19" href="lib_2compiler_8h.html" title="compiler.h" alt="" coords="2157,632,2240,659"/><area shape="rect" id="node21" href="include_2openvswitch_2types_8h.html" title="openvswitch/types.h" alt="" coords="859,856,1002,883"/><area shape="rect" id="node22" href="include_2openvswitch_2util_8h.html" title="openvswitch/util.h" alt="" coords="1694,632,1821,659"/><area shape="rect" id="node20" href="include_2openvswitch_2compiler_8h.html" title="openvswitch/compiler.h" alt="" coords="2158,707,2317,733"/><area shape="rect" id="node23" href="version_8h.html" title="openvswitch/version.h" alt="" coords="1693,707,1845,733"/><area shape="rect" id="node27" href="openflow-1_80_8h.html" title="openflow/openflow&#45;1.0.h" alt="" coords="227,707,389,733"/><area shape="rect" id="node29" href="openflow-1_81_8h.html" title="openflow/openflow&#45;1.1.h" alt="" coords="413,707,576,733"/><area shape="rect" id="node30" href="openflow-1_82_8h.html" title="openflow/openflow&#45;1.2.h" alt="" coords="448,632,611,659"/><area shape="rect" id="node31" href="openflow-1_83_8h.html" title="openflow/openflow&#45;1.3.h" alt="" coords="499,557,661,584"/><area shape="rect" id="node32" href="openflow-1_84_8h.html" title="openflow/openflow&#45;1.4.h" alt="" coords="549,483,712,509"/><area shape="rect" id="node33" href="openflow-1_85_8h.html" title="openflow/openflow&#45;1.5.h" alt="" coords="600,707,763,733"/><area shape="rect" id="node28" href="openflow-common_8h.html" title="openflow/openflow&#45;common.h" alt="" coords="483,781,677,808"/><area shape="rect" id="node35" href="lib_2geneve_8h.html" title="geneve.h" alt="" coords="1093,408,1168,435"/><area shape="rect" id="node36" href="lib_2random_8h.html" title="random.h" alt="" coords="2358,557,2434,584"/><area shape="rect" id="node38" href="tun-metadata_8h.html" title="tun&#45;metadata.h" alt="" coords="1404,333,1513,360"/><area shape="rect" id="node39" href="dynamic-string_8h.html" title="dynamic&#45;string.h" alt="" coords="1657,557,1775,584"/><area shape="rect" id="node41" href="lib_2netlink_8h.html" title="netlink.h" alt="" coords="1423,408,1494,435"/><area shape="rect" id="node44" href="ofpbuf_8h.html" title="ofpbuf.h" alt="" coords="2033,408,2103,435"/><area shape="rect" id="node40" href="time_8h.html" title="time.h" alt="" coords="2024,632,2083,659"/><area shape="rect" id="node42" href="netlink-protocol_8h.html" title="netlink&#45;protocol.h" alt="" coords="1398,483,1519,509"/><area shape="rect" id="node45" href="lib_2list_8h.html" title="list.h" alt="" coords="2063,483,2113,509"/><area shape="rect" id="node46" href="include_2openvswitch_2list_8h.html" title="openvswitch/list.h" alt="" coords="1953,557,2079,584"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="ofproto-dpif-sflow_8h__dep__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2ofproto_2ofproto-dpif-sflow_8hdep" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2ofproto_2ofproto-dpif-sflow_8hdep" id="_2home_2vladn_2git_2ovs_2ofproto_2ofproto-dpif-sflow_8hdep">
<area shape="rect" id="node2" href="ofproto-dpif-sflow_8c.html" title="/home/vladn/git/ovs\l/ofproto/ofproto&#45;dpif\l&#45;sflow.c" alt="" coords="5,109,141,165"/><area shape="rect" id="node3" href="ofproto-dpif-upcall_8c.html" title="/home/vladn/git/ovs\l/ofproto/ofproto&#45;dpif\l&#45;upcall.c" alt="" coords="165,109,301,165"/><area shape="rect" id="node4" href="ofproto-dpif-xlate_8c.html" title="/home/vladn/git/ovs\l/ofproto/ofproto&#45;dpif\l&#45;xlate.c" alt="" coords="325,109,461,165"/><area shape="rect" id="node5" href="ofproto-dpif_8c.html" title="/home/vladn/git/ovs\l/ofproto/ofproto&#45;dpif.c" alt="" coords="485,117,632,158"/></map>
</div>
</div>
<p><a href="ofproto-dpif-sflow_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdpif__sflow__actions.html">dpif_sflow_actions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9afad6b86069a9609f4f9eb23d54530f"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a9afad6b86069a9609f4f9eb23d54530f">dpif_sflow_create</a> (void)</td></tr>
<tr class="separator:a9afad6b86069a9609f4f9eb23d54530f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfc84bcbbf3a283e50f40be5be95ce5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a8bfc84bcbbf3a283e50f40be5be95ce5">dpif_sflow_ref</a> (const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:a8bfc84bcbbf3a283e50f40be5be95ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a429c36c211f2eeb590a34c8fd0dd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a66a429c36c211f2eeb590a34c8fd0dd8">dpif_sflow_unref</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:a66a429c36c211f2eeb590a34c8fd0dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f622b877874ba94a5c28b5b8c85517"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a44f622b877874ba94a5c28b5b8c85517">dpif_sflow_get_probability</a> (const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:a44f622b877874ba94a5c28b5b8c85517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e028eff6e459275afe9c232d35a73b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#aa4e028eff6e459275afe9c232d35a73b">dpif_sflow_set_options</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *, const struct <a class="el" href="structofproto__sflow__options.html">ofproto_sflow_options</a> *)</td></tr>
<tr class="separator:aa4e028eff6e459275afe9c232d35a73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45085e69eccc55512652564f0725fd3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a45085e69eccc55512652564f0725fd3c">dpif_sflow_clear</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:a45085e69eccc55512652564f0725fd3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abea3b4dd885b8c92fac468a1ce06b80b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#abea3b4dd885b8c92fac468a1ce06b80b">dpif_sflow_is_enabled</a> (const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:abea3b4dd885b8c92fac468a1ce06b80b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac98606a9beb2e5d70bb767c611284b1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#ac98606a9beb2e5d70bb767c611284b1e">dpif_sflow_add_port</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *<a class="el" href="structds.html">ds</a>, struct <a class="el" href="structofport.html">ofport</a> *<a class="el" href="structofport.html">ofport</a>, <a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a> odp_port)</td></tr>
<tr class="separator:ac98606a9beb2e5d70bb767c611284b1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e7b14cf005273a858089f3b319ddc83"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a5e7b14cf005273a858089f3b319ddc83">dpif_sflow_del_port</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *, <a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a> odp_port)</td></tr>
<tr class="separator:a5e7b14cf005273a858089f3b319ddc83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a794856509d13d6551059342bf88eda98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a794856509d13d6551059342bf88eda98">dpif_sflow_run</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:a794856509d13d6551059342bf88eda98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e56c05f985d087651a971bc5088f72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a77e56c05f985d087651a971bc5088f72">dpif_sflow_wait</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *)</td></tr>
<tr class="separator:a77e56c05f985d087651a971bc5088f72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c763f188e4564d3331d8d4ae536a159"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#a2c763f188e4564d3331d8d4ae536a159">dpif_sflow_read_actions</a> (const struct <a class="el" href="structflow.html">flow</a> *, const struct <a class="el" href="structnlattr.html">nlattr</a> *actions, size_t actions_len, struct <a class="el" href="structdpif__sflow__actions.html">dpif_sflow_actions</a> *)</td></tr>
<tr class="separator:a2c763f188e4564d3331d8d4ae536a159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af56944723388f79e157f16e3385517c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#af56944723388f79e157f16e3385517c3">dpif_sflow_received</a> (struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *, const struct <a class="el" href="structdp__packet.html">dp_packet</a> *, const struct <a class="el" href="structflow.html">flow</a> *, <a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a> odp_port, const union <a class="el" href="unionuser__action__cookie.html">user_action_cookie</a> *, const struct <a class="el" href="structdpif__sflow__actions.html">dpif_sflow_actions</a> *)</td></tr>
<tr class="separator:af56944723388f79e157f16e3385517c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf07d137a767955ca9120929a69c7bdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ofproto-dpif-sflow_8h.html#acf07d137a767955ca9120929a69c7bdf">dpif_sflow_odp_port_to_ifindex</a> (const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *, <a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a> odp_port)</td></tr>
<tr class="separator:acf07d137a767955ca9120929a69c7bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac98606a9beb2e5d70bb767c611284b1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_add_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"><em>ds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structofport.html">ofport</a> *&#160;</td>
          <td class="paramname"><em>ofport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a>&#160;</td>
          <td class="paramname"><em>odp_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;{</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *dsp;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordtype">int</span> ifindex;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keyword">enum</span> <a class="code" href="ofproto-dpif-sflow_8c.html#a79cebde9f149131bf3e3c64972a505a5">dpif_sflow_tunnel_type</a> <a class="code" href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">tunnel_type</a>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#aa9d980febd569d46523dd3dde5b9a51f">dpif_sflow_del_port</a>(ds, <a class="code" href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">odp_port</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    tunnel_type = <a class="code" href="ofproto-dpif-sflow_8c.html#a79cebde9f149131bf3e3c64972a505a5">dpif_sflow_tunnel_type</a>(ofport);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    ifindex = <a class="code" href="netdev_8c.html#a3b67c4291e8c1a32b3564dac03637ee3">netdev_get_ifindex</a>(ofport-&gt;<a class="code" href="structofport.html#a32f2ea80169739680a87fe4c1718234f">netdev</a>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (ifindex &lt;= 0</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    &amp;&amp; tunnel_type == <a class="code" href="ofproto-dpif-sflow_8c.html#a79cebde9f149131bf3e3c64972a505a5a7466091c44ded1f59d3f0d18cac918a0">DPIF_SFLOW_TUNNEL_UNKNOWN</a>) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">/* Not an ifindex port, and not a tunnel port either</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">     * so do not add a cross-reference to it here.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="comment">/* Add to table of ports. */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    dsp = <a class="code" href="util_8c.html#a42ccfa6fc49cc4ce90cc44cd05052490">xmalloc</a>(<span class="keyword">sizeof</span> *dsp);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    dsp-&gt;<a class="code" href="structdpif__sflow__port.html#abf0b0541d8b071cb16df22efb2182a23">ofport</a> = <a class="code" href="structdpif__sflow__port.html#abf0b0541d8b071cb16df22efb2182a23">ofport</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    dsp-&gt;<a class="code" href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">odp_port</a> = <a class="code" href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">odp_port</a>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    dsp-&gt;<a class="code" href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">tunnel_type</a> = <a class="code" href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">tunnel_type</a>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="hmap_8h.html#a08aca4df754058dc75ec0c11e0338620">hmap_insert</a>(&amp;ds-&gt;<a class="code" href="structdpif__sflow.html#aeabc63660711241bcd8a9218290a0b61">ports</a>, &amp;dsp-&gt;<a class="code" href="structdpif__sflow__port.html#af1f6914ffda58cf46ab6bdeab7f091dd">hmap_node</a>, <a class="code" href="lib_2flow_8h.html#a1732ed52d13a43efb0c01fcb0ae4315c">hash_odp_port</a>(<a class="code" href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">odp_port</a>));</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (ifindex &gt; 0) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">/* Add poller for ports that have ifindex. */</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="sflow__api_8h.html#a720b3c73b4689036c5a72921e7701981">SFL_DS_SET</a>(dsp-&gt;<a class="code" href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dsi</a>, <a class="code" href="sflow_8h.html#a4a874d15da5d662f1e59fa8c0eaf9cfbafde45d0644ecdff9d3f7ead18f0471f0">SFL_DSCLASS_IFINDEX</a>, ifindex, 0);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="structdpif__sflow.html#adfe42109d4fa33cb8efbf6379995a3b8">sflow_agent</a>) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#afd052afa409b8b0ce69168a2e9bc203e">dpif_sflow_add_poller</a>(ds, dsp);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">/* Record &quot;ifindex unknown&quot; for the others */</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="sflow__api_8h.html#a720b3c73b4689036c5a72921e7701981">SFL_DS_SET</a>(dsp-&gt;<a class="code" href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dsi</a>, <a class="code" href="sflow_8h.html#a4a874d15da5d662f1e59fa8c0eaf9cfbafde45d0644ecdff9d3f7ead18f0471f0">SFL_DSCLASS_IFINDEX</a>, 0, 0);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;out:</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a79cebde9f149131bf3e3c64972a505a5a7466091c44ded1f59d3f0d18cac918a0"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a79cebde9f149131bf3e3c64972a505a5a7466091c44ded1f59d3f0d18cac918a0">DPIF_SFLOW_TUNNEL_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:60</div></div>
<div class="ttc" id="sflow_8h_html_a4a874d15da5d662f1e59fa8c0eaf9cfbafde45d0644ecdff9d3f7ead18f0471f0"><div class="ttname"><a href="sflow_8h.html#a4a874d15da5d662f1e59fa8c0eaf9cfbafde45d0644ecdff9d3f7ead18f0471f0">SFL_DSCLASS_IFINDEX</a></div><div class="ttdef"><b>Definition:</b> sflow.h:18</div></div>
<div class="ttc" id="structdpif__sflow_html_aeabc63660711241bcd8a9218290a0b61"><div class="ttname"><a href="structdpif__sflow.html#aeabc63660711241bcd8a9218290a0b61">dpif_sflow::ports</a></div><div class="ttdeci">struct hmap ports</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:82</div></div>
<div class="ttc" id="structofport_html_a32f2ea80169739680a87fe4c1718234f"><div class="ttname"><a href="structofport.html#a32f2ea80169739680a87fe4c1718234f">ofport::netdev</a></div><div class="ttdeci">struct netdev * netdev</div><div class="ttdef"><b>Definition:</b> ofproto-provider.h:156</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="structdpif__sflow__port_html_af1f6914ffda58cf46ab6bdeab7f091dd"><div class="ttname"><a href="structdpif__sflow__port.html#af1f6914ffda58cf46ab6bdeab7f091dd">dpif_sflow_port::hmap_node</a></div><div class="ttdeci">struct hmap_node hmap_node</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:69</div></div>
<div class="ttc" id="util_8c_html_a42ccfa6fc49cc4ce90cc44cd05052490"><div class="ttname"><a href="util_8c.html#a42ccfa6fc49cc4ce90cc44cd05052490">xmalloc</a></div><div class="ttdeci">void * xmalloc(size_t size)</div><div class="ttdef"><b>Definition:</b> util.c:110</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="structdpif__sflow__port_html_af73b6dd1d8b1a56aa045870a3457faee"><div class="ttname"><a href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dpif_sflow_port::dsi</a></div><div class="ttdeci">SFLDataSource_instance dsi</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:70</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_afd052afa409b8b0ce69168a2e9bc203e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#afd052afa409b8b0ce69168a2e9bc203e">dpif_sflow_add_poller</a></div><div class="ttdeci">static void dpif_sflow_add_poller(struct dpif_sflow *ds, struct dpif_sflow_port *dsp) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:573</div></div>
<div class="ttc" id="structdpif__sflow__port_html"><div class="ttname"><a href="structdpif__sflow__port.html">dpif_sflow_port</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:68</div></div>
<div class="ttc" id="structdpif__sflow__port_html_abf0b0541d8b071cb16df22efb2182a23"><div class="ttname"><a href="structdpif__sflow__port.html#abf0b0541d8b071cb16df22efb2182a23">dpif_sflow_port::ofport</a></div><div class="ttdeci">struct ofport * ofport</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:71</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_aa9d980febd569d46523dd3dde5b9a51f"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#aa9d980febd569d46523dd3dde5b9a51f">dpif_sflow_del_port</a></div><div class="ttdeci">void dpif_sflow_del_port(struct dpif_sflow *ds, odp_port_t odp_port) OVS_EXCLUDED(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:686</div></div>
<div class="ttc" id="structdpif__sflow_html_adfe42109d4fa33cb8efbf6379995a3b8"><div class="ttname"><a href="structdpif__sflow.html#adfe42109d4fa33cb8efbf6379995a3b8">dpif_sflow::sflow_agent</a></div><div class="ttdeci">SFLAgent * sflow_agent</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:78</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a79cebde9f149131bf3e3c64972a505a5"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a79cebde9f149131bf3e3c64972a505a5">dpif_sflow_tunnel_type</a></div><div class="ttdeci">dpif_sflow_tunnel_type</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:59</div></div>
<div class="ttc" id="netdev_8c_html_a3b67c4291e8c1a32b3564dac03637ee3"><div class="ttname"><a href="netdev_8c.html#a3b67c4291e8c1a32b3564dac03637ee3">netdev_get_ifindex</a></div><div class="ttdeci">int netdev_get_ifindex(const struct netdev *netdev)</div><div class="ttdef"><b>Definition:</b> netdev.c:900</div></div>
<div class="ttc" id="structdpif__sflow__port_html_a4ee3566eb2a16b5fcdc969eea5d505dd"><div class="ttname"><a href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">dpif_sflow_port::odp_port</a></div><div class="ttdeci">odp_port_t odp_port</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:72</div></div>
<div class="ttc" id="sflow__api_8h_html_a720b3c73b4689036c5a72921e7701981"><div class="ttname"><a href="sflow__api_8h.html#a720b3c73b4689036c5a72921e7701981">SFL_DS_SET</a></div><div class="ttdeci">#define SFL_DS_SET(dsi, clss, indx, inst)</div><div class="ttdef"><b>Definition:</b> sflow_api.h:79</div></div>
<div class="ttc" id="structdpif__sflow__port_html_a965b185cbb8bdf1a6312be78f87a6d55"><div class="ttname"><a href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">dpif_sflow_port::tunnel_type</a></div><div class="ttdeci">enum dpif_sflow_tunnel_type tunnel_type</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:73</div></div>
<div class="ttc" id="lib_2flow_8h_html_a1732ed52d13a43efb0c01fcb0ae4315c"><div class="ttname"><a href="lib_2flow_8h.html#a1732ed52d13a43efb0c01fcb0ae4315c">hash_odp_port</a></div><div class="ttdeci">static uint32_t hash_odp_port(odp_port_t odp_port)</div><div class="ttdef"><b>Definition:</b> flow.h:307</div></div>
<div class="ttc" id="hmap_8h_html_a08aca4df754058dc75ec0c11e0338620"><div class="ttname"><a href="hmap_8h.html#a08aca4df754058dc75ec0c11e0338620">hmap_insert</a></div><div class="ttdeci">#define hmap_insert(HMAP, NODE, HASH)</div><div class="ttdef"><b>Definition:</b> hmap.h:94</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a45085e69eccc55512652564f0725fd3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_clear </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#aaf35a0cd58c1024b2f762a646780c9a0">dpif_sflow_clear__</a>(<a class="code" href="structds.html">ds</a>);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_aaf35a0cd58c1024b2f762a646780c9a0"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#aaf35a0cd58c1024b2f762a646780c9a0">dpif_sflow_clear__</a></div><div class="ttdeci">static void dpif_sflow_clear__(struct dpif_sflow *ds) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:478</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9afad6b86069a9609f4f9eb23d54530f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a>* dpif_sflow_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structovsthread__once.html">ovsthread_once</a> once = <a class="code" href="thread_8h.html#aaaeb2533092a5ef2beff154ca4e41481">OVSTHREAD_ONCE_INITIALIZER</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow.html">dpif_sflow</a> *<a class="code" href="structds.html">ds</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="thread_8h.html#a8ecaf6e9b01815bb2406ab2a6a25c479">ovsthread_once_start</a>(&amp;once)) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="thread_8h.html#a30462b0c40dbf398cb47570d79d7847b">ovs_mutex_init_recursive</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="thread_8h.html#a994361b784f5acdbf18082492ab5239e">ovsthread_once_done</a>(&amp;once);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    ds = <a class="code" href="util_8c.html#a83c47bc0397d90cc9f2eb9e35a5cda4e">xcalloc</a>(1, <span class="keyword">sizeof</span> *ds);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    ds-&gt;<a class="code" href="structdpif__sflow.html#ae2b88f70984d7e8d5d54697fe9be48ad">next_tick</a> = <a class="code" href="timeval_8c.html#a39b06f8363a4deed456d4ddb429fd4a6">time_now</a>() + 1;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="hmap_8c.html#afcb6be8f2c97754911729a52d51d70a1">hmap_init</a>(&amp;ds-&gt;<a class="code" href="structdpif__sflow.html#aeabc63660711241bcd8a9218290a0b61">ports</a>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    ds-&gt;<a class="code" href="structdpif__sflow.html#a71a4849df65190d1e3b25a4159b951c0">probability</a> = 0;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="ovs-atomic_8h.html#ab03f1eef2f4636fd671d99b980d74166">ovs_refcount_init</a>(&amp;ds-&gt;<a class="code" href="structdpif__sflow.html#aa6d87cf50ec00425db304ff7d05b722b">ref_cnt</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span> ds;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
<div class="ttc" id="thread_8h_html_a994361b784f5acdbf18082492ab5239e"><div class="ttname"><a href="thread_8h.html#a994361b784f5acdbf18082492ab5239e">ovsthread_once_done</a></div><div class="ttdeci">void ovsthread_once_done(struct ovsthread_once *once) OVS_RELEASES(once-&gt; mutex)</div><div class="ttdef"><b>Definition:</b> ovs-thread.c:381</div></div>
<div class="ttc" id="structdpif__sflow_html_a71a4849df65190d1e3b25a4159b951c0"><div class="ttname"><a href="structdpif__sflow.html#a71a4849df65190d1e3b25a4159b951c0">dpif_sflow::probability</a></div><div class="ttdeci">uint32_t probability</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:83</div></div>
<div class="ttc" id="structdpif__sflow_html_aeabc63660711241bcd8a9218290a0b61"><div class="ttname"><a href="structdpif__sflow.html#aeabc63660711241bcd8a9218290a0b61">dpif_sflow::ports</a></div><div class="ttdeci">struct hmap ports</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:82</div></div>
<div class="ttc" id="util_8c_html_a83c47bc0397d90cc9f2eb9e35a5cda4e"><div class="ttname"><a href="util_8c.html#a83c47bc0397d90cc9f2eb9e35a5cda4e">xcalloc</a></div><div class="ttdeci">void * xcalloc(size_t count, size_t size)</div><div class="ttdef"><b>Definition:</b> util.c:93</div></div>
<div class="ttc" id="ovs-atomic_8h_html_ab03f1eef2f4636fd671d99b980d74166"><div class="ttname"><a href="ovs-atomic_8h.html#ab03f1eef2f4636fd671d99b980d74166">ovs_refcount_init</a></div><div class="ttdeci">static void ovs_refcount_init(struct ovs_refcount *refcount)</div><div class="ttdef"><b>Definition:</b> ovs-atomic.h:481</div></div>
<div class="ttc" id="thread_8h_html_a8ecaf6e9b01815bb2406ab2a6a25c479"><div class="ttname"><a href="thread_8h.html#a8ecaf6e9b01815bb2406ab2a6a25c479">ovsthread_once_start</a></div><div class="ttdeci">static bool ovsthread_once_start(struct ovsthread_once *once) OVS_TRY_LOCK(true</div><div class="ttdef"><b>Definition:</b> thread.h:128</div></div>
<div class="ttc" id="structdpif__sflow_html_aa6d87cf50ec00425db304ff7d05b722b"><div class="ttname"><a href="structdpif__sflow.html#aa6d87cf50ec00425db304ff7d05b722b">dpif_sflow::ref_cnt</a></div><div class="ttdeci">struct ovs_refcount ref_cnt</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:84</div></div>
<div class="ttc" id="timeval_8c_html_a39b06f8363a4deed456d4ddb429fd4a6"><div class="ttname"><a href="timeval_8c.html#a39b06f8363a4deed456d4ddb429fd4a6">time_now</a></div><div class="ttdeci">time_t time_now(void)</div><div class="ttdef"><b>Definition:</b> timeval.c:198</div></div>
<div class="ttc" id="thread_8h_html_aaaeb2533092a5ef2beff154ca4e41481"><div class="ttname"><a href="thread_8h.html#aaaeb2533092a5ef2beff154ca4e41481">OVSTHREAD_ONCE_INITIALIZER</a></div><div class="ttdeci">#define OVSTHREAD_ONCE_INITIALIZER</div><div class="ttdef"><b>Definition:</b> thread.h:106</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structovsthread__once_html"><div class="ttname"><a href="structovsthread__once.html">ovsthread_once</a></div><div class="ttdef"><b>Definition:</b> thread.h:101</div></div>
<div class="ttc" id="structdpif__sflow_html"><div class="ttname"><a href="structdpif__sflow.html">dpif_sflow</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:76</div></div>
<div class="ttc" id="structdpif__sflow_html_ae2b88f70984d7e8d5d54697fe9be48ad"><div class="ttname"><a href="structdpif__sflow.html#ae2b88f70984d7e8d5d54697fe9be48ad">dpif_sflow::next_tick</a></div><div class="ttdeci">time_t next_tick</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:80</div></div>
<div class="ttc" id="thread_8h_html_a30462b0c40dbf398cb47570d79d7847b"><div class="ttname"><a href="thread_8h.html#a30462b0c40dbf398cb47570d79d7847b">ovs_mutex_init_recursive</a></div><div class="ttdeci">void ovs_mutex_init_recursive(const struct ovs_mutex *)</div><div class="ttdef"><b>Definition:</b> ovs-thread.c:213</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
<div class="ttc" id="hmap_8c_html_afcb6be8f2c97754911729a52d51d70a1"><div class="ttname"><a href="hmap_8c.html#afcb6be8f2c97754911729a52d51d70a1">hmap_init</a></div><div class="ttdeci">void hmap_init(struct hmap *hmap)</div><div class="ttdef"><b>Definition:</b> hmap.c:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5e7b14cf005273a858089f3b319ddc83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_del_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a>&#160;</td>
          <td class="paramname"><em>odp_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *dsp;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    dsp = <a class="code" href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a>(<a class="code" href="structds.html">ds</a>, <a class="code" href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">odp_port</a>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (dsp) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#aa8d1792f750f2af879fa6e72e77175d4">dpif_sflow_del_port__</a>(<a class="code" href="structds.html">ds</a>, dsp);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;}</div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_aa8d1792f750f2af879fa6e72e77175d4"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#aa8d1792f750f2af879fa6e72e77175d4">dpif_sflow_del_port__</a></div><div class="ttdeci">static void dpif_sflow_del_port__(struct dpif_sflow *, struct dpif_sflow_port *)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:673</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_ab8477a71732395802350eeb837aeacc2"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a></div><div class="ttdeci">static struct dpif_sflow_port * dpif_sflow_find_port(const struct dpif_sflow *ds, odp_port_t odp_port) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:170</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="structdpif__sflow__port_html"><div class="ttname"><a href="structdpif__sflow__port.html">dpif_sflow_port</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:68</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structdpif__sflow__port_html_a4ee3566eb2a16b5fcdc969eea5d505dd"><div class="ttname"><a href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">dpif_sflow_port::odp_port</a></div><div class="ttdeci">odp_port_t odp_port</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:72</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44f622b877874ba94a5c28b5b8c85517"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dpif_sflow_get_probability </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> probability;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    probability = <a class="code" href="structds.html">ds</a>-&gt;probability;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> probability;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="Types_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> Types.h:24</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abea3b4dd885b8c92fac468a1ce06b80b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> dpif_sflow_is_enabled </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="system-stats_8c.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    enabled = <a class="code" href="structds.html">ds</a>-&gt;collectors != NULL;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="system-stats_8c.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="ttc" id="system-stats_8c_html_a8740ba80e30dd75e71d09fa1dcf04f3d"><div class="ttname"><a href="system-stats_8c.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a></div><div class="ttdeci">static bool enabled</div><div class="ttdef"><b>Definition:</b> system-stats.c:530</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acf07d137a767955ca9120929a69c7bdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dpif_sflow_odp_port_to_ifindex </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a>&#160;</td>
          <td class="paramname"><em>odp_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;{</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *dsp;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordtype">int</span> ret;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    dsp = <a class="code" href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a>(<a class="code" href="structds.html">ds</a>, <a class="code" href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">odp_port</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    ret = dsp ? <a class="code" href="sflow__api_8h.html#a6d9ebbac494658f466a0c3cc5fb761c9">SFL_DS_INDEX</a>(dsp-&gt;<a class="code" href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dsi</a>) : 0;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;}</div>
<div class="ttc" id="sflow__api_8h_html_a6d9ebbac494658f466a0c3cc5fb761c9"><div class="ttname"><a href="sflow__api_8h.html#a6d9ebbac494658f466a0c3cc5fb761c9">SFL_DS_INDEX</a></div><div class="ttdeci">#define SFL_DS_INDEX(dsi)</div><div class="ttdef"><b>Definition:</b> sflow_api.h:78</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_ab8477a71732395802350eeb837aeacc2"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a></div><div class="ttdeci">static struct dpif_sflow_port * dpif_sflow_find_port(const struct dpif_sflow *ds, odp_port_t odp_port) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:170</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="structdpif__sflow__port_html_af73b6dd1d8b1a56aa045870a3457faee"><div class="ttname"><a href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dpif_sflow_port::dsi</a></div><div class="ttdeci">SFLDataSource_instance dsi</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:70</div></div>
<div class="ttc" id="structdpif__sflow__port_html"><div class="ttname"><a href="structdpif__sflow__port.html">dpif_sflow_port</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:68</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structdpif__sflow__port_html_a4ee3566eb2a16b5fcdc969eea5d505dd"><div class="ttname"><a href="structdpif__sflow__port.html#a4ee3566eb2a16b5fcdc969eea5d505dd">dpif_sflow_port::odp_port</a></div><div class="ttdeci">odp_port_t odp_port</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:72</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2c763f188e4564d3331d8d4ae536a159"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_read_actions </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structflow.html">flow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>actions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>actions_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow__actions.html">dpif_sflow_actions</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;{</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *<a class="code" href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> left;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span> (actions_len == 0) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="comment">/* Packet dropped.*/</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    }</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structflow.html">flow</a> != NULL) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="comment">/* Make sure the MPLS output stack</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">     * is seeded with the input stack.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#a0413b4ec53fa667fe08009b6c1afac29">dpif_sflow_capture_input_mpls</a>(<a class="code" href="structflow.html">flow</a>, sflow_actions);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="comment">/* XXX when 802.1AD(QinQ) is supported then</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">     * we can do the same with VLAN stacks here</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="Netlink_8h.html#a393460f735acb84ceafa1809b0d188b7">NL_ATTR_FOR_EACH</a> (a, left, actions, actions_len) {</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="keyword">enum</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26e">ovs_action_attr</a> <a class="code" href="datapath_2flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a> = <a class="code" href="lib_2netlink_8h.html#a3344e63a1c23132a3ea1d82a7fee7e59">nl_attr_type</a>(a);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eacad69687bf2bfae5092ea828cf0d4fe2">OVS_ACTION_ATTR_OUTPUT</a>:</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="comment">/* Capture the output port in case we need it</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">         * to get the output tunnel type.</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        sflow_actions-&gt;out_port = <a class="code" href="lib_2flow_8h.html#acbf8676b032796c054e1841ad9a6736c">u32_to_odp</a>(<a class="code" href="netlink_8c.html#a71a42ed97f124f0e7cbacdfa0539885e">nl_attr_get_u32</a>(a));</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea342ee7c1a254d643fb285248c8c30600">OVS_ACTION_ATTR_TUNNEL_POP</a>:</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="comment">/* XXX: Do not handle this for now.  It&#39;s not clear</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">         * if we should start with encap_depth == 1 when we</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">         * see an input tunnel,  or if we should assume</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">         * that the input tunnel was always &quot;popped&quot; if it</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">         * was presented to us decoded in flow-&gt;tunnel?</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">         * If we do handle this it might look like this,</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">         * as we clear the captured tunnel info and decrement</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">         * the encap_depth:</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">         * memset(&amp;sflow_actions-&gt;tunnel, 0, sizeof struct flow_tnl);</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">         * sflow_actions-&gt;tunnel_ipproto = 0;</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">         * --sflow_actions-&gt;encap_depth;</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">         * but for now just disable the tunnel annotation:</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        sflow_actions-&gt;tunnel_err = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea1be03aa7fae601a428d5b9ec6269bf44">OVS_ACTION_ATTR_TUNNEL_PUSH</a>:</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        <span class="comment">/* XXX: This actions appears to come with it&#39;s own</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">         * OUTPUT action, so should it be regarded as having</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">         * an implicit &quot;pop&quot; following it too?  Put another</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment">         * way, would two tnl_push() actions in succession</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">         * result in a packet with two layers of encap?</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="keywordflow">if</span> (++sflow_actions-&gt;encap_depth &gt; 1) {</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="comment">/* Do not handle multi-encap for now. */</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;        sflow_actions-&gt;tunnel_err = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#adf9f652a90a6ea7df0289e3b55ab32a1">sflow_read_tnl_push_action</a>(a, sflow_actions);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea17132af22505d8b1bb535a270f83a8bd">OVS_ACTION_ATTR_USERSPACE</a>:</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea2cad0b08a7809d6e7cb1a9e86d73a47c">OVS_ACTION_ATTR_RECIRC</a>:</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaa783c1e8488baea181d3497e0e9676f9">OVS_ACTION_ATTR_HASH</a>:</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea50a466abca8b11394e9364de28ebe03f">OVS_ACTION_ATTR_SET_MASKED</a>:</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="comment">/* TODO: apply mask. XXX: Are we likely to see this? */</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaff937deb7687d0dd4b073c27aed9c8be">OVS_ACTION_ATTR_SET</a>:</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#a4b50151de72a933a0e22b3ee10af29cf">sflow_read_set_action</a>(<a class="code" href="netlink_8c.html#aa4e12c4c75202de49731af3f52cda073">nl_attr_get</a>(a), sflow_actions);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea6f41b7751556ff0acc2f4c6f94963ba6">OVS_ACTION_ATTR_PUSH_VLAN</a>:</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea9cd4ec18560c7c3f81276cba51a96a24">OVS_ACTION_ATTR_POP_VLAN</a>:</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">/* TODO: 802.1AD(QinQ) is not supported by OVS (yet), so do not</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">         * construct a VLAN-stack. The sFlow user-action cookie already</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">         * captures the egress VLAN ID so there is nothing more to do here.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eafb68488325a1ab2d6bfb67ea115a5cdb">OVS_ACTION_ATTR_PUSH_MPLS</a>: {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structovs__action__push__mpls.html">ovs_action_push_mpls</a> *<a class="code" href="datapath_2flow_8h.html#aeab2d67b4ec58a9575da76c323ad95ce">mpls</a> = <a class="code" href="netlink_8c.html#aa4e12c4c75202de49731af3f52cda073">nl_attr_get</a>(a);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">if</span> (mpls) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#a595dc67b21243c1046ce879450da45bd">dpif_sflow_push_mpls_lse</a>(sflow_actions, mpls-&gt;<a class="code" href="structovs__action__push__mpls.html#a58c09de1a14973c13197f7748beb3803">mpls_lse</a>);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eafe4ec9b68459771a3ffd07d20cd628e1">OVS_ACTION_ATTR_POP_MPLS</a>: {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#a5ea9069a68cc11817290ad59d19c215f">dpif_sflow_pop_mpls_lse</a>(sflow_actions);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaddc6f70b9e8501e5bb90548373faf734">OVS_ACTION_ATTR_SAMPLE</a>:</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea7ea71a1f3bf51504d9ee79e77578287b">OVS_ACTION_ATTR_UNSPEC</a>:</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea66941b22494734504105eee691742237">__OVS_ACTION_ATTR_MAX</a>:</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;}</div>
<div class="ttc" id="lib_2netlink_8h_html_a3344e63a1c23132a3ea1d82a7fee7e59"><div class="ttname"><a href="lib_2netlink_8h.html#a3344e63a1c23132a3ea1d82a7fee7e59">nl_attr_type</a></div><div class="ttdeci">nl_attr_type</div><div class="ttdef"><b>Definition:</b> netlink.h:118</div></div>
<div class="ttc" id="structovs__action__push__mpls_html_a58c09de1a14973c13197f7748beb3803"><div class="ttname"><a href="structovs__action__push__mpls.html#a58c09de1a14973c13197f7748beb3803">ovs_action_push_mpls::mpls_lse</a></div><div class="ttdeci">__be32 mpls_lse</div><div class="ttdef"><b>Definition:</b> openvswitch.h:581</div></div>
<div class="ttc" id="Netlink_8h_html_a393460f735acb84ceafa1809b0d188b7"><div class="ttname"><a href="Netlink_8h.html#a393460f735acb84ceafa1809b0d188b7">NL_ATTR_FOR_EACH</a></div><div class="ttdeci">#define NL_ATTR_FOR_EACH(ITER, LEFT, ATTRS, ATTRS_LEN)</div><div class="ttdef"><b>Definition:</b> Netlink.h:73</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eaff937deb7687d0dd4b073c27aed9c8be"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaff937deb7687d0dd4b073c27aed9c8be">OVS_ACTION_ATTR_SET</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:693</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26e"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26e">ovs_action_attr</a></div><div class="ttdeci">ovs_action_attr</div><div class="ttdef"><b>Definition:</b> openvswitch.h:689</div></div>
<div class="ttc" id="netlink_8c_html_aa4e12c4c75202de49731af3f52cda073"><div class="ttname"><a href="netlink_8c.html#aa4e12c4c75202de49731af3f52cda073">nl_attr_get</a></div><div class="ttdeci">const void * nl_attr_get(const struct nlattr *nla)</div><div class="ttdef"><b>Definition:</b> netlink.c:507</div></div>
<div class="ttc" id="netlink_8c_html_a71a42ed97f124f0e7cbacdfa0539885e"><div class="ttname"><a href="netlink_8c.html#a71a42ed97f124f0e7cbacdfa0539885e">nl_attr_get_u32</a></div><div class="ttdeci">uint32_t nl_attr_get_u32(const struct nlattr *nla)</div><div class="ttdef"><b>Definition:</b> netlink.c:563</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea66941b22494734504105eee691742237"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea66941b22494734504105eee691742237">__OVS_ACTION_ATTR_MAX</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:710</div></div>
<div class="ttc" id="datapath_2flow_8h_html_aeab2d67b4ec58a9575da76c323ad95ce"><div class="ttname"><a href="datapath_2flow_8h.html#aeab2d67b4ec58a9575da76c323ad95ce">mpls</a></div><div class="ttdeci">struct @17::@22 mpls</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a5ea9069a68cc11817290ad59d19c215f"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a5ea9069a68cc11817290ad59d19c215f">dpif_sflow_pop_mpls_lse</a></div><div class="ttdeci">static void dpif_sflow_pop_mpls_lse(struct dpif_sflow_actions *sflow_actions)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:855</div></div>
<div class="ttc" id="lib_2flow_8h_html_acbf8676b032796c054e1841ad9a6736c"><div class="ttname"><a href="lib_2flow_8h.html#acbf8676b032796c054e1841ad9a6736c">u32_to_odp</a></div><div class="ttdeci">static odp_port_t u32_to_odp(uint32_t port)</div><div class="ttdef"><b>Definition:</b> flow.h:289</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eaddc6f70b9e8501e5bb90548373faf734"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaddc6f70b9e8501e5bb90548373faf734">OVS_ACTION_ATTR_SAMPLE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:696</div></div>
<div class="ttc" id="test-atomic_8c_html_a0a0390ed59a97feb6783f87db4086a7c"><div class="ttname"><a href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a></div><div class="ttdeci">static uint32_t a</div><div class="ttdef"><b>Definition:</b> test-atomic.c:175</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_adf9f652a90a6ea7df0289e3b55ab32a1"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#adf9f652a90a6ea7df0289e3b55ab32a1">sflow_read_tnl_push_action</a></div><div class="ttdeci">static void sflow_read_tnl_push_action(const struct nlattr *attr, struct dpif_sflow_actions *sflow_actions)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:882</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea1be03aa7fae601a428d5b9ec6269bf44"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea1be03aa7fae601a428d5b9ec6269bf44">OVS_ACTION_ATTR_TUNNEL_PUSH</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:707</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a0413b4ec53fa667fe08009b6c1afac29"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a0413b4ec53fa667fe08009b6c1afac29">dpif_sflow_capture_input_mpls</a></div><div class="ttdeci">static void dpif_sflow_capture_input_mpls(const struct flow *flow, struct dpif_sflow_actions *sflow_actions)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:1040</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eaa783c1e8488baea181d3497e0e9676f9"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaa783c1e8488baea181d3497e0e9676f9">OVS_ACTION_ATTR_HASH</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:698</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea17132af22505d8b1bb535a270f83a8bd"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea17132af22505d8b1bb535a270f83a8bd">OVS_ACTION_ATTR_USERSPACE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:692</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eafe4ec9b68459771a3ffd07d20cd628e1"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eafe4ec9b68459771a3ffd07d20cd628e1">OVS_ACTION_ATTR_POP_MPLS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:700</div></div>
<div class="ttc" id="structnlattr_html"><div class="ttname"><a href="structnlattr.html">nlattr</a></div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:95</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a595dc67b21243c1046ce879450da45bd"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a595dc67b21243c1046ce879450da45bd">dpif_sflow_push_mpls_lse</a></div><div class="ttdeci">static void dpif_sflow_push_mpls_lse(struct dpif_sflow_actions *sflow_actions, ovs_be32 lse)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:841</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea50a466abca8b11394e9364de28ebe03f"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea50a466abca8b11394e9364de28ebe03f">OVS_ACTION_ATTR_SET_MASKED</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:701</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea6f41b7751556ff0acc2f4c6f94963ba6"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea6f41b7751556ff0acc2f4c6f94963ba6">OVS_ACTION_ATTR_PUSH_VLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:694</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea9cd4ec18560c7c3f81276cba51a96a24"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea9cd4ec18560c7c3f81276cba51a96a24">OVS_ACTION_ATTR_POP_VLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:695</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea7ea71a1f3bf51504d9ee79e77578287b"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea7ea71a1f3bf51504d9ee79e77578287b">OVS_ACTION_ATTR_UNSPEC</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:690</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea2cad0b08a7809d6e7cb1a9e86d73a47c"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea2cad0b08a7809d6e7cb1a9e86d73a47c">OVS_ACTION_ATTR_RECIRC</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:697</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26ea342ee7c1a254d643fb285248c8c30600"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26ea342ee7c1a254d643fb285248c8c30600">OVS_ACTION_ATTR_TUNNEL_POP</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:708</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a4b50151de72a933a0e22b3ee10af29cf"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a4b50151de72a933a0e22b3ee10af29cf">sflow_read_set_action</a></div><div class="ttdeci">static void sflow_read_set_action(const struct nlattr *attr, struct dpif_sflow_actions *sflow_actions)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:939</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eafb68488325a1ab2d6bfb67ea115a5cdb"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eafb68488325a1ab2d6bfb67ea115a5cdb">OVS_ACTION_ATTR_PUSH_MPLS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:699</div></div>
<div class="ttc" id="structflow_html"><div class="ttname"><a href="structflow.html">flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:94</div></div>
<div class="ttc" id="structovs__action__push__mpls_html"><div class="ttname"><a href="structovs__action__push__mpls.html">ovs_action_push_mpls</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:580</div></div>
<div class="ttc" id="datapath_2flow_8h_html_ab22aaab04f806700def00f32823fcb9e"><div class="ttname"><a href="datapath_2flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a></div><div class="ttdeci">__be16 type</div><div class="ttdef"><b>Definition:</b> flow.h:117</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eacad69687bf2bfae5092ea828cf0d4fe2"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eacad69687bf2bfae5092ea828cf0d4fe2">OVS_ACTION_ATTR_OUTPUT</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:691</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af56944723388f79e157f16e3385517c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_received </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdp__packet.html">dp_packet</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structflow.html">flow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="include_2openvswitch_2types_8h.html#a8ec89192f43ad3253862b05639ae356f">odp_port_t</a>&#160;</td>
          <td class="paramname"><em>odp_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union <a class="el" href="unionuser__action__cookie.html">user_action_cookie</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structdpif__sflow__actions.html">dpif_sflow_actions</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="sflow__api_8h.html#af3aa8f91129fd0a5ccd1ac3b4dc52ff6">SFL_FLOW_SAMPLE_TYPE</a> fs;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <a class="code" href="struct__SFLFlow__sample__element.html">SFLFlow_sample_element</a> hdrElem;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <a class="code" href="struct__SFLSampled__header.html">SFLSampled_header</a> *header;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="struct__SFLFlow__sample__element.html">SFLFlow_sample_element</a> switchElem;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <a class="code" href="Types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> tnlInProto, tnlOutProto;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="struct__SFLFlow__sample__element.html">SFLFlow_sample_element</a> tnlInElem, tnlOutElem;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <a class="code" href="struct__SFLFlow__sample__element.html">SFLFlow_sample_element</a> vniInElem, vniOutElem;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="struct__SFLFlow__sample__element.html">SFLFlow_sample_element</a> mplsElem;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <a class="code" href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> mpls_lse_buf[<a class="code" href="lib_2flow_8h.html#a97116900896d9a0244d2d61397c280a9">FLOW_MAX_MPLS_LABELS</a>];</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="struct__SFLSampler.html">SFLSampler</a> *sampler;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *in_dsp;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *out_dsp;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="Types_8h.html#a90914f5d31b2ee4608c44273262619c0">ovs_be16</a> vlan_tci;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    sampler = <a class="code" href="structds.html">ds</a>-&gt;sflow_agent-&gt;samplers;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> (!sampler) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    }</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="comment">/* Build a flow sample. */</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    memset(&amp;fs, 0, <span class="keyword">sizeof</span> fs);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="comment">/* Look up the input ifIndex if this port has one. Otherwise just</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">     * leave it as 0 (meaning &#39;unknown&#39;) and continue. */</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    in_dsp = <a class="code" href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a>(<a class="code" href="structds.html">ds</a>, odp_in_port);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (in_dsp) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        fs.input = <a class="code" href="sflow__api_8h.html#a6d9ebbac494658f466a0c3cc5fb761c9">SFL_DS_INDEX</a>(in_dsp-&gt;<a class="code" href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dsi</a>);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">/* Make the assumption that the random number generator in the datapath converges</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">     * to the configured mean, and just increment the samplePool by the configured</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;<span class="comment">     * sampling rate every time. */</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    sampler-&gt;<a class="code" href="struct__SFLSampler.html#aa9ae134ebb84097a474105df99982ef1">samplePool</a> += <a class="code" href="sflow__api_8h.html#ab3628507567479fb19417602d08c1f0f">sfl_sampler_get_sFlowFsPacketSamplingRate</a>(sampler);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">/* Sampled header. */</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    memset(&amp;hdrElem, 0, <span class="keyword">sizeof</span> hdrElem);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    hdrElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939ad56dcae5b8f84bea7e00a6234b986df7">SFLFLOW_HEADER</a>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    header = &amp;hdrElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#a646c440383d31fc720ac397fcac85d25">header</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    header-&gt;<a class="code" href="struct__SFLSampled__header.html#a82e7c737e83cba0397c95ecdeb0d06c9">header_protocol</a> = <a class="code" href="sflow_8h.html#ab7507020eb3edef54c8f7ba006ef8fc2a829b83188e3f1a7e9a3bc8c75395a92f">SFLHEADER_ETHERNET_ISO8023</a>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="comment">/* The frame_length should include the Ethernet FCS (4 bytes),</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="comment">     * but it has already been stripped,  so we need to add 4 here. */</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    header-&gt;<a class="code" href="struct__SFLSampled__header.html#ac3179cb80965f70c7c217792b631f7f1">frame_length</a> = <a class="code" href="dp-packet_8h.html#a13b150910c18bb874239510eb9e70d73">dp_packet_size</a>(<a class="code" href="structpacket.html">packet</a>) + 4;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="comment">/* Ethernet FCS stripped off. */</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    header-&gt;<a class="code" href="struct__SFLSampled__header.html#ab9fb6ba3c6f8a27e3bf3997fc6e1c65e">stripped</a> = 4;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    header-&gt;<a class="code" href="struct__SFLSampled__header.html#aa3cd52fcf0ccbfbef851e875f9099c31">header_length</a> = <a class="code" href="Util_8h.html#a926c1ab4f6ca8b244750377dcdea9ec1">MIN</a>(<a class="code" href="dp-packet_8h.html#a13b150910c18bb874239510eb9e70d73">dp_packet_size</a>(<a class="code" href="structpacket.html">packet</a>),</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                                sampler-&gt;<a class="code" href="struct__SFLSampler.html#a978067822f51da5580c5e9c2e1fe3742">sFlowFsMaximumHeaderSize</a>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    header-&gt;<a class="code" href="struct__SFLSampled__header.html#a11756de4e20e1e17830462f53fabcf36">header_bytes</a> = <a class="code" href="dp-packet_8h.html#ab3b288b69ee7666ed69535bf7d926810">dp_packet_data</a>(<a class="code" href="structpacket.html">packet</a>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">/* Add extended switch element. */</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    memset(&amp;switchElem, 0, <span class="keyword">sizeof</span>(switchElem));</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    switchElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a199522947a4a7a883cefee50758840f6">SFLFLOW_EX_SWITCH</a>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    switchElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#acfe63170408e96b090d1e7661828df8f">sw</a>.<a class="code" href="struct__SFLExtended__switch.html#a22b1cc6c57e1f5d82802ed76e8e8619a">src_vlan</a> = <a class="code" href="packets_8h.html#a4fc901ca6d2e91f7ca90bf5b252cc4ae">vlan_tci_to_vid</a>(<a class="code" href="structflow.html">flow</a>-&gt;<a class="code" href="structflow.html#aa961a887041a3767fff62e92c5ff4ed7">vlan_tci</a>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    switchElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#acfe63170408e96b090d1e7661828df8f">sw</a>.<a class="code" href="struct__SFLExtended__switch.html#a1c9e9f4f8657389db1b561e169b429e5">src_priority</a> = <a class="code" href="packets_8h.html#abc19933064eb01e775eb17f03dad7f37">vlan_tci_to_pcp</a>(<a class="code" href="structflow.html">flow</a>-&gt;<a class="code" href="structflow.html#aa961a887041a3767fff62e92c5ff4ed7">vlan_tci</a>);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="comment">/* Retrieve data from user_action_cookie. */</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    vlan_tci = cookie-&gt;sflow.vlan_tci;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    switchElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#acfe63170408e96b090d1e7661828df8f">sw</a>.<a class="code" href="struct__SFLExtended__switch.html#a23c567e1a75153a3ae3319aa98246793">dst_vlan</a> = <a class="code" href="packets_8h.html#a4fc901ca6d2e91f7ca90bf5b252cc4ae">vlan_tci_to_vid</a>(vlan_tci);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    switchElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#acfe63170408e96b090d1e7661828df8f">sw</a>.<a class="code" href="struct__SFLExtended__switch.html#a2d4583207594a14046e4e5cfd2a096f3">dst_priority</a> = <a class="code" href="packets_8h.html#abc19933064eb01e775eb17f03dad7f37">vlan_tci_to_pcp</a>(vlan_tci);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    fs.output = cookie-&gt;sflow.output;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <span class="comment">/* Input tunnel. */</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structflow.html">flow</a>-&gt;<a class="code" href="structflow.html#acedaaf48c52ff04a4aed091d3a45a84e">tunnel</a>.<a class="code" href="structflow__tnl.html#a5027610a040c96cb9f39a0e3a4470596">ip_dst</a>) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    memset(&amp;tnlInElem, 0, <span class="keyword">sizeof</span>(tnlInElem));</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    tnlInElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a114ece29d024ae85c7abf3fa03d2139b">SFLFLOW_EX_IPV4_TUNNEL_INGRESS</a>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    tnlInProto = <a class="code" href="ofproto-dpif-sflow_8c.html#a2db714319204c2585bb218d999e7e2fa">dpif_sflow_tunnel_proto</a>(in_dsp-&gt;<a class="code" href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">tunnel_type</a>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#adbf37be9e621898dc493ed75c49b286b">dpif_sflow_tunnel_v4</a>(tnlInProto,</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                 &amp;<a class="code" href="structflow.html">flow</a>-&gt;<a class="code" href="structflow.html#acedaaf48c52ff04a4aed091d3a45a84e">tunnel</a>,</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                 &amp;tnlInElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#a4f024ac2630847a01b8ceb7e762b3183">ipv4</a>);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;tnlInElem);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structflow.html">flow</a>-&gt;<a class="code" href="structflow.html#acedaaf48c52ff04a4aed091d3a45a84e">tunnel</a>.<a class="code" href="structflow__tnl.html#afbdc315347b0b43af856724205bb1782">tun_id</a>) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        memset(&amp;vniInElem, 0, <span class="keyword">sizeof</span>(vniInElem));</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        vniInElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939aa5db859b1024e62850779f0dbe44a77f">SFLFLOW_EX_VNI_INGRESS</a>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        vniInElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#a11f2bcfeff19ac6a608bb346a14879ec">tunnel_vni</a>.<a class="code" href="struct__SFLExtended__vni.html#abdb65cd47cfe7329d1bbac6a1e35f971">vni</a></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        = <a class="code" href="byte-order_8h.html#a638905db5be4c03bec5c17ab205650e5">ntohll</a>(<a class="code" href="structflow.html">flow</a>-&gt;<a class="code" href="structflow.html#acedaaf48c52ff04a4aed091d3a45a84e">tunnel</a>.<a class="code" href="structflow__tnl.html#afbdc315347b0b43af856724205bb1782">tun_id</a>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;vniInElem);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="comment">/* Output tunnel. */</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">if</span> (sflow_actions</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    &amp;&amp; sflow_actions-&gt;encap_depth == 1</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    &amp;&amp; !sflow_actions-&gt;tunnel_err</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    &amp;&amp; <a class="code" href="ofproto-dpif-sflow_8c.html#a0fd38a2b35c592fd5de3f1f1b5f1130e">dpif_sflow_cookie_num_outputs</a>(cookie) == 1) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    tnlOutProto = sflow_actions-&gt;tunnel_ipproto;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    <span class="keywordflow">if</span> (tnlOutProto == 0) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="comment">/* Try to infer the ip-protocol from the output port. */</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="keywordflow">if</span> (sflow_actions-&gt;out_port != <a class="code" href="odp-util_8h.html#abcc0498b3ff6aab5c8b56dcfdb55707c">ODPP_NONE</a>) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        out_dsp = <a class="code" href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a>(<a class="code" href="structds.html">ds</a>, sflow_actions-&gt;out_port);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">if</span> (out_dsp) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            tnlOutProto = <a class="code" href="ofproto-dpif-sflow_8c.html#a2db714319204c2585bb218d999e7e2fa">dpif_sflow_tunnel_proto</a>(out_dsp-&gt;<a class="code" href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">tunnel_type</a>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        }</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    memset(&amp;tnlOutElem, 0, <span class="keyword">sizeof</span>(tnlOutElem));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    tnlOutElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a585c48543c1d3147bed865ace395a269">SFLFLOW_EX_IPV4_TUNNEL_EGRESS</a>;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#adbf37be9e621898dc493ed75c49b286b">dpif_sflow_tunnel_v4</a>(tnlOutProto,</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                 &amp;sflow_actions-&gt;tunnel,</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                 &amp;tnlOutElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#a4f024ac2630847a01b8ceb7e762b3183">ipv4</a>);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;tnlOutElem);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    <span class="keywordflow">if</span> (sflow_actions-&gt;tunnel.tun_id) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        memset(&amp;vniOutElem, 0, <span class="keyword">sizeof</span>(vniOutElem));</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        vniOutElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939aa6836615fb475d0c6a1b7b5396258af7">SFLFLOW_EX_VNI_EGRESS</a>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        vniOutElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#a11f2bcfeff19ac6a608bb346a14879ec">tunnel_vni</a>.<a class="code" href="struct__SFLExtended__vni.html#abdb65cd47cfe7329d1bbac6a1e35f971">vni</a></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        = <a class="code" href="byte-order_8h.html#a638905db5be4c03bec5c17ab205650e5">ntohll</a>(sflow_actions-&gt;tunnel.tun_id);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;vniOutElem);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">/* MPLS output label stack. */</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">if</span> (sflow_actions</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    &amp;&amp; sflow_actions-&gt;mpls_stack_depth &gt; 0</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    &amp;&amp; !sflow_actions-&gt;mpls_err</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    &amp;&amp; <a class="code" href="ofproto-dpif-sflow_8c.html#a0fd38a2b35c592fd5de3f1f1b5f1130e">dpif_sflow_cookie_num_outputs</a>(cookie) == 1) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    memset(&amp;mplsElem, 0, <span class="keyword">sizeof</span>(mplsElem));</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    mplsElem.<a class="code" href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">tag</a> = <a class="code" href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a5cb54f5207a02ed90e9f5104217055a4">SFLFLOW_EX_MPLS</a>;</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#ad8f827bd69d6c6b8b5e6bb60ba26a507">dpif_sflow_encode_mpls_stack</a>(&amp;mplsElem.<a class="code" href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">flowType</a>.<a class="code" href="union__SFLFlow__type.html#a6773db35f1c971397c5186229c832513">mpls</a>.<a class="code" href="struct__SFLExtended__mpls.html#a64cfd5e4b4768c548ffca4851e38dd94">out_stack</a>,</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                     mpls_lse_buf,</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                     sflow_actions);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;mplsElem);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="comment">/* Submit the flow sample to be encoded into the next datagram. */</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;hdrElem);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <a class="code" href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a>(&amp;fs, &amp;switchElem);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <a class="code" href="sflow__api_8h.html#ab91e19d243a99face9a5e18dbad5ea53">sfl_sampler_writeFlowSample</a>(sampler, &amp;fs);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;out:</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;}</div>
<div class="ttc" id="struct__SFLSampled__header_html"><div class="ttname"><a href="struct__SFLSampled__header.html">_SFLSampled_header</a></div><div class="ttdef"><b>Definition:</b> sflow.h:73</div></div>
<div class="ttc" id="struct__SFLSampled__header_html_a11756de4e20e1e17830462f53fabcf36"><div class="ttname"><a href="struct__SFLSampled__header.html#a11756de4e20e1e17830462f53fabcf36">_SFLSampled_header::header_bytes</a></div><div class="ttdeci">u_int8_t * header_bytes</div><div class="ttdef"><b>Definition:</b> sflow.h:78</div></div>
<div class="ttc" id="struct__SFLExtended__switch_html_a1c9e9f4f8657389db1b561e169b429e5"><div class="ttname"><a href="struct__SFLExtended__switch.html#a1c9e9f4f8657389db1b561e169b429e5">_SFLExtended_switch::src_priority</a></div><div class="ttdeci">u_int32_t src_priority</div><div class="ttdef"><b>Definition:</b> sflow.h:127</div></div>
<div class="ttc" id="packets_8h_html_a4fc901ca6d2e91f7ca90bf5b252cc4ae"><div class="ttname"><a href="packets_8h.html#a4fc901ca6d2e91f7ca90bf5b252cc4ae">vlan_tci_to_vid</a></div><div class="ttdeci">static uint16_t vlan_tci_to_vid(ovs_be16 vlan_tci)</div><div class="ttdef"><b>Definition:</b> packets.h:419</div></div>
<div class="ttc" id="struct__SFLSampled__header_html_a82e7c737e83cba0397c95ecdeb0d06c9"><div class="ttname"><a href="struct__SFLSampled__header.html#a82e7c737e83cba0397c95ecdeb0d06c9">_SFLSampled_header::header_protocol</a></div><div class="ttdeci">u_int32_t header_protocol</div><div class="ttdef"><b>Definition:</b> sflow.h:74</div></div>
<div class="ttc" id="sflow_8h_html_ab7507020eb3edef54c8f7ba006ef8fc2a829b83188e3f1a7e9a3bc8c75395a92f"><div class="ttname"><a href="sflow_8h.html#ab7507020eb3edef54c8f7ba006ef8fc2a829b83188e3f1a7e9a3bc8c75395a92f">SFLHEADER_ETHERNET_ISO8023</a></div><div class="ttdef"><b>Definition:</b> sflow.h:56</div></div>
<div class="ttc" id="union__SFLFlow__type_html_a646c440383d31fc720ac397fcac85d25"><div class="ttname"><a href="union__SFLFlow__type.html#a646c440383d31fc720ac397fcac85d25">_SFLFlow_type::header</a></div><div class="ttdeci">SFLSampled_header header</div><div class="ttdef"><b>Definition:</b> sflow.h:307</div></div>
<div class="ttc" id="Types_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="Types_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> Types.h:26</div></div>
<div class="ttc" id="struct__SFLExtended__vni_html_abdb65cd47cfe7329d1bbac6a1e35f971"><div class="ttname"><a href="struct__SFLExtended__vni.html#abdb65cd47cfe7329d1bbac6a1e35f971">_SFLExtended_vni::vni</a></div><div class="ttdeci">uint32_t vni</div><div class="ttdef"><b>Definition:</b> sflow.h:279</div></div>
<div class="ttc" id="odp-util_8h_html_abcc0498b3ff6aab5c8b56dcfdb55707c"><div class="ttname"><a href="odp-util_8h.html#abcc0498b3ff6aab5c8b56dcfdb55707c">ODPP_NONE</a></div><div class="ttdeci">#define ODPP_NONE</div><div class="ttdef"><b>Definition:</b> odp-util.h:77</div></div>
<div class="ttc" id="sflow__api_8h_html_a6d9ebbac494658f466a0c3cc5fb761c9"><div class="ttname"><a href="sflow__api_8h.html#a6d9ebbac494658f466a0c3cc5fb761c9">SFL_DS_INDEX</a></div><div class="ttdeci">#define SFL_DS_INDEX(dsi)</div><div class="ttdef"><b>Definition:</b> sflow_api.h:78</div></div>
<div class="ttc" id="struct__SFLFlow__sample__element_html"><div class="ttname"><a href="struct__SFLFlow__sample__element.html">_SFLFlow_sample_element</a></div><div class="ttdef"><b>Definition:</b> sflow.h:326</div></div>
<div class="ttc" id="struct__SFLExtended__switch_html_a2d4583207594a14046e4e5cfd2a096f3"><div class="ttname"><a href="struct__SFLExtended__switch.html#a2d4583207594a14046e4e5cfd2a096f3">_SFLExtended_switch::dst_priority</a></div><div class="ttdeci">u_int32_t dst_priority</div><div class="ttdef"><b>Definition:</b> sflow.h:129</div></div>
<div class="ttc" id="sflow__api_8h_html_ab3628507567479fb19417602d08c1f0f"><div class="ttname"><a href="sflow__api_8h.html#ab3628507567479fb19417602d08c1f0f">sfl_sampler_get_sFlowFsPacketSamplingRate</a></div><div class="ttdeci">u_int32_t sfl_sampler_get_sFlowFsPacketSamplingRate(SFLSampler *sampler)</div><div class="ttdef"><b>Definition:</b> sflow_sampler.c:70</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_ab8477a71732395802350eeb837aeacc2"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#ab8477a71732395802350eeb837aeacc2">dpif_sflow_find_port</a></div><div class="ttdeci">static struct dpif_sflow_port * dpif_sflow_find_port(const struct dpif_sflow *ds, odp_port_t odp_port) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:170</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a0fd38a2b35c592fd5de3f1f1b5f1130e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a0fd38a2b35c592fd5de3f1f1b5f1130e">dpif_sflow_cookie_num_outputs</a></div><div class="ttdeci">static uint32_t dpif_sflow_cookie_num_outputs(const union user_action_cookie *cookie)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:1202</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939a199522947a4a7a883cefee50758840f6"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a199522947a4a7a883cefee50758840f6">SFLFLOW_EX_SWITCH</a></div><div class="ttdef"><b>Definition:</b> sflow.h:288</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939aa6836615fb475d0c6a1b7b5396258af7"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939aa6836615fb475d0c6a1b7b5396258af7">SFLFLOW_EX_VNI_EGRESS</a></div><div class="ttdef"><b>Definition:</b> sflow.h:302</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_ad8f827bd69d6c6b8b5e6bb60ba26a507"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#ad8f827bd69d6c6b8b5e6bb60ba26a507">dpif_sflow_encode_mpls_stack</a></div><div class="ttdeci">static void dpif_sflow_encode_mpls_stack(SFLLabelStack *stack, uint32_t *mpls_lse_buf, const struct dpif_sflow_actions *sflow_actions)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:1179</div></div>
<div class="ttc" id="struct__SFLFlow__sample__element_html_a847d3d227ae73b1b86aed5fc0a790917"><div class="ttname"><a href="struct__SFLFlow__sample__element.html#a847d3d227ae73b1b86aed5fc0a790917">_SFLFlow_sample_element::tag</a></div><div class="ttdeci">u_int32_t tag</div><div class="ttdef"><b>Definition:</b> sflow.h:328</div></div>
<div class="ttc" id="sflow__api_8h_html_ab91e19d243a99face9a5e18dbad5ea53"><div class="ttname"><a href="sflow__api_8h.html#ab91e19d243a99face9a5e18dbad5ea53">sfl_sampler_writeFlowSample</a></div><div class="ttdeci">void sfl_sampler_writeFlowSample(SFLSampler *sampler, SFL_FLOW_SAMPLE_TYPE *fs)</div><div class="ttdef"><b>Definition:</b> sflow_sampler.c:130</div></div>
<div class="ttc" id="sflow_8h_html_a31cb9216e07079791b00ac813d0be591"><div class="ttname"><a href="sflow_8h.html#a31cb9216e07079791b00ac813d0be591">SFLADD_ELEMENT</a></div><div class="ttdeci">#define SFLADD_ELEMENT(_sm, _el)</div><div class="ttdef"><b>Definition:</b> sflow.h:638</div></div>
<div class="ttc" id="struct__SFLSampler_html_aa9ae134ebb84097a474105df99982ef1"><div class="ttname"><a href="struct__SFLSampler.html#aa9ae134ebb84097a474105df99982ef1">_SFLSampler::samplePool</a></div><div class="ttdeci">u_int32_t samplePool</div><div class="ttdef"><b>Definition:</b> sflow_api.h:130</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939a114ece29d024ae85c7abf3fa03d2139b"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a114ece29d024ae85c7abf3fa03d2139b">SFLFLOW_EX_IPV4_TUNNEL_INGRESS</a></div><div class="ttdef"><b>Definition:</b> sflow.h:301</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939a585c48543c1d3147bed865ace395a269"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a585c48543c1d3147bed865ace395a269">SFLFLOW_EX_IPV4_TUNNEL_EGRESS</a></div><div class="ttdef"><b>Definition:</b> sflow.h:300</div></div>
<div class="ttc" id="struct__SFLSampled__header_html_aa3cd52fcf0ccbfbef851e875f9099c31"><div class="ttname"><a href="struct__SFLSampled__header.html#aa3cd52fcf0ccbfbef851e875f9099c31">_SFLSampled_header::header_length</a></div><div class="ttdeci">u_int32_t header_length</div><div class="ttdef"><b>Definition:</b> sflow.h:77</div></div>
<div class="ttc" id="dp-packet_8h_html_ab3b288b69ee7666ed69535bf7d926810"><div class="ttname"><a href="dp-packet_8h.html#ab3b288b69ee7666ed69535bf7d926810">dp_packet_data</a></div><div class="ttdeci">static void * dp_packet_data(const struct dp_packet *)</div><div class="ttdef"><b>Definition:</b> dp-packet.h:493</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="byte-order_8h_html_a638905db5be4c03bec5c17ab205650e5"><div class="ttname"><a href="byte-order_8h.html#a638905db5be4c03bec5c17ab205650e5">ntohll</a></div><div class="ttdeci">static uint64_t ntohll(ovs_be64 n)</div><div class="ttdef"><b>Definition:</b> byte-order.h:33</div></div>
<div class="ttc" id="structflow__tnl_html_afbdc315347b0b43af856724205bb1782"><div class="ttname"><a href="structflow__tnl.html#afbdc315347b0b43af856724205bb1782">flow_tnl::tun_id</a></div><div class="ttdeci">ovs_be64 tun_id</div><div class="ttdef"><b>Definition:</b> packets.h:40</div></div>
<div class="ttc" id="structdpif__sflow__port_html_af73b6dd1d8b1a56aa045870a3457faee"><div class="ttname"><a href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dpif_sflow_port::dsi</a></div><div class="ttdeci">SFLDataSource_instance dsi</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:70</div></div>
<div class="ttc" id="struct__SFLExtended__mpls_html_a64cfd5e4b4768c548ffca4851e38dd94"><div class="ttname"><a href="struct__SFLExtended__mpls.html#a64cfd5e4b4768c548ffca4851e38dd94">_SFLExtended_mpls::out_stack</a></div><div class="ttdeci">SFLLabelStack out_stack</div><div class="ttdef"><b>Definition:</b> sflow.h:208</div></div>
<div class="ttc" id="union__SFLFlow__type_html_acfe63170408e96b090d1e7661828df8f"><div class="ttname"><a href="union__SFLFlow__type.html#acfe63170408e96b090d1e7661828df8f">_SFLFlow_type::sw</a></div><div class="ttdeci">SFLExtended_switch sw</div><div class="ttdef"><b>Definition:</b> sflow.h:311</div></div>
<div class="ttc" id="structdpif__sflow__port_html"><div class="ttname"><a href="structdpif__sflow__port.html">dpif_sflow_port</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:68</div></div>
<div class="ttc" id="structpacket_html"><div class="ttname"><a href="structpacket.html">packet</a></div><div class="ttdef"><b>Definition:</b> pktbuf.c:50</div></div>
<div class="ttc" id="lib_2flow_8h_html_a97116900896d9a0244d2d61397c280a9"><div class="ttname"><a href="lib_2flow_8h.html#a97116900896d9a0244d2d61397c280a9">FLOW_MAX_MPLS_LABELS</a></div><div class="ttdeci">#define FLOW_MAX_MPLS_LABELS</div><div class="ttdef"><b>Definition:</b> flow.h:73</div></div>
<div class="ttc" id="struct__SFLFlow__sample__element_html_a7c4e756c42e3cd2d6c3e1724e7017aaf"><div class="ttname"><a href="struct__SFLFlow__sample__element.html#a7c4e756c42e3cd2d6c3e1724e7017aaf">_SFLFlow_sample_element::flowType</a></div><div class="ttdeci">SFLFlow_type flowType</div><div class="ttdef"><b>Definition:</b> sflow.h:330</div></div>
<div class="ttc" id="packets_8h_html_abc19933064eb01e775eb17f03dad7f37"><div class="ttname"><a href="packets_8h.html#abc19933064eb01e775eb17f03dad7f37">vlan_tci_to_pcp</a></div><div class="ttdeci">static int vlan_tci_to_pcp(ovs_be16 vlan_tci)</div><div class="ttdef"><b>Definition:</b> packets.h:427</div></div>
<div class="ttc" id="union__SFLFlow__type_html_a6773db35f1c971397c5186229c832513"><div class="ttname"><a href="union__SFLFlow__type.html#a6773db35f1c971397c5186229c832513">_SFLFlow_type::mpls</a></div><div class="ttdeci">SFLExtended_mpls mpls</div><div class="ttdef"><b>Definition:</b> sflow.h:316</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_adbf37be9e621898dc493ed75c49b286b"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#adbf37be9e621898dc493ed75c49b286b">dpif_sflow_tunnel_v4</a></div><div class="ttdeci">static void dpif_sflow_tunnel_v4(uint8_t tunnel_ipproto, const struct flow_tnl *tunnel, SFLSampled_ipv4 *ipv4)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:827</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939aa5db859b1024e62850779f0dbe44a77f"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939aa5db859b1024e62850779f0dbe44a77f">SFLFLOW_EX_VNI_INGRESS</a></div><div class="ttdef"><b>Definition:</b> sflow.h:303</div></div>
<div class="ttc" id="struct__SFLSampled__header_html_ab9fb6ba3c6f8a27e3bf3997fc6e1c65e"><div class="ttname"><a href="struct__SFLSampled__header.html#ab9fb6ba3c6f8a27e3bf3997fc6e1c65e">_SFLSampled_header::stripped</a></div><div class="ttdeci">u_int32_t stripped</div><div class="ttdef"><b>Definition:</b> sflow.h:76</div></div>
<div class="ttc" id="Util_8h_html_a926c1ab4f6ca8b244750377dcdea9ec1"><div class="ttname"><a href="Util_8h.html#a926c1ab4f6ca8b244750377dcdea9ec1">MIN</a></div><div class="ttdeci">#define MIN(_a, _b)</div><div class="ttdef"><b>Definition:</b> Util.h:68</div></div>
<div class="ttc" id="structflow_html_acedaaf48c52ff04a4aed091d3a45a84e"><div class="ttname"><a href="structflow.html#acedaaf48c52ff04a4aed091d3a45a84e">flow::tunnel</a></div><div class="ttdeci">struct flow_tnl tunnel</div><div class="ttdef"><b>Definition:</b> flow.h:96</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939ad56dcae5b8f84bea7e00a6234b986df7"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939ad56dcae5b8f84bea7e00a6234b986df7">SFLFLOW_HEADER</a></div><div class="ttdef"><b>Definition:</b> sflow.h:284</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structflow__tnl_html_a5027610a040c96cb9f39a0e3a4470596"><div class="ttname"><a href="structflow__tnl.html#a5027610a040c96cb9f39a0e3a4470596">flow_tnl::ip_dst</a></div><div class="ttdeci">ovs_be32 ip_dst</div><div class="ttdef"><b>Definition:</b> packets.h:38</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a2db714319204c2585bb218d999e7e2fa"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a2db714319204c2585bb218d999e7e2fa">dpif_sflow_tunnel_proto</a></div><div class="ttdeci">static uint8_t dpif_sflow_tunnel_proto(enum dpif_sflow_tunnel_type tunnel_type)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:603</div></div>
<div class="ttc" id="structflow_html_aa961a887041a3767fff62e92c5ff4ed7"><div class="ttname"><a href="structflow.html#aa961a887041a3767fff62e92c5ff4ed7">flow::vlan_tci</a></div><div class="ttdeci">ovs_be16 vlan_tci</div><div class="ttdef"><b>Definition:</b> flow.h:113</div></div>
<div class="ttc" id="Types_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> Types.h:24</div></div>
<div class="ttc" id="struct__SFLSampler_html_a978067822f51da5580c5e9c2e1fe3742"><div class="ttname"><a href="struct__SFLSampler.html#a978067822f51da5580c5e9c2e1fe3742">_SFLSampler::sFlowFsMaximumHeaderSize</a></div><div class="ttdeci">u_int32_t sFlowFsMaximumHeaderSize</div><div class="ttdef"><b>Definition:</b> sflow_api.h:124</div></div>
<div class="ttc" id="struct__SFLSampler_html"><div class="ttname"><a href="struct__SFLSampler.html">_SFLSampler</a></div><div class="ttdef"><b>Definition:</b> sflow_api.h:115</div></div>
<div class="ttc" id="union__SFLFlow__type_html_a11f2bcfeff19ac6a608bb346a14879ec"><div class="ttname"><a href="union__SFLFlow__type.html#a11f2bcfeff19ac6a608bb346a14879ec">_SFLFlow_type::tunnel_vni</a></div><div class="ttdeci">SFLExtended_vni tunnel_vni</div><div class="ttdef"><b>Definition:</b> sflow.h:323</div></div>
<div class="ttc" id="dp-packet_8h_html_a13b150910c18bb874239510eb9e70d73"><div class="ttname"><a href="dp-packet_8h.html#a13b150910c18bb874239510eb9e70d73">dp_packet_size</a></div><div class="ttdeci">static uint32_t dp_packet_size(const struct dp_packet *)</div><div class="ttdef"><b>Definition:</b> dp-packet.h:456</div></div>
<div class="ttc" id="struct__SFLSampled__header_html_ac3179cb80965f70c7c217792b631f7f1"><div class="ttname"><a href="struct__SFLSampled__header.html#ac3179cb80965f70c7c217792b631f7f1">_SFLSampled_header::frame_length</a></div><div class="ttdeci">u_int32_t frame_length</div><div class="ttdef"><b>Definition:</b> sflow.h:75</div></div>
<div class="ttc" id="struct__SFLExtended__switch_html_a22b1cc6c57e1f5d82802ed76e8e8619a"><div class="ttname"><a href="struct__SFLExtended__switch.html#a22b1cc6c57e1f5d82802ed76e8e8619a">_SFLExtended_switch::src_vlan</a></div><div class="ttdeci">u_int32_t src_vlan</div><div class="ttdef"><b>Definition:</b> sflow.h:126</div></div>
<div class="ttc" id="union__SFLFlow__type_html_a4f024ac2630847a01b8ceb7e762b3183"><div class="ttname"><a href="union__SFLFlow__type.html#a4f024ac2630847a01b8ceb7e762b3183">_SFLFlow_type::ipv4</a></div><div class="ttdeci">SFLSampled_ipv4 ipv4</div><div class="ttdef"><b>Definition:</b> sflow.h:309</div></div>
<div class="ttc" id="structdpif__sflow__port_html_a965b185cbb8bdf1a6312be78f87a6d55"><div class="ttname"><a href="structdpif__sflow__port.html#a965b185cbb8bdf1a6312be78f87a6d55">dpif_sflow_port::tunnel_type</a></div><div class="ttdeci">enum dpif_sflow_tunnel_type tunnel_type</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:73</div></div>
<div class="ttc" id="sflow__api_8h_html_af3aa8f91129fd0a5ccd1ac3b4dc52ff6"><div class="ttname"><a href="sflow__api_8h.html#af3aa8f91129fd0a5ccd1ac3b4dc52ff6">SFL_FLOW_SAMPLE_TYPE</a></div><div class="ttdeci">#define SFL_FLOW_SAMPLE_TYPE</div><div class="ttdef"><b>Definition:</b> sflow_api.h:69</div></div>
<div class="ttc" id="structflow_html"><div class="ttname"><a href="structflow.html">flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:94</div></div>
<div class="ttc" id="Types_8h_html_a90914f5d31b2ee4608c44273262619c0"><div class="ttname"><a href="Types_8h.html#a90914f5d31b2ee4608c44273262619c0">ovs_be16</a></div><div class="ttdeci">unsigned short ovs_be16</div><div class="ttdef"><b>Definition:</b> Types.h:25</div></div>
<div class="ttc" id="sflow_8h_html_a1327dbc6927a0bb0ac2cf8df2a0cf939a5cb54f5207a02ed90e9f5104217055a4"><div class="ttname"><a href="sflow_8h.html#a1327dbc6927a0bb0ac2cf8df2a0cf939a5cb54f5207a02ed90e9f5104217055a4">SFLFLOW_EX_MPLS</a></div><div class="ttdef"><b>Definition:</b> sflow.h:293</div></div>
<div class="ttc" id="struct__SFLExtended__switch_html_a23c567e1a75153a3ae3319aa98246793"><div class="ttname"><a href="struct__SFLExtended__switch.html#a23c567e1a75153a3ae3319aa98246793">_SFLExtended_switch::dst_vlan</a></div><div class="ttdeci">u_int32_t dst_vlan</div><div class="ttdef"><b>Definition:</b> sflow.h:128</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8bfc84bcbbf3a283e50f40be5be95ce5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a>* dpif_sflow_ref </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow.html">dpif_sflow</a> *<a class="code" href="structds.html">ds</a> = <a class="code" href="lib_2util_8h.html#a4dcccb1a09e1d9f2734ab374cdad7f87">CONST_CAST</a>(<span class="keyword">struct</span> <a class="code" href="structdpif__sflow.html">dpif_sflow</a> *, ds_);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (ds) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="ovs-atomic_8h.html#a43874508a1010853f0f62a1ab06c04c9">ovs_refcount_ref</a>(&amp;ds-&gt;<a class="code" href="structdpif__sflow.html#aa6d87cf50ec00425db304ff7d05b722b">ref_cnt</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> ds;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div>
<div class="ttc" id="ovs-atomic_8h_html_a43874508a1010853f0f62a1ab06c04c9"><div class="ttname"><a href="ovs-atomic_8h.html#a43874508a1010853f0f62a1ab06c04c9">ovs_refcount_ref</a></div><div class="ttdeci">static void ovs_refcount_ref(struct ovs_refcount *refcount)</div><div class="ttdef"><b>Definition:</b> ovs-atomic.h:491</div></div>
<div class="ttc" id="structdpif__sflow_html_aa6d87cf50ec00425db304ff7d05b722b"><div class="ttname"><a href="structdpif__sflow.html#aa6d87cf50ec00425db304ff7d05b722b">dpif_sflow::ref_cnt</a></div><div class="ttdeci">struct ovs_refcount ref_cnt</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:84</div></div>
<div class="ttc" id="structdpif__sflow_html"><div class="ttname"><a href="structdpif__sflow.html">dpif_sflow</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:76</div></div>
<div class="ttc" id="lib_2util_8h_html_a4dcccb1a09e1d9f2734ab374cdad7f87"><div class="ttname"><a href="lib_2util_8h.html#a4dcccb1a09e1d9f2734ab374cdad7f87">CONST_CAST</a></div><div class="ttdeci">#define CONST_CAST(TYPE, POINTER)</div><div class="ttdef"><b>Definition:</b> util.h:88</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a794856509d13d6551059342bf88eda98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;{</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structds.html">ds</a>-&gt;collectors != NULL) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <a class="code" href="namespaceovs_1_1timeval.html#ab1c76a407e9041bb7f1b20037f5028ca">time_t</a> <a class="code" href="test-reconnect_8c.html#a5e982e2373d34bfe07d9942993762ad8">now</a> = <a class="code" href="timeval_8c.html#a39b06f8363a4deed456d4ddb429fd4a6">time_now</a>();</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <a class="code" href="route-table-bsd_8c.html#a9c8337957eefd5d30beffb85e560af83">route_table_run</a>();</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">if</span> (now &gt;= <a class="code" href="structds.html">ds</a>-&gt;next_tick) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            <a class="code" href="sflow__agent_8c.html#aeba991908716288891e7c4c7b2db1e10">sfl_agent_tick</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent, <a class="code" href="timeval_8c.html#a6e5da92cea7f2b7015d0639d3f4cbdff">time_wall</a>());</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <a class="code" href="structds.html">ds</a>-&gt;next_tick = now + 1;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div>
<div class="ttc" id="route-table-bsd_8c_html_a9c8337957eefd5d30beffb85e560af83"><div class="ttname"><a href="route-table-bsd_8c.html#a9c8337957eefd5d30beffb85e560af83">route_table_run</a></div><div class="ttdeci">void route_table_run(void)</div><div class="ttdef"><b>Definition:</b> route-table-bsd.c:186</div></div>
<div class="ttc" id="namespaceovs_1_1timeval_html_ab1c76a407e9041bb7f1b20037f5028ca"><div class="ttname"><a href="namespaceovs_1_1timeval.html#ab1c76a407e9041bb7f1b20037f5028ca">ovs.timeval.time_t</a></div><div class="ttdeci">time_t</div><div class="ttdef"><b>Definition:</b> timeval.py:26</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="timeval_8c_html_a39b06f8363a4deed456d4ddb429fd4a6"><div class="ttname"><a href="timeval_8c.html#a39b06f8363a4deed456d4ddb429fd4a6">time_now</a></div><div class="ttdeci">time_t time_now(void)</div><div class="ttdef"><b>Definition:</b> timeval.c:198</div></div>
<div class="ttc" id="test-reconnect_8c_html_a5e982e2373d34bfe07d9942993762ad8"><div class="ttname"><a href="test-reconnect_8c.html#a5e982e2373d34bfe07d9942993762ad8">now</a></div><div class="ttdeci">static int now</div><div class="ttdef"><b>Definition:</b> test-reconnect.c:32</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="sflow__agent_8c_html_aeba991908716288891e7c4c7b2db1e10"><div class="ttname"><a href="sflow__agent_8c.html#aeba991908716288891e7c4c7b2db1e10">sfl_agent_tick</a></div><div class="ttdeci">void sfl_agent_tick(SFLAgent *agent, time_t now)</div><div class="ttdef"><b>Definition:</b> sflow_agent.c:125</div></div>
<div class="ttc" id="timeval_8c_html_a6e5da92cea7f2b7015d0639d3f4cbdff"><div class="ttname"><a href="timeval_8c.html#a6e5da92cea7f2b7015d0639d3f4cbdff">time_wall</a></div><div class="ttdeci">time_t time_wall(void)</div><div class="ttdef"><b>Definition:</b> timeval.c:205</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4e028eff6e459275afe9c232d35a73b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_set_options </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structofproto__sflow__options.html">ofproto_sflow_options</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;{</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *dsp;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordtype">bool</span> options_changed;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="struct__SFLReceiver.html">SFLReceiver</a> *receiver;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="struct__SFLAddress.html">SFLAddress</a> agentIP;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="namespaceovs_1_1timeval.html#ab1c76a407e9041bb7f1b20037f5028ca">time_t</a> <a class="code" href="test-reconnect_8c.html#a5e982e2373d34bfe07d9942993762ad8">now</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="struct__SFLDataSource__instance.html">SFLDataSource_instance</a> <a class="code" href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dsi</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dsIndex;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="struct__SFLSampler.html">SFLSampler</a> *sampler;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="struct__SFLPoller.html">SFLPoller</a> *poller;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="sset_8c.html#aa1a0a278b7755160f8f113046a54ba10">sset_is_empty</a>(&amp;<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;targets) || !<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;sampling_rate) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="comment">/* No point in doing any work if there are no targets or nothing to</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">         * sample. */</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#aaf35a0cd58c1024b2f762a646780c9a0">dpif_sflow_clear__</a>(<a class="code" href="structds.html">ds</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    options_changed = (!<a class="code" href="structds.html">ds</a>-&gt;options</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                       || !<a class="code" href="ofproto-dpif-sflow_8c.html#a0fd0963dd62298e160b01aca1cb72c2e">ofproto_sflow_options_equal</a>(<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>, <a class="code" href="structds.html">ds</a>-&gt;options));</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">/* Configure collectors if options have changed or if we&#39;re shortchanged in</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">     * collectors (which indicates that opening one or more of the configured</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">     * collectors failed, so that we should retry). */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (options_changed</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        || <a class="code" href="collectors_8c.html#a1f84e1209c0e1dcd5d1ebf31c3772e81">collectors_count</a>(<a class="code" href="structds.html">ds</a>-&gt;collectors) &lt; <a class="code" href="sset_8c.html#a0dd4cd1a1a8d521649407a96b5961f54">sset_count</a>(&amp;<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;targets)) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <a class="code" href="collectors_8c.html#a1d229e0fe3a2420f2284de0e993b79f4">collectors_destroy</a>(<a class="code" href="structds.html">ds</a>-&gt;collectors);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="collectors_8c.html#afb26048f3dd6327468f9e6c462c2c502">collectors_create</a>(&amp;<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;targets, <a class="code" href="sflow_8h.html#a853ecda2ebaa8b176eb0d171daa32af4">SFL_DEFAULT_COLLECTOR_PORT</a>,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                          &amp;<a class="code" href="structds.html">ds</a>-&gt;collectors);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structds.html">ds</a>-&gt;collectors == NULL) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <a class="code" href="vlog_8h.html#a30af259a5a16dafc88f90508a5c98b43">VLOG_WARN_RL</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a5c9348c27442ef5e4a96246373ad6c6b">rl</a>, <span class="stringliteral">&quot;no collectors could be initialized, &quot;</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                         <span class="stringliteral">&quot;sFlow disabled&quot;</span>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <a class="code" href="ofproto-dpif-sflow_8c.html#aaf35a0cd58c1024b2f762a646780c9a0">dpif_sflow_clear__</a>(<a class="code" href="structds.html">ds</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;            <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        }</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">/* Choose agent IP address and agent device (if not yet setup) */</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ofproto-dpif-sflow_8c.html#a9f5c1b0b97f30df649edf955b64e0950">sflow_choose_agent_address</a>(<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;agent_device,</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                    &amp;<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;targets,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                                    <a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;control_ip, &amp;agentIP)) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#aaf35a0cd58c1024b2f762a646780c9a0">dpif_sflow_clear__</a>(<a class="code" href="structds.html">ds</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">/* Avoid reconfiguring if options didn&#39;t change. */</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (!options_changed) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">goto</span> out;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="ofproto-dpif-sflow_8c.html#a8b2d8456c1c1f3c138a47c1e5977dfc5">ofproto_sflow_options_destroy</a>(<a class="code" href="structds.html">ds</a>-&gt;options);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="structds.html">ds</a>-&gt;options = <a class="code" href="ofproto-dpif-sflow_8c.html#ab2d095994e01ed15084b328be56e5a8e">ofproto_sflow_options_clone</a>(<a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="comment">/* Create agent. */</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="vlog_8h.html#a7dd45388a8eae0a7ad23461ea1eb825c">VLOG_INFO</a>(<span class="stringliteral">&quot;creating sFlow agent %d&quot;</span>, <a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;sub_id);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structds.html">ds</a>-&gt;sflow_agent) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#a1e88af7fa7ba1b527e24d17a8b48a177">sflow_global_counters_subid_clear</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent-&gt;subId);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="sflow__agent_8c.html#a9e534a57c3ceaacce716a095583e8eb3">sfl_agent_release</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="structds.html">ds</a>-&gt;sflow_agent = <a class="code" href="util_8c.html#a83c47bc0397d90cc9f2eb9e35a5cda4e">xcalloc</a>(1, <span class="keyword">sizeof</span> *<a class="code" href="structds.html">ds</a>-&gt;sflow_agent);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    now = <a class="code" href="timeval_8c.html#a6e5da92cea7f2b7015d0639d3f4cbdff">time_wall</a>();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="sflow__agent_8c.html#a33f4d001da815a161a46371de93f4f3c">sfl_agent_init</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                   &amp;agentIP,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                   <a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;sub_id,</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                   now,         <span class="comment">/* Boot time. */</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                   now,         <span class="comment">/* Current time. */</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                   <a class="code" href="structds.html">ds</a>,          <span class="comment">/* Pointer supplied to callbacks. */</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                   <a class="code" href="ofproto-dpif-sflow_8c.html#a11b8fcde68d0302ef056ffc4ca09fac7">sflow_agent_alloc_cb</a>,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                   <a class="code" href="ofproto-dpif-sflow_8c.html#a1901065589333d4b9137b9e16a71bbce">sflow_agent_free_cb</a>,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                   <a class="code" href="ofproto-dpif-sflow_8c.html#aabd06d589f8e831744fff35952c552f3">sflow_agent_error_cb</a>,</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                   <a class="code" href="ofproto-dpif-sflow_8c.html#a7fd8ef1b87b1c247419f8d50c72a57d3">sflow_agent_send_packet_cb</a>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    receiver = <a class="code" href="sflow__agent_8c.html#a90ae9269fc2c0b50cb4a5bbfb2aa286b">sfl_agent_addReceiver</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="sflow__api_8h.html#a1a00844752073da554a63eda33269171">sfl_receiver_set_sFlowRcvrOwner</a>(receiver, <span class="stringliteral">&quot;Open vSwitch sFlow&quot;</span>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="sflow__api_8h.html#a472facba3ac839d9e7dae95f6ddfc4ec">sfl_receiver_set_sFlowRcvrTimeout</a>(receiver, 0xffffffff);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">/* Set the sampling_rate down in the datapath. */</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="structds.html">ds</a>-&gt;probability = <a class="code" href="lib_2util_8h.html#aff9931d7524c88e07743af6535b20761">MAX</a>(1, UINT32_MAX / <a class="code" href="structds.html">ds</a>-&gt;options-&gt;sampling_rate);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="comment">/* Add a single sampler for the bridge. This appears as a PHYSICAL_ENTITY</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">       because it is associated with the hypervisor, and interacts with the server</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">       hardware directly.  The sub_id is used to distinguish this sampler from</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">       others on other bridges within the same agent. */</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    dsIndex = 1000 + <a class="code" href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">options</a>-&gt;sub_id;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="sflow__api_8h.html#a720b3c73b4689036c5a72921e7701981">SFL_DS_SET</a>(dsi, <a class="code" href="sflow_8h.html#a4a874d15da5d662f1e59fa8c0eaf9cfba0356297539589ae4bb8451ac4298fad9">SFL_DSCLASS_PHYSICAL_ENTITY</a>, dsIndex, 0);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    sampler = <a class="code" href="sflow__agent_8c.html#a5d9881e47fb0194bad1cbf9023e6673d">sfl_agent_addSampler</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent, &amp;dsi);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="sflow__api_8h.html#a85eb170c801892f9926ab37f8f2143d4">sfl_sampler_set_sFlowFsPacketSamplingRate</a>(sampler, <a class="code" href="structds.html">ds</a>-&gt;options-&gt;sampling_rate);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="sflow__api_8h.html#a841ac0114413e604a1f4b66691ab3ed1">sfl_sampler_set_sFlowFsMaximumHeaderSize</a>(sampler, <a class="code" href="structds.html">ds</a>-&gt;options-&gt;header_len);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="sflow__api_8h.html#af0c4992d8b43d5815268113d64639c71">sfl_sampler_set_sFlowFsReceiver</a>(sampler, <a class="code" href="ofproto-dpif-sflow_8c.html#ae46296467a858cdc748f356370fcbcfb">RECEIVER_INDEX</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">/* Add a counter poller for the bridge so we can use it to send</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">       global counters such as datapath cache hit/miss stats. */</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    poller = <a class="code" href="sflow__agent_8c.html#ada0e59dd88f2c09dafb3d65babf5a2a5">sfl_agent_addPoller</a>(<a class="code" href="structds.html">ds</a>-&gt;sflow_agent, &amp;dsi, <a class="code" href="structds.html">ds</a>,</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                                 <a class="code" href="ofproto-dpif-sflow_8c.html#a4b59ba3bc6e3ce1e58389a16a236af3b">sflow_agent_get_global_counters</a>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="sflow__api_8h.html#aaf78d59ca7daaf554836c46cbf51cfde">sfl_poller_set_sFlowCpInterval</a>(poller, <a class="code" href="structds.html">ds</a>-&gt;options-&gt;polling_interval);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="sflow__api_8h.html#a4e4d9075eb4e88eb1554af7198beb627">sfl_poller_set_sFlowCpReceiver</a>(poller, <a class="code" href="ofproto-dpif-sflow_8c.html#ae46296467a858cdc748f356370fcbcfb">RECEIVER_INDEX</a>);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">/* Add pollers for the currently known ifindex-ports */</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="hmap_8h.html#ac4112ca3c510cd31cae07da68ad36d0c">HMAP_FOR_EACH</a> (dsp, <a class="code" href="structhmap__node.html">hmap_node</a>, &amp;<a class="code" href="structds.html">ds</a>-&gt;ports) {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="sflow__api_8h.html#a6d9ebbac494658f466a0c3cc5fb761c9">SFL_DS_INDEX</a>(dsp-&gt;<a class="code" href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dsi</a>)) {</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <a class="code" href="ofproto-dpif-sflow_8c.html#afd052afa409b8b0ce69168a2e9bc203e">dpif_sflow_add_poller</a>(<a class="code" href="structds.html">ds</a>, dsp);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;out:</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div>
<div class="ttc" id="sset_8c_html_a0dd4cd1a1a8d521649407a96b5961f54"><div class="ttname"><a href="sset_8c.html#a0dd4cd1a1a8d521649407a96b5961f54">sset_count</a></div><div class="ttdeci">size_t sset_count(const struct sset *set)</div><div class="ttdef"><b>Definition:</b> sset.c:112</div></div>
<div class="ttc" id="namespaceovs-dev_html_a302e485db9f79f207ab370b750214450"><div class="ttname"><a href="namespaceovs-dev.html#a302e485db9f79f207ab370b750214450">ovs-dev.options</a></div><div class="ttdeci">options</div><div class="ttdef"><b>Definition:</b> ovs-dev.py:30</div></div>
<div class="ttc" id="collectors_8c_html_a1d229e0fe3a2420f2284de0e993b79f4"><div class="ttname"><a href="collectors_8c.html#a1d229e0fe3a2420f2284de0e993b79f4">collectors_destroy</a></div><div class="ttdeci">void collectors_destroy(struct collectors *c)</div><div class="ttdef"><b>Definition:</b> collectors.c:92</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_aabd06d589f8e831744fff35952c552f3"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#aabd06d589f8e831744fff35952c552f3">sflow_agent_error_cb</a></div><div class="ttdeci">static void sflow_agent_error_cb(void *magic OVS_UNUSED, SFLAgent *agent OVS_UNUSED, char *msg)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:153</div></div>
<div class="ttc" id="namespaceovs_1_1timeval_html_ab1c76a407e9041bb7f1b20037f5028ca"><div class="ttname"><a href="namespaceovs_1_1timeval.html#ab1c76a407e9041bb7f1b20037f5028ca">ovs.timeval.time_t</a></div><div class="ttdeci">time_t</div><div class="ttdef"><b>Definition:</b> timeval.py:26</div></div>
<div class="ttc" id="sflow__api_8h_html_a6d9ebbac494658f466a0c3cc5fb761c9"><div class="ttname"><a href="sflow__api_8h.html#a6d9ebbac494658f466a0c3cc5fb761c9">SFL_DS_INDEX</a></div><div class="ttdeci">#define SFL_DS_INDEX(dsi)</div><div class="ttdef"><b>Definition:</b> sflow_api.h:78</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a9f5c1b0b97f30df649edf955b64e0950"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a9f5c1b0b97f30df649edf955b64e0950">sflow_choose_agent_address</a></div><div class="ttdeci">static bool sflow_choose_agent_address(const char *agent_device, const struct sset *targets, const char *control_ip, SFLAddress *agent_addr)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:430</div></div>
<div class="ttc" id="util_8c_html_a83c47bc0397d90cc9f2eb9e35a5cda4e"><div class="ttname"><a href="util_8c.html#a83c47bc0397d90cc9f2eb9e35a5cda4e">xcalloc</a></div><div class="ttdeci">void * xcalloc(size_t count, size_t size)</div><div class="ttdef"><b>Definition:</b> util.c:93</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a11b8fcde68d0302ef056ffc4ca09fac7"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a11b8fcde68d0302ef056ffc4ca09fac7">sflow_agent_alloc_cb</a></div><div class="ttdeci">static void * sflow_agent_alloc_cb(void *magic OVS_UNUSED, SFLAgent *agent OVS_UNUSED, size_t bytes)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:136</div></div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="hmap_8h_html_ac4112ca3c510cd31cae07da68ad36d0c"><div class="ttname"><a href="hmap_8h.html#ac4112ca3c510cd31cae07da68ad36d0c">HMAP_FOR_EACH</a></div><div class="ttdeci">#define HMAP_FOR_EACH(NODE, MEMBER, HMAP)</div><div class="ttdef"><b>Definition:</b> hmap.h:153</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a7fd8ef1b87b1c247419f8d50c72a57d3"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a7fd8ef1b87b1c247419f8d50c72a57d3">sflow_agent_send_packet_cb</a></div><div class="ttdeci">static void sflow_agent_send_packet_cb(void *ds_, SFLAgent *agent OVS_UNUSED, SFLReceiver *receiver OVS_UNUSED, u_char *pkt, uint32_t pktLen)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:161</div></div>
<div class="ttc" id="sflow__api_8h_html_a841ac0114413e604a1f4b66691ab3ed1"><div class="ttname"><a href="sflow__api_8h.html#a841ac0114413e604a1f4b66691ab3ed1">sfl_sampler_set_sFlowFsMaximumHeaderSize</a></div><div class="ttdeci">void sfl_sampler_set_sFlowFsMaximumHeaderSize(SFLSampler *sampler, u_int32_t sFlowFsMaximumHeaderSize)</div><div class="ttdef"><b>Definition:</b> sflow_sampler.c:79</div></div>
<div class="ttc" id="sflow__api_8h_html_af0c4992d8b43d5815268113d64639c71"><div class="ttname"><a href="sflow__api_8h.html#af0c4992d8b43d5815268113d64639c71">sfl_sampler_set_sFlowFsReceiver</a></div><div class="ttdeci">void sfl_sampler_set_sFlowFsReceiver(SFLSampler *sampler, u_int32_t sFlowFsReceiver)</div><div class="ttdef"><b>Definition:</b> sflow_sampler.c:62</div></div>
<div class="ttc" id="collectors_8c_html_afb26048f3dd6327468f9e6c462c2c502"><div class="ttname"><a href="collectors_8c.html#afb26048f3dd6327468f9e6c462c2c502">collectors_create</a></div><div class="ttdeci">int collectors_create(const struct sset *targets, uint16_t default_port, struct collectors **collectorsp)</div><div class="ttdef"><b>Definition:</b> collectors.c:52</div></div>
<div class="ttc" id="sflow__api_8h_html_a472facba3ac839d9e7dae95f6ddfc4ec"><div class="ttname"><a href="sflow__api_8h.html#a472facba3ac839d9e7dae95f6ddfc4ec">sfl_receiver_set_sFlowRcvrTimeout</a></div><div class="ttdeci">void sfl_receiver_set_sFlowRcvrTimeout(SFLReceiver *receiver, time_t sFlowRcvrTimeout)</div><div class="ttdef"><b>Definition:</b> sflow_receiver.c:108</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a1e88af7fa7ba1b527e24d17a8b48a177"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a1e88af7fa7ba1b527e24d17a8b48a177">sflow_global_counters_subid_clear</a></div><div class="ttdeci">static void sflow_global_counters_subid_clear(uint32_t subid) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:245</div></div>
<div class="ttc" id="sflow_8h_html_a4a874d15da5d662f1e59fa8c0eaf9cfba0356297539589ae4bb8451ac4298fad9"><div class="ttname"><a href="sflow_8h.html#a4a874d15da5d662f1e59fa8c0eaf9cfba0356297539589ae4bb8451ac4298fad9">SFL_DSCLASS_PHYSICAL_ENTITY</a></div><div class="ttdef"><b>Definition:</b> sflow.h:20</div></div>
<div class="ttc" id="sflow__agent_8c_html_a33f4d001da815a161a46371de93f4f3c"><div class="ttname"><a href="sflow__agent_8c.html#a33f4d001da815a161a46371de93f4f3c">sfl_agent_init</a></div><div class="ttdeci">void sfl_agent_init(SFLAgent *agent, SFLAddress *myIP, u_int32_t subId, time_t bootTime, time_t now, void *magic, allocFn_t allocFn, freeFn_t freeFn, errorFn_t errorFn, sendFn_t sendFn)</div><div class="ttdef"><b>Definition:</b> sflow_agent.c:21</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="structdpif__sflow__port_html_af73b6dd1d8b1a56aa045870a3457faee"><div class="ttname"><a href="structdpif__sflow__port.html#af73b6dd1d8b1a56aa045870a3457faee">dpif_sflow_port::dsi</a></div><div class="ttdeci">SFLDataSource_instance dsi</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:70</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_afd052afa409b8b0ce69168a2e9bc203e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#afd052afa409b8b0ce69168a2e9bc203e">dpif_sflow_add_poller</a></div><div class="ttdeci">static void dpif_sflow_add_poller(struct dpif_sflow *ds, struct dpif_sflow_port *dsp) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:573</div></div>
<div class="ttc" id="structdpif__sflow__port_html"><div class="ttname"><a href="structdpif__sflow__port.html">dpif_sflow_port</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:68</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a5c9348c27442ef5e4a96246373ad6c6b"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a5c9348c27442ef5e4a96246373ad6c6b">rl</a></div><div class="ttdeci">static struct vlog_rate_limit rl</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:92</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_aaf35a0cd58c1024b2f762a646780c9a0"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#aaf35a0cd58c1024b2f762a646780c9a0">dpif_sflow_clear__</a></div><div class="ttdeci">static void dpif_sflow_clear__(struct dpif_sflow *ds) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:478</div></div>
<div class="ttc" id="test-reconnect_8c_html_a5e982e2373d34bfe07d9942993762ad8"><div class="ttname"><a href="test-reconnect_8c.html#a5e982e2373d34bfe07d9942993762ad8">now</a></div><div class="ttdeci">static int now</div><div class="ttdef"><b>Definition:</b> test-reconnect.c:32</div></div>
<div class="ttc" id="sflow_8h_html_a853ecda2ebaa8b176eb0d171daa32af4"><div class="ttname"><a href="sflow_8h.html#a853ecda2ebaa8b176eb0d171daa32af4">SFL_DEFAULT_COLLECTOR_PORT</a></div><div class="ttdeci">#define SFL_DEFAULT_COLLECTOR_PORT</div><div class="ttdef"><b>Definition:</b> sflow.h:50</div></div>
<div class="ttc" id="vlog_8h_html_a30af259a5a16dafc88f90508a5c98b43"><div class="ttname"><a href="vlog_8h.html#a30af259a5a16dafc88f90508a5c98b43">VLOG_WARN_RL</a></div><div class="ttdeci">#define VLOG_WARN_RL(RL,...)</div><div class="ttdef"><b>Definition:</b> vlog.h:213</div></div>
<div class="ttc" id="sflow__api_8h_html_aaf78d59ca7daaf554836c46cbf51cfde"><div class="ttname"><a href="sflow__api_8h.html#aaf78d59ca7daaf554836c46cbf51cfde">sfl_poller_set_sFlowCpInterval</a></div><div class="ttdeci">void sfl_poller_set_sFlowCpInterval(SFLPoller *poller, u_int32_t sFlowCpInterval)</div><div class="ttdef"><b>Definition:</b> sflow_poller.c:73</div></div>
<div class="ttc" id="struct__SFLAddress_html"><div class="ttname"><a href="struct__SFLAddress.html">_SFLAddress</a></div><div class="ttdef"><b>Definition:</b> sflow.h:42</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a8b2d8456c1c1f3c138a47c1e5977dfc5"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a8b2d8456c1c1f3c138a47c1e5977dfc5">ofproto_sflow_options_destroy</a></div><div class="ttdeci">static void ofproto_sflow_options_destroy(struct ofproto_sflow_options *options)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:124</div></div>
<div class="ttc" id="sflow__agent_8c_html_a5d9881e47fb0194bad1cbf9023e6673d"><div class="ttname"><a href="sflow__agent_8c.html#a5d9881e47fb0194bad1cbf9023e6673d">sfl_agent_addSampler</a></div><div class="ttdeci">SFLSampler * sfl_agent_addSampler(SFLAgent *agent, SFLDataSource_instance *pdsi)</div><div class="ttdef"><b>Definition:</b> sflow_agent.c:184</div></div>
<div class="ttc" id="sflow__api_8h_html_a4e4d9075eb4e88eb1554af7198beb627"><div class="ttname"><a href="sflow__api_8h.html#a4e4d9075eb4e88eb1554af7198beb627">sfl_poller_set_sFlowCpReceiver</a></div><div class="ttdeci">void sfl_poller_set_sFlowCpReceiver(SFLPoller *poller, u_int32_t sFlowCpReceiver)</div><div class="ttdef"><b>Definition:</b> sflow_poller.c:60</div></div>
<div class="ttc" id="sflow__api_8h_html_a1a00844752073da554a63eda33269171"><div class="ttname"><a href="sflow__api_8h.html#a1a00844752073da554a63eda33269171">sfl_receiver_set_sFlowRcvrOwner</a></div><div class="ttdeci">void sfl_receiver_set_sFlowRcvrOwner(SFLReceiver *receiver, char *sFlowRcvrOwner)</div><div class="ttdef"><b>Definition:</b> sflow_receiver.c:98</div></div>
<div class="ttc" id="Types_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="Types_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> Types.h:24</div></div>
<div class="ttc" id="collectors_8c_html_a1f84e1209c0e1dcd5d1ebf31c3772e81"><div class="ttname"><a href="collectors_8c.html#a1f84e1209c0e1dcd5d1ebf31c3772e81">collectors_count</a></div><div class="ttdeci">int collectors_count(const struct collectors *c)</div><div class="ttdef"><b>Definition:</b> collectors.c:125</div></div>
<div class="ttc" id="struct__SFLReceiver_html"><div class="ttname"><a href="struct__SFLReceiver.html">_SFLReceiver</a></div><div class="ttdef"><b>Definition:</b> sflow_api.h:96</div></div>
<div class="ttc" id="struct__SFLDataSource__instance_html"><div class="ttname"><a href="struct__SFLDataSource__instance.html">_SFLDataSource_instance</a></div><div class="ttdef"><b>Definition:</b> sflow_api.h:59</div></div>
<div class="ttc" id="struct__SFLSampler_html"><div class="ttname"><a href="struct__SFLSampler.html">_SFLSampler</a></div><div class="ttdef"><b>Definition:</b> sflow_api.h:115</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_ae46296467a858cdc748f356370fcbcfb"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#ae46296467a858cdc748f356370fcbcfb">RECEIVER_INDEX</a></div><div class="ttdeci">#define RECEIVER_INDEX</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:90</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a0fd0963dd62298e160b01aca1cb72c2e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a0fd0963dd62298e160b01aca1cb72c2e">ofproto_sflow_options_equal</a></div><div class="ttdeci">static bool ofproto_sflow_options_equal(const struct ofproto_sflow_options *a, const struct ofproto_sflow_options *b)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:101</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a1901065589333d4b9137b9e16a71bbce"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a1901065589333d4b9137b9e16a71bbce">sflow_agent_free_cb</a></div><div class="ttdeci">static int sflow_agent_free_cb(void *magic OVS_UNUSED, SFLAgent *agent OVS_UNUSED, void *obj)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:144</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a4b59ba3bc6e3ce1e58389a16a236af3b"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a4b59ba3bc6e3ce1e58389a16a236af3b">sflow_agent_get_global_counters</a></div><div class="ttdeci">static void sflow_agent_get_global_counters(void *ds_, SFLPoller *poller, SFL_COUNTERS_SAMPLE_TYPE *cs) OVS_REQUIRES(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:257</div></div>
<div class="ttc" id="sflow__agent_8c_html_a90ae9269fc2c0b50cb4a5bbfb2aa286b"><div class="ttname"><a href="sflow__agent_8c.html#a90ae9269fc2c0b50cb4a5bbfb2aa286b">sfl_agent_addReceiver</a></div><div class="ttdeci">SFLReceiver * sfl_agent_addReceiver(SFLAgent *agent)</div><div class="ttdef"><b>Definition:</b> sflow_agent.c:144</div></div>
<div class="ttc" id="vlog_8h_html_a7dd45388a8eae0a7ad23461ea1eb825c"><div class="ttname"><a href="vlog_8h.html#a7dd45388a8eae0a7ad23461ea1eb825c">VLOG_INFO</a></div><div class="ttdeci">#define VLOG_INFO(...)</div><div class="ttdef"><b>Definition:</b> vlog.h:198</div></div>
<div class="ttc" id="sflow__agent_8c_html_ada0e59dd88f2c09dafb3d65babf5a2a5"><div class="ttname"><a href="sflow__agent_8c.html#ada0e59dd88f2c09dafb3d65babf5a2a5">sfl_agent_addPoller</a></div><div class="ttdeci">SFLPoller * sfl_agent_addPoller(SFLAgent *agent, SFLDataSource_instance *pdsi, void *magic, getCountersFn_t getCountersFn)</div><div class="ttdef"><b>Definition:</b> sflow_agent.c:221</div></div>
<div class="ttc" id="lib_2util_8h_html_aff9931d7524c88e07743af6535b20761"><div class="ttname"><a href="lib_2util_8h.html#aff9931d7524c88e07743af6535b20761">MAX</a></div><div class="ttdeci">#define MAX(X, Y)</div><div class="ttdef"><b>Definition:</b> util.h:173</div></div>
<div class="ttc" id="sflow__api_8h_html_a720b3c73b4689036c5a72921e7701981"><div class="ttname"><a href="sflow__api_8h.html#a720b3c73b4689036c5a72921e7701981">SFL_DS_SET</a></div><div class="ttdeci">#define SFL_DS_SET(dsi, clss, indx, inst)</div><div class="ttdef"><b>Definition:</b> sflow_api.h:79</div></div>
<div class="ttc" id="timeval_8c_html_a6e5da92cea7f2b7015d0639d3f4cbdff"><div class="ttname"><a href="timeval_8c.html#a6e5da92cea7f2b7015d0639d3f4cbdff">time_wall</a></div><div class="ttdeci">time_t time_wall(void)</div><div class="ttdef"><b>Definition:</b> timeval.c:205</div></div>
<div class="ttc" id="struct__SFLPoller_html"><div class="ttname"><a href="struct__SFLPoller.html">_SFLPoller</a></div><div class="ttdef"><b>Definition:</b> sflow_api.h:145</div></div>
<div class="ttc" id="sset_8c_html_aa1a0a278b7755160f8f113046a54ba10"><div class="ttname"><a href="sset_8c.html#aa1a0a278b7755160f8f113046a54ba10">sset_is_empty</a></div><div class="ttdeci">bool sset_is_empty(const struct sset *set)</div><div class="ttdef"><b>Definition:</b> sset.c:105</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_ab2d095994e01ed15084b328be56e5a8e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#ab2d095994e01ed15084b328be56e5a8e">ofproto_sflow_options_clone</a></div><div class="ttdeci">static struct ofproto_sflow_options * ofproto_sflow_options_clone(const struct ofproto_sflow_options *old)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:114</div></div>
<div class="ttc" id="sflow__agent_8c_html_a9e534a57c3ceaacce716a095583e8eb3"><div class="ttname"><a href="sflow__agent_8c.html#a9e534a57c3ceaacce716a095583e8eb3">sfl_agent_release</a></div><div class="ttdeci">void sfl_agent_release(SFLAgent *agent)</div><div class="ttdef"><b>Definition:</b> sflow_agent.c:61</div></div>
<div class="ttc" id="structhmap__node_html"><div class="ttname"><a href="structhmap__node.html">hmap_node</a></div><div class="ttdef"><b>Definition:</b> hmap.h:29</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
<div class="ttc" id="sflow__api_8h_html_a85eb170c801892f9926ab37f8f2143d4"><div class="ttname"><a href="sflow__api_8h.html#a85eb170c801892f9926ab37f8f2143d4">sfl_sampler_set_sFlowFsPacketSamplingRate</a></div><div class="ttdeci">void sfl_sampler_set_sFlowFsPacketSamplingRate(SFLSampler *sampler, u_int32_t sFlowFsPacketSamplingRate)</div><div class="ttdef"><b>Definition:</b> sflow_sampler.c:73</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a66a429c36c211f2eeb590a34c8fd0dd8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_unref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;{</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structds.html">ds</a> &amp;&amp; <a class="code" href="ovs-atomic_8h.html#a2394844969d1095374305b6cb705200a">ovs_refcount_unref_relaxed</a>(&amp;<a class="code" href="structds.html">ds</a>-&gt;ref_cnt) == 1) {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keyword">struct </span><a class="code" href="structdpif__sflow__port.html">dpif_sflow_port</a> *dsp, *next;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="ofproto-dpif-sflow_8c.html#a295098c855f8e9ba1427d7478f8559ae">dpif_sflow_clear</a>(<a class="code" href="structds.html">ds</a>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="hmap_8h.html#a5e0916366dad6b1264756d0caeef8f74">HMAP_FOR_EACH_SAFE</a> (dsp, next, <a class="code" href="structhmap__node.html">hmap_node</a>, &amp;<a class="code" href="structds.html">ds</a>-&gt;ports) {</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <a class="code" href="ofproto-dpif-sflow_8c.html#aa8d1792f750f2af879fa6e72e77175d4">dpif_sflow_del_port__</a>(<a class="code" href="structds.html">ds</a>, dsp);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="hmap_8c.html#af5ebaf78c4ef81b7ec5847951b050397">hmap_destroy</a>(&amp;<a class="code" href="structds.html">ds</a>-&gt;ports);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        free(<a class="code" href="structds.html">ds</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    }</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_aa8d1792f750f2af879fa6e72e77175d4"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#aa8d1792f750f2af879fa6e72e77175d4">dpif_sflow_del_port__</a></div><div class="ttdeci">static void dpif_sflow_del_port__(struct dpif_sflow *, struct dpif_sflow_port *)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:673</div></div>
<div class="ttc" id="hmap_8h_html_a5e0916366dad6b1264756d0caeef8f74"><div class="ttname"><a href="hmap_8h.html#a5e0916366dad6b1264756d0caeef8f74">HMAP_FOR_EACH_SAFE</a></div><div class="ttdeci">#define HMAP_FOR_EACH_SAFE(NODE, NEXT, MEMBER, HMAP)</div><div class="ttdef"><b>Definition:</b> hmap.h:160</div></div>
<div class="ttc" id="structdpif__sflow__port_html"><div class="ttname"><a href="structdpif__sflow__port.html">dpif_sflow_port</a></div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:68</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a295098c855f8e9ba1427d7478f8559ae"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a295098c855f8e9ba1427d7478f8559ae">dpif_sflow_clear</a></div><div class="ttdeci">void dpif_sflow_clear(struct dpif_sflow *ds) OVS_EXCLUDED(mutex)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:496</div></div>
<div class="ttc" id="hmap_8c_html_af5ebaf78c4ef81b7ec5847951b050397"><div class="ttname"><a href="hmap_8c.html#af5ebaf78c4ef81b7ec5847951b050397">hmap_destroy</a></div><div class="ttdeci">void hmap_destroy(struct hmap *hmap)</div><div class="ttdef"><b>Definition:</b> hmap.c:46</div></div>
<div class="ttc" id="ovs-atomic_8h_html_a2394844969d1095374305b6cb705200a"><div class="ttname"><a href="ovs-atomic_8h.html#a2394844969d1095374305b6cb705200a">ovs_refcount_unref_relaxed</a></div><div class="ttdeci">static unsigned int ovs_refcount_unref_relaxed(struct ovs_refcount *refcount)</div><div class="ttdef"><b>Definition:</b> ovs-atomic.h:612</div></div>
<div class="ttc" id="structhmap__node_html"><div class="ttname"><a href="structhmap__node.html">hmap_node</a></div><div class="ttdef"><b>Definition:</b> hmap.h:29</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a77e56c05f985d087651a971bc5088f72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dpif_sflow_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdpif__sflow.html">dpif_sflow</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;{</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <a class="code" href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structds.html">ds</a>-&gt;collectors != NULL) {</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        <a class="code" href="poll-loop_8h.html#ac7566dad4e2efe12edc121b74a5ab7b6">poll_timer_wait_until</a>(<a class="code" href="structds.html">ds</a>-&gt;next_tick * 1000LL);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    }</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a>(&amp;<a class="code" href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a>);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;}</div>
<div class="ttc" id="thread_8h_html_a5861b95ae97d5b0c11752e83a79eb7ed"><div class="ttname"><a href="thread_8h.html#a5861b95ae97d5b0c11752e83a79eb7ed">ovs_mutex_unlock</a></div><div class="ttdeci">void ovs_mutex_unlock(const struct ovs_mutex *mutex) OVS_RELEASES(mutex)</div></div>
<div class="ttc" id="poll-loop_8h_html_ac7566dad4e2efe12edc121b74a5ab7b6"><div class="ttname"><a href="poll-loop_8h.html#ac7566dad4e2efe12edc121b74a5ab7b6">poll_timer_wait_until</a></div><div class="ttdeci">#define poll_timer_wait_until(msec)</div><div class="ttdef"><b>Definition:</b> poll-loop.h:64</div></div>
<div class="ttc" id="thread_8h_html_afe7356b30b0520c57f8dd5fec1e92ef2"><div class="ttname"><a href="thread_8h.html#afe7356b30b0520c57f8dd5fec1e92ef2">ovs_mutex_lock</a></div><div class="ttdeci">#define ovs_mutex_lock(mutex)</div><div class="ttdef"><b>Definition:</b> thread.h:59</div></div>
<div class="ttc" id="ofproto-dpif-sflow_8c_html_a135ec0fe74b73e8bf4c004455962809e"><div class="ttname"><a href="ofproto-dpif-sflow_8c.html#a135ec0fe74b73e8bf4c004455962809e">mutex</a></div><div class="ttdeci">static struct ovs_mutex mutex</div><div class="ttdef"><b>Definition:</b> ofproto-dpif-sflow.c:49</div></div>
<div class="ttc" id="structds_html"><div class="ttname"><a href="structds.html">ds</a></div><div class="ttdef"><b>Definition:</b> dynamic-string.h:35</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_36ad3adc1aabcd87770fae1b41e5ac14.html">ovs</a></li><li class="navelem"><a class="el" href="dir_8c05451f8e80e36d84c622e2e1ad6b29.html">ofproto</a></li><li class="navelem"><a class="el" href="ofproto-dpif-sflow_8h.html">ofproto-dpif-sflow.h</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:07:56 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
