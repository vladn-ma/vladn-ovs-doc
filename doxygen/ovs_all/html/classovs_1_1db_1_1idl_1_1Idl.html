<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: ovs.db.idl.Idl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classovs_1_1db_1_1idl_1_1Idl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">ovs.db.idl.Idl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ovs.db.idl.Idl:</div>
<div class="dyncontent">
<div class="center"><img src="classovs_1_1db_1_1idl_1_1Idl__inherit__graph.png" border="0" usemap="#ovs_8db_8idl_8Idl_inherit__map" alt="Inheritance graph"/></div>
<map name="ovs_8db_8idl_8Idl_inherit__map" id="ovs_8db_8idl_8Idl_inherit__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ovs.db.idl.Idl:</div>
<div class="dyncontent">
<div class="center"><img src="classovs_1_1db_1_1idl_1_1Idl__coll__graph.png" border="0" usemap="#ovs_8db_8idl_8Idl_coll__map" alt="Collaboration graph"/></div>
<map name="ovs_8db_8idl_8Idl_coll__map" id="ovs_8db_8idl_8Idl_coll__map">
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a31cced933c20701a516d7a1d44a0fabf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a31cced933c20701a516d7a1d44a0fabf">__init__</a> (self, remote, schema)</td></tr>
<tr class="separator:a31cced933c20701a516d7a1d44a0fabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bcbecb920469a026a9d84178db618bc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a0bcbecb920469a026a9d84178db618bc">close</a> (self)</td></tr>
<tr class="separator:a0bcbecb920469a026a9d84178db618bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad592176999a30ca436df01db44bd64bf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#ad592176999a30ca436df01db44bd64bf">run</a> (self)</td></tr>
<tr class="separator:ad592176999a30ca436df01db44bd64bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab834ff3eb534b12479de7a7bfc791e36"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#ab834ff3eb534b12479de7a7bfc791e36">wait</a> (self, poller)</td></tr>
<tr class="separator:ab834ff3eb534b12479de7a7bfc791e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5a236d637728ea9411ac6e4661d132"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#aae5a236d637728ea9411ac6e4661d132">has_ever_connected</a> (self)</td></tr>
<tr class="separator:aae5a236d637728ea9411ac6e4661d132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b20eaa5a991e39c4f71aef70af0bc8b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a0b20eaa5a991e39c4f71aef70af0bc8b">force_reconnect</a> (self)</td></tr>
<tr class="separator:a0b20eaa5a991e39c4f71aef70af0bc8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c6502f754bee57221ee9d8f8b300c54"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a3c6502f754bee57221ee9d8f8b300c54">set_lock</a> (self, <a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a1da94b96646b5f2d744e29010aa1fbc3">lock_name</a>)</td></tr>
<tr class="separator:a3c6502f754bee57221ee9d8f8b300c54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3347abe705155d6b3d11c34821d680f2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a3347abe705155d6b3d11c34821d680f2">notify</a></td></tr>
<tr class="separator:a3347abe705155d6b3d11c34821d680f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a2e4500bc45dbbc63b74cacfc8fc26204"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a2e4500bc45dbbc63b74cacfc8fc26204">tables</a></td></tr>
<tr class="separator:a2e4500bc45dbbc63b74cacfc8fc26204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86888580c92555a7f9ac3c3fb2ed81a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a86888580c92555a7f9ac3c3fb2ed81a2">change_seqno</a></td></tr>
<tr class="separator:a86888580c92555a7f9ac3c3fb2ed81a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da94b96646b5f2d744e29010aa1fbc3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a1da94b96646b5f2d744e29010aa1fbc3">lock_name</a></td></tr>
<tr class="separator:a1da94b96646b5f2d744e29010aa1fbc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a587715452af9de49c7aa9029b7dd5090"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a587715452af9de49c7aa9029b7dd5090">has_lock</a></td></tr>
<tr class="separator:a587715452af9de49c7aa9029b7dd5090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119966e33c941dcc58448dec076e711f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a119966e33c941dcc58448dec076e711f">is_lock_contended</a></td></tr>
<tr class="separator:a119966e33c941dcc58448dec076e711f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a2167ba7089d3615db157ec51fd33be"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html#a7a2167ba7089d3615db157ec51fd33be">txn</a></td></tr>
<tr class="separator:a7a2167ba7089d3615db157ec51fd33be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Open vSwitch Database Interface Definition Language (OVSDB IDL).

The OVSDB IDL maintains an in-memory replica of a database.  It issues RPC
requests to an OVSDB database server and parses the responses, converting
raw JSON into data structures that are easier for clients to digest.

The IDL also assists with issuing database transactions.  The client
creates a transaction, manipulates the IDL data structures, and commits or
aborts the transaction.  The IDL then composes and issues the necessary
JSON-RPC requests and reports to the client whether the transaction
completed successfully.

The client is allowed to access the following attributes directly, in a
read-only fashion:

- 'tables': This is the 'tables' map in the ovs.db.schema.DbSchema provided
  to the Idl constructor.  Each ovs.db.schema.TableSchema in the map is
  annotated with a new attribute 'rows', which is a dict from a uuid.UUID
  to a Row object.

  The client may directly read and write the Row objects referenced by the
  'rows' map values.  Refer to Row for more details.

- 'change_seqno': A number that represents the IDL's state.  When the IDL
  is updated (by Idl.run()), its value changes.  The sequence number can
  occasionally change even if the database does not.  This happens if the
  connection to the database drops and reconnects, which causes the
  database contents to be reloaded even if they didn't change.  (It could
  also happen if the database server sends out a "change" that reflects
  what the IDL already thought was in the database.  The database server is
  not supposed to do that, but bugs could in theory cause it to do so.)

- 'lock_name': The name of the lock configured with Idl.set_lock(), or None
  if no lock is configured.

- 'has_lock': True, if the IDL is configured to obtain a lock and owns that
  lock, and False otherwise.

  Locking and unlocking happens asynchronously from the database client's
  point of view, so the information is only useful for optimization
  (e.g. if the client doesn't have the lock then there's no point in trying
  to write to the database).

- 'is_lock_contended': True, if the IDL is configured to obtain a lock but
  the database server has indicated that some other client already owns the
  requested lock, and False otherwise.

- 'txn': The ovs.db.idl.Transaction object for the database transaction
  currently being constructed, if there is one, or None otherwise.
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a31cced933c20701a516d7a1d44a0fabf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>schema</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates and returns a connection to the database named 'db_name' on
'remote', which should be in a form acceptable to
ovs.jsonrpc.session.open().  The connection will maintain an in-memory
replica of the remote database.

'schema' should be the schema for the remote database.  The caller may
have cut it down by removing tables or columns that are not of
interest.  The IDL will only replicate the tables and columns that
remain.  The caller may also add a attribute named 'alert' to selected
remaining columns, setting its value to False; if so, then changes to
those columns will not be considered changes to the database for the
purpose of the return value of Idl.run() and Idl.change_seqno.  This is
useful for columns that the IDL's client will write but not read.

As a convenience to users, 'schema' may also be an instance of the
SchemaHelper class.

The IDL uses and modifies 'schema' directly.</pre> <div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">def </span>__init__(self, remote, schema):</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Creates and returns a connection to the database named &#39;db_name&#39; on</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">        &#39;remote&#39;, which should be in a form acceptable to</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral">        ovs.jsonrpc.session.open().  The connection will maintain an in-memory</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral">        replica of the remote database.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="stringliteral">        &#39;schema&#39; should be the schema for the remote database.  The caller may</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="stringliteral">        have cut it down by removing tables or columns that are not of</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="stringliteral">        interest.  The IDL will only replicate the tables and columns that</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="stringliteral">        remain.  The caller may also add a attribute named &#39;alert&#39; to selected</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="stringliteral">        remaining columns, setting its value to False; if so, then changes to</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="stringliteral">        those columns will not be considered changes to the database for the</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="stringliteral">        purpose of the return value of Idl.run() and Idl.change_seqno.  This is</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="stringliteral">        useful for columns that the IDL&#39;s client will write but not read.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">        As a convenience to users, &#39;schema&#39; may also be an instance of the</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">        SchemaHelper class.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">        The IDL uses and modifies &#39;schema&#39; directly.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keyword">assert</span> isinstance(schema, SchemaHelper)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        schema = schema.get_idl_schema()</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        self.tables = schema.tables</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        self._db = schema</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        self._session = <a class="code" href="classovs_1_1jsonrpc_1_1Session.html#aa7c412617d7a8d630241f3b1710ab685">ovs.jsonrpc.Session.open</a>(remote)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        self._monitor_request_id = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        self._last_seqno = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        self.change_seqno = 0</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="comment"># Database locking.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        self.lock_name = <span class="keywordtype">None</span>          <span class="comment"># Name of lock we need, None if none.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        self.has_lock = <span class="keyword">False</span>          <span class="comment"># Has db server said we have the lock?</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        self.is_lock_contended = <span class="keyword">False</span>  <span class="comment"># Has db server said we can&#39;t get lock?</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        self._lock_request_id = <span class="keywordtype">None</span>   <span class="comment"># JSON-RPC ID of in-flight lock request.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="comment"># Transaction support.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        self.txn = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        self._outstanding_txns = {}</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">for</span> table <span class="keywordflow">in</span> schema.tables.itervalues():</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">for</span> column <span class="keywordflow">in</span> table.columns.itervalues():</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="keywordflow">if</span> <span class="keywordflow">not</span> hasattr(column, <span class="stringliteral">&#39;alert&#39;</span>):</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    column.alert = <span class="keyword">True</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            table.need_table = <span class="keyword">False</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            table.rows = {}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            table.idl = self</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="ttc" id="classovs_1_1jsonrpc_1_1Session_html_aa7c412617d7a8d630241f3b1710ab685"><div class="ttname"><a href="classovs_1_1jsonrpc_1_1Session.html#aa7c412617d7a8d630241f3b1710ab685">ovs.jsonrpc.Session.open</a></div><div class="ttdeci">def open(name)</div><div class="ttdef"><b>Definition:</b> jsonrpc.py:362</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0bcbecb920469a026a9d84178db618bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.close </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Closes the connection to the database.  The IDL will no longer
update.</pre> <div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">def </span>close(self):</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Closes the connection to the database.  The IDL will no longer</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="stringliteral">        update.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        self._session.close()</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b20eaa5a991e39c4f71aef70af0bc8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.force_reconnect </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Forces the IDL to drop its connection to the database and reconnect.
In the meantime, the contents of the IDL will not change.</pre> <div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">def </span>force_reconnect(self):</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Forces the IDL to drop its connection to the database and reconnect.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">        In the meantime, the contents of the IDL will not change.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        self._session.force_reconnect()</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae5a236d637728ea9411ac6e4661d132"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.has_ever_connected </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns True, if the IDL successfully connected to the remote
database and retrieved its contents (even if the connection
subsequently dropped and is in the process of reconnecting).  If so,
then the IDL contains an atomic snapshot of the database's contents
(but it might be arbitrarily old if the connection dropped).

Returns False if the IDL has never connected or retrieved the
database's contents.  If so, the IDL is empty.</pre> <div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">def </span>has_ever_connected(self):</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Returns True, if the IDL successfully connected to the remote</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral">        database and retrieved its contents (even if the connection</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">        subsequently dropped and is in the process of reconnecting).  If so,</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">        then the IDL contains an atomic snapshot of the database&#39;s contents</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral">        (but it might be arbitrarily old if the connection dropped).</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">        Returns False if the IDL has never connected or retrieved the</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">        database&#39;s contents.  If so, the IDL is empty.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">return</span> self.change_seqno != 0</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3347abe705155d6b3d11c34821d680f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.notify </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>row</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>updates</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Hook for implementing create/update/delete notifications

:param event:   The event that was triggered
:type event:    ROW_CREATE, ROW_UPDATE, or ROW_DELETE
:param row:     The row as it is after the operation has occured
:type row:      Row
:param updates: For updates, a Row object with just the changed columns
:type updates:  Row
</pre> <div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keyword">def </span>notify(self, event, row, updates=None):</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Hook for implementing create/update/delete notifications</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral">        :param event:   The event that was triggered</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">        :type event:    ROW_CREATE, ROW_UPDATE, or ROW_DELETE</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">        :param row:     The row as it is after the operation has occured</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral">        :type row:      Row</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="stringliteral">        :param updates: For updates, a Row object with just the changed columns</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="stringliteral">        :type updates:  Row</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad592176999a30ca436df01db44bd64bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Processes a batch of messages from the database server.  Returns
True if the database as seen through the IDL changed, False if it did
not change.  The initial fetch of the entire contents of the remote
database is considered to be one kind of change.  If the IDL has been
configured to acquire a database lock (with Idl.set_lock()), then
successfully acquiring the lock is also considered to be a change.

This function can return occasional false positives, that is, report
that the database changed even though it didn't.  This happens if the
connection to the database drops and reconnects, which causes the
database contents to be reloaded even if they didn't change.  (It could
also happen if the database server sends out a "change" that reflects
what we already thought was in the database, but the database server is
not supposed to do that.)

As an alternative to checking the return value, the client may check
for changes in self.change_seqno.</pre> <div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">def </span><a class="code" href="ofproto-dpif_8c.html#afaed635f366664abdd16801ce411de0f">run</a>(self):</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Processes a batch of messages from the database server.  Returns</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="stringliteral">        True if the database as seen through the IDL changed, False if it did</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="stringliteral">        not change.  The initial fetch of the entire contents of the remote</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="stringliteral">        database is considered to be one kind of change.  If the IDL has been</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="stringliteral">        configured to acquire a database lock (with Idl.set_lock()), then</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="stringliteral">        successfully acquiring the lock is also considered to be a change.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral">        This function can return occasional false positives, that is, report</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">        that the database changed even though it didn&#39;t.  This happens if the</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral">        connection to the database drops and reconnects, which causes the</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">        database contents to be reloaded even if they didn&#39;t change.  (It could</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">        also happen if the database server sends out a &quot;change&quot; that reflects</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral">        what we already thought was in the database, but the database server is</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">        not supposed to do that.)</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral">        As an alternative to checking the return value, the client may check</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="stringliteral">        for changes in self.change_seqno.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keyword">assert</span> <span class="keywordflow">not</span> self.txn</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        initial_change_seqno = self.change_seqno</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        self._session.run()</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        i = 0</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">while</span> i &lt; 50:</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            i += 1</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self._session.is_connected():</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <span class="keywordflow">break</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            seqno = self._session.get_seqno()</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">if</span> seqno != self._last_seqno:</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                self._last_seqno = seqno</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                self.__txn_abort_all()</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                self.__send_monitor_request()</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">if</span> self.lock_name:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                    self.__send_lock_request()</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <span class="keywordflow">break</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            msg = self._session.recv()</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordflow">if</span> msg <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                <span class="keywordflow">break</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (msg.type == ovs.jsonrpc.Message.T_NOTIFY</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">and</span> msg.method == <span class="stringliteral">&quot;update&quot;</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keywordflow">and</span> len(msg.params) == 2</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">and</span> msg.params[0] == <span class="keywordtype">None</span>):</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <span class="comment"># Database contents changed.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                self.__parse_update(msg.params[1])</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">elif</span> (msg.type == ovs.jsonrpc.Message.T_REPLY</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                  <span class="keywordflow">and</span> self._monitor_request_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                  <span class="keywordflow">and</span> self._monitor_request_id == msg.id):</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="comment"># Reply to our &quot;monitor&quot; request.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    self.change_seqno += 1</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    self._monitor_request_id = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    self.__clear()</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    self.__parse_update(msg.result)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">except</span> error.Error, e:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    vlog.err(<span class="stringliteral">&quot;%s: parse error in received schema: %s&quot;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                              % (self._session.get_name(), e))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    self.__error()</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">elif</span> (msg.type == ovs.jsonrpc.Message.T_REPLY</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                  <span class="keywordflow">and</span> self._lock_request_id <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                  <span class="keywordflow">and</span> self._lock_request_id == msg.id):</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="comment"># Reply to our &quot;lock&quot; request.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                self.__parse_lock_reply(msg.result)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">elif</span> (msg.type == ovs.jsonrpc.Message.T_NOTIFY</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                  <span class="keywordflow">and</span> msg.method == <span class="stringliteral">&quot;locked&quot;</span>):</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                <span class="comment"># We got our lock.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                self.__parse_lock_notify(msg.params, <span class="keyword">True</span>)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">elif</span> (msg.type == ovs.jsonrpc.Message.T_NOTIFY</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                  <span class="keywordflow">and</span> msg.method == <span class="stringliteral">&quot;stolen&quot;</span>):</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                <span class="comment"># Someone else stole our lock.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                self.__parse_lock_notify(msg.params, <span class="keyword">False</span>)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">elif</span> msg.type == ovs.jsonrpc.Message.T_NOTIFY <span class="keywordflow">and</span> msg.id == <span class="stringliteral">&quot;echo&quot;</span>:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <span class="comment"># Reply to our echo request.  Ignore it.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">elif</span> (msg.type <span class="keywordflow">in</span> (ovs.jsonrpc.Message.T_ERROR,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                               ovs.jsonrpc.Message.T_REPLY)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                  <span class="keywordflow">and</span> self.__txn_process_reply(msg)):</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="comment"># __txn_process_reply() did everything needed.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="comment"># This can happen if a transaction is destroyed before we</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                <span class="comment"># receive the reply, so keep the log level low.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                vlog.dbg(<span class="stringliteral">&quot;%s: received unexpected %s message&quot;</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                         % (self._session.get_name(),</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                             <a class="code" href="classovs_1_1jsonrpc_1_1Message.html#a0fcc34115c76302a4fe4e983f6084fa9">ovs.jsonrpc.Message.type_to_string</a>(msg.type)))</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">return</span> initial_change_seqno != self.change_seqno</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="ttc" id="classovs_1_1jsonrpc_1_1Message_html_a0fcc34115c76302a4fe4e983f6084fa9"><div class="ttname"><a href="classovs_1_1jsonrpc_1_1Message.html#a0fcc34115c76302a4fe4e983f6084fa9">ovs.jsonrpc.Message.type_to_string</a></div><div class="ttdeci">def type_to_string(type_)</div><div class="ttdef"><b>Definition:</b> jsonrpc.py:76</div></div>
<div class="ttc" id="ofproto-dpif_8c_html_afaed635f366664abdd16801ce411de0f"><div class="ttname"><a href="ofproto-dpif_8c.html#afaed635f366664abdd16801ce411de0f">run</a></div><div class="ttdeci">static int run(struct ofproto *ofproto_)</div><div class="ttdef"><b>Definition:</b> ofproto-dpif.c:1448</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c6502f754bee57221ee9d8f8b300c54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.set_lock </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>lock_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">If 'lock_name' is not None, configures the IDL to obtain the named
lock from the database server and to avoid modifying the database when
the lock cannot be acquired (that is, when another client has the same
lock).

If 'lock_name' is None, drops the locking requirement and releases the
lock.</pre> <div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keyword">def </span>set_lock(self, lock_name):</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;If &#39;lock_name&#39; is not None, configures the IDL to obtain the named</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">        lock from the database server and to avoid modifying the database when</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">        the lock cannot be acquired (that is, when another client has the same</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">        lock).</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral">        If &#39;lock_name&#39; is None, drops the locking requirement and releases the</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">        lock.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keyword">assert</span> <span class="keywordflow">not</span> self.txn</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keyword">assert</span> <span class="keywordflow">not</span> self._outstanding_txns</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> self.lock_name <span class="keywordflow">and</span> (<span class="keywordflow">not</span> lock_name <span class="keywordflow">or</span> lock_name != self.lock_name):</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="comment"># Release previous lock.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            self.__send_unlock_request()</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            self.lock_name = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            self.is_lock_contended = <span class="keyword">False</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> lock_name <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.lock_name:</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment"># Acquire new lock.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            self.lock_name = lock_name</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            self.__send_lock_request()</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab834ff3eb534b12479de7a7bfc791e36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ovs.db.idl.Idl.wait </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>poller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Arranges for poller.block() to wake up when self.run() has something
to do or when activity occurs on a transaction on 'self'.</pre> <div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">def </span><a class="code" href="sparse_2sys_2wait_8h.html#a776dc7d230fb83c691a628894de424f0">wait</a>(self, poller):</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Arranges for poller.block() to wake up when self.run() has something</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">        to do or when activity occurs on a transaction on &#39;self&#39;.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        self._session.wait(poller)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        self._session.recv_wait(poller)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="ttc" id="sparse_2sys_2wait_8h_html_a776dc7d230fb83c691a628894de424f0"><div class="ttname"><a href="sparse_2sys_2wait_8h.html#a776dc7d230fb83c691a628894de424f0">wait</a></div><div class="ttdeci">#define wait(a)</div><div class="ttdef"><b>Definition:</b> wait.h:27</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a86888580c92555a7f9ac3c3fb2ed81a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Idl.change_seqno</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a587715452af9de49c7aa9029b7dd5090"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Idl.has_lock</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a119966e33c941dcc58448dec076e711f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Idl.is_lock_contended</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1da94b96646b5f2d744e29010aa1fbc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Idl.lock_name</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2e4500bc45dbbc63b74cacfc8fc26204"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Idl.tables</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7a2167ba7089d3615db157ec51fd33be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ovs.db.idl.Idl.txn</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/vladn/git/ovs/python/ovs/db/<a class="el" href="idl_8py.html">idl.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceovs.html">ovs</a></li><li class="navelem"><a class="el" href="namespaceovs_1_1db.html">db</a></li><li class="navelem"><a class="el" href="namespaceovs_1_1db_1_1idl.html">idl</a></li><li class="navelem"><a class="el" href="classovs_1_1db_1_1idl_1_1Idl.html">Idl</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:08:09 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
