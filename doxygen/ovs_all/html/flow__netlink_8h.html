<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: /home/vladn/git/ovs/datapath/flow_netlink.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('flow__netlink_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">flow_netlink.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="kernel_8h_source.html">linux/kernel.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="datapath_2linux_2compat_2include_2linux_2netlink_8h_source.html">linux/netlink.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="openvswitch_8h_source.html">linux/openvswitch.h</a>&gt;</code><br />
<code>#include &lt;linux/spinlock.h&gt;</code><br />
<code>#include &lt;linux/types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="rcupdate_8h_source.html">linux/rcupdate.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="if__ether_8h_source.html">linux/if_ether.h</a>&gt;</code><br />
<code>#include &lt;linux/in6.h&gt;</code><br />
<code>#include &lt;<a class="el" href="jiffies_8h_source.html">linux/jiffies.h</a>&gt;</code><br />
<code>#include &lt;linux/time.h&gt;</code><br />
<code>#include &lt;<a class="el" href="flex__array_8h_source.html">linux/flex_array.h</a>&gt;</code><br />
<code>#include &lt;net/inet_ecn.h&gt;</code><br />
<code>#include &lt;<a class="el" href="ip__tunnels_8h_source.html">net/ip_tunnels.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="datapath_2flow_8h_source.html">flow.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for flow_netlink.h:</div>
<div class="dyncontent">
<div class="center"><img src="flow__netlink_8h__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath_2flow__netlink_8h" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath_2flow__netlink_8h" id="_2home_2vladn_2git_2ovs_2datapath_2flow__netlink_8h">
<area shape="rect" id="node2" href="kernel_8h.html" title="linux/kernel.h" alt="" coords="927,169,1026,196"/><area shape="rect" id="node5" href="datapath_2linux_2compat_2include_2linux_2netlink_8h.html" title="linux/netlink.h" alt="" coords="800,169,903,196"/><area shape="rect" id="node11" href="openvswitch_8h.html" title="linux/openvswitch.h" alt="" coords="413,169,551,196"/><area shape="rect" id="node12" href="if__ether_8h.html" title="linux/if_ether.h" alt="" coords="495,244,602,271"/><area shape="rect" id="node14" href="rcupdate_8h.html" title="linux/rcupdate.h" alt="" coords="169,169,283,196"/><area shape="rect" id="node16" href="jiffies_8h.html" title="linux/jiffies.h" alt="" coords="1051,169,1145,196"/><area shape="rect" id="node18" href="flex__array_8h.html" title="linux/flex_array.h" alt="" coords="1283,169,1404,196"/><area shape="rect" id="node20" href="ip__tunnels_8h.html" title="net/ip_tunnels.h" alt="" coords="1510,95,1625,121"/><area shape="rect" id="node21" href="datapath_2flow_8h.html" title="flow.h" alt="" coords="699,95,756,121"/><area shape="rect" id="node6" href="skbuff_8h.html" title="linux/skbuff.h" alt="" coords="685,244,785,271"/><area shape="rect" id="node10" href="datapath_2linux_2compat_2include_2net_2netlink_8h.html" title="net/netlink.h" alt="" coords="810,244,903,271"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="flow__netlink_8h__dep__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath_2flow__netlink_8hdep" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath_2flow__netlink_8hdep" id="_2home_2vladn_2git_2ovs_2datapath_2flow__netlink_8hdep">
<area shape="rect" id="node2" href="datapath_8c.html" title="/home/vladn/git/ovs\l/datapath/datapath.c" alt="" coords="5,102,147,143"/><area shape="rect" id="node3" href="datapath_2flow_8c.html" title="/home/vladn/git/ovs\l/datapath/flow.c" alt="" coords="171,102,307,143"/><area shape="rect" id="node4" href="flow__netlink_8c.html" title="/home/vladn/git/ovs\l/datapath/flow_netlink.c" alt="" coords="331,102,491,143"/><area shape="rect" id="node5" href="linux_2datapath_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/datapath.c" alt="" coords="515,102,687,143"/><area shape="rect" id="node6" href="datapath_2linux_2flow_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow.c" alt="" coords="712,102,859,143"/><area shape="rect" id="node7" href="linux_2flow__netlink_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow\l_netlink.c" alt="" coords="883,95,1019,151"/></map>
</div>
</div>
<p><a href="flow__netlink_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac920825ffe4fa75e7ca3c5e76ad4ec2a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#ac920825ffe4fa75e7ca3c5e76ad4ec2a">ovs_tun_key_attr_size</a> (void)</td></tr>
<tr class="separator:ac920825ffe4fa75e7ca3c5e76ad4ec2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea1ec7f3650fd324fc1538c97e795d0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a4ea1ec7f3650fd324fc1538c97e795d0">ovs_key_attr_size</a> (void)</td></tr>
<tr class="separator:a4ea1ec7f3650fd324fc1538c97e795d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a09e9d38844c59332975789573e994c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a1a09e9d38844c59332975789573e994c">ovs_match_init</a> (struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *<a class="el" href="structmatch.html">match</a>, struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *<a class="el" href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a>, struct <a class="el" href="structsw__flow__mask.html">sw_flow_mask</a> *mask)</td></tr>
<tr class="separator:a1a09e9d38844c59332975789573e994c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab52f962a5af3e769831e94b28a56171f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#ab52f962a5af3e769831e94b28a56171f">ovs_nla_put_key</a> (const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *, const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *, int attr, <a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> is_mask, struct sk_buff *)</td></tr>
<tr class="separator:ab52f962a5af3e769831e94b28a56171f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4927521e590b588f48062031450e415d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a4927521e590b588f48062031450e415d">ovs_nla_get_flow_metadata</a> (const struct <a class="el" href="structnlattr.html">nlattr</a> *, struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *, <a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> <a class="el" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>)</td></tr>
<tr class="separator:a4927521e590b588f48062031450e415d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a636f7d3cbe8656ceda87373110a4abc4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a636f7d3cbe8656ceda87373110a4abc4">ovs_nla_put_identifier</a> (const struct <a class="el" href="structsw__flow.html">sw_flow</a> *<a class="el" href="structflow.html">flow</a>, struct sk_buff *skb)</td></tr>
<tr class="separator:a636f7d3cbe8656ceda87373110a4abc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f6c3ab02b8e5d6296278dc9214500eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a2f6c3ab02b8e5d6296278dc9214500eb">ovs_nla_put_masked_key</a> (const struct <a class="el" href="structsw__flow.html">sw_flow</a> *<a class="el" href="structflow.html">flow</a>, struct sk_buff *skb)</td></tr>
<tr class="separator:a2f6c3ab02b8e5d6296278dc9214500eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ab12e938f8564945464a9e110eace3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#af5ab12e938f8564945464a9e110eace3">ovs_nla_put_mask</a> (const struct <a class="el" href="structsw__flow.html">sw_flow</a> *<a class="el" href="structflow.html">flow</a>, struct sk_buff *skb)</td></tr>
<tr class="separator:af5ab12e938f8564945464a9e110eace3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f9d1fe8fdf314eace9559ea4a51d9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a18f9d1fe8fdf314eace9559ea4a51d9b">ovs_nla_get_match</a> (struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *, const struct <a class="el" href="structnlattr.html">nlattr</a> *<a class="el" href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a>, const struct <a class="el" href="structnlattr.html">nlattr</a> *mask, <a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> <a class="el" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>)</td></tr>
<tr class="separator:a18f9d1fe8fdf314eace9559ea4a51d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee4389059beab6dfbf2ce436b0e5483"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a3ee4389059beab6dfbf2ce436b0e5483">ovs_nla_put_egress_tunnel_key</a> (struct sk_buff *, const struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *)</td></tr>
<tr class="separator:a3ee4389059beab6dfbf2ce436b0e5483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ac3692b5df3f22593f37746fe5f428"><td class="memItemLeft" align="right" valign="top"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a97ac3692b5df3f22593f37746fe5f428">ovs_nla_get_ufid</a> (struct <a class="el" href="structsw__flow__id.html">sw_flow_id</a> *, const struct <a class="el" href="structnlattr.html">nlattr</a> *, <a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> <a class="el" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>)</td></tr>
<tr class="separator:a97ac3692b5df3f22593f37746fe5f428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa416ab3b06ce40eee0be66306129c8d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#aa416ab3b06ce40eee0be66306129c8d5">ovs_nla_get_identifier</a> (struct <a class="el" href="structsw__flow__id.html">sw_flow_id</a> *sfid, const struct <a class="el" href="structnlattr.html">nlattr</a> *ufid, const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *<a class="el" href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a>, <a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> <a class="el" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>)</td></tr>
<tr class="separator:aa416ab3b06ce40eee0be66306129c8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a415cb727697a02d62b8ff40795337d40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="Types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a415cb727697a02d62b8ff40795337d40">ovs_nla_get_ufid_flags</a> (const struct <a class="el" href="structnlattr.html">nlattr</a> *attr)</td></tr>
<tr class="separator:a415cb727697a02d62b8ff40795337d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10dc93f8c379eae7a557d54d9b387dd6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a10dc93f8c379eae7a557d54d9b387dd6">ovs_nla_copy_actions</a> (const struct <a class="el" href="structnlattr.html">nlattr</a> *attr, const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *<a class="el" href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a>, struct <a class="el" href="structsw__flow__actions.html">sw_flow_actions</a> **sfa, <a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> <a class="el" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>)</td></tr>
<tr class="separator:a10dc93f8c379eae7a557d54d9b387dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a923304ee69be1cfa52197b0f73c29e49"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a923304ee69be1cfa52197b0f73c29e49">ovs_nla_put_actions</a> (const struct <a class="el" href="structnlattr.html">nlattr</a> *attr, int len, struct sk_buff *skb)</td></tr>
<tr class="separator:a923304ee69be1cfa52197b0f73c29e49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ead33c974a98707a46ff69758389258"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__netlink_8h.html#a6ead33c974a98707a46ff69758389258">ovs_nla_free_flow_actions</a> (struct <a class="el" href="structsw__flow__actions.html">sw_flow_actions</a> *)</td></tr>
<tr class="separator:a6ead33c974a98707a46ff69758389258"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a4ea1ec7f3650fd324fc1538c97e795d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ovs_key_attr_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">/* Whenever adding new OVS_KEY_ FIELDS, we should consider</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">     * updating this function.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    BUILD_BUG_ON(OVS_KEY_ATTR_TUNNEL_INFO != 22);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span>    nla_total_size(4)   <span class="comment">/* OVS_KEY_ATTR_PRIORITY */</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        + nla_total_size(0)   <span class="comment">/* OVS_KEY_ATTR_TUNNEL */</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          + <a class="code" href="flow__netlink_8c.html#ac920825ffe4fa75e7ca3c5e76ad4ec2a">ovs_tun_key_attr_size</a>()</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        + nla_total_size(4)   <span class="comment">/* OVS_KEY_ATTR_IN_PORT */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        + nla_total_size(4)   <span class="comment">/* OVS_KEY_ATTR_SKB_MARK */</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        + nla_total_size(4)   <span class="comment">/* OVS_KEY_ATTR_DP_HASH */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        + nla_total_size(4)   <span class="comment">/* OVS_KEY_ATTR_RECIRC_ID */</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        + nla_total_size(12)  <span class="comment">/* OVS_KEY_ATTR_ETHERNET */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        + nla_total_size(2)   <span class="comment">/* OVS_KEY_ATTR_ETHERTYPE */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        + nla_total_size(4)   <span class="comment">/* OVS_KEY_ATTR_VLAN */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        + nla_total_size(0)   <span class="comment">/* OVS_KEY_ATTR_ENCAP */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        + nla_total_size(2)   <span class="comment">/* OVS_KEY_ATTR_ETHERTYPE */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        + nla_total_size(40)  <span class="comment">/* OVS_KEY_ATTR_IPV6 */</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        + nla_total_size(2)   <span class="comment">/* OVS_KEY_ATTR_ICMPV6 */</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        + nla_total_size(28); <span class="comment">/* OVS_KEY_ATTR_ND */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_ac920825ffe4fa75e7ca3c5e76ad4ec2a"><div class="ttname"><a href="flow__netlink_8c.html#ac920825ffe4fa75e7ca3c5e76ad4ec2a">ovs_tun_key_attr_size</a></div><div class="ttdeci">size_t ovs_tun_key_attr_size(void)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:258</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1a09e9d38844c59332975789573e994c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_match_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__mask.html">sw_flow_mask</a> *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;{</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    memset(match, 0, <span class="keyword">sizeof</span>(*match));</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    match-&gt;<a class="code" href="structsw__flow__match.html#a4030aac38105b63798ea11f43f506372">key</a> = <a class="code" href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a>;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    match-&gt;<a class="code" href="structsw__flow__match.html#a4536aff731528d6def7d386435c203d1">mask</a> = mask;</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    memset(key, 0, <span class="keyword">sizeof</span>(*key));</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <span class="keywordflow">if</span> (mask) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        memset(&amp;mask-&gt;<a class="code" href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">key</a>, 0, <span class="keyword">sizeof</span>(mask-&gt;<a class="code" href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">key</a>));</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        mask-&gt;<a class="code" href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">range</a>.<a class="code" href="structsw__flow__key__range.html#a3139158cea80b4e5af36967f3748e846">start</a> = mask-&gt;<a class="code" href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">range</a>.<a class="code" href="structsw__flow__key__range.html#ab9c9d06e6ed2b9600d295dfdd94cc05a">end</a> = 0;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div>
<div class="ttc" id="structsw__flow__mask_html_aa6062c0e580d516ff2d9ce8f9611432b"><div class="ttname"><a href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">sw_flow_mask::range</a></div><div class="ttdeci">struct sw_flow_key_range range</div><div class="ttdef"><b>Definition:</b> flow.h:189</div></div>
<div class="ttc" id="structsw__flow__key__range_html_a3139158cea80b4e5af36967f3748e846"><div class="ttname"><a href="structsw__flow__key__range.html#a3139158cea80b4e5af36967f3748e846">sw_flow_key_range::start</a></div><div class="ttdeci">unsigned short int start</div><div class="ttdef"><b>Definition:</b> flow.h:182</div></div>
<div class="ttc" id="structsw__flow__mask_html_a52db0284fdd4579a5f30dee0837a7485"><div class="ttname"><a href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">sw_flow_mask::key</a></div><div class="ttdeci">struct sw_flow_key key</div><div class="ttdef"><b>Definition:</b> flow.h:190</div></div>
<div class="ttc" id="structsw__flow__match_html_a4030aac38105b63798ea11f43f506372"><div class="ttname"><a href="structsw__flow__match.html#a4030aac38105b63798ea11f43f506372">sw_flow_match::key</a></div><div class="ttdeci">struct sw_flow_key * key</div><div class="ttdef"><b>Definition:</b> flow.h:194</div></div>
<div class="ttc" id="structsw__flow__match_html_a4536aff731528d6def7d386435c203d1"><div class="ttname"><a href="structsw__flow__match.html#a4536aff731528d6def7d386435c203d1">sw_flow_match::mask</a></div><div class="ttdeci">struct sw_flow_mask * mask</div><div class="ttdef"><b>Definition:</b> flow.h:196</div></div>
<div class="ttc" id="uuid_8c_html_ac7bb0c346c8ea34e241d12fcba77c4bb"><div class="ttname"><a href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a></div><div class="ttdeci">static struct aes128 key</div><div class="ttdef"><b>Definition:</b> uuid.c:34</div></div>
<div class="ttc" id="structsw__flow__key__range_html_ab9c9d06e6ed2b9600d295dfdd94cc05a"><div class="ttname"><a href="structsw__flow__key__range.html#ab9c9d06e6ed2b9600d295dfdd94cc05a">sw_flow_key_range::end</a></div><div class="ttdeci">unsigned short int end</div><div class="ttdef"><b>Definition:</b> flow.h:183</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a10dc93f8c379eae7a557d54d9b387dd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_copy_actions </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__actions.html">sw_flow_actions</a> **&#160;</td>
          <td class="paramname"><em>sfa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;{</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    *sfa = <a class="code" href="flow__netlink_8c.html#acf3273c812551499c4b4d48651548286">nla_alloc_flow_actions</a>(nla_len(attr), <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(*sfa))</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        <span class="keywordflow">return</span> PTR_ERR(*sfa);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    err = <a class="code" href="flow__netlink_8c.html#ae5c58b498948d3c5564b7916505d8455">__ovs_nla_copy_actions</a>(attr, key, 0, sfa, key-&gt;<a class="code" href="structsw__flow__key.html#af3e10c978a3a2bf303b7d953ac6ff361">eth</a>.<a class="code" href="structsw__flow__key.html#af30defbb2a81c997e8747594e1d937a0">type</a>,</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                     key-&gt;<a class="code" href="structsw__flow__key.html#af3e10c978a3a2bf303b7d953ac6ff361">eth</a>.<a class="code" href="structsw__flow__key.html#a56b27b9b9eafa8f79acd544eba98c7b0">tci</a>, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        kfree(*sfa);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_acf3273c812551499c4b4d48651548286"><div class="ttname"><a href="flow__netlink_8c.html#acf3273c812551499c4b4d48651548286">nla_alloc_flow_actions</a></div><div class="ttdeci">static struct sw_flow_actions * nla_alloc_flow_actions(int size, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1534</div></div>
<div class="ttc" id="structsw__flow__key_html_af30defbb2a81c997e8747594e1d937a0"><div class="ttname"><a href="structsw__flow__key.html#af30defbb2a81c997e8747594e1d937a0">sw_flow_key::type</a></div><div class="ttdeci">__be16 type</div><div class="ttdef"><b>Definition:</b> flow.h:137</div></div>
<div class="ttc" id="flow__netlink_8c_html_ae5c58b498948d3c5564b7916505d8455"><div class="ttname"><a href="flow__netlink_8c.html#ae5c58b498948d3c5564b7916505d8455">__ovs_nla_copy_actions</a></div><div class="ttdeci">static int __ovs_nla_copy_actions(const struct nlattr *attr, const struct sw_flow_key *key, int depth, struct sw_flow_actions **sfa, __be16 eth_type, __be16 vlan_tci, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:2023</div></div>
<div class="ttc" id="structsw__flow__key_html_a56b27b9b9eafa8f79acd544eba98c7b0"><div class="ttname"><a href="structsw__flow__key.html#a56b27b9b9eafa8f79acd544eba98c7b0">sw_flow_key::tci</a></div><div class="ttdeci">__be16 tci</div><div class="ttdef"><b>Definition:</b> flow.h:136</div></div>
<div class="ttc" id="structsw__flow__key_html_af3e10c978a3a2bf303b7d953ac6ff361"><div class="ttname"><a href="structsw__flow__key.html#af3e10c978a3a2bf303b7d953ac6ff361">sw_flow_key::eth</a></div><div class="ttdeci">struct sw_flow_key::@1 eth</div></div>
<div class="ttc" id="test-rstp_8c_html_aeaf1410528b66f4fd6991826e49eabc2"><div class="ttname"><a href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a></div><div class="ttdeci">static OVS_NO_RETURN void err(const char *message,...) OVS_PRINTF_FORMAT(1</div><div class="ttdef"><b>Definition:</b> test-rstp.c:344</div></div>
<div class="ttc" id="math_8h_html_afa752f47ff073d8639c631f079670788"><div class="ttname"><a href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a></div><div class="ttdeci">double log(double)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ead33c974a98707a46ff69758389258"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_nla_free_flow_actions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__actions.html">sw_flow_actions</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;{</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    call_rcu(&amp;sf_acts-&gt;rcu, <a class="code" href="flow__netlink_8c.html#a386dd5cb0c8be8ce91e59761cbf820b4">rcu_free_acts_callback</a>);</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_a386dd5cb0c8be8ce91e59761cbf820b4"><div class="ttname"><a href="flow__netlink_8c.html#a386dd5cb0c8be8ce91e59761cbf820b4">rcu_free_acts_callback</a></div><div class="ttdeci">static void rcu_free_acts_callback(struct rcu_head *rcu)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1552</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4927521e590b588f48062031450e415d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_get_flow_metadata </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_nla_get_flow_metadata - parses Netlink attributes into a flow key. : Receives extracted in_port, priority, tun_key and skb_mark. : Netlink attribute holding nested OVS_KEY_ATTR_* Netlink attribute sequence. : Boolean to allow kernel error logging. Normally true, but when probing for feature compatibility this should be passed in as false to suppress unnecessary error logging.</p>
<p>This parses a series of Netlink attributes that form a flow key, which must take the same form accepted by flow_from_nlattrs(), but only enough of it to get the metadata, that is, the parts of the flow key that cannot be extracted from the packet itself. </p>
<div class="fragment"><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;{</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *<a class="code" href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a>[<a class="code" href="openvswitch_8h.html#a2a2adc6c47c38f0e7889580602ccbe22">OVS_KEY_ATTR_MAX</a> + 1];</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow__match.html">sw_flow_match</a> <a class="code" href="structmatch.html">match</a>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="Types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a> attrs = 0;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    err = <a class="code" href="flow__netlink_8c.html#aafe0de49242cd0276fd5ced0fd81514f">parse_flow_nlattrs</a>(attr, a, &amp;attrs, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    memset(&amp;<a class="code" href="structmatch.html">match</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structmatch.html">match</a>));</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <a class="code" href="structmatch.html">match</a>.key = <a class="code" href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    memset(key, 0, <a class="code" href="datapath_2flow_8h.html#aa38104b9e3106537d588a65cdce52e3a">OVS_SW_FLOW_KEY_METADATA_SIZE</a>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    key-&gt;<a class="code" href="structsw__flow__key.html#a57cbddb75a8d4fd859300bd34d98e84a">phy</a>.<a class="code" href="structsw__flow__key.html#a5848de18caa80d36d9bc60cc686a2c6e">in_port</a> = <a class="code" href="datapath_8h.html#a73b117dd1ebe456eecfb7688047a03f1">DP_MAX_PORTS</a>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__netlink_8c.html#aed17f75c6136e01aa609132d5bbc9b2a">metadata_from_nlattrs</a>(&amp;<a class="code" href="structmatch.html">match</a>, &amp;attrs, a, <span class="keyword">false</span>, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;}</div>
<div class="ttc" id="structsw__flow__key_html_a5848de18caa80d36d9bc60cc686a2c6e"><div class="ttname"><a href="structsw__flow__key.html#a5848de18caa80d36d9bc60cc686a2c6e">sw_flow_key::in_port</a></div><div class="ttdeci">u16 in_port</div><div class="ttdef"><b>Definition:</b> flow.h:129</div></div>
<div class="ttc" id="structmatch_html"><div class="ttname"><a href="structmatch.html">match</a></div><div class="ttdef"><b>Definition:</b> match.h:34</div></div>
<div class="ttc" id="datapath_2flow_8h_html_aa38104b9e3106537d588a65cdce52e3a"><div class="ttname"><a href="datapath_2flow_8h.html#aa38104b9e3106537d588a65cdce52e3a">OVS_SW_FLOW_KEY_METADATA_SIZE</a></div><div class="ttdeci">#define OVS_SW_FLOW_KEY_METADATA_SIZE</div><div class="ttdef"><b>Definition:</b> flow.h:118</div></div>
<div class="ttc" id="test-atomic_8c_html_a0a0390ed59a97feb6783f87db4086a7c"><div class="ttname"><a href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a></div><div class="ttdeci">static uint32_t a</div><div class="ttdef"><b>Definition:</b> test-atomic.c:175</div></div>
<div class="ttc" id="flow__netlink_8c_html_aafe0de49242cd0276fd5ced0fd81514f"><div class="ttname"><a href="flow__netlink_8c.html#aafe0de49242cd0276fd5ced0fd81514f">parse_flow_nlattrs</a></div><div class="ttdeci">static int parse_flow_nlattrs(const struct nlattr *attr, const struct nlattr *a[], u64 *attrsp, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:410</div></div>
<div class="ttc" id="flow__netlink_8c_html_aed17f75c6136e01aa609132d5bbc9b2a"><div class="ttname"><a href="flow__netlink_8c.html#aed17f75c6136e01aa609132d5bbc9b2a">metadata_from_nlattrs</a></div><div class="ttdeci">static int metadata_from_nlattrs(struct sw_flow_match *match, u64 *attrs, const struct nlattr **a, bool is_mask, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:716</div></div>
<div class="ttc" id="structnlattr_html"><div class="ttname"><a href="structnlattr.html">nlattr</a></div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:95</div></div>
<div class="ttc" id="test-rstp_8c_html_aeaf1410528b66f4fd6991826e49eabc2"><div class="ttname"><a href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a></div><div class="ttdeci">static OVS_NO_RETURN void err(const char *message,...) OVS_PRINTF_FORMAT(1</div><div class="ttdef"><b>Definition:</b> test-rstp.c:344</div></div>
<div class="ttc" id="openvswitch_8h_html_a2a2adc6c47c38f0e7889580602ccbe22"><div class="ttname"><a href="openvswitch_8h.html#a2a2adc6c47c38f0e7889580602ccbe22">OVS_KEY_ATTR_MAX</a></div><div class="ttdeci">#define OVS_KEY_ATTR_MAX</div><div class="ttdef"><b>Definition:</b> openvswitch.h:354</div></div>
<div class="ttc" id="Types_8h_html_ad758b7a5c3f18ed79d2fcd23d9f16357"><div class="ttname"><a href="Types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a></div><div class="ttdeci">unsigned long long u64</div><div class="ttdef"><b>Definition:</b> Types.h:22</div></div>
<div class="ttc" id="structsw__flow__key_html_a57cbddb75a8d4fd859300bd34d98e84a"><div class="ttname"><a href="structsw__flow__key.html#a57cbddb75a8d4fd859300bd34d98e84a">sw_flow_key::phy</a></div><div class="ttdeci">struct sw_flow_key::@0 phy</div></div>
<div class="ttc" id="structsw__flow__match_html"><div class="ttname"><a href="structsw__flow__match.html">sw_flow_match</a></div><div class="ttdef"><b>Definition:</b> flow.h:193</div></div>
<div class="ttc" id="datapath_8h_html_a73b117dd1ebe456eecfb7688047a03f1"><div class="ttname"><a href="datapath_8h.html#a73b117dd1ebe456eecfb7688047a03f1">DP_MAX_PORTS</a></div><div class="ttdeci">#define DP_MAX_PORTS</div><div class="ttdef"><b>Definition:</b> datapath.h:35</div></div>
<div class="ttc" id="uuid_8c_html_ac7bb0c346c8ea34e241d12fcba77c4bb"><div class="ttname"><a href="uuid_8c.html#ac7bb0c346c8ea34e241d12fcba77c4bb">key</a></div><div class="ttdeci">static struct aes128 key</div><div class="ttdef"><b>Definition:</b> uuid.c:34</div></div>
<div class="ttc" id="math_8h_html_afa752f47ff073d8639c631f079670788"><div class="ttname"><a href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a></div><div class="ttdeci">double log(double)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa416ab3b06ce40eee0be66306129c8d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_get_identifier </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__id.html">sw_flow_id</a> *&#160;</td>
          <td class="paramname"><em>sfid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>ufid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;{</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow__key.html">sw_flow_key</a> *new_key;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flow__netlink_8c.html#a81e0cfe1c434ecde4ad684c8b8586877">ovs_nla_get_ufid</a>(sfid, ufid, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>))</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">/* If UFID was not provided, use unmasked key. */</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    new_key = kmalloc(<span class="keyword">sizeof</span>(*new_key), GFP_KERNEL);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordflow">if</span> (!new_key)</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    memcpy(new_key, key, <span class="keyword">sizeof</span>(*key));</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    sfid-&gt;<a class="code" href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">unmasked_key</a> = new_key;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_a81e0cfe1c434ecde4ad684c8b8586877"><div class="ttname"><a href="flow__netlink_8c.html#a81e0cfe1c434ecde4ad684c8b8586877">ovs_nla_get_ufid</a></div><div class="ttdeci">bool ovs_nla_get_ufid(struct sw_flow_id *sfid, const struct nlattr *attr, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1204</div></div>
<div class="ttc" id="structsw__flow__key_html"><div class="ttname"><a href="structsw__flow__key.html">sw_flow_key</a></div><div class="ttdef"><b>Definition:</b> flow.h:122</div></div>
<div class="ttc" id="structsw__flow__id_html_a5d62dce79569cb8c25a43f4039e5df3c"><div class="ttname"><a href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">sw_flow_id::unmasked_key</a></div><div class="ttdeci">struct sw_flow_key * unmasked_key</div><div class="ttdef"><b>Definition:</b> flow.h:205</div></div>
<div class="ttc" id="math_8h_html_afa752f47ff073d8639c631f079670788"><div class="ttname"><a href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a></div><div class="ttdeci">double log(double)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a18f9d1fe8fdf314eace9559ea4a51d9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_get_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *&#160;</td>
          <td class="paramname"><em>match</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>nla_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>nla_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_nla_get_match - parses Netlink attributes into a flow key and mask. In case the 'mask' is NULL, the flow is treated as exact match flow. Otherwise, it is treated as a wildcarded flow, except the mask does not include any don't care bit. : receives the extracted flow match information. : Netlink attribute holding nested OVS_KEY_ATTR_* Netlink attribute sequence. The fields should of the packet that triggered the creation of this flow. : Optional. Netlink attribute holding nested OVS_KEY_ATTR_* Netlink attribute specifies the mask field of the wildcarded flow. : Boolean to allow kernel error logging. Normally true, but when probing for feature compatibility this should be passed in as false to suppress unnecessary error logging. </p>
<div class="fragment"><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;{</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *<a class="code" href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a>[<a class="code" href="openvswitch_8h.html#a2a2adc6c47c38f0e7889580602ccbe22">OVS_KEY_ATTR_MAX</a> + 1];</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *encap;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *newmask = NULL;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="Types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a> key_attrs = 0;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="Types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a> mask_attrs = 0;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordtype">bool</span> encap_valid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    err = <a class="code" href="flow__netlink_8c.html#aafe0de49242cd0276fd5ced0fd81514f">parse_flow_nlattrs</a>(nla_key, a, &amp;key_attrs, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> ((key_attrs &amp; (1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a75127b87d8a2f36ae2c9aae2cf42cd56">OVS_KEY_ATTR_ETHERNET</a>)) &amp;&amp;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        (key_attrs &amp; (1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864aaccef1ecf941c78c70cf8a6a3374235a">OVS_KEY_ATTR_ETHERTYPE</a>)) &amp;&amp;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        (<a class="code" href="datapath_2linux_2compat_2include_2net_2netlink_8h.html#a5a9bc877c8fdbf9b3f2f85536aabcae0">nla_get_be16</a>(a[<a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864aaccef1ecf941c78c70cf8a6a3374235a">OVS_KEY_ATTR_ETHERTYPE</a>]) == <a class="code" href="Util_8h.html#a3938af6818d379449e4d075ed2a5edc4">htons</a>(ETH_P_8021Q))) {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="Types_8h.html#ac928daf2b160eb7789f510e5b1991b4c">__be16</a> <a class="code" href="datapath_2flow_8h.html#a4528fe4db43b403cd959b50285d71b0c">tci</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        <span class="keywordflow">if</span> (!((key_attrs &amp; (1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864ae513231d4612ed9b19551a7e70648005">OVS_KEY_ATTR_VLAN</a>)) &amp;&amp;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;              (key_attrs &amp; (1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a>)))) {</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <a class="code" href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a>(<a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>, <span class="stringliteral">&quot;Invalid Vlan frame.&quot;</span>);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        key_attrs &amp;= ~(1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864aaccef1ecf941c78c70cf8a6a3374235a">OVS_KEY_ATTR_ETHERTYPE</a>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        tci = <a class="code" href="datapath_2linux_2compat_2include_2net_2netlink_8h.html#a5a9bc877c8fdbf9b3f2f85536aabcae0">nla_get_be16</a>(a[<a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864ae513231d4612ed9b19551a7e70648005">OVS_KEY_ATTR_VLAN</a>]);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        encap = a[<a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a>];</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        key_attrs &amp;= ~(1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        encap_valid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">if</span> (tci &amp; <a class="code" href="Util_8h.html#a3938af6818d379449e4d075ed2a5edc4">htons</a>(<a class="code" href="if__vlan_8h.html#ac8bf15be3fd1a3a63a2452fa05a83217">VLAN_TAG_PRESENT</a>)) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            err = <a class="code" href="flow__netlink_8c.html#aafe0de49242cd0276fd5ced0fd81514f">parse_flow_nlattrs</a>(encap, a, &amp;key_attrs, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;            <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!tci) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            <span class="comment">/* Corner case for truncated 802.1Q header. */</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structnlattr.html#ae611434c05c03a6651e6500195301233">nla_len</a>(encap)) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                <a class="code" href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a>(<a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>, <span class="stringliteral">&quot;Truncated 802.1Q header has non-zero encap attribute.&quot;</span>);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            }</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <a class="code" href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a>(<a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>, <span class="stringliteral">&quot;Encap attr is set for non-VLAN frame&quot;</span>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">return</span>  -EINVAL;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    }</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    err = <a class="code" href="flow__netlink_8c.html#a7e2f54c332f7bdac73756972da69ad53">ovs_key_from_nlattrs</a>(match, key_attrs, a, <span class="keyword">false</span>, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keywordflow">if</span> (match-&gt;<a class="code" href="structsw__flow__match.html#a4536aff731528d6def7d386435c203d1">mask</a>) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">if</span> (!nla_mask) {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            <span class="comment">/* Create an exact match mask. We need to set to 0xff</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">             * all the &#39;match-&gt;mask&#39; fields that have been touched</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">             * in &#39;match-&gt;key&#39;. We cannot simply memset</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="comment">             * &#39;match-&gt;mask&#39;, because padding bytes and fields not</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="comment">             * specified in &#39;match-&gt;key&#39; should be left to 0.</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="comment">             * Instead, we use a stream of netlink attributes,</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment">             * copied from &#39;key&#39; and set to 0xff.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">             * ovs_key_from_nlattrs() will take care of filling</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">             * &#39;match-&gt;mask&#39; appropriately.</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            newmask = kmemdup(nla_key,</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                      nla_total_size(<a class="code" href="structnlattr.html#ae611434c05c03a6651e6500195301233">nla_len</a>(nla_key)),</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                      GFP_KERNEL);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordflow">if</span> (!newmask)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            <a class="code" href="flow__netlink_8c.html#aa862995e0363dbb698ee51eb1be8a40c">mask_set_nlattr</a>(newmask, 0xff);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="comment">/* The userspace does not send tunnel attributes that</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">             * are 0, but we should not wildcard them nonetheless.</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            <span class="keywordflow">if</span> (match-&gt;<a class="code" href="structsw__flow__match.html#a4030aac38105b63798ea11f43f506372">key</a>-&gt;<a class="code" href="structsw__flow__key.html#a2f87b7690c0cc2797f1f4347589472c3">tun_key</a>.<a class="code" href="structovs__key__ipv4__tunnel.html#ae443d381a97f53bbc4139fe36c0aae30">ipv4_dst</a>)</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                <a class="code" href="flow__netlink_8c.html#a428fac9f6cc49614e07de128b9e4869f">SW_FLOW_KEY_MEMSET_FIELD</a>(match, <a class="code" href="datapath_2flow_8h.html#a904e9497acde49a1992636f77597c5c7">tun_key</a>,</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                             0xff, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            nla_mask = newmask;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        err = <a class="code" href="flow__netlink_8c.html#a4a090c5659903b6b8d125ab7598ad1a6">parse_flow_mask_nlattrs</a>(nla_mask, a, &amp;mask_attrs, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <span class="keywordflow">goto</span> free_newmask;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        <span class="comment">/* Always match on tci. */</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <a class="code" href="flow__netlink_8c.html#a7cb040299f14f8ff8806dd868c321d7b">SW_FLOW_KEY_PUT</a>(match, <a class="code" href="datapath_2flow_8h.html#a1679a3c93391059deba58179f52c86a6">eth</a>.tci, <a class="code" href="Util_8h.html#a3938af6818d379449e4d075ed2a5edc4">htons</a>(0xffff), <span class="keyword">true</span>);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="keywordflow">if</span> (mask_attrs &amp; 1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a>) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            <a class="code" href="Types_8h.html#ac928daf2b160eb7789f510e5b1991b4c">__be16</a> eth_type = 0;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <a class="code" href="Types_8h.html#ac928daf2b160eb7789f510e5b1991b4c">__be16</a> tci = 0;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="keywordflow">if</span> (!encap_valid) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                <a class="code" href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a>(<a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>, <span class="stringliteral">&quot;Encap mask attribute is set for non-VLAN frame.&quot;</span>);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                err = -EINVAL;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                <span class="keywordflow">goto</span> free_newmask;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            mask_attrs &amp;= ~(1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a>);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            <span class="keywordflow">if</span> (a[OVS_KEY_ATTR_ETHERTYPE])</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                eth_type = <a class="code" href="datapath_2linux_2compat_2include_2net_2netlink_8h.html#a5a9bc877c8fdbf9b3f2f85536aabcae0">nla_get_be16</a>(a[OVS_KEY_ATTR_ETHERTYPE]);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordflow">if</span> (eth_type == <a class="code" href="Util_8h.html#a3938af6818d379449e4d075ed2a5edc4">htons</a>(0xffff)) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                mask_attrs &amp;= ~(1ULL &lt;&lt; <a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864aaccef1ecf941c78c70cf8a6a3374235a">OVS_KEY_ATTR_ETHERTYPE</a>);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                encap = a[<a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a>];</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                err = <a class="code" href="flow__netlink_8c.html#a4a090c5659903b6b8d125ab7598ad1a6">parse_flow_mask_nlattrs</a>(encap, a,</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                                  &amp;mask_attrs, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                    <span class="keywordflow">goto</span> free_newmask;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                <a class="code" href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a>(<a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>, <span class="stringliteral">&quot;VLAN frames must have an exact match on the TPID (mask=%x).&quot;</span>,</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                      <a class="code" href="Util_8h.html#a827f490ed828316d1d8f92e5c4f14cdc">ntohs</a>(eth_type));</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                err = -EINVAL;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                <span class="keywordflow">goto</span> free_newmask;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="keywordflow">if</span> (a[<a class="code" href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864ae513231d4612ed9b19551a7e70648005">OVS_KEY_ATTR_VLAN</a>])</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                tci = <a class="code" href="datapath_2linux_2compat_2include_2net_2netlink_8h.html#a5a9bc877c8fdbf9b3f2f85536aabcae0">nla_get_be16</a>(a[OVS_KEY_ATTR_VLAN]);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="keywordflow">if</span> (!(tci &amp; <a class="code" href="Util_8h.html#a3938af6818d379449e4d075ed2a5edc4">htons</a>(<a class="code" href="if__vlan_8h.html#ac8bf15be3fd1a3a63a2452fa05a83217">VLAN_TAG_PRESENT</a>))) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                <a class="code" href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a>(<a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>, <span class="stringliteral">&quot;VLAN tag present bit must have an exact match (tci_mask=%x).&quot;</span>,</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                      <a class="code" href="Util_8h.html#a827f490ed828316d1d8f92e5c4f14cdc">ntohs</a>(tci));</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                err = -EINVAL;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                <span class="keywordflow">goto</span> free_newmask;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;            }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        err = <a class="code" href="flow__netlink_8c.html#a7e2f54c332f7bdac73756972da69ad53">ovs_key_from_nlattrs</a>(match, mask_attrs, a, <span class="keyword">true</span>, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            <span class="keywordflow">goto</span> free_newmask;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="flow__netlink_8c.html#ab4be6b01938d3a8f5a14bc787cb2b0b2">match_validate</a>(match, key_attrs, mask_attrs, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>))</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        err = -EINVAL;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;free_newmask:</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    kfree(newmask);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;}</div>
<div class="ttc" id="structnlattr_html_ae611434c05c03a6651e6500195301233"><div class="ttname"><a href="structnlattr.html#ae611434c05c03a6651e6500195301233">nlattr::nla_len</a></div><div class="ttdeci">uint16_t nla_len</div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:96</div></div>
<div class="ttc" id="flow__netlink_8c_html_a7e2f54c332f7bdac73756972da69ad53"><div class="ttname"><a href="flow__netlink_8c.html#a7e2f54c332f7bdac73756972da69ad53">ovs_key_from_nlattrs</a></div><div class="ttdeci">static int ovs_key_from_nlattrs(struct sw_flow_match *match, u64 attrs, const struct nlattr **a, bool is_mask, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:772</div></div>
<div class="ttc" id="Util_8h_html_a827f490ed828316d1d8f92e5c4f14cdc"><div class="ttname"><a href="Util_8h.html#a827f490ed828316d1d8f92e5c4f14cdc">ntohs</a></div><div class="ttdeci">#define ntohs(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:74</div></div>
<div class="ttc" id="openvswitch_8h_html_a6a279bc7098c9bc819c12355c9e07864aaccef1ecf941c78c70cf8a6a3374235a"><div class="ttname"><a href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864aaccef1ecf941c78c70cf8a6a3374235a">OVS_KEY_ATTR_ETHERTYPE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:327</div></div>
<div class="ttc" id="Types_8h_html_ac928daf2b160eb7789f510e5b1991b4c"><div class="ttname"><a href="Types_8h.html#ac928daf2b160eb7789f510e5b1991b4c">__be16</a></div><div class="ttdeci">uint16 __be16</div><div class="ttdef"><b>Definition:</b> Types.h:29</div></div>
<div class="ttc" id="flow__netlink_8c_html_a4a090c5659903b6b8d125ab7598ad1a6"><div class="ttname"><a href="flow__netlink_8c.html#a4a090c5659903b6b8d125ab7598ad1a6">parse_flow_mask_nlattrs</a></div><div class="ttdeci">static int parse_flow_mask_nlattrs(const struct nlattr *attr, const struct nlattr *a[], u64 *attrsp, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:403</div></div>
<div class="ttc" id="datapath_8h_html_a54648b7a2c9b192074cd95eb945433f0"><div class="ttname"><a href="datapath_8h.html#a54648b7a2c9b192074cd95eb945433f0">OVS_NLERR</a></div><div class="ttdeci">#define OVS_NLERR(logging_allowed, fmt,...)</div><div class="ttdef"><b>Definition:</b> datapath.h:208</div></div>
<div class="ttc" id="openvswitch_8h_html_a6a279bc7098c9bc819c12355c9e07864ae513231d4612ed9b19551a7e70648005"><div class="ttname"><a href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864ae513231d4612ed9b19551a7e70648005">OVS_KEY_ATTR_VLAN</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:326</div></div>
<div class="ttc" id="flow__netlink_8c_html_a428fac9f6cc49614e07de128b9e4869f"><div class="ttname"><a href="flow__netlink_8c.html#a428fac9f6cc49614e07de128b9e4869f">SW_FLOW_KEY_MEMSET_FIELD</a></div><div class="ttdeci">#define SW_FLOW_KEY_MEMSET_FIELD(match, field, value, is_mask)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:109</div></div>
<div class="ttc" id="datapath_2linux_2compat_2include_2net_2netlink_8h_html_a5a9bc877c8fdbf9b3f2f85536aabcae0"><div class="ttname"><a href="datapath_2linux_2compat_2include_2net_2netlink_8h.html#a5a9bc877c8fdbf9b3f2f85536aabcae0">nla_get_be16</a></div><div class="ttdeci">static __be16 nla_get_be16(const struct nlattr *nla)</div><div class="ttdef"><b>Definition:</b> netlink.h:12</div></div>
<div class="ttc" id="test-atomic_8c_html_a0a0390ed59a97feb6783f87db4086a7c"><div class="ttname"><a href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a></div><div class="ttdeci">static uint32_t a</div><div class="ttdef"><b>Definition:</b> test-atomic.c:175</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_ae443d381a97f53bbc4139fe36c0aae30"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#ae443d381a97f53bbc4139fe36c0aae30">ovs_key_ipv4_tunnel::ipv4_dst</a></div><div class="ttdeci">__be32 ipv4_dst</div><div class="ttdef"><b>Definition:</b> flow.h:46</div></div>
<div class="ttc" id="flow__netlink_8c_html_aafe0de49242cd0276fd5ced0fd81514f"><div class="ttname"><a href="flow__netlink_8c.html#aafe0de49242cd0276fd5ced0fd81514f">parse_flow_nlattrs</a></div><div class="ttdeci">static int parse_flow_nlattrs(const struct nlattr *attr, const struct nlattr *a[], u64 *attrsp, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:410</div></div>
<div class="ttc" id="openvswitch_8h_html_a6a279bc7098c9bc819c12355c9e07864a75127b87d8a2f36ae2c9aae2cf42cd56"><div class="ttname"><a href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a75127b87d8a2f36ae2c9aae2cf42cd56">OVS_KEY_ATTR_ETHERNET</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:325</div></div>
<div class="ttc" id="openvswitch_8h_html_a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75"><div class="ttname"><a href="openvswitch_8h.html#a6a279bc7098c9bc819c12355c9e07864a869b60116d7d6ac79bfad91cc808cf75">OVS_KEY_ATTR_ENCAP</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:322</div></div>
<div class="ttc" id="if__vlan_8h_html_ac8bf15be3fd1a3a63a2452fa05a83217"><div class="ttname"><a href="if__vlan_8h.html#ac8bf15be3fd1a3a63a2452fa05a83217">VLAN_TAG_PRESENT</a></div><div class="ttdeci">#define VLAN_TAG_PRESENT</div><div class="ttdef"><b>Definition:</b> if_vlan.h:108</div></div>
<div class="ttc" id="structnlattr_html"><div class="ttname"><a href="structnlattr.html">nlattr</a></div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:95</div></div>
<div class="ttc" id="datapath_2flow_8h_html_a1679a3c93391059deba58179f52c86a6"><div class="ttname"><a href="datapath_2flow_8h.html#a1679a3c93391059deba58179f52c86a6">eth</a></div><div class="ttdeci">struct @16 eth</div></div>
<div class="ttc" id="test-rstp_8c_html_aeaf1410528b66f4fd6991826e49eabc2"><div class="ttname"><a href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a></div><div class="ttdeci">static OVS_NO_RETURN void err(const char *message,...) OVS_PRINTF_FORMAT(1</div><div class="ttdef"><b>Definition:</b> test-rstp.c:344</div></div>
<div class="ttc" id="structsw__flow__match_html_a4030aac38105b63798ea11f43f506372"><div class="ttname"><a href="structsw__flow__match.html#a4030aac38105b63798ea11f43f506372">sw_flow_match::key</a></div><div class="ttdeci">struct sw_flow_key * key</div><div class="ttdef"><b>Definition:</b> flow.h:194</div></div>
<div class="ttc" id="flow__netlink_8c_html_ab4be6b01938d3a8f5a14bc787cb2b0b2"><div class="ttname"><a href="flow__netlink_8c.html#ab4be6b01938d3a8f5a14bc787cb2b0b2">match_validate</a></div><div class="ttdeci">static bool match_validate(const struct sw_flow_match *match, u64 key_attrs, u64 mask_attrs, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:121</div></div>
<div class="ttc" id="openvswitch_8h_html_a2a2adc6c47c38f0e7889580602ccbe22"><div class="ttname"><a href="openvswitch_8h.html#a2a2adc6c47c38f0e7889580602ccbe22">OVS_KEY_ATTR_MAX</a></div><div class="ttdeci">#define OVS_KEY_ATTR_MAX</div><div class="ttdef"><b>Definition:</b> openvswitch.h:354</div></div>
<div class="ttc" id="structsw__flow__key_html_a2f87b7690c0cc2797f1f4347589472c3"><div class="ttname"><a href="structsw__flow__key.html#a2f87b7690c0cc2797f1f4347589472c3">sw_flow_key::tun_key</a></div><div class="ttdeci">struct ovs_key_ipv4_tunnel tun_key</div><div class="ttdef"><b>Definition:</b> flow.h:125</div></div>
<div class="ttc" id="structsw__flow__match_html_a4536aff731528d6def7d386435c203d1"><div class="ttname"><a href="structsw__flow__match.html#a4536aff731528d6def7d386435c203d1">sw_flow_match::mask</a></div><div class="ttdeci">struct sw_flow_mask * mask</div><div class="ttdef"><b>Definition:</b> flow.h:196</div></div>
<div class="ttc" id="datapath_2flow_8h_html_a904e9497acde49a1992636f77597c5c7"><div class="ttname"><a href="datapath_2flow_8h.html#a904e9497acde49a1992636f77597c5c7">tun_key</a></div><div class="ttdeci">struct ovs_key_ipv4_tunnel tun_key</div><div class="ttdef"><b>Definition:</b> flow.h:105</div></div>
<div class="ttc" id="Types_8h_html_ad758b7a5c3f18ed79d2fcd23d9f16357"><div class="ttname"><a href="Types_8h.html#ad758b7a5c3f18ed79d2fcd23d9f16357">u64</a></div><div class="ttdeci">unsigned long long u64</div><div class="ttdef"><b>Definition:</b> Types.h:22</div></div>
<div class="ttc" id="Util_8h_html_a3938af6818d379449e4d075ed2a5edc4"><div class="ttname"><a href="Util_8h.html#a3938af6818d379449e4d075ed2a5edc4">htons</a></div><div class="ttdeci">#define htons(_x)</div><div class="ttdef"><b>Definition:</b> Util.h:73</div></div>
<div class="ttc" id="flow__netlink_8c_html_a7cb040299f14f8ff8806dd868c321d7b"><div class="ttname"><a href="flow__netlink_8c.html#a7cb040299f14f8ff8806dd868c321d7b">SW_FLOW_KEY_PUT</a></div><div class="ttdeci">#define SW_FLOW_KEY_PUT(match, field, value, is_mask)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:86</div></div>
<div class="ttc" id="datapath_2flow_8h_html_a4528fe4db43b403cd959b50285d71b0c"><div class="ttname"><a href="datapath_2flow_8h.html#a4528fe4db43b403cd959b50285d71b0c">tci</a></div><div class="ttdeci">__be16 tci</div><div class="ttdef"><b>Definition:</b> flow.h:116</div></div>
<div class="ttc" id="math_8h_html_afa752f47ff073d8639c631f079670788"><div class="ttname"><a href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a></div><div class="ttdeci">double log(double)</div></div>
<div class="ttc" id="flow__netlink_8c_html_aa862995e0363dbb698ee51eb1be8a40c"><div class="ttname"><a href="flow__netlink_8c.html#aa862995e0363dbb698ee51eb1be8a40c">mask_set_nlattr</a></div><div class="ttdeci">static void mask_set_nlattr(struct nlattr *attr, u8 val)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1021</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a97ac3692b5df3f22593f37746fe5f428"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> ovs_nla_get_ufid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__id.html">sw_flow_id</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;{</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    sfid-&gt;ufid_len = <a class="code" href="flow__netlink_8c.html#a5189e471b5832c9371b45c5e58ca5b41">get_ufid_len</a>(attr, <a class="code" href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a>);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (sfid-&gt;ufid_len)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        memcpy(sfid-&gt;ufid, nla_data(attr), sfid-&gt;ufid_len);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">return</span> sfid-&gt;ufid_len;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_a5189e471b5832c9371b45c5e58ca5b41"><div class="ttname"><a href="flow__netlink_8c.html#a5189e471b5832c9371b45c5e58ca5b41">get_ufid_len</a></div><div class="ttdeci">static size_t get_ufid_len(const struct nlattr *attr, bool log)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1184</div></div>
<div class="ttc" id="math_8h_html_afa752f47ff073d8639c631f079670788"><div class="ttname"><a href="math_8h.html#afa752f47ff073d8639c631f079670788">log</a></div><div class="ttdeci">double log(double)</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a415cb727697a02d62b8ff40795337d40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="Types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> ovs_nla_get_ufid_flags </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>attr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;{</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="keywordflow">return</span> attr ? nla_get_u32(attr) : 0;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a923304ee69be1cfa52197b0f73c29e49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_put_actions </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structnlattr.html">nlattr</a> *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;{</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *<a class="code" href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a>;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <span class="keywordtype">int</span> rem, <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    nla_for_each_attr(a, attr, len, rem) {</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="datapath_2flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a> = <a class="code" href="structnlattr.html#afdd944ca46c1c908a88f05f6bc3175be">nla_type</a>(a);</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="keywordflow">switch</span> (type) {</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaff937deb7687d0dd4b073c27aed9c8be">OVS_ACTION_ATTR_SET</a>:</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;            err = <a class="code" href="flow__netlink_8c.html#af38f12c35d382eb717bb6e5b4fba2309">set_action_to_attr</a>(a, skb);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;            <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordflow">case</span> OVS_ACTION_ATTR_SET_TO_MASKED:</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            err = <a class="code" href="flow__netlink_8c.html#a14e859cc22996f05850ca737daf2ee09">masked_set_action_to_set_action_attr</a>(a, skb);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaddc6f70b9e8501e5bb90548373faf734">OVS_ACTION_ATTR_SAMPLE</a>:</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;            err = <a class="code" href="flow__netlink_8c.html#a92621d7eaed9e960f5e5d7b72e501db0">sample_action_to_attr</a>(a, skb);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            <span class="keywordflow">if</span> (nla_put(skb, type, <a class="code" href="structnlattr.html#ae611434c05c03a6651e6500195301233">nla_len</a>(a), nla_data(a)))</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                <span class="keywordflow">return</span> -EMSGSIZE;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        }</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    }</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;}</div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eaff937deb7687d0dd4b073c27aed9c8be"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaff937deb7687d0dd4b073c27aed9c8be">OVS_ACTION_ATTR_SET</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:693</div></div>
<div class="ttc" id="structnlattr_html_ae611434c05c03a6651e6500195301233"><div class="ttname"><a href="structnlattr.html#ae611434c05c03a6651e6500195301233">nlattr::nla_len</a></div><div class="ttdeci">uint16_t nla_len</div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:96</div></div>
<div class="ttc" id="structnlattr_html_afdd944ca46c1c908a88f05f6bc3175be"><div class="ttname"><a href="structnlattr.html#afdd944ca46c1c908a88f05f6bc3175be">nlattr::nla_type</a></div><div class="ttdeci">uint16_t nla_type</div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:97</div></div>
<div class="ttc" id="openvswitch_8h_html_affc4a4d29437ad03a23444243e2db26eaddc6f70b9e8501e5bb90548373faf734"><div class="ttname"><a href="openvswitch_8h.html#affc4a4d29437ad03a23444243e2db26eaddc6f70b9e8501e5bb90548373faf734">OVS_ACTION_ATTR_SAMPLE</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:696</div></div>
<div class="ttc" id="test-atomic_8c_html_a0a0390ed59a97feb6783f87db4086a7c"><div class="ttname"><a href="test-atomic_8c.html#a0a0390ed59a97feb6783f87db4086a7c">a</a></div><div class="ttdeci">static uint32_t a</div><div class="ttdef"><b>Definition:</b> test-atomic.c:175</div></div>
<div class="ttc" id="flow__netlink_8c_html_af38f12c35d382eb717bb6e5b4fba2309"><div class="ttname"><a href="flow__netlink_8c.html#af38f12c35d382eb717bb6e5b4fba2309">set_action_to_attr</a></div><div class="ttdeci">static int set_action_to_attr(const struct nlattr *a, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:2233</div></div>
<div class="ttc" id="structnlattr_html"><div class="ttname"><a href="structnlattr.html">nlattr</a></div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:95</div></div>
<div class="ttc" id="test-rstp_8c_html_aeaf1410528b66f4fd6991826e49eabc2"><div class="ttname"><a href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a></div><div class="ttdeci">static OVS_NO_RETURN void err(const char *message,...) OVS_PRINTF_FORMAT(1</div><div class="ttdef"><b>Definition:</b> test-rstp.c:344</div></div>
<div class="ttc" id="flow__netlink_8c_html_a92621d7eaed9e960f5e5d7b72e501db0"><div class="ttname"><a href="flow__netlink_8c.html#a92621d7eaed9e960f5e5d7b72e501db0">sample_action_to_attr</a></div><div class="ttdeci">static int sample_action_to_attr(const struct nlattr *attr, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:2197</div></div>
<div class="ttc" id="datapath_2flow_8h_html_ab22aaab04f806700def00f32823fcb9e"><div class="ttname"><a href="datapath_2flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a></div><div class="ttdeci">__be16 type</div><div class="ttdef"><b>Definition:</b> flow.h:117</div></div>
<div class="ttc" id="flow__netlink_8c_html_a14e859cc22996f05850ca737daf2ee09"><div class="ttname"><a href="flow__netlink_8c.html#a14e859cc22996f05850ca737daf2ee09">masked_set_action_to_set_action_attr</a></div><div class="ttdeci">static int masked_set_action_to_set_action_attr(const struct nlattr *a, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:2266</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ee4389059beab6dfbf2ce436b0e5483"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_put_egress_tunnel_key </td>
          <td>(</td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;{</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__netlink_8c.html#ac7f453fb68977c7a24d7af50f18b43db">__ipv4_tun_to_nlattr</a>(skb, &amp;egress_tun_info-&gt;tunnel,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                    egress_tun_info-&gt;options,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                    egress_tun_info-&gt;options_len);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_ac7f453fb68977c7a24d7af50f18b43db"><div class="ttname"><a href="flow__netlink_8c.html#ac7f453fb68977c7a24d7af50f18b43db">__ipv4_tun_to_nlattr</a></div><div class="ttdeci">static int __ipv4_tun_to_nlattr(struct sk_buff *skb, const struct ovs_key_ipv4_tunnel *output, const void *tun_opts, int swkey_tun_opts_len)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:643</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a636f7d3cbe8656ceda87373110a4abc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_put_identifier </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname"><em>flow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;{</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="datapath_2flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a>(&amp;flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>))</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        <span class="keywordflow">return</span> nla_put(skb, <a class="code" href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a0d2822e9d4b6fa37c54dd8b693c2b465">OVS_FLOW_ATTR_UFID</a>, flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>.<a class="code" href="structsw__flow__id.html#a7cfead96fedf295e55d6a17857adfbf5">ufid_len</a>,</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                   flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>.<a class="code" href="structsw__flow__id.html#a22ce2b1fed980149931fbccb05750f3e">ufid</a>);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__netlink_8c.html#a845412e2f8f2bcb48df005e857474fcb">ovs_nla_put_key</a>(flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>.<a class="code" href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">unmasked_key</a>, flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>.<a class="code" href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">unmasked_key</a>,</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                   <a class="code" href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a0d310e7624962a1b4c5212459995a5c9">OVS_FLOW_ATTR_KEY</a>, <span class="keyword">false</span>, skb);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div>
<div class="ttc" id="openvswitch_8h_html_a57b731cb45ac4bf32234fbf071e9c554a0d2822e9d4b6fa37c54dd8b693c2b465"><div class="ttname"><a href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a0d2822e9d4b6fa37c54dd8b693c2b465">OVS_FLOW_ATTR_UFID</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:512</div></div>
<div class="ttc" id="flow__netlink_8c_html_a845412e2f8f2bcb48df005e857474fcb"><div class="ttname"><a href="flow__netlink_8c.html#a845412e2f8f2bcb48df005e857474fcb">ovs_nla_put_key</a></div><div class="ttdeci">int ovs_nla_put_key(const struct sw_flow_key *swkey, const struct sw_flow_key *output, int attr, bool is_mask, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1489</div></div>
<div class="ttc" id="openvswitch_8h_html_a57b731cb45ac4bf32234fbf071e9c554a0d310e7624962a1b4c5212459995a5c9"><div class="ttname"><a href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a0d310e7624962a1b4c5212459995a5c9">OVS_FLOW_ATTR_KEY</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:503</div></div>
<div class="ttc" id="structsw__flow__id_html_a7cfead96fedf295e55d6a17857adfbf5"><div class="ttname"><a href="structsw__flow__id.html#a7cfead96fedf295e55d6a17857adfbf5">sw_flow_id::ufid_len</a></div><div class="ttdeci">u32 ufid_len</div><div class="ttdef"><b>Definition:</b> flow.h:202</div></div>
<div class="ttc" id="datapath_2flow_8h_html_a995966854ceb0b5a72ff027c12ccf426"><div class="ttname"><a href="datapath_2flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a></div><div class="ttdeci">static bool ovs_identifier_is_ufid(const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow.h:257</div></div>
<div class="ttc" id="structsw__flow_html_a6e6645eec909d54871675be30000c0b9"><div class="ttname"><a href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">sw_flow::id</a></div><div class="ttdeci">struct sw_flow_id id</div><div class="ttdef"><b>Definition:</b> flow.h:233</div></div>
<div class="ttc" id="structsw__flow__id_html_a22ce2b1fed980149931fbccb05750f3e"><div class="ttname"><a href="structsw__flow__id.html#a22ce2b1fed980149931fbccb05750f3e">sw_flow_id::ufid</a></div><div class="ttdeci">u32 ufid[MAX_UFID_LENGTH/4]</div><div class="ttdef"><b>Definition:</b> flow.h:204</div></div>
<div class="ttc" id="structsw__flow__id_html_a5d62dce79569cb8c25a43f4039e5df3c"><div class="ttname"><a href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">sw_flow_id::unmasked_key</a></div><div class="ttdeci">struct sw_flow_key * unmasked_key</div><div class="ttdef"><b>Definition:</b> flow.h:205</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab52f962a5af3e769831e94b28a56171f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_put_key </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>is_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;{</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keyword">struct </span><a class="code" href="structnlattr.html">nlattr</a> *nla;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    nla = nla_nest_start(skb, attr);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">if</span> (!nla)</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="keywordflow">return</span> -EMSGSIZE;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    err = <a class="code" href="flow__netlink_8c.html#a469e9434d0bedd721b2e31a106799335">__ovs_nla_put_key</a>(swkey, output, is_mask, skb);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a>;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    nla_nest_end(skb, nla);</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_a469e9434d0bedd721b2e31a106799335"><div class="ttname"><a href="flow__netlink_8c.html#a469e9434d0bedd721b2e31a106799335">__ovs_nla_put_key</a></div><div class="ttdeci">static int __ovs_nla_put_key(const struct sw_flow_key *swkey, const struct sw_flow_key *output, bool is_mask, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1274</div></div>
<div class="ttc" id="structnlattr_html"><div class="ttname"><a href="structnlattr.html">nlattr</a></div><div class="ttdef"><b>Definition:</b> netlink-protocol.h:95</div></div>
<div class="ttc" id="test-rstp_8c_html_aeaf1410528b66f4fd6991826e49eabc2"><div class="ttname"><a href="test-rstp_8c.html#aeaf1410528b66f4fd6991826e49eabc2">err</a></div><div class="ttdeci">static OVS_NO_RETURN void err(const char *message,...) OVS_PRINTF_FORMAT(1</div><div class="ttdef"><b>Definition:</b> test-rstp.c:344</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5ab12e938f8564945464a9e110eace3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_put_mask </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname"><em>flow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;{</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__netlink_8c.html#a845412e2f8f2bcb48df005e857474fcb">ovs_nla_put_key</a>(&amp;flow-&gt;<a class="code" href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">key</a>, &amp;flow-&gt;<a class="code" href="structsw__flow.html#a89c162e340693d0bb4977737e2b68c22">mask</a>-&gt;<a class="code" href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">key</a>,</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                <a class="code" href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a355a203b089e115abb28ea003dc5822c">OVS_FLOW_ATTR_MASK</a>, <span class="keyword">true</span>, skb);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;}</div>
<div class="ttc" id="openvswitch_8h_html_a57b731cb45ac4bf32234fbf071e9c554a355a203b089e115abb28ea003dc5822c"><div class="ttname"><a href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a355a203b089e115abb28ea003dc5822c">OVS_FLOW_ATTR_MASK</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:509</div></div>
<div class="ttc" id="flow__netlink_8c_html_a845412e2f8f2bcb48df005e857474fcb"><div class="ttname"><a href="flow__netlink_8c.html#a845412e2f8f2bcb48df005e857474fcb">ovs_nla_put_key</a></div><div class="ttdeci">int ovs_nla_put_key(const struct sw_flow_key *swkey, const struct sw_flow_key *output, int attr, bool is_mask, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1489</div></div>
<div class="ttc" id="structsw__flow__mask_html_a52db0284fdd4579a5f30dee0837a7485"><div class="ttname"><a href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">sw_flow_mask::key</a></div><div class="ttdeci">struct sw_flow_key key</div><div class="ttdef"><b>Definition:</b> flow.h:190</div></div>
<div class="ttc" id="structsw__flow_html_a14b83cbd65275bda4e97ae35500d26d8"><div class="ttname"><a href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">sw_flow::key</a></div><div class="ttdeci">struct sw_flow_key key</div><div class="ttdef"><b>Definition:</b> flow.h:232</div></div>
<div class="ttc" id="structsw__flow_html_a89c162e340693d0bb4977737e2b68c22"><div class="ttname"><a href="structsw__flow.html#a89c162e340693d0bb4977737e2b68c22">sw_flow::mask</a></div><div class="ttdeci">struct sw_flow_mask * mask</div><div class="ttdef"><b>Definition:</b> flow.h:234</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f6c3ab02b8e5d6296278dc9214500eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_nla_put_masked_key </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname"><em>flow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;{</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__netlink_8c.html#a845412e2f8f2bcb48df005e857474fcb">ovs_nla_put_key</a>(&amp;flow-&gt;<a class="code" href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">key</a>, &amp;flow-&gt;<a class="code" href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">key</a>,</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                <a class="code" href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a0d310e7624962a1b4c5212459995a5c9">OVS_FLOW_ATTR_KEY</a>, <span class="keyword">false</span>, skb);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;}</div>
<div class="ttc" id="flow__netlink_8c_html_a845412e2f8f2bcb48df005e857474fcb"><div class="ttname"><a href="flow__netlink_8c.html#a845412e2f8f2bcb48df005e857474fcb">ovs_nla_put_key</a></div><div class="ttdeci">int ovs_nla_put_key(const struct sw_flow_key *swkey, const struct sw_flow_key *output, int attr, bool is_mask, struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> flow_netlink.c:1489</div></div>
<div class="ttc" id="openvswitch_8h_html_a57b731cb45ac4bf32234fbf071e9c554a0d310e7624962a1b4c5212459995a5c9"><div class="ttname"><a href="openvswitch_8h.html#a57b731cb45ac4bf32234fbf071e9c554a0d310e7624962a1b4c5212459995a5c9">OVS_FLOW_ATTR_KEY</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:503</div></div>
<div class="ttc" id="structsw__flow_html_a14b83cbd65275bda4e97ae35500d26d8"><div class="ttname"><a href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">sw_flow::key</a></div><div class="ttdeci">struct sw_flow_key key</div><div class="ttdef"><b>Definition:</b> flow.h:232</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac920825ffe4fa75e7ca3c5e76ad4ec2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ovs_tun_key_attr_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">/* Whenever adding new OVS_TUNNEL_KEY_ FIELDS, we should consider</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">     * updating this function.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span>    nla_total_size(8)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_ID */</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        + nla_total_size(4)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_IPV4_SRC */</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        + nla_total_size(4)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_IPV4_DST */</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        + nla_total_size(1)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_TOS */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        + nla_total_size(1)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_TTL */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        + nla_total_size(0)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_DONT_FRAGMENT */</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        + nla_total_size(0)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_CSUM */</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        + nla_total_size(0)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_OAM */</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        + nla_total_size(256)  <span class="comment">/* OVS_TUNNEL_KEY_ATTR_GENEVE_OPTS */</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">/* OVS_TUNNEL_KEY_ATTR_VXLAN_OPTS is mutually exclusive with</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">         * OVS_TUNNEL_KEY_ATTR_GENEVE_OPTS and covered by it.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        + nla_total_size(2)    <span class="comment">/* OVS_TUNNEL_KEY_ATTR_TP_SRC */</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        + nla_total_size(2);   <span class="comment">/* OVS_TUNNEL_KEY_ATTR_TP_DST */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_36ad3adc1aabcd87770fae1b41e5ac14.html">ovs</a></li><li class="navelem"><a class="el" href="dir_b037f62f7da50732bd5b5cbff7427f36.html">datapath</a></li><li class="navelem"><a class="el" href="flow__netlink_8h.html">flow_netlink.h</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:07:26 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
