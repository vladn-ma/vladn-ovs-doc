<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs all: /home/vladn/git/ovs/lib/daemon.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs all
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('daemon_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">daemon.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for daemon.h:</div>
<div class="dyncontent">
<div class="center"><img src="daemon_8h__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2lib_2daemon_8h" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2lib_2daemon_8h" id="_2home_2vladn_2git_2ovs_2lib_2daemon_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="daemon_8h__dep__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2lib_2daemon_8hdep" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2lib_2daemon_8hdep" id="_2home_2vladn_2git_2ovs_2lib_2daemon_8hdep">
<area shape="rect" id="node2" href="daemon-unix_8c.html" title="/home/vladn/git/ovs\l/lib/daemon&#45;unix.c" alt="" coords="5,102,141,143"/><area shape="rect" id="node3" href="daemon-windows_8c.html" title="/home/vladn/git/ovs\l/lib/daemon&#45;windows.c" alt="" coords="165,102,320,143"/><area shape="rect" id="node4" href="daemon_8c.html" title="/home/vladn/git/ovs\l/lib/daemon.c" alt="" coords="344,102,480,143"/><area shape="rect" id="node5" href="netdev-vport_8c.html" title="/home/vladn/git/ovs\l/lib/netdev&#45;vport.c" alt="" coords="504,102,640,143"/><area shape="rect" id="node6" href="ovn-controller_8c.html" title="/home/vladn/git/ovs\l/ovn/controller/ovn\l&#45;controller.c" alt="" coords="664,95,800,151"/><area shape="rect" id="node7" href="ovn-controller-vtep_8c.html" title="/home/vladn/git/ovs\l/ovn/controller&#45;vtep\l/ovn&#45;controller&#45;vtep.c" alt="" coords="824,95,968,151"/><area shape="rect" id="node8" href="ovn-northd_8c.html" title="/home/vladn/git/ovs\l/ovn/northd/ovn&#45;northd.c" alt="" coords="992,102,1155,143"/><area shape="rect" id="node9" href="ovsdb-client_8c.html" title="/home/vladn/git/ovs\l/ovsdb/ovsdb&#45;client.c" alt="" coords="1179,102,1325,143"/><area shape="rect" id="node10" href="ovsdb-server_8c.html" title="/home/vladn/git/ovs\l/ovsdb/ovsdb&#45;server.c" alt="" coords="1350,102,1501,143"/><area shape="rect" id="node11" href="test-jsonrpc_8c.html" title="/home/vladn/git/ovs\l/tests/test&#45;jsonrpc.c" alt="" coords="1525,102,1664,143"/><area shape="rect" id="node12" href="test-netflow_8c.html" title="/home/vladn/git/ovs\l/tests/test&#45;netflow.c" alt="" coords="1688,102,1827,143"/><area shape="rect" id="node13" href="test-sflow_8c.html" title="/home/vladn/git/ovs\l/tests/test&#45;sflow.c" alt="" coords="1851,102,1987,143"/><area shape="rect" id="node14" href="ovs-appctl_8c.html" title="/home/vladn/git/ovs\l/utilities/ovs&#45;appctl.c" alt="" coords="2010,102,2153,143"/><area shape="rect" id="node15" href="ovs-ofctl_8c.html" title="/home/vladn/git/ovs\l/utilities/ovs&#45;ofctl.c" alt="" coords="2176,102,2312,143"/><area shape="rect" id="node16" href="ovs-testcontroller_8c.html" title="/home/vladn/git/ovs\l/utilities/ovs&#45;testcontroller.c" alt="" coords="2337,102,2519,143"/><area shape="rect" id="node17" href="bridge_8c.html" title="/home/vladn/git/ovs\l/vswitchd/bridge.c" alt="" coords="2544,102,2680,143"/><area shape="rect" id="node18" href="ovs-vswitchd_8c.html" title="/home/vladn/git/ovs\l/vswitchd/ovs&#45;vswitchd.c" alt="" coords="2704,102,2875,143"/><area shape="rect" id="node19" href="system-stats_8c.html" title="/home/vladn/git/ovs\l/vswitchd/system&#45;stats.c" alt="" coords="2899,102,3069,143"/></map>
</div>
</div>
<p><a href="daemon_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5b8f945642954ec2c675dc0b33a1f318"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a5b8f945642954ec2c675dc0b33a1f318">DAEMON_OPTION_ENUMS</a></td></tr>
<tr class="separator:a5b8f945642954ec2c675dc0b33a1f318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a042fc14207c24694ca7c038569bca3b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a042fc14207c24694ca7c038569bca3b9">DAEMON_LONG_OPTIONS</a></td></tr>
<tr class="separator:a042fc14207c24694ca7c038569bca3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e66cd07ca098e9d093a0c68741c766f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a1e66cd07ca098e9d093a0c68741c766f">DAEMON_OPTION_HANDLERS</a></td></tr>
<tr class="separator:a1e66cd07ca098e9d093a0c68741c766f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab3d5883140d0ac1d4a1bd3cb191399e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#ab3d5883140d0ac1d4a1bd3cb191399e3">set_detach</a> (void)</td></tr>
<tr class="separator:ab3d5883140d0ac1d4a1bd3cb191399e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23c772a3a735e0649383feb24c3b3443"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a23c772a3a735e0649383feb24c3b3443">daemon_set_monitor</a> (void)</td></tr>
<tr class="separator:a23c772a3a735e0649383feb24c3b3443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa110ea1472e30234fc2b3c2ad326e335"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#aa110ea1472e30234fc2b3c2ad326e335">set_no_chdir</a> (void)</td></tr>
<tr class="separator:aa110ea1472e30234fc2b3c2ad326e335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49e5acb19b85868cecbdb0ac22d0d246"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a49e5acb19b85868cecbdb0ac22d0d246">ignore_existing_pidfile</a> (void)</td></tr>
<tr class="separator:a49e5acb19b85868cecbdb0ac22d0d246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90554d67958b41a9ec9817743c037aa7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="windefs_8h.html#a288e13e815d43b06e75819f8939524df">pid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a90554d67958b41a9ec9817743c037aa7">read_pidfile</a> (const char *name)</td></tr>
<tr class="separator:a90554d67958b41a9ec9817743c037aa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2480cbf30c2167088874a196bea81959"><td class="memItemLeft" align="right" valign="top"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a2480cbf30c2167088874a196bea81959">get_detach</a> (void)</td></tr>
<tr class="separator:a2480cbf30c2167088874a196bea81959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20b223586a0461300a63e1a3d789d21e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a20b223586a0461300a63e1a3d789d21e">daemon_save_fd</a> (int fd)</td></tr>
<tr class="separator:a20b223586a0461300a63e1a3d789d21e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29b0af1da2432bcc90721c0b62f4e660"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a29b0af1da2432bcc90721c0b62f4e660">daemonize</a> (void)</td></tr>
<tr class="separator:a29b0af1da2432bcc90721c0b62f4e660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a648d3584f7d715c461df4d79bf65e759"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a648d3584f7d715c461df4d79bf65e759">daemonize_start</a> (void)</td></tr>
<tr class="separator:a648d3584f7d715c461df4d79bf65e759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457e5943f59732fc5b7d3351d9c63289"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a457e5943f59732fc5b7d3351d9c63289">daemonize_complete</a> (void)</td></tr>
<tr class="separator:a457e5943f59732fc5b7d3351d9c63289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a243b3ce570240afa7f178fb9b062117b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a243b3ce570240afa7f178fb9b062117b">daemon_usage</a> (void)</td></tr>
<tr class="separator:a243b3ce570240afa7f178fb9b062117b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4ce8048ed3fe038a73a7eff47a383fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#ab4ce8048ed3fe038a73a7eff47a383fa">service_start</a> (int *argcp, char **argvp[])</td></tr>
<tr class="separator:ab4ce8048ed3fe038a73a7eff47a383fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad2483499b372400bcaf26922e6b623f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#aad2483499b372400bcaf26922e6b623f">service_stop</a> (void)</td></tr>
<tr class="separator:aad2483499b372400bcaf26922e6b623f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716979f098a16048652c62de7f5a7cd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a716979f098a16048652c62de7f5a7cd6">should_service_stop</a> (void)</td></tr>
<tr class="separator:a716979f098a16048652c62de7f5a7cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657ab4355eb0b54a448d42bef73f49d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a657ab4355eb0b54a448d42bef73f49d1">set_pidfile</a> (const char *name)</td></tr>
<tr class="separator:a657ab4355eb0b54a448d42bef73f49d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce817b57e63a7b46764dfbe191f2b02"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="daemon_8h.html#a8ce817b57e63a7b46764dfbe191f2b02">close_standard_fds</a> (void)</td></tr>
<tr class="separator:a8ce817b57e63a7b46764dfbe191f2b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a042fc14207c24694ca7c038569bca3b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DAEMON_LONG_OPTIONS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{<span class="stringliteral">&quot;detach&quot;</span>,            <a class="code" href="getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a>, NULL, OPT_DETACH},           \</div>
<div class="line">        {<span class="stringliteral">&quot;no-chdir&quot;</span>,          <a class="code" href="getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a>, NULL, OPT_NO_CHDIR},         \</div>
<div class="line">        {<span class="stringliteral">&quot;pidfile&quot;</span>,           <a class="code" href="getopt_8h.html#acca06c0a947656bd8b395bf1084ffb72">optional_argument</a>, NULL, OPT_PIDFILE},    \</div>
<div class="line">        {<span class="stringliteral">&quot;overwrite-pidfile&quot;</span>, <a class="code" href="getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a>, NULL, OPT_OVERWRITE_PIDFILE}, \</div>
<div class="line">        {<span class="stringliteral">&quot;monitor&quot;</span>,           <a class="code" href="getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a>, NULL, OPT_MONITOR}</div>
<div class="ttc" id="getopt_8h_html_a3bc1d5f667b5b4ca4b4abb685dc874ce"><div class="ttname"><a href="getopt_8h.html#a3bc1d5f667b5b4ca4b4abb685dc874ce">no_argument</a></div><div class="ttdeci">#define no_argument</div><div class="ttdef"><b>Definition:</b> getopt.h:41</div></div>
<div class="ttc" id="getopt_8h_html_acca06c0a947656bd8b395bf1084ffb72"><div class="ttname"><a href="getopt_8h.html#acca06c0a947656bd8b395bf1084ffb72">optional_argument</a></div><div class="ttdeci">#define optional_argument</div><div class="ttdef"><b>Definition:</b> getopt.h:43</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5b8f945642954ec2c675dc0b33a1f318"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DAEMON_OPTION_ENUMS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">OPT_DETACH,                                 \</div>
<div class="line">    OPT_NO_CHDIR,                               \</div>
<div class="line">    OPT_OVERWRITE_PIDFILE,                      \</div>
<div class="line">    OPT_PIDFILE,                                \</div>
<div class="line">    OPT_MONITOR</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1e66cd07ca098e9d093a0c68741c766f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DAEMON_OPTION_HANDLERS</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">case</span> OPT_DETACH:                        <a class="code" href="daemon_8h.html#ab3d5883140d0ac1d4a1bd3cb191399e3">\</a></div>
<div class="line"><a class="code" href="daemon_8h.html#ab3d5883140d0ac1d4a1bd3cb191399e3">            set_detach</a>();                       \</div>
<div class="line">            break;                              \</div>
<div class="line">                                                \</div>
<div class="line">        case OPT_NO_CHDIR:                      <a class="code" href="daemon_8h.html#aa110ea1472e30234fc2b3c2ad326e335">\</a></div>
<div class="line"><a class="code" href="daemon_8h.html#aa110ea1472e30234fc2b3c2ad326e335">            set_no_chdir</a>();                     \</div>
<div class="line">            break;                              \</div>
<div class="line">                                                \</div>
<div class="line">        case OPT_PIDFILE:                       <a class="code" href="daemon_8h.html#a657ab4355eb0b54a448d42bef73f49d1">\</a></div>
<div class="line"><a class="code" href="daemon_8h.html#a657ab4355eb0b54a448d42bef73f49d1">            set_pidfile</a>(<a class="code" href="getopt_8h.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a>);                \</div>
<div class="line">            break;                              \</div>
<div class="line">                                                \</div>
<div class="line">        case OPT_OVERWRITE_PIDFILE:             <a class="code" href="daemon_8h.html#a49e5acb19b85868cecbdb0ac22d0d246">\</a></div>
<div class="line"><a class="code" href="daemon_8h.html#a49e5acb19b85868cecbdb0ac22d0d246">            ignore_existing_pidfile</a>();          \</div>
<div class="line">            break;                              \</div>
<div class="line">                                                \</div>
<div class="line">        case OPT_MONITOR:                       <a class="code" href="daemon_8h.html#a23c772a3a735e0649383feb24c3b3443">\</a></div>
<div class="line"><a class="code" href="daemon_8h.html#a23c772a3a735e0649383feb24c3b3443">            daemon_set_monitor</a>();               \</div>
<div class="line">            break;</div>
<div class="ttc" id="daemon_8h_html_ab3d5883140d0ac1d4a1bd3cb191399e3"><div class="ttname"><a href="daemon_8h.html#ab3d5883140d0ac1d4a1bd3cb191399e3">set_detach</a></div><div class="ttdeci">void set_detach(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:101</div></div>
<div class="ttc" id="getopt_8h_html_adb50a0eab9fed92fc3bfc7dfa4f2c410"><div class="ttname"><a href="getopt_8h.html#adb50a0eab9fed92fc3bfc7dfa4f2c410">optarg</a></div><div class="ttdeci">char * optarg</div><div class="ttdef"><b>Definition:</b> getopt_long.c:44</div></div>
<div class="ttc" id="daemon_8h_html_a49e5acb19b85868cecbdb0ac22d0d246"><div class="ttname"><a href="daemon_8h.html#a49e5acb19b85868cecbdb0ac22d0d246">ignore_existing_pidfile</a></div><div class="ttdeci">void ignore_existing_pidfile(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:93</div></div>
<div class="ttc" id="daemon_8h_html_a657ab4355eb0b54a448d42bef73f49d1"><div class="ttname"><a href="daemon_8h.html#a657ab4355eb0b54a448d42bef73f49d1">set_pidfile</a></div><div class="ttdeci">void set_pidfile(const char *name)</div><div class="ttdef"><b>Definition:</b> daemon.c:55</div></div>
<div class="ttc" id="daemon_8h_html_a23c772a3a735e0649383feb24c3b3443"><div class="ttname"><a href="daemon_8h.html#a23c772a3a735e0649383feb24c3b3443">daemon_set_monitor</a></div><div class="ttdeci">void daemon_set_monitor(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:109</div></div>
<div class="ttc" id="daemon_8h_html_aa110ea1472e30234fc2b3c2ad326e335"><div class="ttname"><a href="daemon_8h.html#aa110ea1472e30234fc2b3c2ad326e335">set_no_chdir</a></div><div class="ttdeci">void set_no_chdir(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:84</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8ce817b57e63a7b46764dfbe191f2b02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void close_standard_fds </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="namespaceovs_1_1socket__util.html#ae31013df5fde22200b91cff6a6b16ea4">null_fd</a> = <a class="code" href="daemon_8c.html#a135730a6868dd70505e03e9751082983">get_null_fd</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (null_fd &gt;= 0) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordtype">int</span> fd;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">for</span> (fd = 0; fd &lt; 3; fd++) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="daemon_8c.html#a99477c7380bbf6dcf8294731efe70370">save_fds</a>[fd]) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                dup2(null_fd, fd);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">/* Disable logging to stderr to avoid wasting CPU time. */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="vlog_8h.html#a15c1b58e4946d382bc69d0056806afd4">vlog_set_levels</a>(NULL, VLF_CONSOLE, VLL_OFF);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="ttc" id="daemon_8c_html_a99477c7380bbf6dcf8294731efe70370"><div class="ttname"><a href="daemon_8c.html#a99477c7380bbf6dcf8294731efe70370">save_fds</a></div><div class="ttdeci">static bool save_fds[3]</div><div class="ttdef"><b>Definition:</b> daemon.c:30</div></div>
<div class="ttc" id="vlog_8h_html_a15c1b58e4946d382bc69d0056806afd4"><div class="ttname"><a href="vlog_8h.html#a15c1b58e4946d382bc69d0056806afd4">vlog_set_levels</a></div><div class="ttdeci">void vlog_set_levels(struct vlog_module *, enum vlog_destination, enum vlog_level)</div><div class="ttdef"><b>Definition:</b> vlog.c:291</div></div>
<div class="ttc" id="daemon_8c_html_a135730a6868dd70505e03e9751082983"><div class="ttname"><a href="daemon_8c.html#a135730a6868dd70505e03e9751082983">get_null_fd</a></div><div class="ttdeci">static int get_null_fd(void)</div><div class="ttdef"><b>Definition:</b> daemon.c:82</div></div>
<div class="ttc" id="namespaceovs_1_1socket__util_html_ae31013df5fde22200b91cff6a6b16ea4"><div class="ttname"><a href="namespaceovs_1_1socket__util.html#ae31013df5fde22200b91cff6a6b16ea4">ovs.socket_util.null_fd</a></div><div class="ttdeci">int null_fd</div><div class="ttdef"><b>Definition:</b> socket_util.py:248</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20b223586a0461300a63e1a3d789d21e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void daemon_save_fd </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;{</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="lib_2util_8h.html#ac236d3d8f33428ab822cc4e277a451c8">ovs_assert</a>(fd == <a class="code" href="unistd_8h.html#afcf80a6d91178952d107ad00b165752b">STDIN_FILENO</a> ||</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;               fd == <a class="code" href="unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a> ||</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;               fd == <a class="code" href="unistd_8h.html#ae2fe1725bb5e9823d089c46b9ed5266e">STDERR_FILENO</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="daemon_8c.html#a99477c7380bbf6dcf8294731efe70370">save_fds</a>[fd] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="ttc" id="lib_2util_8h_html_ac236d3d8f33428ab822cc4e277a451c8"><div class="ttname"><a href="lib_2util_8h.html#ac236d3d8f33428ab822cc4e277a451c8">ovs_assert</a></div><div class="ttdeci">#define ovs_assert(CONDITION)</div><div class="ttdef"><b>Definition:</b> util.h:73</div></div>
<div class="ttc" id="unistd_8h_html_afcf80a6d91178952d107ad00b165752b"><div class="ttname"><a href="unistd_8h.html#afcf80a6d91178952d107ad00b165752b">STDIN_FILENO</a></div><div class="ttdeci">#define STDIN_FILENO</div><div class="ttdef"><b>Definition:</b> unistd.h:25</div></div>
<div class="ttc" id="daemon_8c_html_a99477c7380bbf6dcf8294731efe70370"><div class="ttname"><a href="daemon_8c.html#a99477c7380bbf6dcf8294731efe70370">save_fds</a></div><div class="ttdeci">static bool save_fds[3]</div><div class="ttdef"><b>Definition:</b> daemon.c:30</div></div>
<div class="ttc" id="unistd_8h_html_abd165ee6474b5b75bf075842fff13a04"><div class="ttname"><a href="unistd_8h.html#abd165ee6474b5b75bf075842fff13a04">STDOUT_FILENO</a></div><div class="ttdeci">#define STDOUT_FILENO</div><div class="ttdef"><b>Definition:</b> unistd.h:26</div></div>
<div class="ttc" id="unistd_8h_html_ae2fe1725bb5e9823d089c46b9ed5266e"><div class="ttname"><a href="unistd_8h.html#ae2fe1725bb5e9823d089c46b9ed5266e">STDERR_FILENO</a></div><div class="ttdeci">#define STDERR_FILENO</div><div class="ttdef"><b>Definition:</b> unistd.h:27</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a23c772a3a735e0649383feb24c3b3443"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void daemon_set_monitor </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="daemon-unix_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_a2df4b73809fb9f1d1308f2a0e5d04c2b"><div class="ttname"><a href="daemon-unix_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a></div><div class="ttdeci">static bool monitor</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a243b3ce570240afa7f178fb9b062117b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void daemon_usage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    printf(</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="stringliteral">&quot;\nDaemon options:\n&quot;</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="stringliteral">&quot;  --detach                run in background as daemon\n&quot;</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="stringliteral">&quot;  --no-chdir              do not chdir to &#39;/&#39;\n&quot;</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="stringliteral">&quot;  --pidfile[=FILE]        create pidfile (default: %s/%s.pid)\n&quot;</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="stringliteral">&quot;  --overwrite-pidfile     with --pidfile, start even if already &quot;</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                                   <span class="stringliteral">&quot;running\n&quot;</span>,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="dirs_8c.html#a6d76262f35f8d920bc7a5c848ab39afe">ovs_rundir</a>(), <a class="code" href="util_8c.html#a289c5900d90626d909f0a85d5a0ed61d">program_name</a>);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div>
<div class="ttc" id="util_8c_html_a289c5900d90626d909f0a85d5a0ed61d"><div class="ttname"><a href="util_8c.html#a289c5900d90626d909f0a85d5a0ed61d">program_name</a></div><div class="ttdeci">char * program_name</div><div class="ttdef"><b>Definition:</b> util.c:46</div></div>
<div class="ttc" id="dirs_8c_html_a6d76262f35f8d920bc7a5c848ab39afe"><div class="ttname"><a href="dirs_8c.html#a6d76262f35f8d920bc7a5c848ab39afe">ovs_rundir</a></div><div class="ttdeci">const char * ovs_rundir(void)</div><div class="ttdef"><b>Definition:</b> dirs.c:66</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a29b0af1da2432bcc90721c0b62f4e660"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void daemonize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">If configured with set_pidfile() or set_detach(), creates the pid file
and detaches from the foreground session.</pre> <div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="daemon-unix_8c.html#a648d3584f7d715c461df4d79bf65e759">daemonize_start</a>();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="daemon-unix_8c.html#a457e5943f59732fc5b7d3351d9c63289">daemonize_complete</a>();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_a648d3584f7d715c461df4d79bf65e759"><div class="ttname"><a href="daemon-unix_8c.html#a648d3584f7d715c461df4d79bf65e759">daemonize_start</a></div><div class="ttdeci">void daemonize_start(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:412</div></div>
<div class="ttc" id="daemon-unix_8c_html_a457e5943f59732fc5b7d3351d9c63289"><div class="ttname"><a href="daemon-unix_8c.html#a457e5943f59732fc5b7d3351d9c63289">daemonize_complete</a></div><div class="ttdeci">void daemonize_complete(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:465</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a457e5943f59732fc5b7d3351d9c63289"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void daemonize_complete </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">If daemonization is configured, then this function notifies the parent
process that the child process has completed startup successfully.</pre> <div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        free(<a class="code" href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <a class="code" href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a> = NULL;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="daemon-unix_8c.html#abc1157ca019043bfbd308b3596c457e4">detached</a>) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="daemon-unix_8c.html#abc1157ca019043bfbd308b3596c457e4">detached</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="daemon-unix_8c.html#ac902d173298b7c0b6e06f024564b3984">fork_notify_startup</a>(<a class="code" href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a> = -1;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="daemon-unix_8c.html#aa81669d89b1703ab3392ca6bc7f1975a">daemonize_post_detach</a>();</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_aa81669d89b1703ab3392ca6bc7f1975a"><div class="ttname"><a href="daemon-unix_8c.html#aa81669d89b1703ab3392ca6bc7f1975a">daemonize_post_detach</a></div><div class="ttdeci">static void daemonize_post_detach(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:489</div></div>
<div class="ttc" id="daemon-unix_8c_html_ae938439ab4c5cb04ad119bf40528c322"><div class="ttname"><a href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a></div><div class="ttdeci">static int daemonize_fd</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:61</div></div>
<div class="ttc" id="daemon-unix_8c_html_a9319f4233d0597188c3119f4dc7b3f0f"><div class="ttname"><a href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a></div><div class="ttdeci">char * pidfile</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:47</div></div>
<div class="ttc" id="daemon-unix_8c_html_abc1157ca019043bfbd308b3596c457e4"><div class="ttname"><a href="daemon-unix_8c.html#abc1157ca019043bfbd308b3596c457e4">detached</a></div><div class="ttdeci">static bool detached</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:44</div></div>
<div class="ttc" id="daemon-unix_8c_html_ac902d173298b7c0b6e06f024564b3984"><div class="ttname"><a href="daemon-unix_8c.html#ac902d173298b7c0b6e06f024564b3984">fork_notify_startup</a></div><div class="ttdeci">static void fork_notify_startup(int fd)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:281</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a648d3584f7d715c461df4d79bf65e759"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void daemonize_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">If daemonization is configured, then starts daemonization, by forking
and returning in the child process.  The parent process hangs around until
the child lets it know either that it completed startup successfully (by
calling daemon_complete()) or that it failed to start up (by exiting with a
nonzero exit code).</pre> <div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="ovs-thread_8h.html#a45fe50abf18418d7090fc3d72746d554">assert_single_threaded</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a> = -1;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="daemon-unix_8c.html#ad701bca0336afa7714a9265cea9c10cf">detach</a>) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="windefs_8h.html#a288e13e815d43b06e75819f8939524df">pid_t</a> pid;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="daemon-unix_8c.html#a93227ddf90069e6de49cbfef3b027c1b">fork_and_wait_for_startup</a>(&amp;<a class="code" href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a>, &amp;pid)) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a>(<span class="stringliteral">&quot;could not detach from foreground session&quot;</span>);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (pid &gt; 0) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">/* Running in parent process. */</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            exit(0);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="comment">/* Running in daemon or monitor process. */</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        setsid();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="daemon-unix_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordtype">int</span> saved_daemonize_fd = <a class="code" href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="windefs_8h.html#a288e13e815d43b06e75819f8939524df">pid_t</a> daemon_pid;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="daemon-unix_8c.html#a93227ddf90069e6de49cbfef3b027c1b">fork_and_wait_for_startup</a>(&amp;<a class="code" href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a>, &amp;daemon_pid)) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <a class="code" href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a>(<span class="stringliteral">&quot;could not initiate process monitoring&quot;</span>);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> (daemon_pid &gt; 0) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="comment">/* Running in monitor process. */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <a class="code" href="daemon-unix_8c.html#ac902d173298b7c0b6e06f024564b3984">fork_notify_startup</a>(saved_daemonize_fd);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <a class="code" href="daemon_8c.html#a8ce817b57e63a7b46764dfbe191f2b02">close_standard_fds</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <a class="code" href="daemon-unix_8c.html#a546abd3bf0138631fddc7842060b1dd6">monitor_daemon</a>(daemon_pid);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">/* Running in daemon process. */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="ovs-thread_8c.html#aff4c87debfc8a008e4bc03b93bd75336">forbid_forking</a>(<span class="stringliteral">&quot;running in daemon process&quot;</span>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="daemon-unix_8c.html#a4dac7d39447bc5012d1951cc0426bbf3">make_pidfile</a>();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">/* Make sure that the unixctl commands for vlog get registered in a</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">     * daemon, even before the first log message. */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="vlog_8h.html#a07f79852fdbb74c2ab9e0a7c3ecb63b0">vlog_init</a>();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="ttc" id="ovs-thread_8c_html_aff4c87debfc8a008e4bc03b93bd75336"><div class="ttname"><a href="ovs-thread_8c.html#aff4c87debfc8a008e4bc03b93bd75336">forbid_forking</a></div><div class="ttdeci">void forbid_forking(const char *reason)</div><div class="ttdef"><b>Definition:</b> ovs-thread.c:443</div></div>
<div class="ttc" id="ovs-thread_8h_html_a45fe50abf18418d7090fc3d72746d554"><div class="ttname"><a href="ovs-thread_8h.html#a45fe50abf18418d7090fc3d72746d554">assert_single_threaded</a></div><div class="ttdeci">#define assert_single_threaded()</div><div class="ttdef"><b>Definition:</b> ovs-thread.h:513</div></div>
<div class="ttc" id="daemon-unix_8c_html_a4dac7d39447bc5012d1951cc0426bbf3"><div class="ttname"><a href="daemon-unix_8c.html#a4dac7d39447bc5012d1951cc0426bbf3">make_pidfile</a></div><div class="ttdeci">static void make_pidfile(void)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:118</div></div>
<div class="ttc" id="daemon-unix_8c_html_ae938439ab4c5cb04ad119bf40528c322"><div class="ttname"><a href="daemon-unix_8c.html#ae938439ab4c5cb04ad119bf40528c322">daemonize_fd</a></div><div class="ttdeci">static int daemonize_fd</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:61</div></div>
<div class="ttc" id="windefs_8h_html_a288e13e815d43b06e75819f8939524df"><div class="ttname"><a href="windefs_8h.html#a288e13e815d43b06e75819f8939524df">pid_t</a></div><div class="ttdeci">int pid_t</div><div class="ttdef"><b>Definition:</b> windefs.h:38</div></div>
<div class="ttc" id="vlog_8h_html_a6d19cddbe047acf5f291c7a2c2d4a7ac"><div class="ttname"><a href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a></div><div class="ttdeci">#define VLOG_FATAL(...)</div><div class="ttdef"><b>Definition:</b> vlog.h:193</div></div>
<div class="ttc" id="vlog_8h_html_a07f79852fdbb74c2ab9e0a7c3ecb63b0"><div class="ttname"><a href="vlog_8h.html#a07f79852fdbb74c2ab9e0a7c3ecb63b0">vlog_init</a></div><div class="ttdeci">void vlog_init(void)</div><div class="ttdef"><b>Definition:</b> vlog.c:702</div></div>
<div class="ttc" id="daemon-unix_8c_html_a9319f4233d0597188c3119f4dc7b3f0f"><div class="ttname"><a href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a></div><div class="ttdeci">char * pidfile</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:47</div></div>
<div class="ttc" id="daemon-unix_8c_html_a2df4b73809fb9f1d1308f2a0e5d04c2b"><div class="ttname"><a href="daemon-unix_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a></div><div class="ttdeci">static bool monitor</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:65</div></div>
<div class="ttc" id="daemon-unix_8c_html_a546abd3bf0138631fddc7842060b1dd6"><div class="ttname"><a href="daemon-unix_8c.html#a546abd3bf0138631fddc7842060b1dd6">monitor_daemon</a></div><div class="ttdeci">static void monitor_daemon(pid_t daemon_pid)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:319</div></div>
<div class="ttc" id="daemon-unix_8c_html_a93227ddf90069e6de49cbfef3b027c1b"><div class="ttname"><a href="daemon-unix_8c.html#a93227ddf90069e6de49cbfef3b027c1b">fork_and_wait_for_startup</a></div><div class="ttdeci">static int fork_and_wait_for_startup(int *fdp, pid_t *child_pid)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:229</div></div>
<div class="ttc" id="daemon_8c_html_a8ce817b57e63a7b46764dfbe191f2b02"><div class="ttname"><a href="daemon_8c.html#a8ce817b57e63a7b46764dfbe191f2b02">close_standard_fds</a></div><div class="ttdeci">void close_standard_fds(void)</div><div class="ttdef"><b>Definition:</b> daemon.c:107</div></div>
<div class="ttc" id="daemon-unix_8c_html_ac902d173298b7c0b6e06f024564b3984"><div class="ttname"><a href="daemon-unix_8c.html#ac902d173298b7c0b6e06f024564b3984">fork_notify_startup</a></div><div class="ttdeci">static void fork_notify_startup(int fd)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:281</div></div>
<div class="ttc" id="daemon-unix_8c_html_ad701bca0336afa7714a9265cea9c10cf"><div class="ttname"><a href="daemon-unix_8c.html#ad701bca0336afa7714a9265cea9c10cf">detach</a></div><div class="ttdeci">bool detach</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:43</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2480cbf30c2167088874a196bea81959"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> get_detach </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Will daemonize() really detach?</pre> <div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;{</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="daemon-private_8h.html#ad701bca0336afa7714a9265cea9c10cf">detach</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;}</div>
<div class="ttc" id="daemon-private_8h_html_ad701bca0336afa7714a9265cea9c10cf"><div class="ttname"><a href="daemon-private_8h.html#ad701bca0336afa7714a9265cea9c10cf">detach</a></div><div class="ttdeci">bool detach</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:43</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49e5acb19b85868cecbdb0ac22d0d246"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ignore_existing_pidfile </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Normally, daemonize() or daemonize_start() will terminate the program
with a message if a locked pidfile already exists.  If this function is
called, an existing pidfile will be replaced, with a warning.</pre> <div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="daemon-unix_8c.html#ad6ce804c49b0392d4de43945f9246055">overwrite_pidfile</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_ad6ce804c49b0392d4de43945f9246055"><div class="ttname"><a href="daemon-unix_8c.html#ad6ce804c49b0392d4de43945f9246055">overwrite_pidfile</a></div><div class="ttdeci">static bool overwrite_pidfile</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:55</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a90554d67958b41a9ec9817743c037aa7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="windefs_8h.html#a288e13e815d43b06e75819f8939524df">pid_t</a> read_pidfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="daemon-unix_8c.html#a5c0ee6fc64c325a737fb6e879a09cbf2">read_pidfile__</a>(<a class="code" href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_a5c0ee6fc64c325a737fb6e879a09cbf2"><div class="ttname"><a href="daemon-unix_8c.html#a5c0ee6fc64c325a737fb6e879a09cbf2">read_pidfile__</a></div><div class="ttdeci">static pid_t read_pidfile__(const char *pidfile, bool delete_if_stale)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:538</div></div>
<div class="ttc" id="daemon-unix_8c_html_a9319f4233d0597188c3119f4dc7b3f0f"><div class="ttname"><a href="daemon-unix_8c.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a></div><div class="ttdeci">char * pidfile</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:47</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab4ce8048ed3fe038a73a7eff47a383fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void service_start </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>argcp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argvp</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">int</span> argc = *argcp;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">char</span> **argv = *argvp;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    SERVICE_TABLE_ENTRY service_table[] = {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        {(LPTSTR)<a class="code" href="util_8c.html#a289c5900d90626d909f0a85d5a0ed61d">program_name</a>, (LPSERVICE_MAIN_FUNCTION)<a class="code" href="daemon-windows_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>},</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        {NULL, NULL}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    };</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">/* If one of the command line option is &quot;--detach&quot;, we create</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">     * a new process in case of parent, wait for child to start and exit.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">     * In case of the child, we just return. We should not be creating a</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">     * service in either case. */</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="daemon-windows_8c.html#a7baa1d31fe2672be3031bfbc9646c62a">detach_process</a>(argc, argv)) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* &#39;service_started&#39; is &#39;false&#39; when service_start() is called the first</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">     * time.  It is &#39;true&#39;, when it is called the second time by the Windows</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">     * services manager. */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="daemon-windows_8c.html#a6419abe70ba2f280b773f259e805fb20">service_started</a>) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="daemon-windows_8c.html#a05fe649c62e4a3f3f3061a14c15a4547">init_service_status</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="daemon-windows_8c.html#a6a5a482baec910788a82d424568e4718">wevent</a> = CreateEvent(NULL, TRUE, FALSE, NULL);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="daemon-windows_8c.html#a6a5a482baec910788a82d424568e4718">wevent</a>) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="keywordtype">char</span> *msg_buf = ovs_lasterror_to_string();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <a class="code" href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a>(<span class="stringliteral">&quot;Failed to create a event (%s).&quot;</span>, msg_buf);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        poll_wevent_wait(<a class="code" href="daemon-windows_8c.html#a6a5a482baec910788a82d424568e4718">wevent</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">/* Register the control handler. This function is called by the service</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">         * manager to stop the service. */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="daemon-windows_8c.html#ac3b40d0ecc34ce567130d8f69882aed5">hstatus</a> = RegisterServiceCtrlHandler(<a class="code" href="util_8c.html#a289c5900d90626d909f0a85d5a0ed61d">program_name</a>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                         (LPHANDLER_FUNCTION)<a class="code" href="daemon-windows_8c.html#a172387eaf2c2dea95e3b6e78605ff41b">control_handler</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="daemon-windows_8c.html#ac3b40d0ecc34ce567130d8f69882aed5">hstatus</a>) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordtype">char</span> *msg_buf = ovs_lasterror_to_string();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <a class="code" href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a>(<span class="stringliteral">&quot;Failed to register the service control handler (%s).&quot;</span>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        msg_buf);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="daemon-windows_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a>) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="daemon-windows_8c.html#a80f5cc96c4fb83a0796c3d85ddb446e5">set_config_failure_actions</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">/* When the service control manager does the call back, it does not</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">         * send the same arguments as sent to the main function during the</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">         * service start. So, use the arguments passed over during the first</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">         * time. */</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        *argcp = <a class="code" href="daemon-windows_8c.html#a1f193054747b29c5350b5a991b740698">sargc</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        *argvp = *<a class="code" href="daemon-windows_8c.html#ad136ae5fd95a6743c68acdfd46f379d2">sargvp</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="comment">/* XXX: Windows implementation cannot have a unixctl commands in the</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">        * traditional sense of unix domain sockets. If an implementation is</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">        * done that involves &#39;unixctl&#39; vlog commands the following call is</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">        * needed to make sure that the unixctl commands for vlog get</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">        * registered in a daemon, even before the first log message. */</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="vlog_8h.html#a07f79852fdbb74c2ab9e0a7c3ecb63b0">vlog_init</a>();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="ovs-thread_8h.html#a45fe50abf18418d7090fc3d72746d554">assert_single_threaded</a>();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">/* A reference to arguments passed to the main function the first time.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">     * We need it after the call-back from service control manager. */</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="daemon-windows_8c.html#a1f193054747b29c5350b5a991b740698">sargc</a> = argc;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="daemon-windows_8c.html#ad136ae5fd95a6743c68acdfd46f379d2">sargvp</a> = argvp;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">/* We are only interested in the &#39;--service&#39; and &#39;--service-monitor&#39;</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">     * options before the call-back from the service control manager. */</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; argc; i ++) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;--service&quot;</span>)) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <a class="code" href="daemon-windows_8c.html#a3b6aacf7657bc36da1a2f6bc3b347066">service_create</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(argv[i], <span class="stringliteral">&quot;--service-monitor&quot;</span>)) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <a class="code" href="daemon-windows_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">/* If &#39;--service&#39; is not a command line option, run in foreground. */</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="daemon-windows_8c.html#a3b6aacf7657bc36da1a2f6bc3b347066">service_create</a>) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">/* If we have been configured to run as a service, then that service</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">     * should already have been created either manually or through a start up</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">     * script. */</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="daemon-windows_8c.html#a20a69bebde647859319ca5dd63229e67">check_service</a>();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="daemon-windows_8c.html#a6419abe70ba2f280b773f259e805fb20">service_started</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">/* StartServiceCtrlDispatcher blocks and returns after the service is</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">     * stopped. */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">if</span> (!StartServiceCtrlDispatcher(service_table)) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordtype">char</span> *msg_buf = ovs_lasterror_to_string();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a>(<span class="stringliteral">&quot;Failed at StartServiceCtrlDispatcher (%s)&quot;</span>, msg_buf);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    exit(0);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="ttc" id="daemon-windows_8c_html_a80f5cc96c4fb83a0796c3d85ddb446e5"><div class="ttname"><a href="daemon-windows_8c.html#a80f5cc96c4fb83a0796c3d85ddb446e5">set_config_failure_actions</a></div><div class="ttdeci">static void set_config_failure_actions(void)</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:295</div></div>
<div class="ttc" id="ovs-thread_8h_html_a45fe50abf18418d7090fc3d72746d554"><div class="ttname"><a href="ovs-thread_8h.html#a45fe50abf18418d7090fc3d72746d554">assert_single_threaded</a></div><div class="ttdeci">#define assert_single_threaded()</div><div class="ttdef"><b>Definition:</b> ovs-thread.h:513</div></div>
<div class="ttc" id="daemon-windows_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="daemon-windows_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> ovn-controller.c:342</div></div>
<div class="ttc" id="daemon-windows_8c_html_a2df4b73809fb9f1d1308f2a0e5d04c2b"><div class="ttname"><a href="daemon-windows_8c.html#a2df4b73809fb9f1d1308f2a0e5d04c2b">monitor</a></div><div class="ttdeci">static bool monitor</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:33</div></div>
<div class="ttc" id="daemon-windows_8c_html_a20a69bebde647859319ca5dd63229e67"><div class="ttname"><a href="daemon-windows_8c.html#a20a69bebde647859319ca5dd63229e67">check_service</a></div><div class="ttdeci">static void check_service(void)</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:248</div></div>
<div class="ttc" id="daemon-windows_8c_html_a7baa1d31fe2672be3031bfbc9646c62a"><div class="ttname"><a href="daemon-windows_8c.html#a7baa1d31fe2672be3031bfbc9646c62a">detach_process</a></div><div class="ttdeci">static bool detach_process(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:341</div></div>
<div class="ttc" id="daemon-windows_8c_html_a3b6aacf7657bc36da1a2f6bc3b347066"><div class="ttname"><a href="daemon-windows_8c.html#a3b6aacf7657bc36da1a2f6bc3b347066">service_create</a></div><div class="ttdeci">static bool service_create</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:28</div></div>
<div class="ttc" id="util_8c_html_a289c5900d90626d909f0a85d5a0ed61d"><div class="ttname"><a href="util_8c.html#a289c5900d90626d909f0a85d5a0ed61d">program_name</a></div><div class="ttdeci">char * program_name</div><div class="ttdef"><b>Definition:</b> util.c:46</div></div>
<div class="ttc" id="daemon-windows_8c_html_a172387eaf2c2dea95e3b6e78605ff41b"><div class="ttname"><a href="daemon-windows_8c.html#a172387eaf2c2dea95e3b6e78605ff41b">control_handler</a></div><div class="ttdeci">void control_handler(DWORD request)</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:186</div></div>
<div class="ttc" id="vlog_8h_html_a6d19cddbe047acf5f291c7a2c2d4a7ac"><div class="ttname"><a href="vlog_8h.html#a6d19cddbe047acf5f291c7a2c2d4a7ac">VLOG_FATAL</a></div><div class="ttdeci">#define VLOG_FATAL(...)</div><div class="ttdef"><b>Definition:</b> vlog.h:193</div></div>
<div class="ttc" id="vlog_8h_html_a07f79852fdbb74c2ab9e0a7c3ecb63b0"><div class="ttname"><a href="vlog_8h.html#a07f79852fdbb74c2ab9e0a7c3ecb63b0">vlog_init</a></div><div class="ttdeci">void vlog_init(void)</div><div class="ttdef"><b>Definition:</b> vlog.c:702</div></div>
<div class="ttc" id="daemon-windows_8c_html_a05fe649c62e4a3f3f3061a14c15a4547"><div class="ttname"><a href="daemon-windows_8c.html#a05fe649c62e4a3f3f3061a14c15a4547">init_service_status</a></div><div class="ttdeci">static void init_service_status(void)</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:269</div></div>
<div class="ttc" id="daemon-windows_8c_html_a6a5a482baec910788a82d424568e4718"><div class="ttname"><a href="daemon-windows_8c.html#a6a5a482baec910788a82d424568e4718">wevent</a></div><div class="ttdeci">static HANDLE wevent</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:52</div></div>
<div class="ttc" id="daemon-windows_8c_html_ac3b40d0ecc34ce567130d8f69882aed5"><div class="ttname"><a href="daemon-windows_8c.html#ac3b40d0ecc34ce567130d8f69882aed5">hstatus</a></div><div class="ttdeci">static SERVICE_STATUS_HANDLE hstatus</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:46</div></div>
<div class="ttc" id="daemon-windows_8c_html_ad136ae5fd95a6743c68acdfd46f379d2"><div class="ttname"><a href="daemon-windows_8c.html#ad136ae5fd95a6743c68acdfd46f379d2">sargvp</a></div><div class="ttdeci">static char *** sargvp</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:56</div></div>
<div class="ttc" id="daemon-windows_8c_html_a1f193054747b29c5350b5a991b740698"><div class="ttname"><a href="daemon-windows_8c.html#a1f193054747b29c5350b5a991b740698">sargc</a></div><div class="ttdeci">static int sargc</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:55</div></div>
<div class="ttc" id="daemon-windows_8c_html_a6419abe70ba2f280b773f259e805fb20"><div class="ttname"><a href="daemon-windows_8c.html#a6419abe70ba2f280b773f259e805fb20">service_started</a></div><div class="ttdeci">static bool service_started</div><div class="ttdef"><b>Definition:</b> daemon-windows.c:29</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aad2483499b372400bcaf26922e6b623f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void service_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3d5883140d0ac1d4a1bd3cb191399e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_detach </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sets up a following call to daemonize() to detach from the foreground
session, running this process in the background.</pre> <div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="daemon-unix_8c.html#ad701bca0336afa7714a9265cea9c10cf">detach</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_ad701bca0336afa7714a9265cea9c10cf"><div class="ttname"><a href="daemon-unix_8c.html#ad701bca0336afa7714a9265cea9c10cf">detach</a></div><div class="ttdeci">bool detach</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:43</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa110ea1472e30234fc2b3c2ad326e335"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_no_chdir </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Sets that we do not chdir to "/".</pre> <div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="daemon-unix_8c.html#a2f62632b9a62389c13de19480d2a4a2a">chdir_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="ttc" id="daemon-unix_8c_html_a2f62632b9a62389c13de19480d2a4a2a"><div class="ttname"><a href="daemon-unix_8c.html#a2f62632b9a62389c13de19480d2a4a2a">chdir_</a></div><div class="ttdeci">static bool chdir_</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:58</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a657ab4355eb0b54a448d42bef73f49d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_pidfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="ovs-thread_8h.html#a45fe50abf18418d7090fc3d72746d554">assert_single_threaded</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    free(<a class="code" href="daemon-private_8h.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="daemon-private_8h.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a> = <a class="code" href="daemon-private_8h.html#af3f125729be0813d9bb79c0bfa96675d">make_pidfile_name</a>(<a class="code" href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">name</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="ttc" id="ovs-thread_8h_html_a45fe50abf18418d7090fc3d72746d554"><div class="ttname"><a href="ovs-thread_8h.html#a45fe50abf18418d7090fc3d72746d554">assert_single_threaded</a></div><div class="ttdeci">#define assert_single_threaded()</div><div class="ttdef"><b>Definition:</b> ovs-thread.h:513</div></div>
<div class="ttc" id="namespacesetup_html_a61de3710bf6c9d78c0afa352263f8b09"><div class="ttname"><a href="namespacesetup.html#a61de3710bf6c9d78c0afa352263f8b09">setup.name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> setup.py:30</div></div>
<div class="ttc" id="daemon-private_8h_html_a9319f4233d0597188c3119f4dc7b3f0f"><div class="ttname"><a href="daemon-private_8h.html#a9319f4233d0597188c3119f4dc7b3f0f">pidfile</a></div><div class="ttdeci">char * pidfile</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:47</div></div>
<div class="ttc" id="daemon-private_8h_html_af3f125729be0813d9bb79c0bfa96675d"><div class="ttname"><a href="daemon-private_8h.html#af3f125729be0813d9bb79c0bfa96675d">make_pidfile_name</a></div><div class="ttdeci">char * make_pidfile_name(const char *name)</div><div class="ttdef"><b>Definition:</b> daemon-unix.c:75</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a716979f098a16048652c62de7f5a7cd6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datapath_2linux_2compat_2include_2linux_2types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> should_service_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_36ad3adc1aabcd87770fae1b41e5ac14.html">ovs</a></li><li class="navelem"><a class="el" href="dir_915fb0c656ffb8a17b4ec5b2ac3f6404.html">lib</a></li><li class="navelem"><a class="el" href="daemon_8h.html">daemon.h</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 19:07:28 for ovs all by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
