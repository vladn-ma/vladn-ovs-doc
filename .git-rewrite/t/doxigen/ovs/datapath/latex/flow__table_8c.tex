\hypertarget{flow__table_8c}{}\section{/home/vladn/git/ovs/datapath/flow\+\_\+table.c File Reference}
\label{flow__table_8c}\index{/home/vladn/git/ovs/datapath/flow\+\_\+table.\+c@{/home/vladn/git/ovs/datapath/flow\+\_\+table.\+c}}
{\ttfamily \#include \char`\"{}flow.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}datapath.\+h\char`\"{}}\\*
{\ttfamily \#include $<$linux/uaccess.\+h$>$}\\*
{\ttfamily \#include $<$linux/netdevice.\+h$>$}\\*
{\ttfamily \#include $<$linux/etherdevice.\+h$>$}\\*
{\ttfamily \#include $<$linux/if\+\_\+ether.\+h$>$}\\*
{\ttfamily \#include $<$linux/if\+\_\+vlan.\+h$>$}\\*
{\ttfamily \#include $<$net/llc\+\_\+pdu.\+h$>$}\\*
{\ttfamily \#include $<$linux/kernel.\+h$>$}\\*
{\ttfamily \#include $<$linux/jhash.\+h$>$}\\*
{\ttfamily \#include $<$linux/jiffies.\+h$>$}\\*
{\ttfamily \#include $<$linux/llc.\+h$>$}\\*
{\ttfamily \#include $<$linux/module.\+h$>$}\\*
{\ttfamily \#include $<$linux/in.\+h$>$}\\*
{\ttfamily \#include $<$linux/rcupdate.\+h$>$}\\*
{\ttfamily \#include $<$linux/if\+\_\+arp.\+h$>$}\\*
{\ttfamily \#include $<$linux/ip.\+h$>$}\\*
{\ttfamily \#include $<$linux/ipv6.\+h$>$}\\*
{\ttfamily \#include $<$linux/sctp.\+h$>$}\\*
{\ttfamily \#include $<$linux/tcp.\+h$>$}\\*
{\ttfamily \#include $<$linux/udp.\+h$>$}\\*
{\ttfamily \#include $<$linux/icmp.\+h$>$}\\*
{\ttfamily \#include $<$linux/icmpv6.\+h$>$}\\*
{\ttfamily \#include $<$linux/rculist.\+h$>$}\\*
{\ttfamily \#include $<$net/ip.\+h$>$}\\*
{\ttfamily \#include $<$net/ipv6.\+h$>$}\\*
{\ttfamily \#include $<$net/ndisc.\+h$>$}\\*
{\ttfamily \#include \char`\"{}vlan.\+h\char`\"{}}\\*
Include dependency graph for flow\+\_\+table.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{flow__table_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}{T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S}~1024
\item 
\#define \hyperlink{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}{M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N}~16
\item 
\#define \hyperlink{flow__table_8c_a70a89d7f312fa8c27a8d2423cd512040}{R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L}~(10 $\ast$ 60 $\ast$ H\+Z)
\item 
\#define \hyperlink{flow__table_8c_aba54fb364af2c9465bb632f82e4631d7}{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T}~8
\item 
\#define \hyperlink{flow__table_8c_af961440482d56f3b26f232774a37c9c5}{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S}~(1u $<$$<$ M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T)
\item 
\#define \hyperlink{flow__table_8c_ab95179a8dc622b08ce82308fe001d788}{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S}~((sizeof(uint32\+\_\+t) $\ast$ 8) / \hyperlink{linux_2flow__table_8c_aba54fb364af2c9465bb632f82e4631d7}{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T})
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static u16 \hyperlink{flow__table_8c_a1b494e4862736de33cbbd7cd72ee8521}{range\+\_\+n\+\_\+bytes} (const struct \hyperlink{structsw__flow__key__range}{sw\+\_\+flow\+\_\+key\+\_\+range} $\ast$range)
\item 
void \hyperlink{flow__table_8c_a40f76cbd2e168abb1b9744562e24be3b}{ovs\+\_\+flow\+\_\+mask\+\_\+key} (struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$\hyperlink{flow_8h_a6747ad3b5d60480ea073cd12c9b78aaa}{dst}, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$\hyperlink{flow_8h_a2e7e37e9dfe6465386d6c500f83ef144}{src}, const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$mask)
\item 
struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_acce701c647d8e59486574fba1be3e10c}{ovs\+\_\+flow\+\_\+alloc} (void)
\item 
int \hyperlink{flow__table_8c_a8f1f39fd4e1ecafd99321016698a709a}{ovs\+\_\+flow\+\_\+tbl\+\_\+count} (const struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table)
\item 
static struct flex\+\_\+array $\ast$ \hyperlink{flow__table_8c_a9ad4dc425c825cafea26f047d94d8880}{alloc\+\_\+buckets} (unsigned int n\+\_\+buckets)
\item 
static void \hyperlink{flow__table_8c_af6a50f2fb2e93732e8d706dd7cf67c9b}{flow\+\_\+free} (struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow)
\item 
static void \hyperlink{flow__table_8c_a38fd2d883e505bba412320f3216dc377}{rcu\+\_\+free\+\_\+flow\+\_\+callback} (struct rcu\+\_\+head $\ast$rcu)
\item 
static void \hyperlink{flow__table_8c_a1431ef6b130c835dd7c86bac4472664b}{rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb} (struct rcu\+\_\+head $\ast$rcu)
\item 
void \hyperlink{flow__table_8c_a8133cf46e955b2ae38a0bb8afc0a454f}{ovs\+\_\+flow\+\_\+free} (struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} deferred)
\item 
static void \hyperlink{flow__table_8c_a351711f4f3b2e623bbca105ee2199f52}{free\+\_\+buckets} (struct flex\+\_\+array $\ast$buckets)
\item 
static void \hyperlink{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{\+\_\+\+\_\+table\+\_\+instance\+\_\+destroy} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti)
\item 
static struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ \hyperlink{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{table\+\_\+instance\+\_\+alloc} (int new\+\_\+size)
\item 
static void \hyperlink{flow__table_8c_a77da2cbea7e181821fc6931d8434bf15}{mask\+\_\+array\+\_\+rcu\+\_\+cb} (struct rcu\+\_\+head $\ast$rcu)
\item 
static struct \hyperlink{structmask__array}{mask\+\_\+array} $\ast$ \hyperlink{flow__table_8c_a327b2f9873b81f7b7920e85c366cc96e}{tbl\+\_\+mask\+\_\+array\+\_\+alloc} (int size)
\item 
static int \hyperlink{flow__table_8c_a1ba0bfff1e2a4377681774b821629e8f}{tbl\+\_\+mask\+\_\+array\+\_\+realloc} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, int size)
\item 
int \hyperlink{flow__table_8c_a0df1c5a76810e541b43248c402d764ff}{ovs\+\_\+flow\+\_\+tbl\+\_\+init} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table)
\item 
static void \hyperlink{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}{flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb} (struct rcu\+\_\+head $\ast$rcu)
\item 
static void \hyperlink{flow__table_8c_a5abf80651b67f4198a34f7a94e116ec6}{table\+\_\+instance\+\_\+destroy} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ufid\+\_\+ti, \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} deferred)
\item 
void \hyperlink{flow__table_8c_ad37dcfdb56d17589ed79b5c4dd38bc76}{ovs\+\_\+flow\+\_\+tbl\+\_\+destroy} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table)
\item 
struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_ab25c7aae52c39216ebb03d10a6cba0d8}{ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, u32 $\ast$bucket, u32 $\ast$last)
\item 
static struct hlist\+\_\+head $\ast$ \hyperlink{flow__table_8c_aed00deae6497143255e822e293592558}{find\+\_\+bucket} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, u32 hash)
\item 
static void \hyperlink{flow__table_8c_a81b19a73c026d0c0fa6be862a1ee855b}{table\+\_\+instance\+\_\+insert} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow)
\item 
static void \hyperlink{flow__table_8c_a1bf31f9e45e100a65fd166420a7615b4}{ufid\+\_\+table\+\_\+instance\+\_\+insert} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow)
\item 
static void \hyperlink{flow__table_8c_ab9c9bf751ad9a09eba41b9bbad9925de}{flow\+\_\+table\+\_\+copy\+\_\+flows} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$old, struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$new, \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} ufid)
\item 
static struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ \hyperlink{flow__table_8c_a2309f644575592a9cfd583b904e33149}{table\+\_\+instance\+\_\+rehash} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, int n\+\_\+buckets, \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} ufid)
\item 
int \hyperlink{flow__table_8c_a7e424f978318e8c007b3de68854e8dc2}{ovs\+\_\+flow\+\_\+tbl\+\_\+flush} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$\hyperlink{structflow__table}{flow\+\_\+table})
\item 
static u32 \hyperlink{flow__table_8c_ad79946449b7c322a6d9bf13ca010b31b}{flow\+\_\+hash} (const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key, const struct \hyperlink{structsw__flow__key__range}{sw\+\_\+flow\+\_\+key\+\_\+range} $\ast$range)
\item 
static int \hyperlink{flow__table_8c_a5342dc2f579189449805c79c106a4595}{flow\+\_\+key\+\_\+start} (const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key)
\item 
static \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{flow__table_8c_a036e05a322b4dc16ff44fc77327846a6}{cmp\+\_\+key} (const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key1, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key2, int key\+\_\+start, int key\+\_\+end)
\item 
static \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{flow__table_8c_ae52adc695ca936e630f8a4a61753520d}{flow\+\_\+cmp\+\_\+masked\+\_\+key} (const struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key, const struct \hyperlink{structsw__flow__key__range}{sw\+\_\+flow\+\_\+key\+\_\+range} $\ast$range)
\item 
static \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{flow__table_8c_a0dd59a846abd3c41f19357b2223b10a9}{ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key} (const struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, const struct \hyperlink{structsw__flow__match}{sw\+\_\+flow\+\_\+match} $\ast$match)
\item 
static struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_ac32c042a5b0b7a5de7c1e43f7187f92b}{masked\+\_\+flow\+\_\+lookup} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$unmasked, const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$mask, u32 $\ast$n\+\_\+mask\+\_\+hit)
\item 
static struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}{flow\+\_\+lookup} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, const struct \hyperlink{structmask__array}{mask\+\_\+array} $\ast$ma, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key, u32 $\ast$n\+\_\+mask\+\_\+hit, u32 $\ast$index)
\item 
struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_ac1ff64b403e23c6e8226b0024969556b}{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key, u32 skb\+\_\+hash, u32 $\ast$n\+\_\+mask\+\_\+hit)
\item 
struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_a0d208a262dd7b040266e554a447fa099}{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, const struct \hyperlink{structsw__flow__key}{sw\+\_\+flow\+\_\+key} $\ast$key)
\item 
struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_ad54c8ee8b511e42f2296bcf5ff8d0fd3}{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, const struct \hyperlink{structsw__flow__match}{sw\+\_\+flow\+\_\+match} $\ast$match)
\item 
static u32 \hyperlink{flow__table_8c_aaf879648c325750d8ff234382797f3af}{ufid\+\_\+hash} (const struct \hyperlink{structsw__flow__id}{sw\+\_\+flow\+\_\+id} $\ast$sfid)
\item 
static \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{flow__table_8c_aed32909e9cc5bd5644d1eb39184a5615}{ovs\+\_\+flow\+\_\+cmp\+\_\+ufid} (const struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, const struct \hyperlink{structsw__flow__id}{sw\+\_\+flow\+\_\+id} $\ast$sfid)
\item 
\hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{flow__table_8c_aa91629aca9fd74e235332c7a015d9528}{ovs\+\_\+flow\+\_\+cmp} (const struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, const struct \hyperlink{structsw__flow__match}{sw\+\_\+flow\+\_\+match} $\ast$match)
\item 
struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$ \hyperlink{flow__table_8c_a522dbf2a9a0518ff57eb58c09b69448c}{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, const struct \hyperlink{structsw__flow__id}{sw\+\_\+flow\+\_\+id} $\ast$ufid)
\item 
int \hyperlink{flow__table_8c_ab6e18d16217cddd0af756b76b72e6ce6}{ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks} (const struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table)
\item 
static struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ \hyperlink{flow__table_8c_ae06d563df0cf3fa5d9437e35dafa64cb}{table\+\_\+instance\+\_\+expand} (struct \hyperlink{structtable__instance}{table\+\_\+instance} $\ast$ti, \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} ufid)
\item 
static void \hyperlink{flow__table_8c_a072572ef64d5ebcc2c99cb48945c8291}{tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask} (struct \hyperlink{structmask__array}{mask\+\_\+array} $\ast$ma, struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$mask)
\item 
static void \hyperlink{flow__table_8c_a67796467285f769eda43c39ae058d997}{flow\+\_\+mask\+\_\+remove} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$mask)
\item 
void \hyperlink{flow__table_8c_aa75b8bc2551f9c1a8d65b942a10df89a}{ovs\+\_\+flow\+\_\+tbl\+\_\+remove} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow)
\item 
static struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$ \hyperlink{flow__table_8c_ac9c253eab445afa7ba77781418a92be7}{mask\+\_\+alloc} (void)
\item 
static \hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} \hyperlink{flow__table_8c_a7dd8ab521133d5c26cac895f316213ae}{mask\+\_\+equal} (const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$a, const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$b)
\item 
static struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$ \hyperlink{flow__table_8c_ac6253f7b922a021b0f2321be510fac7c}{flow\+\_\+mask\+\_\+find} (const struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$mask)
\item 
static int \hyperlink{flow__table_8c_a1ceded3a19f98e73b3c10faf2f2532f5}{flow\+\_\+mask\+\_\+insert} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$tbl, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$new)
\item 
static void \hyperlink{flow__table_8c_a66f2b72d1c755346c4865714e51cfcf4}{flow\+\_\+key\+\_\+insert} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow)
\item 
static void \hyperlink{flow__table_8c_a36540c6298f41907b7c088b34116346d}{flow\+\_\+ufid\+\_\+insert} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow)
\item 
int \hyperlink{flow__table_8c_a72ec4f72961a64b1c006978a32554a4c}{ovs\+\_\+flow\+\_\+tbl\+\_\+insert} (struct \hyperlink{structflow__table}{flow\+\_\+table} $\ast$table, struct \hyperlink{structsw__flow}{sw\+\_\+flow} $\ast$flow, const struct \hyperlink{structsw__flow__mask}{sw\+\_\+flow\+\_\+mask} $\ast$mask)
\item 
int \hyperlink{flow__table_8c_a07492868e65ba495c86d49df9cf1bc50}{ovs\+\_\+flow\+\_\+init} (void)
\item 
void \hyperlink{flow__table_8c_a96cce30f7a9c3231d5b5afaf967378eb}{ovs\+\_\+flow\+\_\+exit} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static struct kmem\+\_\+cache $\ast$ \hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\+\_\+cache}
\item 
struct kmem\+\_\+cache $\ast$\hyperlink{flow__table_8h_ab305bee215adea2618069cc592f6ee6b}{flow\+\_\+stats\+\_\+cache} \hyperlink{flow__table_8c_a05eb66f030d0825002eb11cc332e291e}{\+\_\+\+\_\+read\+\_\+mostly}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N@{M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N}}
\index{M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N@{M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+S\+K\+\_\+\+A\+R\+R\+A\+Y\+\_\+\+S\+I\+Z\+E\+\_\+\+M\+I\+N~16}\label{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}
\hypertarget{flow__table_8c_af961440482d56f3b26f232774a37c9c5}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S@{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S}}
\index{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S@{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+E\+N\+T\+R\+I\+E\+S~(1u $<$$<$ M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T)}\label{flow__table_8c_af961440482d56f3b26f232774a37c9c5}
\hypertarget{flow__table_8c_ab95179a8dc622b08ce82308fe001d788}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S@{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S}}
\index{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S@{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+E\+G\+S~((sizeof(uint32\+\_\+t) $\ast$ 8) / {\bf M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T})}\label{flow__table_8c_ab95179a8dc622b08ce82308fe001d788}
\hypertarget{flow__table_8c_aba54fb364af2c9465bb632f82e4631d7}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T@{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T}}
\index{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T@{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+C\+\_\+\+H\+A\+S\+H\+\_\+\+S\+H\+I\+F\+T~8}\label{flow__table_8c_aba54fb364af2c9465bb632f82e4631d7}
\hypertarget{flow__table_8c_a70a89d7f312fa8c27a8d2423cd512040}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L@{R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L}}
\index{R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L@{R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L}]{\setlength{\rightskip}{0pt plus 5cm}\#define R\+E\+H\+A\+S\+H\+\_\+\+I\+N\+T\+E\+R\+V\+A\+L~(10 $\ast$ 60 $\ast$ H\+Z)}\label{flow__table_8c_a70a89d7f312fa8c27a8d2423cd512040}
\hypertarget{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S@{T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S}}
\index{T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S@{T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S}]{\setlength{\rightskip}{0pt plus 5cm}\#define T\+B\+L\+\_\+\+M\+I\+N\+\_\+\+B\+U\+C\+K\+E\+T\+S~1024}\label{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}


\subsection{Function Documentation}
\hypertarget{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!\+\_\+\+\_\+table\+\_\+instance\+\_\+destroy@{\+\_\+\+\_\+table\+\_\+instance\+\_\+destroy}}
\index{\+\_\+\+\_\+table\+\_\+instance\+\_\+destroy@{\+\_\+\+\_\+table\+\_\+instance\+\_\+destroy}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{\+\_\+\+\_\+table\+\_\+instance\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}static void \+\_\+\+\_\+table\+\_\+instance\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}

\begin{DoxyCode}
193 \{
194     \hyperlink{flow__table_8c_a351711f4f3b2e623bbca105ee2199f52}{free\_buckets}(ti->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets});
195     kfree(ti);
196 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a9ad4dc425c825cafea26f047d94d8880}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!alloc\+\_\+buckets@{alloc\+\_\+buckets}}
\index{alloc\+\_\+buckets@{alloc\+\_\+buckets}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{alloc\+\_\+buckets}]{\setlength{\rightskip}{0pt plus 5cm}static struct flex\+\_\+array$\ast$ alloc\+\_\+buckets (
\begin{DoxyParamCaption}
\item[{unsigned int}]{n\+\_\+buckets}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a9ad4dc425c825cafea26f047d94d8880}

\begin{DoxyCode}
125 \{
126     \textcolor{keyword}{struct }flex\_array *buckets;
127     \textcolor{keywordtype}{int} i, err;
128 
129     buckets = flex\_array\_alloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} hlist\_head),
130                    n\_buckets, GFP\_KERNEL);
131     \textcolor{keywordflow}{if} (!buckets)
132         \textcolor{keywordflow}{return} NULL;
133 
134     err = flex\_array\_prealloc(buckets, 0, n\_buckets, GFP\_KERNEL);
135     \textcolor{keywordflow}{if} (err) \{
136         flex\_array\_free(buckets);
137         \textcolor{keywordflow}{return} NULL;
138     \}
139 
140     \textcolor{keywordflow}{for} (i = 0; i < n\_buckets; i++)
141         INIT\_HLIST\_HEAD((\textcolor{keyword}{struct} hlist\_head *)
142                     flex\_array\_get(buckets, i));
143 
144     \textcolor{keywordflow}{return} buckets;
145 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a036e05a322b4dc16ff44fc77327846a6}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!cmp\+\_\+key@{cmp\+\_\+key}}
\index{cmp\+\_\+key@{cmp\+\_\+key}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{cmp\+\_\+key}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf bool} cmp\+\_\+key (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key1, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key2, }
\item[{int}]{key\+\_\+start, }
\item[{int}]{key\+\_\+end}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a036e05a322b4dc16ff44fc77327846a6}

\begin{DoxyCode}
517 \{
518     \textcolor{keyword}{const} \textcolor{keywordtype}{long} *cp1 = (\textcolor{keyword}{const} \textcolor{keywordtype}{long} *)((\textcolor{keyword}{const} u8 *)key1 + key\_start);
519     \textcolor{keyword}{const} \textcolor{keywordtype}{long} *cp2 = (\textcolor{keyword}{const} \textcolor{keywordtype}{long} *)((\textcolor{keyword}{const} u8 *)key2 + key\_start);
520     \textcolor{keywordtype}{long} diffs = 0;
521     \textcolor{keywordtype}{int} i;
522 
523     \textcolor{keywordflow}{for} (i = key\_start; i < key\_end;  i += \textcolor{keyword}{sizeof}(long))
524         diffs |= *cp1++ ^ *cp2++;
525 
526     \textcolor{keywordflow}{return} diffs == 0;
527 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_aed00deae6497143255e822e293592558}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!find\+\_\+bucket@{find\+\_\+bucket}}
\index{find\+\_\+bucket@{find\+\_\+bucket}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{find\+\_\+bucket}]{\setlength{\rightskip}{0pt plus 5cm}static struct hlist\+\_\+head$\ast$ find\+\_\+bucket (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{u32}]{hash}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_aed00deae6497143255e822e293592558}

\begin{DoxyCode}
395 \{
396     hash = jhash\_1word(hash, ti->\hyperlink{structtable__instance_ad73f318c365fd86dda23e7ffb65d59b9}{hash\_seed});
397     \textcolor{keywordflow}{return} flex\_array\_get(ti->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets},
398                 (hash & (ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets} - 1)));
399 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ae52adc695ca936e630f8a4a61753520d}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+cmp\+\_\+masked\+\_\+key@{flow\+\_\+cmp\+\_\+masked\+\_\+key}}
\index{flow\+\_\+cmp\+\_\+masked\+\_\+key@{flow\+\_\+cmp\+\_\+masked\+\_\+key}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+cmp\+\_\+masked\+\_\+key}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf bool} flow\+\_\+cmp\+\_\+masked\+\_\+key (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key\+\_\+range} $\ast$}]{range}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ae52adc695ca936e630f8a4a61753520d}

\begin{DoxyCode}
532 \{
533     \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_a036e05a322b4dc16ff44fc77327846a6}{cmp\_key}(&flow->\hyperlink{structsw__flow_a14b83cbd65275bda4e97ae35500d26d8}{key}, key, range->\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start}, range->\hyperlink{structsw__flow__key__range_ab9c9d06e6ed2b9600d295dfdd94cc05a}{end});
534 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_af6a50f2fb2e93732e8d706dd7cf67c9b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+free@{flow\+\_\+free}}
\index{flow\+\_\+free@{flow\+\_\+free}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+free}]{\setlength{\rightskip}{0pt plus 5cm}static void flow\+\_\+free (
\begin{DoxyParamCaption}
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_af6a50f2fb2e93732e8d706dd7cf67c9b}

\begin{DoxyCode}
148 \{
149     \textcolor{keywordtype}{int} node;
150 
151     \textcolor{keywordflow}{if} (\hyperlink{flow_8h_a3bfeaa297d8807b969a14f1cde78d21b}{ovs\_identifier\_is\_key}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}))
152         kfree(flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}.\hyperlink{structsw__flow__id_a5d62dce79569cb8c25a43f4039e5df3c}{unmasked\_key});
153     kfree(\hyperlink{rcupdate_8h_a9e866c0e8ba667e053cb8f59af572157}{rcu\_dereference\_raw}(flow->\hyperlink{structsw__flow_aa845bdaabc25d81dcf8b1a7519b35408}{sf\_acts}));
154     for\_each\_node(node)
155         if (flow->stats[node])
156             kmem\_cache\_free(\hyperlink{flow__table_8h_ab305bee215adea2618069cc592f6ee6b}{flow\_stats\_cache},
157                     \hyperlink{rcupdate_8h_a9e866c0e8ba667e053cb8f59af572157}{rcu\_dereference\_raw}(flow->stats[node]));
158     kmem\_cache\_free(\hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache}, flow);
159 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ad79946449b7c322a6d9bf13ca010b31b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+hash@{flow\+\_\+hash}}
\index{flow\+\_\+hash@{flow\+\_\+hash}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+hash}]{\setlength{\rightskip}{0pt plus 5cm}static u32 flow\+\_\+hash (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key\+\_\+range} $\ast$}]{range}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ad79946449b7c322a6d9bf13ca010b31b}

\begin{DoxyCode}
493 \{
494     \textcolor{keywordtype}{int} key\_start = range->\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start};
495     \textcolor{keywordtype}{int} key\_end = range->\hyperlink{structsw__flow__key__range_ab9c9d06e6ed2b9600d295dfdd94cc05a}{end};
496     \textcolor{keyword}{const} u32 *hash\_key = (\textcolor{keyword}{const} u32 *)((\textcolor{keyword}{const} u8 *)key + key\_start);
497     \textcolor{keywordtype}{int} hash\_u32s = (key\_end - key\_start) >> 2;
498 
499     \textcolor{comment}{/* Make sure number of hash bytes are multiple of u32. */}
500     BUILD\_BUG\_ON(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}) % \textcolor{keyword}{sizeof}(u32));
501 
502     \textcolor{keywordflow}{return} jhash2(hash\_key, hash\_u32s, 0);
503 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a66f2b72d1c755346c4865714e51cfcf4}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+key\+\_\+insert@{flow\+\_\+key\+\_\+insert}}
\index{flow\+\_\+key\+\_\+insert@{flow\+\_\+key\+\_\+insert}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+key\+\_\+insert}]{\setlength{\rightskip}{0pt plus 5cm}static void flow\+\_\+key\+\_\+insert (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{table, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a66f2b72d1c755346c4865714e51cfcf4}

\begin{DoxyCode}
922 \{
923     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *new\_ti = NULL;
924     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti;
925 
926     flow->\hyperlink{structsw__flow_abca0040cced6a4a84d1a8941764fb5d6}{flow\_table}.\hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash} = \hyperlink{flow__table_8c_ad79946449b7c322a6d9bf13ca010b31b}{flow\_hash}(&flow->\hyperlink{structsw__flow_a14b83cbd65275bda4e97ae35500d26d8}{key}, &flow->
      \hyperlink{structsw__flow_a89c162e340693d0bb4977737e2b68c22}{mask}->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range});
927     ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(table->\hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
928     \hyperlink{flow__table_8c_a81b19a73c026d0c0fa6be862a1ee855b}{table\_instance\_insert}(ti, flow);
929     table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count}++;
930 
931     \textcolor{comment}{/* Expand table, if necessary, to make room. */}
932     \textcolor{keywordflow}{if} (table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count} > ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets})
933         new\_ti = \hyperlink{flow__table_8c_ae06d563df0cf3fa5d9437e35dafa64cb}{table\_instance\_expand}(ti, \textcolor{keyword}{false});
934     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (time\_after(jiffies, table->\hyperlink{structflow__table_a82c7cfef05b2898b3ffb3b6cb6fdc6a4}{last\_rehash} + \hyperlink{flow__table_8c_a70a89d7f312fa8c27a8d2423cd512040}{REHASH\_INTERVAL}))
935         new\_ti = \hyperlink{flow__table_8c_a2309f644575592a9cfd583b904e33149}{table\_instance\_rehash}(ti, ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets}, \textcolor{keyword}{false});
936 
937     \textcolor{keywordflow}{if} (new\_ti) \{
938         rcu\_assign\_pointer(table->\hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti}, new\_ti);
939         call\_rcu(&ti->\hyperlink{structtable__instance_acf4d72ccfb947d0d0d08732a56664978}{rcu}, \hyperlink{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}{flow\_tbl\_destroy\_rcu\_cb});
940         table->\hyperlink{structflow__table_a82c7cfef05b2898b3ffb3b6cb6fdc6a4}{last\_rehash} = jiffies;
941     \}
942 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a5342dc2f579189449805c79c106a4595}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+key\+\_\+start@{flow\+\_\+key\+\_\+start}}
\index{flow\+\_\+key\+\_\+start@{flow\+\_\+key\+\_\+start}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+key\+\_\+start}]{\setlength{\rightskip}{0pt plus 5cm}static int flow\+\_\+key\+\_\+start (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a5342dc2f579189449805c79c106a4595}

\begin{DoxyCode}
506 \{
507     \textcolor{keywordflow}{if} (key->\hyperlink{structsw__flow__key_a2f87b7690c0cc2797f1f4347589472c3}{tun\_key}.\hyperlink{structovs__key__ipv4__tunnel_ae443d381a97f53bbc4139fe36c0aae30}{ipv4\_dst})
508         \textcolor{keywordflow}{return} 0;
509     \textcolor{keywordflow}{else}
510         \textcolor{keywordflow}{return} \hyperlink{kernel_8h_abbacd255029bd6692704964758c8aa97}{rounddown}(offsetof(\textcolor{keyword}{struct} \hyperlink{structsw__flow__key}{sw\_flow\_key}, \hyperlink{flow_8h_a1c873ea83e1b749c669b501016e967fe}{phy}),
511                       \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}));
512 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+lookup@{flow\+\_\+lookup}}
\index{flow\+\_\+lookup@{flow\+\_\+lookup}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+lookup}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf sw\+\_\+flow}$\ast$ flow\+\_\+lookup (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{const struct {\bf mask\+\_\+array} $\ast$}]{ma, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key, }
\item[{u32 $\ast$}]{n\+\_\+mask\+\_\+hit, }
\item[{u32 $\ast$}]{index}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}

\begin{DoxyCode}
578 \{
579     \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *mask;
580     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
581     \textcolor{keywordtype}{int} i;
582 
583     \textcolor{keywordflow}{if} (*index < ma->max) \{
584         mask = \hyperlink{datapath_8h_a5f2a2c1026f970f0052e77f5ebba33d1}{rcu\_dereference\_ovsl}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[*index]);
585         \textcolor{keywordflow}{if} (mask) \{
586             flow = \hyperlink{flow__table_8c_ac32c042a5b0b7a5de7c1e43f7187f92b}{masked\_flow\_lookup}(ti, key, mask, n\_mask\_hit);
587             \textcolor{keywordflow}{if} (flow)
588                 \textcolor{keywordflow}{return} flow;
589         \}
590     \}
591 
592     \textcolor{keywordflow}{for} (i = 0; i < ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}; i++)  \{
593 
594         \textcolor{keywordflow}{if} (i == *index)
595             \textcolor{keywordflow}{continue};
596 
597         mask = \hyperlink{datapath_8h_a5f2a2c1026f970f0052e77f5ebba33d1}{rcu\_dereference\_ovsl}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i]);
598         \textcolor{keywordflow}{if} (!mask)
599             \textcolor{keywordflow}{continue};
600 
601         flow = \hyperlink{flow__table_8c_ac32c042a5b0b7a5de7c1e43f7187f92b}{masked\_flow\_lookup}(ti, key, mask, n\_mask\_hit);
602         \textcolor{keywordflow}{if} (flow) \{ \textcolor{comment}{/* Found */}
603             *index = i;
604             \textcolor{keywordflow}{return} flow;
605         \}
606     \}
607 
608     \textcolor{keywordflow}{return} NULL;
609 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ac6253f7b922a021b0f2321be510fac7c}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+mask\+\_\+find@{flow\+\_\+mask\+\_\+find}}
\index{flow\+\_\+mask\+\_\+find@{flow\+\_\+mask\+\_\+find}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+mask\+\_\+find}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf sw\+\_\+flow\+\_\+mask}$\ast$ flow\+\_\+mask\+\_\+find (
\begin{DoxyParamCaption}
\item[{const struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{mask}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ac6253f7b922a021b0f2321be510fac7c}

\begin{DoxyCode}
851 \{
852     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma;
853     \textcolor{keywordtype}{int} i;
854 
855     ma = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
856     \textcolor{keywordflow}{for} (i = 0; i < ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}; i++) \{
857         \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *t;
858 
859         t = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i]);
860         \textcolor{keywordflow}{if} (t && \hyperlink{flow__table_8c_a7dd8ab521133d5c26cac895f316213ae}{mask\_equal}(mask, t))
861             \textcolor{keywordflow}{return} t;
862     \}
863 
864     \textcolor{keywordflow}{return} NULL;
865 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a1ceded3a19f98e73b3c10faf2f2532f5}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+mask\+\_\+insert@{flow\+\_\+mask\+\_\+insert}}
\index{flow\+\_\+mask\+\_\+insert@{flow\+\_\+mask\+\_\+insert}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+mask\+\_\+insert}]{\setlength{\rightskip}{0pt plus 5cm}static int flow\+\_\+mask\+\_\+insert (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{new}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a1ceded3a19f98e73b3c10faf2f2532f5}

\begin{DoxyCode}
870 \{
871     \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *mask;
872 
873     mask = \hyperlink{flow__table_8c_ac6253f7b922a021b0f2321be510fac7c}{flow\_mask\_find}(tbl, \textcolor{keyword}{new});
874     \textcolor{keywordflow}{if} (!mask) \{
875         \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma;
876         \textcolor{keywordtype}{int} i;
877 
878         \textcolor{comment}{/* Allocate a new mask if none exsits. */}
879         mask = \hyperlink{flow__table_8c_ac9c253eab445afa7ba77781418a92be7}{mask\_alloc}();
880         \textcolor{keywordflow}{if} (!mask)
881             \textcolor{keywordflow}{return} -ENOMEM;
882 
883         mask->\hyperlink{structsw__flow__mask_a52db0284fdd4579a5f30dee0837a7485}{key} = \textcolor{keyword}{new}->key;
884         mask->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range} = \textcolor{keyword}{new}->range;
885 
886         \textcolor{comment}{/* Add mask to mask-list. */}
887         ma = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
888         \textcolor{keywordflow}{if} (ma->\hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count} >= ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}) \{
889             \textcolor{keywordtype}{int} err;
890 
891             err = \hyperlink{flow__table_8c_a1ba0bfff1e2a4377681774b821629e8f}{tbl\_mask\_array\_realloc}(tbl, ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max} +
892                               \hyperlink{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}{MASK\_ARRAY\_SIZE\_MIN});
893             \textcolor{keywordflow}{if} (err) \{
894                 kfree(mask);
895                 \textcolor{keywordflow}{return} err;
896             \}
897             ma = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
898         \}
899 
900         \textcolor{keywordflow}{for} (i = 0; i < ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}; i++) \{
901             \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *t;
902 
903             t = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i]);
904             \textcolor{keywordflow}{if} (!t) \{
905                 rcu\_assign\_pointer(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i], mask);
906                 ma->\hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count}++;
907                 \textcolor{keywordflow}{break};
908             \}
909         \}
910 
911     \} \textcolor{keywordflow}{else} \{
912         BUG\_ON(!mask->\hyperlink{structsw__flow__mask_ad1bf602183e4fa7dfeab96a7ca06243b}{ref\_count});
913         mask->\hyperlink{structsw__flow__mask_ad1bf602183e4fa7dfeab96a7ca06243b}{ref\_count}++;
914     \}
915 
916     flow->\hyperlink{structsw__flow_a89c162e340693d0bb4977737e2b68c22}{mask} = mask;
917     \textcolor{keywordflow}{return} 0;
918 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a67796467285f769eda43c39ae058d997}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+mask\+\_\+remove@{flow\+\_\+mask\+\_\+remove}}
\index{flow\+\_\+mask\+\_\+remove@{flow\+\_\+mask\+\_\+remove}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+mask\+\_\+remove}]{\setlength{\rightskip}{0pt plus 5cm}static void flow\+\_\+mask\+\_\+remove (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{mask}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a67796467285f769eda43c39ae058d997}

\begin{DoxyCode}
783 \{
784     \textcolor{keywordflow}{if} (mask) \{
785         \textcolor{comment}{/* ovs-lock is required to protect mask-refcount and}
786 \textcolor{comment}{         * mask list.}
787 \textcolor{comment}{         */}
788         \hyperlink{datapath_8h_af8d476fa8191790e6f57cad0623f192c}{ASSERT\_OVSL}();
789         BUG\_ON(!mask->\hyperlink{structsw__flow__mask_ad1bf602183e4fa7dfeab96a7ca06243b}{ref\_count});
790         mask->\hyperlink{structsw__flow__mask_ad1bf602183e4fa7dfeab96a7ca06243b}{ref\_count}--;
791 
792         \textcolor{keywordflow}{if} (!mask->\hyperlink{structsw__flow__mask_ad1bf602183e4fa7dfeab96a7ca06243b}{ref\_count}) \{
793             \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma;
794 
795             ma = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
796             \hyperlink{flow__table_8c_a072572ef64d5ebcc2c99cb48945c8291}{tbl\_mask\_array\_delete\_mask}(ma, mask);
797 
798             \textcolor{comment}{/* Shrink the mask array if necessary. */}
799             \textcolor{keywordflow}{if} (ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max} >= (\hyperlink{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}{MASK\_ARRAY\_SIZE\_MIN} * 2) &&
800                 ma->\hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count} <= (ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max} / 3))
801                 \hyperlink{flow__table_8c_a1ba0bfff1e2a4377681774b821629e8f}{tbl\_mask\_array\_realloc}(tbl, ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max} / 2);
802 
803         \}
804     \}
805 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ab9c9bf751ad9a09eba41b9bbad9925de}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+table\+\_\+copy\+\_\+flows@{flow\+\_\+table\+\_\+copy\+\_\+flows}}
\index{flow\+\_\+table\+\_\+copy\+\_\+flows@{flow\+\_\+table\+\_\+copy\+\_\+flows}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+table\+\_\+copy\+\_\+flows}]{\setlength{\rightskip}{0pt plus 5cm}static void flow\+\_\+table\+\_\+copy\+\_\+flows (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{old, }
\item[{struct {\bf table\+\_\+instance} $\ast$}]{new, }
\item[{{\bf bool}}]{ufid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ab9c9bf751ad9a09eba41b9bbad9925de}

\begin{DoxyCode}
421 \{
422     \textcolor{keywordtype}{int} old\_ver;
423     \textcolor{keywordtype}{int} i;
424 
425     old\_ver = old->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver};
426     \textcolor{keyword}{new}->node\_ver = !old\_ver;
427 
428     \textcolor{comment}{/* Insert in new table. */}
429     \textcolor{keywordflow}{for} (i = 0; i < old->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets}; i++) \{
430         \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
431         \textcolor{keyword}{struct }hlist\_head *head;
432 
433         head = flex\_array\_get(old->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets}, i);
434 
435         \textcolor{keywordflow}{if} (ufid)
436             \hyperlink{list_8h_a3782c1eea66f5cacadce6e0175e4650a}{hlist\_for\_each\_entry}(flow, head,
437                          ufid\_table.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[old\_ver])
438                 \hyperlink{flow__table_8c_a1bf31f9e45e100a65fd166420a7615b4}{ufid\_table\_instance\_insert}(new, flow);
439         else
440             \hyperlink{list_8h_a3782c1eea66f5cacadce6e0175e4650a}{hlist\_for\_each\_entry}(flow, head,
441                          \hyperlink{structflow__table}{flow\_table}.node[old\_ver])
442                 \hyperlink{flow__table_8c_a81b19a73c026d0c0fa6be862a1ee855b}{table\_instance\_insert}(new, flow);
443     \}
444 
445     old->keep\_flows = true;
446 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb@{flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb}}
\index{flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb@{flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}static void flow\+\_\+tbl\+\_\+destroy\+\_\+rcu\+\_\+cb (
\begin{DoxyParamCaption}
\item[{struct rcu\+\_\+head $\ast$}]{rcu}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}

\begin{DoxyCode}
310 \{
311     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = container\_of(\hyperlink{structtable__instance_acf4d72ccfb947d0d0d08732a56664978}{rcu}, \textcolor{keyword}{struct} 
      \hyperlink{structtable__instance}{table\_instance}, \hyperlink{structtable__instance_acf4d72ccfb947d0d0d08732a56664978}{rcu});
312 
313     \hyperlink{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{\_\_table\_instance\_destroy}(ti);
314 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a36540c6298f41907b7c088b34116346d}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+ufid\+\_\+insert@{flow\+\_\+ufid\+\_\+insert}}
\index{flow\+\_\+ufid\+\_\+insert@{flow\+\_\+ufid\+\_\+insert}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+ufid\+\_\+insert}]{\setlength{\rightskip}{0pt plus 5cm}static void flow\+\_\+ufid\+\_\+insert (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{table, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a36540c6298f41907b7c088b34116346d}

\begin{DoxyCode}
946 \{
947     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti;
948 
949     flow->\hyperlink{structsw__flow_af5dad10ae036092f5a26cfebb050a03a}{ufid\_table}.\hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash} = \hyperlink{flow__table_8c_aaf879648c325750d8ff234382797f3af}{ufid\_hash}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id});
950     ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(table->\hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti});
951     \hyperlink{flow__table_8c_a1bf31f9e45e100a65fd166420a7615b4}{ufid\_table\_instance\_insert}(ti, flow);
952     table->\hyperlink{structflow__table_ad8ff1e259e64690608d9552f0b467bf0}{ufid\_count}++;
953 
954     \textcolor{comment}{/* Expand table, if necessary, to make room. */}
955     \textcolor{keywordflow}{if} (table->\hyperlink{structflow__table_ad8ff1e259e64690608d9552f0b467bf0}{ufid\_count} > ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets}) \{
956         \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *new\_ti;
957 
958         new\_ti = \hyperlink{flow__table_8c_ae06d563df0cf3fa5d9437e35dafa64cb}{table\_instance\_expand}(ti, \textcolor{keyword}{true});
959         \textcolor{keywordflow}{if} (new\_ti) \{
960             rcu\_assign\_pointer(table->\hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti}, new\_ti);
961             call\_rcu(&ti->\hyperlink{structtable__instance_acf4d72ccfb947d0d0d08732a56664978}{rcu}, \hyperlink{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}{flow\_tbl\_destroy\_rcu\_cb});
962         \}
963     \}
964 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a351711f4f3b2e623bbca105ee2199f52}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!free\+\_\+buckets@{free\+\_\+buckets}}
\index{free\+\_\+buckets@{free\+\_\+buckets}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{free\+\_\+buckets}]{\setlength{\rightskip}{0pt plus 5cm}static void free\+\_\+buckets (
\begin{DoxyParamCaption}
\item[{struct flex\+\_\+array $\ast$}]{buckets}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a351711f4f3b2e623bbca105ee2199f52}

\begin{DoxyCode}
187 \{
188     flex\_array\_free(\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets});
189 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ac9c253eab445afa7ba77781418a92be7}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!mask\+\_\+alloc@{mask\+\_\+alloc}}
\index{mask\+\_\+alloc@{mask\+\_\+alloc}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{mask\+\_\+alloc}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf sw\+\_\+flow\+\_\+mask}$\ast$ mask\+\_\+alloc (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ac9c253eab445afa7ba77781418a92be7}

\begin{DoxyCode}
828 \{
829     \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *mask;
830 
831     mask = kmalloc(\textcolor{keyword}{sizeof}(*mask), GFP\_KERNEL);
832     \textcolor{keywordflow}{if} (mask)
833         mask->\hyperlink{structsw__flow__mask_ad1bf602183e4fa7dfeab96a7ca06243b}{ref\_count} = 1;
834 
835     \textcolor{keywordflow}{return} mask;
836 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a77da2cbea7e181821fc6931d8434bf15}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!mask\+\_\+array\+\_\+rcu\+\_\+cb@{mask\+\_\+array\+\_\+rcu\+\_\+cb}}
\index{mask\+\_\+array\+\_\+rcu\+\_\+cb@{mask\+\_\+array\+\_\+rcu\+\_\+cb}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{mask\+\_\+array\+\_\+rcu\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}static void mask\+\_\+array\+\_\+rcu\+\_\+cb (
\begin{DoxyParamCaption}
\item[{struct rcu\+\_\+head $\ast$}]{rcu}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a77da2cbea7e181821fc6931d8434bf15}

\begin{DoxyCode}
220 \{
221     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma = container\_of(\hyperlink{structmask__array_ac1e5ee290959115397221781b7ad1c6e}{rcu}, \textcolor{keyword}{struct} \hyperlink{structmask__array}{mask\_array}, 
      \hyperlink{structmask__array_ac1e5ee290959115397221781b7ad1c6e}{rcu});
222 
223     kfree(ma);
224 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a7dd8ab521133d5c26cac895f316213ae}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!mask\+\_\+equal@{mask\+\_\+equal}}
\index{mask\+\_\+equal@{mask\+\_\+equal}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{mask\+\_\+equal}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf bool} mask\+\_\+equal (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{a, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{b}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a7dd8ab521133d5c26cac895f316213ae}

\begin{DoxyCode}
840 \{
841     \textcolor{keyword}{const} u8 *a\_ = (\textcolor{keyword}{const} u8 *)&a->\hyperlink{structsw__flow__mask_a52db0284fdd4579a5f30dee0837a7485}{key} + a->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start};
842     \textcolor{keyword}{const} u8 *b\_ = (\textcolor{keyword}{const} u8 *)&b->\hyperlink{structsw__flow__mask_a52db0284fdd4579a5f30dee0837a7485}{key} + b->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start};
843 
844     \textcolor{keywordflow}{return}  (a->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_ab9c9d06e6ed2b9600d295dfdd94cc05a}{end} == b->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_ab9c9d06e6ed2b9600d295dfdd94cc05a}{end})
845         && (a->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start} == b->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start})
846         && (memcmp(a\_, b\_, \hyperlink{flow__table_8c_a1b494e4862736de33cbbd7cd72ee8521}{range\_n\_bytes}(&a->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range})) == 0);
847 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ac32c042a5b0b7a5de7c1e43f7187f92b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!masked\+\_\+flow\+\_\+lookup@{masked\+\_\+flow\+\_\+lookup}}
\index{masked\+\_\+flow\+\_\+lookup@{masked\+\_\+flow\+\_\+lookup}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{masked\+\_\+flow\+\_\+lookup}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf sw\+\_\+flow}$\ast$ masked\+\_\+flow\+\_\+lookup (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{unmasked, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{mask, }
\item[{u32 $\ast$}]{n\+\_\+mask\+\_\+hit}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ac32c042a5b0b7a5de7c1e43f7187f92b}

\begin{DoxyCode}
551 \{
552     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
553     \textcolor{keyword}{struct }hlist\_head *head;
554     u32 hash;
555     \textcolor{keyword}{struct }\hyperlink{structsw__flow__key}{sw\_flow\_key} masked\_key;
556 
557     \hyperlink{flow__table_8c_a40f76cbd2e168abb1b9744562e24be3b}{ovs\_flow\_mask\_key}(&masked\_key, unmasked, mask);
558     hash = \hyperlink{flow__table_8c_ad79946449b7c322a6d9bf13ca010b31b}{flow\_hash}(&masked\_key, &mask->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range});
559     head = \hyperlink{flow__table_8c_aed00deae6497143255e822e293592558}{find\_bucket}(ti, hash);
560     (*n\_mask\_hit)++;
561     \hyperlink{rculist_8h_a482ed6bca0b607f6455d5386f3b1ed75}{hlist\_for\_each\_entry\_rcu}(flow, head, \hyperlink{structflow__table}{flow\_table}.node[ti->
      \hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver}]) \{
562         \textcolor{keywordflow}{if} (flow->\hyperlink{structsw__flow_a89c162e340693d0bb4977737e2b68c22}{mask} == mask && flow->\hyperlink{structsw__flow_abca0040cced6a4a84d1a8941764fb5d6}{flow\_table}.\hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash} == hash &&
563             \hyperlink{flow__table_8c_ae52adc695ca936e630f8a4a61753520d}{flow\_cmp\_masked\_key}(flow, &masked\_key, &mask->
      \hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}))
564             \textcolor{keywordflow}{return} flow;
565     \}
566     \textcolor{keywordflow}{return} NULL;
567 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_acce701c647d8e59486574fba1be3e10c}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+alloc@{ovs\+\_\+flow\+\_\+alloc}}
\index{ovs\+\_\+flow\+\_\+alloc@{ovs\+\_\+flow\+\_\+alloc}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+alloc}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf sw\+\_\+flow}$\ast$ ovs\+\_\+flow\+\_\+alloc (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{flow__table_8c_acce701c647d8e59486574fba1be3e10c}

\begin{DoxyCode}
84 \{
85     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
86     \textcolor{keyword}{struct }\hyperlink{structflow__stats}{flow\_stats} *stats;
87     \textcolor{keywordtype}{int} node;
88 
89     flow = kmem\_cache\_alloc(\hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache}, GFP\_KERNEL);
90     \textcolor{keywordflow}{if} (!flow)
91         \textcolor{keywordflow}{return} ERR\_PTR(-ENOMEM);
92 
93     flow->\hyperlink{structsw__flow_aa845bdaabc25d81dcf8b1a7519b35408}{sf\_acts} = NULL;
94     flow->\hyperlink{structsw__flow_a89c162e340693d0bb4977737e2b68c22}{mask} = NULL;
95     flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}.\hyperlink{structsw__flow__id_a7cfead96fedf295e55d6a17857adfbf5}{ufid\_len} = 0;
96     flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}.\hyperlink{structsw__flow__id_a5d62dce79569cb8c25a43f4039e5df3c}{unmasked\_key} = NULL;
97     flow->\hyperlink{structsw__flow_a7b4a10d23b2824b421527bc2600ef4ba}{stats\_last\_writer} = NUMA\_NO\_NODE;
98 
99     \textcolor{comment}{/* Initialize the default stat node. */}
100     stats = kmem\_cache\_alloc\_node(\hyperlink{flow__table_8h_ab305bee215adea2618069cc592f6ee6b}{flow\_stats\_cache},
101                       GFP\_KERNEL | \_\_GFP\_ZERO, 0);
102     \textcolor{keywordflow}{if} (!stats)
103         \textcolor{keywordflow}{goto} err;
104 
105     spin\_lock\_init(&stats->\hyperlink{structflow__stats_a1930f864d7fc52f4afeb86714e3e5c07}{lock});
106 
107     \hyperlink{rcupdate_8h_ad30f6689018c0dc0178126e1e12897e9}{RCU\_INIT\_POINTER}(flow->\hyperlink{structsw__flow_a5ccc743bcf16038ab0cf5dda88565f33}{stats}[0], stats);
108 
109     for\_each\_node(node)
110         if (node != 0)
111             \hyperlink{rcupdate_8h_ad30f6689018c0dc0178126e1e12897e9}{RCU\_INIT\_POINTER}(flow->stats[node], NULL);
112 
113     return flow;
114 err:
115     kmem\_cache\_free(\hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache}, flow);
116     return ERR\_PTR(-ENOMEM);
117 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_aa91629aca9fd74e235332c7a015d9528}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+cmp@{ovs\+\_\+flow\+\_\+cmp}}
\index{ovs\+\_\+flow\+\_\+cmp@{ovs\+\_\+flow\+\_\+cmp}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+cmp}]{\setlength{\rightskip}{0pt plus 5cm}{\bf bool} ovs\+\_\+flow\+\_\+cmp (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+match} $\ast$}]{match}
\end{DoxyParamCaption}
)}\label{flow__table_8c_aa91629aca9fd74e235332c7a015d9528}

\begin{DoxyCode}
725 \{
726     \textcolor{keywordflow}{if} (\hyperlink{flow_8h_a995966854ceb0b5a72ff027c12ccf426}{ovs\_identifier\_is\_ufid}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}))
727         \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_ae52adc695ca936e630f8a4a61753520d}{flow\_cmp\_masked\_key}(flow, match->\hyperlink{structsw__flow__match_a4030aac38105b63798ea11f43f506372}{key}, &match->
      \hyperlink{structsw__flow__match_aed5e18f9a96464cce4b4e4443d550b2d}{range});
728 
729     \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_a0dd59a846abd3c41f19357b2223b10a9}{ovs\_flow\_cmp\_unmasked\_key}(flow, match);
730 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_aed32909e9cc5bd5644d1eb39184a5615}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+cmp\+\_\+ufid@{ovs\+\_\+flow\+\_\+cmp\+\_\+ufid}}
\index{ovs\+\_\+flow\+\_\+cmp\+\_\+ufid@{ovs\+\_\+flow\+\_\+cmp\+\_\+ufid}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+cmp\+\_\+ufid}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf bool} ovs\+\_\+flow\+\_\+cmp\+\_\+ufid (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+id} $\ast$}]{sfid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_aed32909e9cc5bd5644d1eb39184a5615}

\begin{DoxyCode}
717 \{
718     \textcolor{keywordflow}{if} (flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}.\hyperlink{structsw__flow__id_a7cfead96fedf295e55d6a17857adfbf5}{ufid\_len} != sfid->\hyperlink{structsw__flow__id_a7cfead96fedf295e55d6a17857adfbf5}{ufid\_len})
719         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
720 
721     \textcolor{keywordflow}{return} !memcmp(flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}.\hyperlink{structsw__flow__id_a22ce2b1fed980149931fbccb05750f3e}{ufid}, sfid->\hyperlink{structsw__flow__id_a22ce2b1fed980149931fbccb05750f3e}{ufid}, sfid->\hyperlink{structsw__flow__id_a7cfead96fedf295e55d6a17857adfbf5}{ufid\_len});
722 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a0dd59a846abd3c41f19357b2223b10a9}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key@{ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key}}
\index{ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key@{ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key}]{\setlength{\rightskip}{0pt plus 5cm}static {\bf bool} ovs\+\_\+flow\+\_\+cmp\+\_\+unmasked\+\_\+key (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+match} $\ast$}]{match}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a0dd59a846abd3c41f19357b2223b10a9}

\begin{DoxyCode}
538 \{
539     \textcolor{keyword}{struct }\hyperlink{structsw__flow__key}{sw\_flow\_key} *key = match->\hyperlink{structsw__flow__match_a4030aac38105b63798ea11f43f506372}{key};
540     \textcolor{keywordtype}{int} key\_start = \hyperlink{flow__table_8c_a5342dc2f579189449805c79c106a4595}{flow\_key\_start}(key);
541     \textcolor{keywordtype}{int} key\_end = match->\hyperlink{structsw__flow__match_aed5e18f9a96464cce4b4e4443d550b2d}{range}.\hyperlink{structsw__flow__key__range_ab9c9d06e6ed2b9600d295dfdd94cc05a}{end};
542 
543     BUG\_ON(\hyperlink{flow_8h_a995966854ceb0b5a72ff027c12ccf426}{ovs\_identifier\_is\_ufid}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}));
544     \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_a036e05a322b4dc16ff44fc77327846a6}{cmp\_key}(flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}.\hyperlink{structsw__flow__id_a5d62dce79569cb8c25a43f4039e5df3c}{unmasked\_key}, key, key\_start, key\_end);
545 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a96cce30f7a9c3231d5b5afaf967378eb}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+exit@{ovs\+\_\+flow\+\_\+exit}}
\index{ovs\+\_\+flow\+\_\+exit@{ovs\+\_\+flow\+\_\+exit}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+exit}]{\setlength{\rightskip}{0pt plus 5cm}void ovs\+\_\+flow\+\_\+exit (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a96cce30f7a9c3231d5b5afaf967378eb}

\begin{DoxyCode}
1011 \{
1012     kmem\_cache\_destroy(\hyperlink{flow__table_8h_ab305bee215adea2618069cc592f6ee6b}{flow\_stats\_cache});
1013     kmem\_cache\_destroy(\hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache});
1014 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a8133cf46e955b2ae38a0bb8afc0a454f}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+free@{ovs\+\_\+flow\+\_\+free}}
\index{ovs\+\_\+flow\+\_\+free@{ovs\+\_\+flow\+\_\+free}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+free}]{\setlength{\rightskip}{0pt plus 5cm}void ovs\+\_\+flow\+\_\+free (
\begin{DoxyParamCaption}
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{{\bf bool}}]{deferred}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a8133cf46e955b2ae38a0bb8afc0a454f}

\begin{DoxyCode}
176 \{
177     \textcolor{keywordflow}{if} (!flow)
178         \textcolor{keywordflow}{return};
179 
180     \textcolor{keywordflow}{if} (deferred)
181         call\_rcu(&flow->\hyperlink{structsw__flow_ac58ef2fab6f9d88be75d73e4d2a1e002}{rcu}, \hyperlink{flow__table_8c_a38fd2d883e505bba412320f3216dc377}{rcu\_free\_flow\_callback});
182     \textcolor{keywordflow}{else}
183         \hyperlink{flow__table_8c_af6a50f2fb2e93732e8d706dd7cf67c9b}{flow\_free}(flow);
184 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a07492868e65ba495c86d49df9cf1bc50}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+init@{ovs\+\_\+flow\+\_\+init}}
\index{ovs\+\_\+flow\+\_\+init@{ovs\+\_\+flow\+\_\+init}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}int ovs\+\_\+flow\+\_\+init (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a07492868e65ba495c86d49df9cf1bc50}

\begin{DoxyCode}
986 \{
987     BUILD\_BUG\_ON(\_\_alignof\_\_(\textcolor{keyword}{struct} \hyperlink{structsw__flow__key}{sw\_flow\_key}) % \_\_alignof\_\_(\textcolor{keywordtype}{long}));
988     BUILD\_BUG\_ON(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structsw__flow__key}{sw\_flow\_key}) % \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{long}));
989 
990     \hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache} = kmem\_cache\_create(\textcolor{stringliteral}{"sw\_flow"}, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structsw__flow}{sw\_flow})
991                        + (nr\_node\_ids
992                       * \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structflow__stats}{flow\_stats} *)),
993                        0, 0, NULL);
994     \textcolor{keywordflow}{if} (\hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache} == NULL)
995         \textcolor{keywordflow}{return} -ENOMEM;
996 
997     \hyperlink{flow__table_8h_ab305bee215adea2618069cc592f6ee6b}{flow\_stats\_cache}
998         = kmem\_cache\_create(\textcolor{stringliteral}{"sw\_flow\_stats"}, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structflow__stats}{flow\_stats}),
999                     0, SLAB\_HWCACHE\_ALIGN, NULL);
1000     \textcolor{keywordflow}{if} (\hyperlink{flow__table_8h_ab305bee215adea2618069cc592f6ee6b}{flow\_stats\_cache} == NULL) \{
1001         kmem\_cache\_destroy(\hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache});
1002         \hyperlink{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{flow\_cache} = NULL;
1003         \textcolor{keywordflow}{return} -ENOMEM;
1004     \}
1005 
1006     \textcolor{keywordflow}{return} 0;
1007 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a40f76cbd2e168abb1b9744562e24be3b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+mask\+\_\+key@{ovs\+\_\+flow\+\_\+mask\+\_\+key}}
\index{ovs\+\_\+flow\+\_\+mask\+\_\+key@{ovs\+\_\+flow\+\_\+mask\+\_\+key}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+mask\+\_\+key}]{\setlength{\rightskip}{0pt plus 5cm}void ovs\+\_\+flow\+\_\+mask\+\_\+key (
\begin{DoxyParamCaption}
\item[{struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{dst, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{src, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{mask}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a40f76cbd2e168abb1b9744562e24be3b}

\begin{DoxyCode}
67 \{
68     \textcolor{keyword}{const} \textcolor{keywordtype}{long} *m = (\textcolor{keyword}{const} \textcolor{keywordtype}{long} *)((\textcolor{keyword}{const} u8 *)&mask->\hyperlink{structsw__flow__mask_a52db0284fdd4579a5f30dee0837a7485}{key} +
69                 mask->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start});
70     \textcolor{keyword}{const} \textcolor{keywordtype}{long} *s = (\textcolor{keyword}{const} \textcolor{keywordtype}{long} *)((\textcolor{keyword}{const} u8 *)src +
71                 mask->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start});
72     \textcolor{keywordtype}{long} *d = (\textcolor{keywordtype}{long} *)((u8 *)dst + mask->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}.\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start});
73     \textcolor{keywordtype}{int} i;
74 
75     \textcolor{comment}{/* The memory outside of the 'mask->range' are not set since}
76 \textcolor{comment}{     * further operations on 'dst' only uses contents within}
77 \textcolor{comment}{     * 'mask->range'.}
78 \textcolor{comment}{     */}
79     \textcolor{keywordflow}{for} (i = 0; i < \hyperlink{flow__table_8c_a1b494e4862736de33cbbd7cd72ee8521}{range\_n\_bytes}(&mask->\hyperlink{structsw__flow__mask_aa6062c0e580d516ff2d9ce8f9611432b}{range}); i += \textcolor{keyword}{sizeof}(long))
80         *d++ = *s++ & *m++;
81 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a8f1f39fd4e1ecafd99321016698a709a}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+count@{ovs\+\_\+flow\+\_\+tbl\+\_\+count}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+count@{ovs\+\_\+flow\+\_\+tbl\+\_\+count}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+count}]{\setlength{\rightskip}{0pt plus 5cm}int ovs\+\_\+flow\+\_\+tbl\+\_\+count (
\begin{DoxyParamCaption}
\item[{const struct {\bf flow\+\_\+table} $\ast$}]{table}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a8f1f39fd4e1ecafd99321016698a709a}

\begin{DoxyCode}
120 \{
121     \textcolor{keywordflow}{return} table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count};
122 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ad37dcfdb56d17589ed79b5c4dd38bc76}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+destroy@{ovs\+\_\+flow\+\_\+tbl\+\_\+destroy}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+destroy@{ovs\+\_\+flow\+\_\+tbl\+\_\+destroy}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}void ovs\+\_\+flow\+\_\+tbl\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{table}
\end{DoxyParamCaption}
)}\label{flow__table_8c_ad37dcfdb56d17589ed79b5c4dd38bc76}

\begin{DoxyCode}
358 \{
359     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = \hyperlink{rcupdate_8h_a9e866c0e8ba667e053cb8f59af572157}{rcu\_dereference\_raw}(table->
      \hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
360     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ufid\_ti = \hyperlink{rcupdate_8h_a9e866c0e8ba667e053cb8f59af572157}{rcu\_dereference\_raw}(table->
      \hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti});
361 
362     free\_percpu(table->\hyperlink{structflow__table_a7395c72250199771559f2aaf32da5d0d}{mask\_cache});
363     kfree(\hyperlink{rcupdate_8h_a9e866c0e8ba667e053cb8f59af572157}{rcu\_dereference\_raw}(table->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array}));
364     \hyperlink{flow__table_8c_a5abf80651b67f4198a34f7a94e116ec6}{table\_instance\_destroy}(ti, ufid\_ti, \textcolor{keyword}{false});
365 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ab25c7aae52c39216ebb03d10a6cba0d8}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next@{ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next@{ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf sw\+\_\+flow}$\ast$ ovs\+\_\+flow\+\_\+tbl\+\_\+dump\+\_\+next (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{u32 $\ast$}]{bucket, }
\item[{u32 $\ast$}]{last}
\end{DoxyParamCaption}
)}\label{flow__table_8c_ab25c7aae52c39216ebb03d10a6cba0d8}

\begin{DoxyCode}
369 \{
370     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
371     \textcolor{keyword}{struct }hlist\_head *head;
372     \textcolor{keywordtype}{int} ver;
373     \textcolor{keywordtype}{int} i;
374 
375     ver = ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver};
376     \textcolor{keywordflow}{while} (*bucket < ti->n\_buckets) \{
377         i = 0;
378         head = flex\_array\_get(ti->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets}, *bucket);
379         \hyperlink{rculist_8h_a482ed6bca0b607f6455d5386f3b1ed75}{hlist\_for\_each\_entry\_rcu}(flow, head, \hyperlink{structflow__table}{flow\_table}.node[ver]) \{
380             \textcolor{keywordflow}{if} (i < *last) \{
381                 i++;
382                 \textcolor{keywordflow}{continue};
383             \}
384             *last = i + 1;
385             \textcolor{keywordflow}{return} flow;
386         \}
387         (*bucket)++;
388         *last = 0;
389     \}
390 
391     \textcolor{keywordflow}{return} NULL;
392 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a7e424f978318e8c007b3de68854e8dc2}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+flush@{ovs\+\_\+flow\+\_\+tbl\+\_\+flush}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+flush@{ovs\+\_\+flow\+\_\+tbl\+\_\+flush}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+flush}]{\setlength{\rightskip}{0pt plus 5cm}int ovs\+\_\+flow\+\_\+tbl\+\_\+flush (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{flow\+\_\+table}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a7e424f978318e8c007b3de68854e8dc2}

\begin{DoxyCode}
463 \{
464     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *old\_ti, *new\_ti;
465     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *old\_ufid\_ti, *new\_ufid\_ti;
466 
467     new\_ti = \hyperlink{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{table\_instance\_alloc}(\hyperlink{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}{TBL\_MIN\_BUCKETS});
468     \textcolor{keywordflow}{if} (!new\_ti)
469         \textcolor{keywordflow}{return} -ENOMEM;
470     new\_ufid\_ti = \hyperlink{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{table\_instance\_alloc}(\hyperlink{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}{TBL\_MIN\_BUCKETS});
471     \textcolor{keywordflow}{if} (!new\_ufid\_ti)
472         \textcolor{keywordflow}{goto} err\_free\_ti;
473 
474     old\_ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(flow\_table->\hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
475     old\_ufid\_ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(flow\_table->\hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti});
476 
477     rcu\_assign\_pointer(flow\_table->\hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti}, new\_ti);
478     rcu\_assign\_pointer(flow\_table->\hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti}, new\_ufid\_ti);
479     flow\_table->\hyperlink{structflow__table_a82c7cfef05b2898b3ffb3b6cb6fdc6a4}{last\_rehash} = jiffies;
480     flow\_table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count} = 0;
481     flow\_table->\hyperlink{structflow__table_ad8ff1e259e64690608d9552f0b467bf0}{ufid\_count} = 0;
482 
483     \hyperlink{flow__table_8c_a5abf80651b67f4198a34f7a94e116ec6}{table\_instance\_destroy}(old\_ti, old\_ufid\_ti, \textcolor{keyword}{true});
484     \textcolor{keywordflow}{return} 0;
485 
486 err\_free\_ti:
487     \hyperlink{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{\_\_table\_instance\_destroy}(new\_ti);
488     \textcolor{keywordflow}{return} -ENOMEM;
489 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a0df1c5a76810e541b43248c402d764ff}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+init@{ovs\+\_\+flow\+\_\+tbl\+\_\+init}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+init@{ovs\+\_\+flow\+\_\+tbl\+\_\+init}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}int ovs\+\_\+flow\+\_\+tbl\+\_\+init (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{table}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a0df1c5a76810e541b43248c402d764ff}

\begin{DoxyCode}
271 \{
272     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti, *ufid\_ti;
273     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma;
274 
275     table->\hyperlink{structflow__table_a7395c72250199771559f2aaf32da5d0d}{mask\_cache} = \_\_alloc\_percpu(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structmask__cache__entry}{mask\_cache\_entry}) *
276                       \hyperlink{flow__table_8c_af961440482d56f3b26f232774a37c9c5}{MC\_HASH\_ENTRIES}, \_\_alignof\_\_(\textcolor{keyword}{struct} 
      \hyperlink{structmask__cache__entry}{mask\_cache\_entry}));
277     \textcolor{keywordflow}{if} (!table->\hyperlink{structflow__table_a7395c72250199771559f2aaf32da5d0d}{mask\_cache})
278         \textcolor{keywordflow}{return} -ENOMEM;
279 
280     ma = \hyperlink{flow__table_8c_a327b2f9873b81f7b7920e85c366cc96e}{tbl\_mask\_array\_alloc}(\hyperlink{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}{MASK\_ARRAY\_SIZE\_MIN});
281     \textcolor{keywordflow}{if} (!ma)
282         \textcolor{keywordflow}{goto} free\_mask\_cache;
283 
284     ti = \hyperlink{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{table\_instance\_alloc}(\hyperlink{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}{TBL\_MIN\_BUCKETS});
285     \textcolor{keywordflow}{if} (!ti)
286         \textcolor{keywordflow}{goto} free\_mask\_array;
287 
288     ufid\_ti = \hyperlink{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{table\_instance\_alloc}(\hyperlink{flow__table_8c_a84843442d8db7eda5192117e7c6b2997}{TBL\_MIN\_BUCKETS});
289     \textcolor{keywordflow}{if} (!ufid\_ti)
290         \textcolor{keywordflow}{goto} free\_ti;
291 
292     rcu\_assign\_pointer(table->\hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti}, ti);
293     rcu\_assign\_pointer(table->\hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti}, ufid\_ti);
294     rcu\_assign\_pointer(table->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array}, ma);
295     table->\hyperlink{structflow__table_a82c7cfef05b2898b3ffb3b6cb6fdc6a4}{last\_rehash} = jiffies;
296     table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count} = 0;
297     table->\hyperlink{structflow__table_ad8ff1e259e64690608d9552f0b467bf0}{ufid\_count} = 0;
298     \textcolor{keywordflow}{return} 0;
299 
300 free\_ti:
301     \hyperlink{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{\_\_table\_instance\_destroy}(ti);
302 free\_mask\_array:
303     kfree(ma);
304 free\_mask\_cache:
305     free\_percpu(table->\hyperlink{structflow__table_a7395c72250199771559f2aaf32da5d0d}{mask\_cache});
306     \textcolor{keywordflow}{return} -ENOMEM;
307 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a72ec4f72961a64b1c006978a32554a4c}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+insert@{ovs\+\_\+flow\+\_\+tbl\+\_\+insert}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+insert@{ovs\+\_\+flow\+\_\+tbl\+\_\+insert}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+insert}]{\setlength{\rightskip}{0pt plus 5cm}int ovs\+\_\+flow\+\_\+tbl\+\_\+insert (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{table, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{mask}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a72ec4f72961a64b1c006978a32554a4c}

\begin{DoxyCode}
969 \{
970     \textcolor{keywordtype}{int} err;
971 
972     err = \hyperlink{flow__table_8c_a1ceded3a19f98e73b3c10faf2f2532f5}{flow\_mask\_insert}(table, flow, mask);
973     \textcolor{keywordflow}{if} (err)
974         \textcolor{keywordflow}{return} err;
975     \hyperlink{flow__table_8c_a66f2b72d1c755346c4865714e51cfcf4}{flow\_key\_insert}(table, flow);
976     \textcolor{keywordflow}{if} (\hyperlink{flow_8h_a995966854ceb0b5a72ff027c12ccf426}{ovs\_identifier\_is\_ufid}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}))
977         \hyperlink{flow__table_8c_a36540c6298f41907b7c088b34116346d}{flow\_ufid\_insert}(table, flow);
978 
979     \textcolor{keywordflow}{return} 0;
980 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a0d208a262dd7b040266e554a447fa099}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+lookup@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf sw\+\_\+flow}$\ast$ ovs\+\_\+flow\+\_\+tbl\+\_\+lookup (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a0d208a262dd7b040266e554a447fa099}

\begin{DoxyCode}
677 \{
678     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = \hyperlink{datapath_8h_a5f2a2c1026f970f0052e77f5ebba33d1}{rcu\_dereference\_ovsl}(tbl->
      \hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
679     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma = \hyperlink{datapath_8h_a5f2a2c1026f970f0052e77f5ebba33d1}{rcu\_dereference\_ovsl}(tbl->
      \hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
680     u32 \hyperlink{compiler-gcc_8h_a4df9005d46835d584f7e924597114061}{\_\_always\_unused} n\_mask\_hit;
681     u32 index = 0;
682 
683     \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}{flow\_lookup}(tbl, ti, ma, key, &n\_mask\_hit, &index);
684 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ad54c8ee8b511e42f2296bcf5ff8d0fd3}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf sw\+\_\+flow}$\ast$ ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+exact (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+match} $\ast$}]{match}
\end{DoxyParamCaption}
)}\label{flow__table_8c_ad54c8ee8b511e42f2296bcf5ff8d0fd3}

\begin{DoxyCode}
688 \{
689     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->
      \hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
690     \textcolor{keywordtype}{int} i;
691 
692     \textcolor{comment}{/* Always called under ovs-mutex. */}
693     \textcolor{keywordflow}{for} (i = 0; i < ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}; i++) \{
694         \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->
      \hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
695         u32 \hyperlink{compiler-gcc_8h_a4df9005d46835d584f7e924597114061}{\_\_always\_unused} n\_mask\_hit;
696         \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *mask;
697         \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
698 
699         mask = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i]);
700         \textcolor{keywordflow}{if} (!mask)
701             \textcolor{keywordflow}{continue};
702         flow = \hyperlink{flow__table_8c_ac32c042a5b0b7a5de7c1e43f7187f92b}{masked\_flow\_lookup}(ti, match->\hyperlink{structsw__flow__match_a4030aac38105b63798ea11f43f506372}{key}, mask, &n\_mask\_hit);
703         \textcolor{keywordflow}{if} (flow && \hyperlink{flow_8h_a3bfeaa297d8807b969a14f1cde78d21b}{ovs\_identifier\_is\_key}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}) &&
704             \hyperlink{flow__table_8c_a0dd59a846abd3c41f19357b2223b10a9}{ovs\_flow\_cmp\_unmasked\_key}(flow, match))
705             \textcolor{keywordflow}{return} flow;
706     \}
707     \textcolor{keywordflow}{return} NULL;
708 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ac1ff64b403e23c6e8226b0024969556b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf sw\+\_\+flow}$\ast$ ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+stats (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+key} $\ast$}]{key, }
\item[{u32}]{skb\+\_\+hash, }
\item[{u32 $\ast$}]{n\+\_\+mask\+\_\+hit}
\end{DoxyParamCaption}
)}\label{flow__table_8c_ac1ff64b403e23c6e8226b0024969556b}

\begin{DoxyCode}
622 \{
623     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma = rcu\_dereference(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
624     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = rcu\_dereference(tbl->\hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
625     \textcolor{keyword}{struct }\hyperlink{structmask__cache__entry}{mask\_cache\_entry} *entries, *ce;
626     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
627     u32 \hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash};
628     \textcolor{keywordtype}{int} seg;
629 
630     *n\_mask\_hit = 0;
631     \textcolor{keywordflow}{if} (unlikely(!skb\_hash)) \{
632         u32 mask\_index = 0;
633 
634         \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}{flow\_lookup}(tbl, ti, ma, key, n\_mask\_hit, &mask\_index);
635     \}
636 
637     \textcolor{comment}{/* Pre and post recirulation flows usually have the same skb\_hash}
638 \textcolor{comment}{     * value. To avoid hash collisions, rehash the 'skb\_hash' with}
639 \textcolor{comment}{     * 'recirc\_id'.  */}
640     \textcolor{keywordflow}{if} (key->\hyperlink{structsw__flow__key_a7e51857c88ad6b0bf90551d0b6e2607b}{recirc\_id})
641         skb\_hash = jhash\_1word(skb\_hash, key->\hyperlink{structsw__flow__key_a7e51857c88ad6b0bf90551d0b6e2607b}{recirc\_id});
642 
643     ce = NULL;
644     hash = skb\_hash;
645     entries = \hyperlink{percpu_8h_a1cd55f287dff5c4a79fc11dd38d47c12}{this\_cpu\_ptr}(tbl->\hyperlink{structflow__table_a7395c72250199771559f2aaf32da5d0d}{mask\_cache});
646 
647     \textcolor{comment}{/* Find the cache entry 'ce' to operate on. */}
648     \textcolor{keywordflow}{for} (seg = 0; seg < \hyperlink{flow__table_8c_ab95179a8dc622b08ce82308fe001d788}{MC\_HASH\_SEGS}; seg++) \{
649         \textcolor{keywordtype}{int} index = hash & (\hyperlink{flow__table_8c_af961440482d56f3b26f232774a37c9c5}{MC\_HASH\_ENTRIES} - 1);
650         \textcolor{keyword}{struct }\hyperlink{structmask__cache__entry}{mask\_cache\_entry} *e;
651 
652         e = &entries[index];
653         \textcolor{keywordflow}{if} (e->\hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash} == \hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash}) \{
654             flow = \hyperlink{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}{flow\_lookup}(tbl, ti, ma, key, n\_mask\_hit,
655                        &e->\hyperlink{structmask__cache__entry_a87faeaec562bcab421cb208dfc0ef5f0}{mask\_index});
656             \textcolor{keywordflow}{if} (!flow)
657                 e->\hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash} = 0;
658             \textcolor{keywordflow}{return} flow;
659         \}
660 
661         \textcolor{keywordflow}{if} (!ce || e->\hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash} < ce->\hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash})
662             ce = e;  \textcolor{comment}{/* A better replacement cache candidate. */}
663 
664         hash >>= \hyperlink{flow__table_8c_aba54fb364af2c9465bb632f82e4631d7}{MC\_HASH\_SHIFT};
665     \}
666 
667     \textcolor{comment}{/* Cache miss, do full lookup. */}
668     flow = \hyperlink{flow__table_8c_a66b2913ba658b83a167b83e5f5ec465a}{flow\_lookup}(tbl, ti, ma, key, n\_mask\_hit, &ce->\hyperlink{structmask__cache__entry_a87faeaec562bcab421cb208dfc0ef5f0}{mask\_index});
669     \textcolor{keywordflow}{if} (flow)
670         ce->\hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash} = \hyperlink{structmask__cache__entry_a45ae5222badf95e1c919a0d6d0090b6f}{skb\_hash};
671 
672     \textcolor{keywordflow}{return} flow;
673 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a522dbf2a9a0518ff57eb58c09b69448c}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid@{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf sw\+\_\+flow}$\ast$ ovs\+\_\+flow\+\_\+tbl\+\_\+lookup\+\_\+ufid (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{const struct {\bf sw\+\_\+flow\+\_\+id} $\ast$}]{ufid}
\end{DoxyParamCaption}
)}\label{flow__table_8c_a522dbf2a9a0518ff57eb58c09b69448c}

\begin{DoxyCode}
734 \{
735     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = \hyperlink{datapath_8h_a5f2a2c1026f970f0052e77f5ebba33d1}{rcu\_dereference\_ovsl}(tbl->
      \hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti});
736     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
737     \textcolor{keyword}{struct }hlist\_head *head;
738     u32 hash;
739 
740     hash = \hyperlink{flow__table_8c_aaf879648c325750d8ff234382797f3af}{ufid\_hash}(ufid);
741     head = \hyperlink{flow__table_8c_aed00deae6497143255e822e293592558}{find\_bucket}(ti, hash);
742     \hyperlink{rculist_8h_a482ed6bca0b607f6455d5386f3b1ed75}{hlist\_for\_each\_entry\_rcu}(flow, head, ufid\_table.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ti->
      \hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver}]) \{
743         \textcolor{keywordflow}{if} (flow->\hyperlink{structsw__flow_af5dad10ae036092f5a26cfebb050a03a}{ufid\_table}.\hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash} == hash &&
744             \hyperlink{flow__table_8c_aed32909e9cc5bd5644d1eb39184a5615}{ovs\_flow\_cmp\_ufid}(flow, ufid))
745             \textcolor{keywordflow}{return} flow;
746     \}
747     \textcolor{keywordflow}{return} NULL;
748 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ab6e18d16217cddd0af756b76b72e6ce6}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks@{ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks@{ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks}]{\setlength{\rightskip}{0pt plus 5cm}int ovs\+\_\+flow\+\_\+tbl\+\_\+num\+\_\+masks (
\begin{DoxyParamCaption}
\item[{const struct {\bf flow\+\_\+table} $\ast$}]{table}
\end{DoxyParamCaption}
)}\label{flow__table_8c_ab6e18d16217cddd0af756b76b72e6ce6}

\begin{DoxyCode}
751 \{
752     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *ma;
753 
754     ma = \hyperlink{datapath_8h_a5f2a2c1026f970f0052e77f5ebba33d1}{rcu\_dereference\_ovsl}(table->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
755     \textcolor{keywordflow}{return} ma->\hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count};
756 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_aa75b8bc2551f9c1a8d65b942a10df89a}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ovs\+\_\+flow\+\_\+tbl\+\_\+remove@{ovs\+\_\+flow\+\_\+tbl\+\_\+remove}}
\index{ovs\+\_\+flow\+\_\+tbl\+\_\+remove@{ovs\+\_\+flow\+\_\+tbl\+\_\+remove}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ovs\+\_\+flow\+\_\+tbl\+\_\+remove}]{\setlength{\rightskip}{0pt plus 5cm}void ovs\+\_\+flow\+\_\+tbl\+\_\+remove (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{table, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow}
\end{DoxyParamCaption}
)}\label{flow__table_8c_aa75b8bc2551f9c1a8d65b942a10df89a}

\begin{DoxyCode}
809 \{
810     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(table->
      \hyperlink{structflow__table_a49d708e68608d510f6d25a16a14fd565}{ti});
811     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ufid\_ti = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(table->
      \hyperlink{structflow__table_aa29e185501af8dcd15549ee157c6c047}{ufid\_ti});
812 
813     BUG\_ON(table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count} == 0);
814     hlist\_del\_rcu(&flow->\hyperlink{structsw__flow_abca0040cced6a4a84d1a8941764fb5d6}{flow\_table}.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver}]);
815     table->\hyperlink{structflow__table_a97cae1e714c6dcfe0d39ce4cff371786}{count}--;
816     \textcolor{keywordflow}{if} (\hyperlink{flow_8h_a995966854ceb0b5a72ff027c12ccf426}{ovs\_identifier\_is\_ufid}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id})) \{
817         hlist\_del\_rcu(&flow->\hyperlink{structsw__flow_af5dad10ae036092f5a26cfebb050a03a}{ufid\_table}.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ufid\_ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver}]);
818         table->\hyperlink{structflow__table_ad8ff1e259e64690608d9552f0b467bf0}{ufid\_count}--;
819     \}
820 
821     \textcolor{comment}{/* RCU delete the mask. 'flow->mask' is not NULLed, as it should be}
822 \textcolor{comment}{     * accessible as long as the RCU read lock is held.}
823 \textcolor{comment}{     */}
824     \hyperlink{flow__table_8c_a67796467285f769eda43c39ae058d997}{flow\_mask\_remove}(table, flow->\hyperlink{structsw__flow_a89c162e340693d0bb4977737e2b68c22}{mask});
825 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a1b494e4862736de33cbbd7cd72ee8521}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!range\+\_\+n\+\_\+bytes@{range\+\_\+n\+\_\+bytes}}
\index{range\+\_\+n\+\_\+bytes@{range\+\_\+n\+\_\+bytes}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{range\+\_\+n\+\_\+bytes}]{\setlength{\rightskip}{0pt plus 5cm}static u16 range\+\_\+n\+\_\+bytes (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow\+\_\+key\+\_\+range} $\ast$}]{range}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a1b494e4862736de33cbbd7cd72ee8521}

\begin{DoxyCode}
61 \{
62     \textcolor{keywordflow}{return} range->\hyperlink{structsw__flow__key__range_ab9c9d06e6ed2b9600d295dfdd94cc05a}{end} - range->\hyperlink{structsw__flow__key__range_a3139158cea80b4e5af36967f3748e846}{start};
63 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a38fd2d883e505bba412320f3216dc377}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!rcu\+\_\+free\+\_\+flow\+\_\+callback@{rcu\+\_\+free\+\_\+flow\+\_\+callback}}
\index{rcu\+\_\+free\+\_\+flow\+\_\+callback@{rcu\+\_\+free\+\_\+flow\+\_\+callback}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{rcu\+\_\+free\+\_\+flow\+\_\+callback}]{\setlength{\rightskip}{0pt plus 5cm}static void rcu\+\_\+free\+\_\+flow\+\_\+callback (
\begin{DoxyParamCaption}
\item[{struct rcu\+\_\+head $\ast$}]{rcu}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a38fd2d883e505bba412320f3216dc377}

\begin{DoxyCode}
162 \{
163     \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow = container\_of(\hyperlink{structsw__flow_ac58ef2fab6f9d88be75d73e4d2a1e002}{rcu}, \textcolor{keyword}{struct} \hyperlink{structsw__flow}{sw\_flow}, 
      \hyperlink{structsw__flow_ac58ef2fab6f9d88be75d73e4d2a1e002}{rcu});
164 
165     \hyperlink{flow__table_8c_af6a50f2fb2e93732e8d706dd7cf67c9b}{flow\_free}(flow);
166 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a1431ef6b130c835dd7c86bac4472664b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb@{rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb}}
\index{rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb@{rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb}]{\setlength{\rightskip}{0pt plus 5cm}static void rcu\+\_\+free\+\_\+sw\+\_\+flow\+\_\+mask\+\_\+cb (
\begin{DoxyParamCaption}
\item[{struct rcu\+\_\+head $\ast$}]{rcu}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a1431ef6b130c835dd7c86bac4472664b}

\begin{DoxyCode}
169 \{
170     \textcolor{keyword}{struct }\hyperlink{structsw__flow__mask}{sw\_flow\_mask} *mask = container\_of(\hyperlink{structsw__flow__mask_aa5aebb526fafd5f7f70b605970a72fd8}{rcu}, \textcolor{keyword}{struct} 
      \hyperlink{structsw__flow__mask}{sw\_flow\_mask}, \hyperlink{structsw__flow__mask_aa5aebb526fafd5f7f70b605970a72fd8}{rcu});
171 
172     kfree(mask);
173 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!table\+\_\+instance\+\_\+alloc@{table\+\_\+instance\+\_\+alloc}}
\index{table\+\_\+instance\+\_\+alloc@{table\+\_\+instance\+\_\+alloc}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{table\+\_\+instance\+\_\+alloc}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf table\+\_\+instance}$\ast$ table\+\_\+instance\+\_\+alloc (
\begin{DoxyParamCaption}
\item[{int}]{new\+\_\+size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}

\begin{DoxyCode}
199 \{
200     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *ti = kmalloc(\textcolor{keyword}{sizeof}(*ti), GFP\_KERNEL);
201 
202     \textcolor{keywordflow}{if} (!ti)
203         \textcolor{keywordflow}{return} NULL;
204 
205     ti->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets} = \hyperlink{flow__table_8c_a9ad4dc425c825cafea26f047d94d8880}{alloc\_buckets}(new\_size);
206 
207     \textcolor{keywordflow}{if} (!ti->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets}) \{
208         kfree(ti);
209         \textcolor{keywordflow}{return} NULL;
210     \}
211     ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets} = new\_size;
212     ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver} = 0;
213     ti->\hyperlink{structtable__instance_af7a3a9cce56cbf7ed225ac0ec3ce9eb2}{keep\_flows} = \textcolor{keyword}{false};
214     get\_random\_bytes(&ti->\hyperlink{structtable__instance_ad73f318c365fd86dda23e7ffb65d59b9}{hash\_seed}, \textcolor{keyword}{sizeof}(u32));
215 
216     \textcolor{keywordflow}{return} ti;
217 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a5abf80651b67f4198a34f7a94e116ec6}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!table\+\_\+instance\+\_\+destroy@{table\+\_\+instance\+\_\+destroy}}
\index{table\+\_\+instance\+\_\+destroy@{table\+\_\+instance\+\_\+destroy}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{table\+\_\+instance\+\_\+destroy}]{\setlength{\rightskip}{0pt plus 5cm}static void table\+\_\+instance\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ufid\+\_\+ti, }
\item[{{\bf bool}}]{deferred}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a5abf80651b67f4198a34f7a94e116ec6}

\begin{DoxyCode}
319 \{
320     \textcolor{keywordtype}{int} i;
321 
322     \textcolor{keywordflow}{if} (!ti)
323         \textcolor{keywordflow}{return};
324 
325     BUG\_ON(!ufid\_ti);
326     \textcolor{keywordflow}{if} (ti->\hyperlink{structtable__instance_af7a3a9cce56cbf7ed225ac0ec3ce9eb2}{keep\_flows})
327         \textcolor{keywordflow}{goto} skip\_flows;
328 
329     \textcolor{keywordflow}{for} (i = 0; i < ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets}; i++) \{
330         \textcolor{keyword}{struct }\hyperlink{structsw__flow}{sw\_flow} *flow;
331         \textcolor{keyword}{struct }hlist\_head *head = flex\_array\_get(ti->\hyperlink{structtable__instance_a6522309983b8c287da819f666da07355}{buckets}, i);
332         \textcolor{keyword}{struct }hlist\_node *n;
333         \textcolor{keywordtype}{int} ver = ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver};
334         \textcolor{keywordtype}{int} ufid\_ver = ufid\_ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver};
335 
336         \hyperlink{list_8h_ae2f7dd7dbbe2f13fa51aca9fcb31a03f}{hlist\_for\_each\_entry\_safe}(flow, n, head, 
      \hyperlink{structflow__table}{flow\_table}.node[ver]) \{
337             hlist\_del\_rcu(&flow->\hyperlink{structsw__flow_abca0040cced6a4a84d1a8941764fb5d6}{flow\_table}.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ver]);
338             \textcolor{keywordflow}{if} (\hyperlink{flow_8h_a995966854ceb0b5a72ff027c12ccf426}{ovs\_identifier\_is\_ufid}(&flow->\hyperlink{structsw__flow_a6e6645eec909d54871675be30000c0b9}{id}))
339                 hlist\_del\_rcu(&flow->\hyperlink{structsw__flow_af5dad10ae036092f5a26cfebb050a03a}{ufid\_table}.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ufid\_ver]);
340             \hyperlink{flow__table_8c_a8133cf46e955b2ae38a0bb8afc0a454f}{ovs\_flow\_free}(flow, deferred);
341         \}
342     \}
343 
344 skip\_flows:
345     \textcolor{keywordflow}{if} (deferred) \{
346         call\_rcu(&ti->\hyperlink{structtable__instance_acf4d72ccfb947d0d0d08732a56664978}{rcu}, \hyperlink{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}{flow\_tbl\_destroy\_rcu\_cb});
347         call\_rcu(&ufid\_ti->\hyperlink{structtable__instance_acf4d72ccfb947d0d0d08732a56664978}{rcu}, \hyperlink{flow__table_8c_a2343a61f4fa3ad010bad594467cbcfc1}{flow\_tbl\_destroy\_rcu\_cb});
348     \} \textcolor{keywordflow}{else} \{
349         \hyperlink{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{\_\_table\_instance\_destroy}(ti);
350         \hyperlink{flow__table_8c_a4699ad0074a999c5f80e77a8ff1b0ebc}{\_\_table\_instance\_destroy}(ufid\_ti);
351     \}
352 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_ae06d563df0cf3fa5d9437e35dafa64cb}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!table\+\_\+instance\+\_\+expand@{table\+\_\+instance\+\_\+expand}}
\index{table\+\_\+instance\+\_\+expand@{table\+\_\+instance\+\_\+expand}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{table\+\_\+instance\+\_\+expand}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf table\+\_\+instance}$\ast$ table\+\_\+instance\+\_\+expand (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{{\bf bool}}]{ufid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ae06d563df0cf3fa5d9437e35dafa64cb}

\begin{DoxyCode}
760 \{
761     \textcolor{keywordflow}{return} \hyperlink{flow__table_8c_a2309f644575592a9cfd583b904e33149}{table\_instance\_rehash}(ti, ti->\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets} * 2, ufid);
762 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a81b19a73c026d0c0fa6be862a1ee855b}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!table\+\_\+instance\+\_\+insert@{table\+\_\+instance\+\_\+insert}}
\index{table\+\_\+instance\+\_\+insert@{table\+\_\+instance\+\_\+insert}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{table\+\_\+instance\+\_\+insert}]{\setlength{\rightskip}{0pt plus 5cm}static void table\+\_\+instance\+\_\+insert (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a81b19a73c026d0c0fa6be862a1ee855b}

\begin{DoxyCode}
403 \{
404     \textcolor{keyword}{struct }hlist\_head *head;
405 
406     head = \hyperlink{flow__table_8c_aed00deae6497143255e822e293592558}{find\_bucket}(ti, flow->\hyperlink{structsw__flow_abca0040cced6a4a84d1a8941764fb5d6}{flow\_table}.\hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash});
407     hlist\_add\_head\_rcu(&flow->\hyperlink{structsw__flow_abca0040cced6a4a84d1a8941764fb5d6}{flow\_table}.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver}], head);
408 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a2309f644575592a9cfd583b904e33149}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!table\+\_\+instance\+\_\+rehash@{table\+\_\+instance\+\_\+rehash}}
\index{table\+\_\+instance\+\_\+rehash@{table\+\_\+instance\+\_\+rehash}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{table\+\_\+instance\+\_\+rehash}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf table\+\_\+instance}$\ast$ table\+\_\+instance\+\_\+rehash (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{int}]{n\+\_\+buckets, }
\item[{{\bf bool}}]{ufid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a2309f644575592a9cfd583b904e33149}

\begin{DoxyCode}
450 \{
451     \textcolor{keyword}{struct }\hyperlink{structtable__instance}{table\_instance} *new\_ti;
452 
453     new\_ti = \hyperlink{flow__table_8c_afa79f1c5220d4487a4236884110b9f13}{table\_instance\_alloc}(\hyperlink{structtable__instance_ae4f915a0e1b19ca677ae00c7eb5a3cb9}{n\_buckets});
454     \textcolor{keywordflow}{if} (!new\_ti)
455         \textcolor{keywordflow}{return} NULL;
456 
457     \hyperlink{flow__table_8c_ab9c9bf751ad9a09eba41b9bbad9925de}{flow\_table\_copy\_flows}(ti, new\_ti, ufid);
458 
459     \textcolor{keywordflow}{return} new\_ti;
460 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a327b2f9873b81f7b7920e85c366cc96e}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!tbl\+\_\+mask\+\_\+array\+\_\+alloc@{tbl\+\_\+mask\+\_\+array\+\_\+alloc}}
\index{tbl\+\_\+mask\+\_\+array\+\_\+alloc@{tbl\+\_\+mask\+\_\+array\+\_\+alloc}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{tbl\+\_\+mask\+\_\+array\+\_\+alloc}]{\setlength{\rightskip}{0pt plus 5cm}static struct {\bf mask\+\_\+array}$\ast$ tbl\+\_\+mask\+\_\+array\+\_\+alloc (
\begin{DoxyParamCaption}
\item[{int}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a327b2f9873b81f7b7920e85c366cc96e}

\begin{DoxyCode}
227 \{
228     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *\textcolor{keyword}{new};
229 
230     size = \hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}(\hyperlink{flow__table_8c_a8240394ae842a0ba76d82f50744ced0a}{MASK\_ARRAY\_SIZE\_MIN}, size);
231     \textcolor{keyword}{new} = kzalloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structmask__array}{mask\_array}) +
232               \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structsw__flow__mask}{sw\_flow\_mask} *) * size, GFP\_KERNEL);
233     \textcolor{keywordflow}{if} (!\textcolor{keyword}{new})
234         \textcolor{keywordflow}{return} NULL;
235 
236     \textcolor{keyword}{new}->count = 0;
237     \textcolor{keyword}{new}->max = size;
238 
239     \textcolor{keywordflow}{return} \textcolor{keyword}{new};
240 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a072572ef64d5ebcc2c99cb48945c8291}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask@{tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask}}
\index{tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask@{tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask}]{\setlength{\rightskip}{0pt plus 5cm}static void tbl\+\_\+mask\+\_\+array\+\_\+delete\+\_\+mask (
\begin{DoxyParamCaption}
\item[{struct {\bf mask\+\_\+array} $\ast$}]{ma, }
\item[{struct {\bf sw\+\_\+flow\+\_\+mask} $\ast$}]{mask}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a072572ef64d5ebcc2c99cb48945c8291}

\begin{DoxyCode}
766 \{
767     \textcolor{keywordtype}{int} i;
768 
769     \textcolor{comment}{/* Remove the deleted mask pointers from the array */}
770     \textcolor{keywordflow}{for} (i = 0; i < ma->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}; i++) \{
771         \textcolor{keywordflow}{if} (mask == \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i])) \{
772             \hyperlink{rcupdate_8h_ad30f6689018c0dc0178126e1e12897e9}{RCU\_INIT\_POINTER}(ma->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i], NULL);
773             ma->\hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count}--;
774             call\_rcu(&mask->\hyperlink{structsw__flow__mask_aa5aebb526fafd5f7f70b605970a72fd8}{rcu}, \hyperlink{flow__table_8c_a1431ef6b130c835dd7c86bac4472664b}{rcu\_free\_sw\_flow\_mask\_cb});
775             \textcolor{keywordflow}{return};
776         \}
777     \}
778     BUG();
779 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a1ba0bfff1e2a4377681774b821629e8f}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!tbl\+\_\+mask\+\_\+array\+\_\+realloc@{tbl\+\_\+mask\+\_\+array\+\_\+realloc}}
\index{tbl\+\_\+mask\+\_\+array\+\_\+realloc@{tbl\+\_\+mask\+\_\+array\+\_\+realloc}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{tbl\+\_\+mask\+\_\+array\+\_\+realloc}]{\setlength{\rightskip}{0pt plus 5cm}static int tbl\+\_\+mask\+\_\+array\+\_\+realloc (
\begin{DoxyParamCaption}
\item[{struct {\bf flow\+\_\+table} $\ast$}]{tbl, }
\item[{int}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a1ba0bfff1e2a4377681774b821629e8f}

\begin{DoxyCode}
243 \{
244     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *old;
245     \textcolor{keyword}{struct }\hyperlink{structmask__array}{mask\_array} *\textcolor{keyword}{new};
246 
247     \textcolor{keyword}{new} = \hyperlink{flow__table_8c_a327b2f9873b81f7b7920e85c366cc96e}{tbl\_mask\_array\_alloc}(size);
248     \textcolor{keywordflow}{if} (!\textcolor{keyword}{new})
249         \textcolor{keywordflow}{return} -ENOMEM;
250 
251     old = \hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array});
252     \textcolor{keywordflow}{if} (old) \{
253         \textcolor{keywordtype}{int} i, \hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count} = 0;
254 
255         \textcolor{keywordflow}{for} (i = 0; i < old->\hyperlink{structmask__array_ad981d54486b5dd03bdb4ad20b740171e}{max}; i++) \{
256             \textcolor{keywordflow}{if} (\hyperlink{datapath_8h_a06ef69170d345fd3996a467dcacf3ff3}{ovsl\_dereference}(old->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i]))
257                 \textcolor{keyword}{new}->masks[count++] = old->\hyperlink{structmask__array_a92da2b0ebde32eb6f76a134dc2d61d79}{masks}[i];
258         \}
259 
260         \textcolor{keyword}{new}->count = \hyperlink{structmask__array_a55b8fb7e2d7ad8a5725a749645f73b5a}{count};
261     \}
262     rcu\_assign\_pointer(tbl->\hyperlink{structflow__table_a0e568d59590f38936b714555597505be}{mask\_array}, \textcolor{keyword}{new});
263 
264     \textcolor{keywordflow}{if} (old)
265         call\_rcu(&old->\hyperlink{structmask__array_ac1e5ee290959115397221781b7ad1c6e}{rcu}, \hyperlink{flow__table_8c_a77da2cbea7e181821fc6931d8434bf15}{mask\_array\_rcu\_cb});
266 
267     \textcolor{keywordflow}{return} 0;
268 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_aaf879648c325750d8ff234382797f3af}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ufid\+\_\+hash@{ufid\+\_\+hash}}
\index{ufid\+\_\+hash@{ufid\+\_\+hash}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ufid\+\_\+hash}]{\setlength{\rightskip}{0pt plus 5cm}static u32 ufid\+\_\+hash (
\begin{DoxyParamCaption}
\item[{const struct {\bf sw\+\_\+flow\+\_\+id} $\ast$}]{sfid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_aaf879648c325750d8ff234382797f3af}

\begin{DoxyCode}
711 \{
712     \textcolor{keywordflow}{return} jhash(sfid->\hyperlink{structsw__flow__id_a22ce2b1fed980149931fbccb05750f3e}{ufid}, sfid->\hyperlink{structsw__flow__id_a7cfead96fedf295e55d6a17857adfbf5}{ufid\_len}, 0);
713 \}
\end{DoxyCode}
\hypertarget{flow__table_8c_a1bf31f9e45e100a65fd166420a7615b4}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!ufid\+\_\+table\+\_\+instance\+\_\+insert@{ufid\+\_\+table\+\_\+instance\+\_\+insert}}
\index{ufid\+\_\+table\+\_\+instance\+\_\+insert@{ufid\+\_\+table\+\_\+instance\+\_\+insert}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{ufid\+\_\+table\+\_\+instance\+\_\+insert}]{\setlength{\rightskip}{0pt plus 5cm}static void ufid\+\_\+table\+\_\+instance\+\_\+insert (
\begin{DoxyParamCaption}
\item[{struct {\bf table\+\_\+instance} $\ast$}]{ti, }
\item[{struct {\bf sw\+\_\+flow} $\ast$}]{flow}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_a1bf31f9e45e100a65fd166420a7615b4}

\begin{DoxyCode}
412 \{
413     \textcolor{keyword}{struct }hlist\_head *head;
414 
415     head = \hyperlink{flow__table_8c_aed00deae6497143255e822e293592558}{find\_bucket}(ti, flow->\hyperlink{structsw__flow_af5dad10ae036092f5a26cfebb050a03a}{ufid\_table}.\hyperlink{structsw__flow_a7a33a6a5c62113ffe949a700ef648a71}{hash});
416     hlist\_add\_head\_rcu(&flow->\hyperlink{structsw__flow_af5dad10ae036092f5a26cfebb050a03a}{ufid\_table}.\hyperlink{structsw__flow_ad56483ca56d2f95857eee360e934fcf2}{node}[ti->\hyperlink{structtable__instance_ab992e9218f85e3b5193ae47e8fbf3f32}{node\_ver}], head);
417 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\hypertarget{flow__table_8c_a05eb66f030d0825002eb11cc332e291e}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!\+\_\+\+\_\+read\+\_\+mostly@{\+\_\+\+\_\+read\+\_\+mostly}}
\index{\+\_\+\+\_\+read\+\_\+mostly@{\+\_\+\+\_\+read\+\_\+mostly}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{\+\_\+\+\_\+read\+\_\+mostly}]{\setlength{\rightskip}{0pt plus 5cm}struct kmem\+\_\+cache$\ast$ {\bf flow\+\_\+stats\+\_\+cache} \+\_\+\+\_\+read\+\_\+mostly}\label{flow__table_8c_a05eb66f030d0825002eb11cc332e291e}
\hypertarget{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}{}\index{flow\+\_\+table.\+c@{flow\+\_\+table.\+c}!flow\+\_\+cache@{flow\+\_\+cache}}
\index{flow\+\_\+cache@{flow\+\_\+cache}!flow\+\_\+table.\+c@{flow\+\_\+table.\+c}}
\subsubsection[{flow\+\_\+cache}]{\setlength{\rightskip}{0pt plus 5cm}struct kmem\+\_\+cache$\ast$ flow\+\_\+cache\hspace{0.3cm}{\ttfamily [static]}}\label{flow__table_8c_ab00a8de93e918b8aba331f4872a2c97c}
