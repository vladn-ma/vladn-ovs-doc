\hypertarget{compat_2udp_8c}{}\section{/home/vladn/git/ovs/datapath/linux/compat/udp.c File Reference}
\label{compat_2udp_8c}\index{/home/vladn/git/ovs/datapath/linux/compat/udp.\+c@{/home/vladn/git/ovs/datapath/linux/compat/udp.\+c}}
{\ttfamily \#include $<$linux/version.\+h$>$}\\*
{\ttfamily \#include $<$net/udp.\+h$>$}\\*
Include dependency graph for udp.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=223pt]{compat_2udp_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{compat_2udp_8c_a45502e41e2d5e1b9d7cc067bb6924f6b}{rpl\+\_\+udp\+\_\+set\+\_\+csum} (\hyperlink{types_8h_afaa87723b8417d40fcf45b7330261ef9}{bool} nocheck, struct sk\+\_\+buff $\ast$skb, \+\_\+\+\_\+be32 saddr, \+\_\+\+\_\+be32 daddr, int len)
\item 
\hyperlink{compat_2udp_8c_a72b76b3596f21a557c8aa5bc7b4901f4}{E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L} (\hyperlink{udp_8c_a45502e41e2d5e1b9d7cc067bb6924f6b}{rpl\+\_\+udp\+\_\+set\+\_\+csum})
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{compat_2udp_8c_a72b76b3596f21a557c8aa5bc7b4901f4}{}\index{compat/udp.\+c@{compat/udp.\+c}!E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L@{E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L}}
\index{E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L@{E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L}!compat/udp.\+c@{compat/udp.\+c}}
\subsubsection[{E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L}]{\setlength{\rightskip}{0pt plus 5cm}E\+X\+P\+O\+R\+T\+\_\+\+S\+Y\+M\+B\+O\+L\+\_\+\+G\+P\+L (
\begin{DoxyParamCaption}
\item[{{\bf rpl\+\_\+udp\+\_\+set\+\_\+csum}}]{}
\end{DoxyParamCaption}
)}\label{compat_2udp_8c_a72b76b3596f21a557c8aa5bc7b4901f4}
\hypertarget{compat_2udp_8c_a45502e41e2d5e1b9d7cc067bb6924f6b}{}\index{compat/udp.\+c@{compat/udp.\+c}!rpl\+\_\+udp\+\_\+set\+\_\+csum@{rpl\+\_\+udp\+\_\+set\+\_\+csum}}
\index{rpl\+\_\+udp\+\_\+set\+\_\+csum@{rpl\+\_\+udp\+\_\+set\+\_\+csum}!compat/udp.\+c@{compat/udp.\+c}}
\subsubsection[{rpl\+\_\+udp\+\_\+set\+\_\+csum}]{\setlength{\rightskip}{0pt plus 5cm}void rpl\+\_\+udp\+\_\+set\+\_\+csum (
\begin{DoxyParamCaption}
\item[{{\bf bool}}]{nocheck, }
\item[{struct sk\+\_\+buff $\ast$}]{skb, }
\item[{\+\_\+\+\_\+be32}]{saddr, }
\item[{\+\_\+\+\_\+be32}]{daddr, }
\item[{int}]{len}
\end{DoxyParamCaption}
)}\label{compat_2udp_8c_a45502e41e2d5e1b9d7cc067bb6924f6b}

\begin{DoxyCode}
12 \{
13     \textcolor{keyword}{struct }udphdr *uh = \hyperlink{linux_2udp_8h_a7b8908e197538768cf4ff9ec577bd86b}{udp\_hdr}(skb);
14 
15     \textcolor{keywordflow}{if} (nocheck)
16         uh->check = 0;
17     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (skb\_is\_gso(skb))
18         uh->check = ~\hyperlink{net_2udp_8h_ae748c37ebf3ca7c1fb8dfa45bb547486}{udp\_v4\_check}(len, saddr, daddr, 0);
19     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{skbuff_8h_abad96939496a915ab2a3e7c3b6d4498f}{skb\_dst}(skb) && \hyperlink{skbuff_8h_abad96939496a915ab2a3e7c3b6d4498f}{skb\_dst}(skb)->dev &&
20          (\hyperlink{skbuff_8h_abad96939496a915ab2a3e7c3b6d4498f}{skb\_dst}(skb)->dev->features & NETIF\_F\_V4\_CSUM)) \{
21 
22         BUG\_ON(skb->ip\_summed == \hyperlink{skbuff_8h_a627906a22e9d4cb31c7674b86eb25ef3}{CHECKSUM\_PARTIAL});
23 
24         skb->ip\_summed = \hyperlink{skbuff_8h_a627906a22e9d4cb31c7674b86eb25ef3}{CHECKSUM\_PARTIAL};
25         skb->csum\_start = \hyperlink{skbuff_8h_ad4a95a26793695e82fca60888688450f}{skb\_transport\_header}(skb) - skb->head;
26         skb->csum\_offset = offsetof(\textcolor{keyword}{struct} udphdr, check);
27         uh->check = ~\hyperlink{net_2udp_8h_ae748c37ebf3ca7c1fb8dfa45bb547486}{udp\_v4\_check}(len, saddr, daddr, 0);
28     \} \textcolor{keywordflow}{else} \{
29         \hyperlink{types_8h_a8970faa9ec4200c98293ac50174b9206}{\_\_wsum} csum;
30 
31         BUG\_ON(skb->ip\_summed == \hyperlink{skbuff_8h_a627906a22e9d4cb31c7674b86eb25ef3}{CHECKSUM\_PARTIAL});
32 
33         uh->check = 0;
34         csum = skb\_checksum(skb, 0, len, 0);
35         uh->check = \hyperlink{net_2udp_8h_ae748c37ebf3ca7c1fb8dfa45bb547486}{udp\_v4\_check}(len, saddr, daddr, csum);
36         \textcolor{keywordflow}{if} (uh->check == 0)
37             uh->check = \hyperlink{checksum_8h_a444eeba1f6868a156bcc975cd9963d63}{CSUM\_MANGLED\_0};
38 
39         skb->ip\_summed = CHECKSUM\_UNNECESSARY;
40     \}
41 \}
\end{DoxyCode}
