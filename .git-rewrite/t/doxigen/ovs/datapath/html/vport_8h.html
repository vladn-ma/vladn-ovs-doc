<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs datapath: /home/vladn/git/ovs/datapath/vport.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs datapath
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('vport_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vport.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;linux/if_tunnel.h&gt;</code><br />
<code>#include &lt;<a class="el" href="list_8h_source.html">linux/list.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="linux_2netlink_8h_source.html">linux/netlink.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="openvswitch_8h_source.html">linux/openvswitch.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="reciprocal__div_8h_source.html">linux/reciprocal_div.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="skbuff_8h_source.html">linux/skbuff.h</a>&gt;</code><br />
<code>#include &lt;linux/spinlock.h&gt;</code><br />
<code>#include &lt;<a class="el" href="u64__stats__sync_8h_source.html">linux/u64_stats_sync.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vport.h:</div>
<div class="dyncontent">
<div class="center"><img src="vport_8h__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath_2vport_8h" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath_2vport_8h" id="_2home_2vladn_2git_2ovs_2datapath_2vport_8h">
<area shape="rect" id="node3" href="list_8h.html" title="linux/list.h" alt="" coords="143,95,224,121"/><area shape="rect" id="node4" href="linux_2netlink_8h.html" title="linux/netlink.h" alt="" coords="300,95,403,121"/><area shape="rect" id="node5" href="skbuff_8h.html" title="linux/skbuff.h" alt="" coords="168,169,268,196"/><area shape="rect" id="node11" href="openvswitch_8h.html" title="linux/openvswitch.h" alt="" coords="705,95,843,121"/><area shape="rect" id="node13" href="reciprocal__div_8h.html" title="linux/reciprocal_div.h" alt="" coords="594,169,738,196"/><area shape="rect" id="node15" href="u64__stats__sync_8h.html" title="linux/u64_stats_sync.h" alt="" coords="427,95,583,121"/><area shape="rect" id="node10" href="net_2netlink_8h.html" title="net/netlink.h" alt="" coords="293,169,386,196"/><area shape="rect" id="node7" href="types_8h.html" title="linux/types.h" alt="" coords="618,244,714,271"/><area shape="rect" id="node12" href="if__ether_8h.html" title="linux/if_ether.h" alt="" coords="813,169,919,196"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="vport_8h__dep__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath_2vport_8hdep" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath_2vport_8hdep" id="_2home_2vladn_2git_2ovs_2datapath_2vport_8hdep">
<area shape="rect" id="node2" href="datapath_8h.html" title="/home/vladn/git/ovs\l/datapath/datapath.h" alt="" coords="1983,95,2125,136"/><area shape="rect" id="node3" href="actions_8c.html" title="/home/vladn/git/ovs\l/datapath/actions.c" alt="" coords="22,191,158,233"/><area shape="rect" id="node5" href="vport-internal__dev_8h.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;internal_dev.h" alt="" coords="571,191,766,233"/><area shape="rect" id="node11" href="linux_2vport_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport.c" alt="" coords="2348,295,2499,337"/><area shape="rect" id="node14" href="vport_8c.html" title="/home/vladn/git/ovs\l/datapath/vport.c" alt="" coords="2145,295,2281,337"/><area shape="rect" id="node18" href="linux_2actions_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/actions.c" alt="" coords="2461,191,2625,233"/><area shape="rect" id="node23" href="linux_2vport-geneve_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;geneve.c" alt="" coords="2649,184,2789,240"/><area shape="rect" id="node24" href="linux_2vport-lisp_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;lisp.c" alt="" coords="2813,184,2953,240"/><area shape="rect" id="node25" href="linux_2vport-stt_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport&#45;stt.c" alt="" coords="2978,191,3149,233"/><area shape="rect" id="node26" href="linux_2vport-vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;vxlan.c" alt="" coords="3173,184,3313,240"/><area shape="rect" id="node28" href="vport-geneve_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;geneve.c" alt="" coords="3337,191,3504,233"/><area shape="rect" id="node29" href="vport-lisp_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;lisp.c" alt="" coords="3529,191,3673,233"/><area shape="rect" id="node30" href="vport-stt_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;stt.c" alt="" coords="3697,191,3835,233"/><area shape="rect" id="node31" href="vport-vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;vxlan.c" alt="" coords="3859,191,4014,233"/><area shape="rect" id="node32" href="vport-netdev_8h.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;netdev.h" alt="" coords="385,191,547,233"/><area shape="rect" id="node4" href="datapath_8c.html" title="/home/vladn/git/ovs\l/datapath/datapath.c" alt="" coords="1303,295,1445,337"/><area shape="rect" id="node6" href="dp__notify_8c.html" title="/home/vladn/git/ovs\l/datapath/dp_notify.c" alt="" coords="533,295,677,337"/><area shape="rect" id="node7" href="linux_2datapath_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/datapath.c" alt="" coords="701,295,873,337"/><area shape="rect" id="node8" href="linux_2dp__notify_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/dp_notify.c" alt="" coords="5,295,180,337"/><area shape="rect" id="node9" href="linux_2vport-internal__dev_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;internal_dev.c" alt="" coords="204,288,344,344"/><area shape="rect" id="node10" href="linux_2vport-netdev_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;netdev.c" alt="" coords="368,288,508,344"/><area shape="rect" id="node12" href="vport-internal__dev_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;internal_dev.c" alt="" coords="898,295,1093,337"/><area shape="rect" id="node13" href="vport-netdev_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;netdev.c" alt="" coords="1117,295,1279,337"/><area shape="rect" id="node15" href="flow_8c.html" title="/home/vladn/git/ovs\l/datapath/flow.c" alt="" coords="2250,191,2386,233"/><area shape="rect" id="node16" href="flow__netlink_8c.html" title="/home/vladn/git/ovs\l/datapath/flow_netlink.c" alt="" coords="790,191,950,233"/><area shape="rect" id="node17" href="flow__table_8c.html" title="/home/vladn/git/ovs\l/datapath/flow_table.c" alt="" coords="975,191,1125,233"/><area shape="rect" id="node19" href="compat_2vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/compat\l/vxlan.c" alt="" coords="1150,184,1305,240"/><area shape="rect" id="node20" href="linux_2flow_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow.c" alt="" coords="1430,191,1577,233"/><area shape="rect" id="node21" href="linux_2flow__netlink_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow\l_netlink.c" alt="" coords="1601,184,1737,240"/><area shape="rect" id="node22" href="linux_2flow__table_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow\l_table.c" alt="" coords="1761,184,1897,240"/><area shape="rect" id="node27" href="vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vxlan.c" alt="" coords="1920,191,2073,233"/></map>
</div>
</div>
<p><a href="vport_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvport__net.html">vport_net</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvport__err__stats.html">vport_err_stats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvport__portids.html">vport_portids</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvport.html">vport</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvport__parms.html">vport_parms</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvport__ops.html">vport_ops</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aacc501a60108d387b8fd7535c2e6168f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#aacc501a60108d387b8fd7535c2e6168f">ovs_vport_init</a> (void)</td></tr>
<tr class="separator:aacc501a60108d387b8fd7535c2e6168f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e04c9d5d25cb3b7e23a297dc65fc6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a32e04c9d5d25cb3b7e23a297dc65fc6a">ovs_vport_exit</a> (void)</td></tr>
<tr class="separator:a32e04c9d5d25cb3b7e23a297dc65fc6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb391f83717df4f787f2eaeab8a37c6"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structvport.html">vport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#afdb391f83717df4f787f2eaeab8a37c6">ovs_vport_add</a> (const struct <a class="el" href="structvport__parms.html">vport_parms</a> *)</td></tr>
<tr class="separator:afdb391f83717df4f787f2eaeab8a37c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc0e9f4ff3c180cca51f8b3206ed0777"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#adc0e9f4ff3c180cca51f8b3206ed0777">ovs_vport_del</a> (struct <a class="el" href="structvport.html">vport</a> *)</td></tr>
<tr class="separator:adc0e9f4ff3c180cca51f8b3206ed0777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6982e9b904201400a516a90502cdb70d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structvport.html">vport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a6982e9b904201400a516a90502cdb70d">ovs_vport_locate</a> (const struct net *net, const char *name)</td></tr>
<tr class="separator:a6982e9b904201400a516a90502cdb70d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bdfff52e147a4dbcffc1e2a7ef9324f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a5bdfff52e147a4dbcffc1e2a7ef9324f">ovs_vport_get_stats</a> (struct <a class="el" href="structvport.html">vport</a> *, struct <a class="el" href="structovs__vport__stats.html">ovs_vport_stats</a> *)</td></tr>
<tr class="separator:a5bdfff52e147a4dbcffc1e2a7ef9324f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef24ec45aeec3b86710b64250d73e5bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#aef24ec45aeec3b86710b64250d73e5bd">ovs_vport_set_options</a> (struct <a class="el" href="structvport.html">vport</a> *, struct nlattr *options)</td></tr>
<tr class="separator:aef24ec45aeec3b86710b64250d73e5bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bfebde907de7f42c8af0703d06bebad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a2bfebde907de7f42c8af0703d06bebad">ovs_vport_get_options</a> (const struct <a class="el" href="structvport.html">vport</a> *, struct sk_buff *)</td></tr>
<tr class="separator:a2bfebde907de7f42c8af0703d06bebad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bed2c10bbd0eb6c412875e350135ee5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a1bed2c10bbd0eb6c412875e350135ee5">ovs_vport_set_upcall_portids</a> (struct <a class="el" href="structvport.html">vport</a> *, const struct nlattr *pids)</td></tr>
<tr class="separator:a1bed2c10bbd0eb6c412875e350135ee5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e0b3ef53961732756eb9c3a5a8c8ca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ad5e0b3ef53961732756eb9c3a5a8c8ca">ovs_vport_get_upcall_portids</a> (const struct <a class="el" href="structvport.html">vport</a> *, struct sk_buff *)</td></tr>
<tr class="separator:ad5e0b3ef53961732756eb9c3a5a8c8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae823784970f828c12bc63db65ab66468"><td class="memItemLeft" align="right" valign="top">u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ae823784970f828c12bc63db65ab66468">ovs_vport_find_upcall_portid</a> (const struct <a class="el" href="structvport.html">vport</a> *, struct sk_buff *)</td></tr>
<tr class="separator:ae823784970f828c12bc63db65ab66468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad725d17e5e6292efcc21a0d37d6d4402"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ad725d17e5e6292efcc21a0d37d6d4402">ovs_vport_send</a> (struct <a class="el" href="structvport.html">vport</a> *, struct sk_buff *)</td></tr>
<tr class="separator:ad725d17e5e6292efcc21a0d37d6d4402"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b64ee0badeb969348aae464fdc4c8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ac5b64ee0badeb969348aae464fdc4c8d">ovs_tunnel_get_egress_info</a> (struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *egress_tun_info, struct net *net, const struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *tun_info, u8 ipproto, u32 <a class="el" href="flow_8h.html#aaa98314a1108ff2209ae3bb6515e1dd5">skb_mark</a>, __be16 <a class="el" href="flow_8h.html#ad2071126c591c16c05617b0620c784e7">tp_src</a>, __be16 <a class="el" href="flow_8h.html#acb2f3d43a724a8c1782b7e55ec10b63a">tp_dst</a>)</td></tr>
<tr class="separator:ac5b64ee0badeb969348aae464fdc4c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92b973cf9ddb07398a3d1c0492b0c422"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a92b973cf9ddb07398a3d1c0492b0c422">ovs_vport_get_egress_tun_info</a> (struct <a class="el" href="structvport.html">vport</a> *<a class="el" href="structvport.html">vport</a>, struct sk_buff *skb, struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *info)</td></tr>
<tr class="separator:a92b973cf9ddb07398a3d1c0492b0c422"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
: New vport's name.</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpf550684c5c91e7251ace68bee6b3562d"></a>struct <a class="el" href="structvport__parms.html">vport_parms</a> - parameters for creating a new vport</p>
<p>: New vport's type. : OVS_VPORT_ATTR_OPTIONS attribute from Netlink message, NULL if none was supplied. : New vport's datapath. : New vport's port number. </p>
</td></tr>
<tr class="memitem:ae7c8121257f401e2981f319ad4bc250b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ae7c8121257f401e2981f319ad4bc250b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41291b69ebff49e5bd1af2b88dae3f4a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4a">vport_err_type</a> { <a class="el" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aaecdde7db6ebfd0cd6adcd6689ef7183a">VPORT_E_RX_DROPPED</a>, 
<a class="el" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa4ab58505ef7f6dd73543f741e15a4d3f">VPORT_E_RX_ERROR</a>, 
<a class="el" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14">VPORT_E_TX_DROPPED</a>, 
<a class="el" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582">VPORT_E_TX_ERROR</a>
 }</td></tr>
<tr class="separator:a41291b69ebff49e5bd1af2b88dae3f4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab889a5c45b9237944dd59ee9fe3db487"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structvport.html">vport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ab889a5c45b9237944dd59ee9fe3db487">ovs_vport_alloc</a> (int priv_size, const struct <a class="el" href="structvport__ops.html">vport_ops</a> *, const struct <a class="el" href="structvport__parms.html">vport_parms</a> *)</td></tr>
<tr class="separator:ab889a5c45b9237944dd59ee9fe3db487"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030189b9a85e6e96cc3f165f50bf49f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a030189b9a85e6e96cc3f165f50bf49f8">ovs_vport_free</a> (struct <a class="el" href="structvport.html">vport</a> *)</td></tr>
<tr class="separator:a030189b9a85e6e96cc3f165f50bf49f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91949289f78c0f0c2433ef5f20495e66"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a91949289f78c0f0c2433ef5f20495e66">ovs_vport_deferred_free</a> (struct <a class="el" href="structvport.html">vport</a> *<a class="el" href="structvport.html">vport</a>)</td></tr>
<tr class="separator:a91949289f78c0f0c2433ef5f20495e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18aa811f80cfd4c3895d96f7f3f4acd"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ad18aa811f80cfd4c3895d96f7f3f4acd">vport_priv</a> (const struct <a class="el" href="structvport.html">vport</a> *<a class="el" href="structvport.html">vport</a>)</td></tr>
<tr class="separator:ad18aa811f80cfd4c3895d96f7f3f4acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4064e2f79bf9d0523fd312d33b9d39e9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structvport.html">vport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a4064e2f79bf9d0523fd312d33b9d39e9">vport_from_priv</a> (void *priv)</td></tr>
<tr class="separator:a4064e2f79bf9d0523fd312d33b9d39e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1224e30040beab25f074b3929433f6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ad1224e30040beab25f074b3929433f6c">ovs_vport_receive</a> (struct <a class="el" href="structvport.html">vport</a> *, struct sk_buff *, const struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *)</td></tr>
<tr class="separator:ad1224e30040beab25f074b3929433f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7bba7ae75dd07feea88dde580c3569b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#ac7bba7ae75dd07feea88dde580c3569b">ovs_skb_postpush_rcsum</a> (struct sk_buff *skb, const void *start, unsigned int len)</td></tr>
<tr class="separator:ac7bba7ae75dd07feea88dde580c3569b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b6d24642324a66b7bacab2909bea2dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a6b6d24642324a66b7bacab2909bea2dc">ovs_vport_ops_register</a> (struct <a class="el" href="structvport__ops.html">vport_ops</a> *ops)</td></tr>
<tr class="separator:a6b6d24642324a66b7bacab2909bea2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8659a5c436f2b09d0b6be2c208ee790e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vport_8h.html#a8659a5c436f2b09d0b6be2c208ee790e">ovs_vport_ops_unregister</a> (struct <a class="el" href="structvport__ops.html">vport_ops</a> *ops)</td></tr>
<tr class="separator:a8659a5c436f2b09d0b6be2c208ee790e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae7c8121257f401e2981f319ad4bc250b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VPORT_ALIGN&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="a41291b69ebff49e5bd1af2b88dae3f4a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4a">vport_err_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a41291b69ebff49e5bd1af2b88dae3f4aaecdde7db6ebfd0cd6adcd6689ef7183a"></a>VPORT_E_RX_DROPPED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a41291b69ebff49e5bd1af2b88dae3f4aa4ab58505ef7f6dd73543f741e15a4d3f"></a>VPORT_E_RX_ERROR&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14"></a>VPORT_E_TX_DROPPED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582"></a>VPORT_E_TX_ERROR&#160;</td><td class="fielddoc">
</td></tr>
</table>
<div class="fragment"><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aaecdde7db6ebfd0cd6adcd6689ef7183a">VPORT_E_RX_DROPPED</a>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa4ab58505ef7f6dd73543f741e15a4d3f">VPORT_E_RX_ERROR</a>,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14">VPORT_E_TX_DROPPED</a>,</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582">VPORT_E_TX_ERROR</a>,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;};</div>
<div class="ttc" id="vport_8h_html_a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14"><div class="ttname"><a href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14">VPORT_E_TX_DROPPED</a></div><div class="ttdef"><b>Definition:</b> vport.h:186</div></div>
<div class="ttc" id="vport_8h_html_a41291b69ebff49e5bd1af2b88dae3f4aa4ab58505ef7f6dd73543f741e15a4d3f"><div class="ttname"><a href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa4ab58505ef7f6dd73543f741e15a4d3f">VPORT_E_RX_ERROR</a></div><div class="ttdef"><b>Definition:</b> vport.h:185</div></div>
<div class="ttc" id="vport_8h_html_a41291b69ebff49e5bd1af2b88dae3f4aaecdde7db6ebfd0cd6adcd6689ef7183a"><div class="ttname"><a href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aaecdde7db6ebfd0cd6adcd6689ef7183a">VPORT_E_RX_DROPPED</a></div><div class="ttdef"><b>Definition:</b> vport.h:184</div></div>
<div class="ttc" id="vport_8h_html_a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582"><div class="ttname"><a href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582">VPORT_E_TX_ERROR</a></div><div class="ttdef"><b>Definition:</b> vport.h:187</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac7bba7ae75dd07feea88dde580c3569b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ovs_skb_postpush_rcsum </td>
          <td>(</td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (skb-&gt;ip_summed == <a class="code" href="skbuff_8h.html#a207f4c225f70b6bc82d1519bb10245f7">CHECKSUM_COMPLETE</a>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        skb-&gt;csum = csum_add(skb-&gt;csum, csum_partial(start, len, 0));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="ttc" id="skbuff_8h_html_a207f4c225f70b6bc82d1519bb10245f7"><div class="ttname"><a href="skbuff_8h.html#a207f4c225f70b6bc82d1519bb10245f7">CHECKSUM_COMPLETE</a></div><div class="ttdeci">#define CHECKSUM_COMPLETE</div><div class="ttdef"><b>Definition:</b> skbuff.h:128</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac5b64ee0badeb969348aae464fdc4c8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_tunnel_get_egress_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *&#160;</td>
          <td class="paramname"><em>egress_tun_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct net *&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *&#160;</td>
          <td class="paramname"><em>tun_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&#160;</td>
          <td class="paramname"><em>ipproto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>skb_mark</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__be16&#160;</td>
          <td class="paramname"><em>tp_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">__be16&#160;</td>
          <td class="paramname"><em>tp_dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structovs__key__ipv4__tunnel.html">ovs_key_ipv4_tunnel</a> *<a class="code" href="flow_8h.html#a904e9497acde49a1992636f77597c5c7">tun_key</a>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keyword">struct </span>rtable *rt;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    __be32 saddr;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> (unlikely(!tun_info))</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    tun_key = &amp;tun_info-&gt;<a class="code" href="structovs__tunnel__info.html#a007f0c7a9938884e6e8663cb4ab20d10">tunnel</a>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    saddr = tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#a1e5a978f104d61e9694e914a109734a7">ipv4_src</a>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">/* Route lookup to get srouce IP address: saddr.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">     * The process may need to be changed if the corresponding process</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">     * in vports ops changed.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    rt = <a class="code" href="compat_8h.html#a9fd71ce2d13a3dcc4f7d51469ba86d79">find_route</a>(net,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            &amp;saddr,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#ae443d381a97f53bbc4139fe36c0aae30">ipv4_dst</a>,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            ipproto,</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#a69594eaf9d7dfc2824b264484e02498e">ipv4_tos</a>,</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <a class="code" href="flow_8h.html#aaa98314a1108ff2209ae3bb6515e1dd5">skb_mark</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (IS_ERR(rt))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">return</span> PTR_ERR(rt);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    ip_rt_put(rt);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">/* Generate egress_tun_info based on tun_info,</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">     * saddr, tp_src and tp_dst</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <a class="code" href="flow_8h.html#ae20b25e6cec56e9c0d07bc7f2c7d55ab">__ovs_flow_tun_info_init</a>(egress_tun_info,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                 saddr, tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#ae443d381a97f53bbc4139fe36c0aae30">ipv4_dst</a>,</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                 tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#a69594eaf9d7dfc2824b264484e02498e">ipv4_tos</a>,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                 tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#a24de7472a8c22903fce96b73dab68a40">ipv4_ttl</a>,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                 <a class="code" href="flow_8h.html#ad2071126c591c16c05617b0620c784e7">tp_src</a>, <a class="code" href="flow_8h.html#acb2f3d43a724a8c1782b7e55ec10b63a">tp_dst</a>,</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                 tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#ae36132bc05ca6257b572edddffcb867a">tun_id</a>,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                 tun_key-&gt;<a class="code" href="structovs__key__ipv4__tunnel.html#a7459e66ecf90329eb2fa6cf3fc4781db">tun_flags</a>,</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                 tun_info-&gt;<a class="code" href="structovs__tunnel__info.html#ae4fd786894f579a38a5955e7a0e68fd4">options</a>,</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                 tun_info-&gt;<a class="code" href="structovs__tunnel__info.html#ab50d289f61727b922831739affb28b18">options_len</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div>
<div class="ttc" id="compat_8h_html_a9fd71ce2d13a3dcc4f7d51469ba86d79"><div class="ttname"><a href="compat_8h.html#a9fd71ce2d13a3dcc4f7d51469ba86d79">find_route</a></div><div class="ttdeci">static struct rtable * find_route(struct net *net, __be32 *saddr, __be32 daddr, u8 ipproto, u8 tos, u32 skb_mark)</div><div class="ttdef"><b>Definition:</b> compat.h:46</div></div>
<div class="ttc" id="flow_8h_html_ae20b25e6cec56e9c0d07bc7f2c7d55ab"><div class="ttname"><a href="flow_8h.html#ae20b25e6cec56e9c0d07bc7f2c7d55ab">__ovs_flow_tun_info_init</a></div><div class="ttdeci">static void __ovs_flow_tun_info_init(struct ovs_tunnel_info *tun_info, __be32 saddr, __be32 daddr, u8 tos, u8 ttl, __be16 tp_src, __be16 tp_dst, __be64 tun_id, __be16 tun_flags, const void *opts, u8 opts_len)</div><div class="ttdef"><b>Definition:</b> flow.h:69</div></div>
<div class="ttc" id="structovs__tunnel__info_html_ae4fd786894f579a38a5955e7a0e68fd4"><div class="ttname"><a href="structovs__tunnel__info.html#ae4fd786894f579a38a5955e7a0e68fd4">ovs_tunnel_info::options</a></div><div class="ttdeci">const void * options</div><div class="ttdef"><b>Definition:</b> flow.h:56</div></div>
<div class="ttc" id="flow_8h_html_a904e9497acde49a1992636f77597c5c7"><div class="ttname"><a href="flow_8h.html#a904e9497acde49a1992636f77597c5c7">tun_key</a></div><div class="ttdeci">struct ovs_key_ipv4_tunnel tun_key</div><div class="ttdef"><b>Definition:</b> flow.h:105</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_a69594eaf9d7dfc2824b264484e02498e"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#a69594eaf9d7dfc2824b264484e02498e">ovs_key_ipv4_tunnel::ipv4_tos</a></div><div class="ttdeci">u8 ipv4_tos</div><div class="ttdef"><b>Definition:</b> flow.h:48</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_a7459e66ecf90329eb2fa6cf3fc4781db"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#a7459e66ecf90329eb2fa6cf3fc4781db">ovs_key_ipv4_tunnel::tun_flags</a></div><div class="ttdeci">__be16 tun_flags</div><div class="ttdef"><b>Definition:</b> flow.h:47</div></div>
<div class="ttc" id="flow_8h_html_ad2071126c591c16c05617b0620c784e7"><div class="ttname"><a href="flow_8h.html#ad2071126c591c16c05617b0620c784e7">tp_src</a></div><div class="ttdeci">__be16 tp_src</div><div class="ttdef"><b>Definition:</b> flow.h:723</div></div>
<div class="ttc" id="flow_8h_html_aaa98314a1108ff2209ae3bb6515e1dd5"><div class="ttname"><a href="flow_8h.html#aaa98314a1108ff2209ae3bb6515e1dd5">skb_mark</a></div><div class="ttdeci">u32 skb_mark</div><div class="ttdef"><b>Definition:</b> flow.h:108</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_ae443d381a97f53bbc4139fe36c0aae30"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#ae443d381a97f53bbc4139fe36c0aae30">ovs_key_ipv4_tunnel::ipv4_dst</a></div><div class="ttdeci">__be32 ipv4_dst</div><div class="ttdef"><b>Definition:</b> flow.h:46</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html">ovs_key_ipv4_tunnel</a></div><div class="ttdef"><b>Definition:</b> flow.h:43</div></div>
<div class="ttc" id="structovs__tunnel__info_html_a007f0c7a9938884e6e8663cb4ab20d10"><div class="ttname"><a href="structovs__tunnel__info.html#a007f0c7a9938884e6e8663cb4ab20d10">ovs_tunnel_info::tunnel</a></div><div class="ttdeci">struct ovs_key_ipv4_tunnel tunnel</div><div class="ttdef"><b>Definition:</b> flow.h:55</div></div>
<div class="ttc" id="flow_8h_html_acb2f3d43a724a8c1782b7e55ec10b63a"><div class="ttname"><a href="flow_8h.html#acb2f3d43a724a8c1782b7e55ec10b63a">tp_dst</a></div><div class="ttdeci">__be16 tp_dst</div><div class="ttdef"><b>Definition:</b> flow.h:724</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_a1e5a978f104d61e9694e914a109734a7"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#a1e5a978f104d61e9694e914a109734a7">ovs_key_ipv4_tunnel::ipv4_src</a></div><div class="ttdeci">__be32 ipv4_src</div><div class="ttdef"><b>Definition:</b> flow.h:45</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_a24de7472a8c22903fce96b73dab68a40"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#a24de7472a8c22903fce96b73dab68a40">ovs_key_ipv4_tunnel::ipv4_ttl</a></div><div class="ttdeci">u8 ipv4_ttl</div><div class="ttdef"><b>Definition:</b> flow.h:49</div></div>
<div class="ttc" id="structovs__tunnel__info_html_ab50d289f61727b922831739affb28b18"><div class="ttname"><a href="structovs__tunnel__info.html#ab50d289f61727b922831739affb28b18">ovs_tunnel_info::options_len</a></div><div class="ttdeci">u8 options_len</div><div class="ttdef"><b>Definition:</b> flow.h:57</div></div>
<div class="ttc" id="structovs__key__ipv4__tunnel_html_ae36132bc05ca6257b572edddffcb867a"><div class="ttname"><a href="structovs__key__ipv4__tunnel.html#ae36132bc05ca6257b572edddffcb867a">ovs_key_ipv4_tunnel::tun_id</a></div><div class="ttdeci">__be64 tun_id</div><div class="ttdef"><b>Definition:</b> flow.h:44</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afdb391f83717df4f787f2eaeab8a37c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structvport.html">vport</a>* ovs_vport_add </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvport__parms.html">vport_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_add - add vport device (for kernel callers)</p>
<p>: Information about new vport.</p>
<p>Creates a new vport with the specified configuration (which is dependent on device type). ovs_mutex must be held. </p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport__ops.html">vport_ops</a> *ops;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport.html">vport</a> *<a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    ops = <a class="code" href="linux_2vport_8c.html#aab54c81e64893c3944d80fa035056648">ovs_vport_lookup</a>(parms);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (ops) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keyword">struct </span>hlist_head *bucket;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">if</span> (!try_module_get(ops-&gt;<a class="code" href="structvport__ops.html#a74f3e852dbe8137d21e87895bd5f94e9">owner</a>))</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">return</span> ERR_PTR(-EAFNOSUPPORT);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        vport = ops-&gt;<a class="code" href="structvport__ops.html#acf3642d1a18755d25c37e9634c6945a2">create</a>(parms);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (IS_ERR(vport)) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            module_put(ops-&gt;<a class="code" href="structvport__ops.html#a74f3e852dbe8137d21e87895bd5f94e9">owner</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        bucket = <a class="code" href="linux_2vport_8c.html#af8f78ca35e84187b7b26a12676e363bc">hash_bucket</a>(<a class="code" href="datapath_8h.html#aef2302004ca1f45133eaef00bb3740eb">ovs_dp_get_net</a>(vport-&gt;<a class="code" href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">dp</a>),</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                     vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#abe0c3315271724bf05338487e0ced13c">get_name</a>(vport));</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        hlist_add_head_rcu(&amp;vport-&gt;<a class="code" href="structvport.html#ae6324a0c2483c3d1600cb29a6f4bcb8d">hash_node</a>, bucket);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">/* Unlock to attempt module load and return -EAGAIN if load</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">     * was successful as we need to restart the port addition</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">     * workflow.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="datapath_8c.html#ac3ccfd98a880ed6d2480209be0d16680">ovs_unlock</a>();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    request_module(<span class="stringliteral">&quot;vport-type-%d&quot;</span>, parms-&gt;<a class="code" href="structvport__parms.html#ad79f91d20a33ff64cd72cad0b83ffae3">type</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="datapath_8c.html#a092c1f450b78a173c890ed4c56839e1a">ovs_lock</a>();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="linux_2vport_8c.html#aab54c81e64893c3944d80fa035056648">ovs_vport_lookup</a>(parms))</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EAFNOSUPPORT);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EAGAIN);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="ttc" id="datapath_8c_html_a092c1f450b78a173c890ed4c56839e1a"><div class="ttname"><a href="datapath_8c.html#a092c1f450b78a173c890ed4c56839e1a">ovs_lock</a></div><div class="ttdeci">void ovs_lock(void)</div><div class="ttdef"><b>Definition:</b> datapath.c:120</div></div>
<div class="ttc" id="linux_2vport_8c_html_af8f78ca35e84187b7b26a12676e363bc"><div class="ttname"><a href="linux_2vport_8c.html#af8f78ca35e84187b7b26a12676e363bc">hash_bucket</a></div><div class="ttdeci">static struct hlist_head * hash_bucket(const struct net *net, const char *name)</div><div class="ttdef"><b>Definition:</b> vport.c:74</div></div>
<div class="ttc" id="structvport__ops_html_abe0c3315271724bf05338487e0ced13c"><div class="ttname"><a href="structvport__ops.html#abe0c3315271724bf05338487e0ced13c">vport_ops::get_name</a></div><div class="ttdeci">const char *(* get_name)(const struct vport *)</div><div class="ttdef"><b>Definition:</b> vport.h:173</div></div>
<div class="ttc" id="structvport__parms_html_ad79f91d20a33ff64cd72cad0b83ffae3"><div class="ttname"><a href="structvport__parms.html#ad79f91d20a33ff64cd72cad0b83ffae3">vport_parms::type</a></div><div class="ttdeci">enum ovs_vport_type type</div><div class="ttdef"><b>Definition:</b> vport.h:134</div></div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="structvport__ops_html"><div class="ttname"><a href="structvport__ops.html">vport_ops</a></div><div class="ttdef"><b>Definition:</b> vport.h:162</div></div>
<div class="ttc" id="structvport_html_a49fb6f6bf0ac4337853e9242e88ddc42"><div class="ttname"><a href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">vport::dp</a></div><div class="ttdeci">struct datapath * dp</div><div class="ttdef"><b>Definition:</b> vport.h:108</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:106</div></div>
<div class="ttc" id="datapath_8c_html_ac3ccfd98a880ed6d2480209be0d16680"><div class="ttname"><a href="datapath_8c.html#ac3ccfd98a880ed6d2480209be0d16680">ovs_unlock</a></div><div class="ttdeci">void ovs_unlock(void)</div><div class="ttdef"><b>Definition:</b> datapath.c:125</div></div>
<div class="ttc" id="structvport__ops_html_a74f3e852dbe8137d21e87895bd5f94e9"><div class="ttname"><a href="structvport__ops.html#a74f3e852dbe8137d21e87895bd5f94e9">vport_ops::owner</a></div><div class="ttdeci">struct module * owner</div><div class="ttdef"><b>Definition:</b> vport.h:179</div></div>
<div class="ttc" id="structvport_html_ae6324a0c2483c3d1600cb29a6f4bcb8d"><div class="ttname"><a href="structvport.html#ae6324a0c2483c3d1600cb29a6f4bcb8d">vport::hash_node</a></div><div class="ttdeci">struct hlist_node hash_node</div><div class="ttdef"><b>Definition:</b> vport.h:112</div></div>
<div class="ttc" id="linux_2vport_8c_html_aab54c81e64893c3944d80fa035056648"><div class="ttname"><a href="linux_2vport_8c.html#aab54c81e64893c3944d80fa035056648">ovs_vport_lookup</a></div><div class="ttdeci">static struct vport_ops * ovs_vport_lookup(const struct vport_parms *parms)</div><div class="ttdef"><b>Definition:</b> vport.c:173</div></div>
<div class="ttc" id="structvport__ops_html_acf3642d1a18755d25c37e9634c6945a2"><div class="ttname"><a href="structvport__ops.html#acf3642d1a18755d25c37e9634c6945a2">vport_ops::create</a></div><div class="ttdeci">struct vport *(* create)(const struct vport_parms *)</div><div class="ttdef"><b>Definition:</b> vport.h:166</div></div>
<div class="ttc" id="datapath_8h_html_aef2302004ca1f45133eaef00bb3740eb"><div class="ttname"><a href="datapath_8h.html#aef2302004ca1f45133eaef00bb3740eb">ovs_dp_get_net</a></div><div class="ttdeci">static struct net * ovs_dp_get_net(const struct datapath *dp)</div><div class="ttdef"><b>Definition:</b> datapath.h:157</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab889a5c45b9237944dd59ee9fe3db487"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structvport.html">vport</a>* ovs_vport_alloc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priv_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structvport__ops.html">vport_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structvport__parms.html">vport_parms</a> *&#160;</td>
          <td class="paramname"><em>parms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_alloc - allocate and initialize new vport</p>
<p>: Size of private data area to allocate. : vport device ops</p>
<p>Allocate and initialize a new vport defined by . The vport will contain a private data area of size  that can be accessed using <a class="el" href="vport_8h.html#ad18aa811f80cfd4c3895d96f7f3f4acd">vport_priv()</a>. vports that are no longer needed should be released with <a class="el" href="linux_2vport_8c.html#a17e57e95b47bad0bcf00e2e2805e2170">ovs_vport_free()</a>. </p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport.html">vport</a> *<a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">size_t</span> alloc_size;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    alloc_size = <span class="keyword">sizeof</span>(<span class="keyword">struct </span>vport);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (priv_size) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        alloc_size = ALIGN(alloc_size, <a class="code" href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        alloc_size += priv_size;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    vport = kzalloc(alloc_size, GFP_KERNEL);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (!vport)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-ENOMEM);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    vport-&gt;<a class="code" href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">dp</a> = parms-&gt;<a class="code" href="structvport__parms.html#a15faa866e3d35a721de77b347017499e">dp</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    vport-&gt;<a class="code" href="structvport.html#aae00fc5d12b47f02cbfd4f67ae114b58">port_no</a> = parms-&gt;<a class="code" href="structvport__parms.html#a5bc77ace899b9bbdb6d7f833b31c009a">port_no</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a> = <a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    INIT_HLIST_NODE(&amp;vport-&gt;<a class="code" href="structvport.html#a27d2c94e2edd5de172e0b866cdd70fea">dp_hash_node</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="linux_2vport_8c.html#a8d6c13e6f31531135adf06eb8004a20a">ovs_vport_set_upcall_portids</a>(vport, parms-&gt;<a class="code" href="structvport__parms.html#ae9dbd12fddc1869a17229cef771a4d29">upcall_portids</a>)) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        kfree(vport);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-EINVAL);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    vport-&gt;<a class="code" href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">percpu_stats</a> = <a class="code" href="netdevice_8h.html#ac860eb13284bc990b8da39516ec6d4b4">netdev_alloc_pcpu_stats</a>(<span class="keyword">struct</span> <a class="code" href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (!vport-&gt;<a class="code" href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">percpu_stats</a>) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        kfree(vport);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-ENOMEM);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> vport;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="ttc" id="vport_8h_html_ae7c8121257f401e2981f319ad4bc250b"><div class="ttname"><a href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a></div><div class="ttdeci">#define VPORT_ALIGN</div><div class="ttdef"><b>Definition:</b> vport.h:195</div></div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="linux_2vport_8c_html_a8d6c13e6f31531135adf06eb8004a20a"><div class="ttname"><a href="linux_2vport_8c.html#a8d6c13e6f31531135adf06eb8004a20a">ovs_vport_set_upcall_portids</a></div><div class="ttdeci">int ovs_vport_set_upcall_portids(struct vport *vport, const struct nlattr *ids)</div><div class="ttdef"><b>Definition:</b> vport.c:393</div></div>
<div class="ttc" id="structvport_html_a27d2c94e2edd5de172e0b866cdd70fea"><div class="ttname"><a href="structvport.html#a27d2c94e2edd5de172e0b866cdd70fea">vport::dp_hash_node</a></div><div class="ttdeci">struct hlist_node dp_hash_node</div><div class="ttdef"><b>Definition:</b> vport.h:113</div></div>
<div class="ttc" id="structvport_html_a49fb6f6bf0ac4337853e9242e88ddc42"><div class="ttname"><a href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">vport::dp</a></div><div class="ttdeci">struct datapath * dp</div><div class="ttdef"><b>Definition:</b> vport.h:108</div></div>
<div class="ttc" id="structvport__parms_html_ae9dbd12fddc1869a17229cef771a4d29"><div class="ttname"><a href="structvport__parms.html#ae9dbd12fddc1869a17229cef771a4d29">vport_parms::upcall_portids</a></div><div class="ttdeci">struct nlattr * upcall_portids</div><div class="ttdef"><b>Definition:</b> vport.h:140</div></div>
<div class="ttc" id="structvport__parms_html_a5bc77ace899b9bbdb6d7f833b31c009a"><div class="ttname"><a href="structvport__parms.html#a5bc77ace899b9bbdb6d7f833b31c009a">vport_parms::port_no</a></div><div class="ttdeci">u16 port_no</div><div class="ttdef"><b>Definition:</b> vport.h:139</div></div>
<div class="ttc" id="structvport_html_aae00fc5d12b47f02cbfd4f67ae114b58"><div class="ttname"><a href="structvport.html#aae00fc5d12b47f02cbfd4f67ae114b58">vport::port_no</a></div><div class="ttdeci">u16 port_no</div><div class="ttdef"><b>Definition:</b> vport.h:110</div></div>
<div class="ttc" id="netdevice_8h_html_ac860eb13284bc990b8da39516ec6d4b4"><div class="ttname"><a href="netdevice_8h.html#ac860eb13284bc990b8da39516ec6d4b4">netdev_alloc_pcpu_stats</a></div><div class="ttdeci">#define netdev_alloc_pcpu_stats(type)</div><div class="ttdef"><b>Definition:</b> netdevice.h:179</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:106</div></div>
<div class="ttc" id="structvport__parms_html_a15faa866e3d35a721de77b347017499e"><div class="ttname"><a href="structvport__parms.html#a15faa866e3d35a721de77b347017499e">vport_parms::dp</a></div><div class="ttdeci">struct datapath * dp</div><div class="ttdef"><b>Definition:</b> vport.h:138</div></div>
<div class="ttc" id="structvport_html_a04983f0d17ae4deb6ffb87333f6d4f05"><div class="ttname"><a href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">vport::percpu_stats</a></div><div class="ttdeci">struct pcpu_sw_netstats __percpu * percpu_stats</div><div class="ttdef"><b>Definition:</b> vport.h:116</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html"><div class="ttname"><a href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a></div><div class="ttdef"><b>Definition:</b> netdevice.h:169</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a91949289f78c0f0c2433ef5f20495e66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_deferred_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">if</span> (!vport)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    call_rcu(&amp;vport-&gt;<a class="code" href="structvport.html#ac08b8a62e054bc2840a9ba6964091f89">rcu</a>, <a class="code" href="linux_2vport_8c.html#a4ea8e8dfba95df3fed74709b0930f7e0">free_vport_rcu</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="ttc" id="structvport_html_ac08b8a62e054bc2840a9ba6964091f89"><div class="ttname"><a href="structvport.html#ac08b8a62e054bc2840a9ba6964091f89">vport::rcu</a></div><div class="ttdeci">struct rcu_head rcu</div><div class="ttdef"><b>Definition:</b> vport.h:107</div></div>
<div class="ttc" id="linux_2vport_8c_html_a4ea8e8dfba95df3fed74709b0930f7e0"><div class="ttname"><a href="linux_2vport_8c.html#a4ea8e8dfba95df3fed74709b0930f7e0">free_vport_rcu</a></div><div class="ttdeci">static void free_vport_rcu(struct rcu_head *rcu)</div><div class="ttdef"><b>Definition:</b> vport.c:570</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc0e9f4ff3c180cca51f8b3206ed0777"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_del </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_del - delete existing vport device</p>
<p>: vport to delete.</p>
<p>Detaches  from its datapath and destroys it. It is possible to fail for reasons such as lack of memory. ovs_mutex must be held. </p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;{</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="datapath_8h.html#af8d476fa8191790e6f57cad0623f192c">ASSERT_OVSL</a>();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    hlist_del_rcu(&amp;vport-&gt;<a class="code" href="structvport.html#ae6324a0c2483c3d1600cb29a6f4bcb8d">hash_node</a>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    module_put(vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a74f3e852dbe8137d21e87895bd5f94e9">owner</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a4fd321083545d82f308dc78331649632">destroy</a>(vport);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="datapath_8h_html_af8d476fa8191790e6f57cad0623f192c"><div class="ttname"><a href="datapath_8h.html#af8d476fa8191790e6f57cad0623f192c">ASSERT_OVSL</a></div><div class="ttdeci">#define ASSERT_OVSL()</div><div class="ttdef"><b>Definition:</b> datapath.h:151</div></div>
<div class="ttc" id="structvport__ops_html_a4fd321083545d82f308dc78331649632"><div class="ttname"><a href="structvport__ops.html#a4fd321083545d82f308dc78331649632">vport_ops::destroy</a></div><div class="ttdeci">void(* destroy)(struct vport *)</div><div class="ttdef"><b>Definition:</b> vport.h:167</div></div>
<div class="ttc" id="structvport__ops_html_a74f3e852dbe8137d21e87895bd5f94e9"><div class="ttname"><a href="structvport__ops.html#a74f3e852dbe8137d21e87895bd5f94e9">vport_ops::owner</a></div><div class="ttdeci">struct module * owner</div><div class="ttdef"><b>Definition:</b> vport.h:179</div></div>
<div class="ttc" id="structvport_html_ae6324a0c2483c3d1600cb29a6f4bcb8d"><div class="ttname"><a href="structvport.html#ae6324a0c2483c3d1600cb29a6f4bcb8d">vport::hash_node</a></div><div class="ttdeci">struct hlist_node hash_node</div><div class="ttdef"><b>Definition:</b> vport.h:112</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a32e04c9d5d25cb3b7e23a297dc65fc6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_exit - shutdown vport subsystem</p>
<p>Called at module exit time to shutdown the vport subsystem. </p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;{</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    kfree(<a class="code" href="linux_2vport_8c.html#a8d8eed219fbfb344d996f7695a356e5d">dev_table</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="ttc" id="linux_2vport_8c_html_a8d8eed219fbfb344d996f7695a356e5d"><div class="ttname"><a href="linux_2vport_8c.html#a8d8eed219fbfb344d996f7695a356e5d">dev_table</a></div><div class="ttdeci">static struct hlist_head * dev_table</div><div class="ttdef"><b>Definition:</b> vport.c:46</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae823784970f828c12bc63db65ab66468"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u32 ovs_vport_find_upcall_portid </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_find_upcall_portid - find the upcall portid to send upcall.</p>
<p>: vport from which the missed packet is received. : skb that the missed packet was received.</p>
<p>Uses the <a class="el" href="skbuff_8h.html#acb236314b209f764af9aae7fbbb04311">skb_get_hash()</a> to select the upcall portid to send the upcall.</p>
<p>Returns the portid of the target socket. Must be called with rcu_read_lock. </p>
<div class="fragment"><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;{</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport__portids.html">vport_portids</a> *<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    u32 hash;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    ids = rcu_dereference(vport-&gt;<a class="code" href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">upcall_portids</a>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">if</span> (ids-&gt;<a class="code" href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">n_ids</a> == 1 &amp;&amp; ids-&gt;<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>[0] == 0)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    hash = <a class="code" href="skbuff_8h.html#acb236314b209f764af9aae7fbbb04311">skb_get_hash</a>(skb);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> ids-&gt;<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>[hash - ids-&gt;<a class="code" href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">n_ids</a> * <a class="code" href="reciprocal__div_8h.html#a1aeee1ba3d23d8252d3df41c25c1fb68">reciprocal_divide</a>(hash, ids-&gt;<a class="code" href="structvport__portids.html#a9828dc460e2dd5ef92f6c4a1eba6bc3b">rn_ids</a>)];</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="ttc" id="reciprocal__div_8h_html_a1aeee1ba3d23d8252d3df41c25c1fb68"><div class="ttname"><a href="reciprocal__div_8h.html#a1aeee1ba3d23d8252d3df41c25c1fb68">reciprocal_divide</a></div><div class="ttdeci">#define reciprocal_divide</div><div class="ttdef"><b>Definition:</b> reciprocal_div.h:30</div></div>
<div class="ttc" id="structvport__portids_html"><div class="ttname"><a href="structvport__portids.html">vport_portids</a></div><div class="ttdef"><b>Definition:</b> vport.h:86</div></div>
<div class="ttc" id="structvport_html_a7963679d5c8d3a923eb42faf9d5fb2d1"><div class="ttname"><a href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">vport::upcall_portids</a></div><div class="ttdeci">struct vport_portids __rcu * upcall_portids</div><div class="ttdef"><b>Definition:</b> vport.h:109</div></div>
<div class="ttc" id="skbuff_8h_html_acb236314b209f764af9aae7fbbb04311"><div class="ttname"><a href="skbuff_8h.html#acb236314b209f764af9aae7fbbb04311">skb_get_hash</a></div><div class="ttdeci">#define skb_get_hash</div><div class="ttdef"><b>Definition:</b> skbuff.h:306</div></div>
<div class="ttc" id="structvport__portids_html_aa8570053786f982366b3dfb513479628"><div class="ttname"><a href="structvport__portids.html#aa8570053786f982366b3dfb513479628">vport_portids::ids</a></div><div class="ttdeci">u32 ids[]</div><div class="ttdef"><b>Definition:</b> vport.h:90</div></div>
<div class="ttc" id="structvport__portids_html_ac76f512a0f0dbe3468b006e66bddc420"><div class="ttname"><a href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">vport_portids::n_ids</a></div><div class="ttdeci">u32 n_ids</div><div class="ttdef"><b>Definition:</b> vport.h:89</div></div>
<div class="ttc" id="structvport__portids_html_a9828dc460e2dd5ef92f6c4a1eba6bc3b"><div class="ttname"><a href="structvport__portids.html#a9828dc460e2dd5ef92f6c4a1eba6bc3b">vport_portids::rn_ids</a></div><div class="ttdeci">struct reciprocal_value rn_ids</div><div class="ttdef"><b>Definition:</b> vport.h:87</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a030189b9a85e6e96cc3f165f50bf49f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_free - uninitialize and free vport</p>
<p>: vport to free</p>
<p>Frees a vport allocated with <a class="el" href="linux_2vport_8c.html#a9198ee06111592d2cf6c3b2bf94561c1">ovs_vport_alloc()</a> when it is no longer needed.</p>
<p>The caller must ensure that an RCU grace period has passed since the last time  was in a datapath. </p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    kfree(<a class="code" href="rcupdate_8h.html#a9e866c0e8ba667e053cb8f59af572157">rcu_dereference_raw</a>(vport-&gt;<a class="code" href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">upcall_portids</a>));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    free_percpu(vport-&gt;<a class="code" href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">percpu_stats</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    kfree(vport);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="rcupdate_8h_html_a9e866c0e8ba667e053cb8f59af572157"><div class="ttname"><a href="rcupdate_8h.html#a9e866c0e8ba667e053cb8f59af572157">rcu_dereference_raw</a></div><div class="ttdeci">#define rcu_dereference_raw(p)</div><div class="ttdef"><b>Definition:</b> rcupdate.h:15</div></div>
<div class="ttc" id="structvport_html_a7963679d5c8d3a923eb42faf9d5fb2d1"><div class="ttname"><a href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">vport::upcall_portids</a></div><div class="ttdeci">struct vport_portids __rcu * upcall_portids</div><div class="ttdef"><b>Definition:</b> vport.h:109</div></div>
<div class="ttc" id="structvport_html_a04983f0d17ae4deb6ffb87333f6d4f05"><div class="ttname"><a href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">vport::percpu_stats</a></div><div class="ttdeci">struct pcpu_sw_netstats __percpu * percpu_stats</div><div class="ttdef"><b>Definition:</b> vport.h:116</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a92b973cf9ddb07398a3d1c0492b0c422"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_get_egress_tun_info </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;{</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">/* get_egress_tun_info() is only implemented on tunnel ports. */</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (unlikely(!vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a80a9e57f33d01dceca77f83fd3b88d23">get_egress_tun_info</a>))</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">return</span> vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a80a9e57f33d01dceca77f83fd3b88d23">get_egress_tun_info</a>(vport, skb, info);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;}</div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="structvport__ops_html_a80a9e57f33d01dceca77f83fd3b88d23"><div class="ttname"><a href="structvport__ops.html#a80a9e57f33d01dceca77f83fd3b88d23">vport_ops::get_egress_tun_info</a></div><div class="ttdeci">int(* get_egress_tun_info)(struct vport *, struct sk_buff *, struct ovs_tunnel_info *)</div><div class="ttdef"><b>Definition:</b> vport.h:176</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2bfebde907de7f42c8af0703d06bebad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_get_options </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_get_options - retrieve device options</p>
<p>: vport from which to retrieve the options. : sk_buff where options should be appended.</p>
<p>Retrieves the configuration of the given device, appending an OVS_VPORT_ATTR_OPTIONS attribute that in turn contains nested vport-specific attributes to .</p>
<p>Returns 0 if successful, -EMSGSIZE if  has insufficient room, or another negative error code if a real error occurred. If an error occurs,  is left unmodified.</p>
<p>Must be called with ovs_mutex or rcu_read_lock. </p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keyword">struct </span>nlattr *nla;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (!vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#aacbd431343ae726a067b66b9b9de8ec4">get_options</a>)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    nla = nla_nest_start(skb, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a>);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">if</span> (!nla)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">return</span> -EMSGSIZE;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    err = vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#aacbd431343ae726a067b66b9b9de8ec4">get_options</a>(vport, skb);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        nla_nest_cancel(skb, nla);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    nla_nest_end(skb, nla);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464dac0bc104dd1ef77ac2f0a0f9d6f087239">OVS_VPORT_ATTR_OPTIONS</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:274</div></div>
<div class="ttc" id="structvport__ops_html_aacbd431343ae726a067b66b9b9de8ec4"><div class="ttname"><a href="structvport__ops.html#aacbd431343ae726a067b66b9b9de8ec4">vport_ops::get_options</a></div><div class="ttdeci">int(* get_options)(const struct vport *, struct sk_buff *)</div><div class="ttdef"><b>Definition:</b> vport.h:170</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5bdfff52e147a4dbcffc1e2a7ef9324f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_get_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structovs__vport__stats.html">ovs_vport_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_get_stats - retrieve device stats</p>
<p>: vport from which to retrieve the stats : location to store stats</p>
<p>Retrieves transmit, receive, and error stats for the given device.</p>
<p>Must be called with ovs_mutex or rcu_read_lock. </p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">/* We potentially have two surces of stats that need to be</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">     * combined: those we have collected (split into err_stats and</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">     * percpu_stats), and device error stats from netdev-&gt;get_stats()</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">     * (for errors that happen downstream and therefore aren&#39;t</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">     * reported through our vport_record_error() function).</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">     * Stats from first source are reported by ovs over</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">     * OVS_VPORT_ATTR_STATS.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">     * netdev-stats can be directly read over netlink-ioctl.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#a95d0551abc4c1f3874e60fbaa593a63c">rx_errors</a>  = atomic_long_read(&amp;vport-&gt;<a class="code" href="structvport.html#a5cd8a50cb02833a868db549d64052c99">err_stats</a>.<a class="code" href="structvport__err__stats.html#ad253987f143edfffea6546baa0e990f6">rx_errors</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#ac0233ed277e2568b4471479beaa4b642">tx_errors</a>  = atomic_long_read(&amp;vport-&gt;<a class="code" href="structvport.html#a5cd8a50cb02833a868db549d64052c99">err_stats</a>.<a class="code" href="structvport__err__stats.html#a24478cbc4a61b5454a4247830bf2c7b4">tx_errors</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#a9b32bc999ba296823133077db108027f">tx_dropped</a> = atomic_long_read(&amp;vport-&gt;<a class="code" href="structvport.html#a5cd8a50cb02833a868db549d64052c99">err_stats</a>.<a class="code" href="structvport__err__stats.html#a299aaacfac0fe9d48ddd000674b7816a">tx_dropped</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#a91152608a32f597ef28ef5de32b716e9">rx_dropped</a> = atomic_long_read(&amp;vport-&gt;<a class="code" href="structvport.html#a5cd8a50cb02833a868db549d64052c99">err_stats</a>.<a class="code" href="structvport__err__stats.html#a38849ae05107fbf9e9824149b60bd91f">rx_dropped</a>);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#a27cf52cea0ff9168cd2b536edee94284">rx_bytes</a>     = 0;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#ae40f3501f32e41cdf6658cc8725f48e7">rx_packets</a>   = 0;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#a2602d5f9072e762b4a6091874c02fd1c">tx_bytes</a>     = 0;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    stats-&gt;<a class="code" href="structovs__vport__stats.html#adb91be6e2d6695cb19acc87d817191c5">tx_packets</a>   = 0;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="cpumask_8h.html#ad15c4fe55a8b712e3bf1049320f3c3cb">for_each_possible_cpu</a>(i) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a> *percpu_stats;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keyword">struct </span><a class="code" href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a> local_stats;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        percpu_stats = per_cpu_ptr(vport-&gt;<a class="code" href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">percpu_stats</a>, i);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            start = <a class="code" href="u64__stats__sync_8h.html#addfaebb71638dbc159aaee907e45fe84">u64_stats_fetch_begin_irq</a>(&amp;percpu_stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">syncp</a>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            local_stats = *percpu_stats;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        } <span class="keywordflow">while</span> (<a class="code" href="u64__stats__sync_8h.html#a663ca602e197bee607ec46f743c839e1">u64_stats_fetch_retry_irq</a>(&amp;percpu_stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">syncp</a>, start));</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        stats-&gt;<a class="code" href="structovs__vport__stats.html#a27cf52cea0ff9168cd2b536edee94284">rx_bytes</a>     += local_stats.rx_bytes;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        stats-&gt;<a class="code" href="structovs__vport__stats.html#ae40f3501f32e41cdf6658cc8725f48e7">rx_packets</a>   += local_stats.rx_packets;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        stats-&gt;<a class="code" href="structovs__vport__stats.html#a2602d5f9072e762b4a6091874c02fd1c">tx_bytes</a>     += local_stats.tx_bytes;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        stats-&gt;<a class="code" href="structovs__vport__stats.html#adb91be6e2d6695cb19acc87d817191c5">tx_packets</a>   += local_stats.tx_packets;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="ttc" id="structovs__vport__stats_html_a27cf52cea0ff9168cd2b536edee94284"><div class="ttname"><a href="structovs__vport__stats.html#a27cf52cea0ff9168cd2b536edee94284">ovs_vport_stats::rx_bytes</a></div><div class="ttdeci">__u64 rx_bytes</div><div class="ttdef"><b>Definition:</b> openvswitch.h:131</div></div>
<div class="ttc" id="structvport__err__stats_html_a38849ae05107fbf9e9824149b60bd91f"><div class="ttname"><a href="structvport__err__stats.html#a38849ae05107fbf9e9824149b60bd91f">vport_err_stats::rx_dropped</a></div><div class="ttdeci">atomic_long_t rx_dropped</div><div class="ttdef"><b>Definition:</b> vport.h:71</div></div>
<div class="ttc" id="structvport__err__stats_html_a24478cbc4a61b5454a4247830bf2c7b4"><div class="ttname"><a href="structvport__err__stats.html#a24478cbc4a61b5454a4247830bf2c7b4">vport_err_stats::tx_errors</a></div><div class="ttdeci">atomic_long_t tx_errors</div><div class="ttdef"><b>Definition:</b> vport.h:74</div></div>
<div class="ttc" id="structvport__err__stats_html_ad253987f143edfffea6546baa0e990f6"><div class="ttname"><a href="structvport__err__stats.html#ad253987f143edfffea6546baa0e990f6">vport_err_stats::rx_errors</a></div><div class="ttdeci">atomic_long_t rx_errors</div><div class="ttdef"><b>Definition:</b> vport.h:72</div></div>
<div class="ttc" id="u64__stats__sync_8h_html_addfaebb71638dbc159aaee907e45fe84"><div class="ttname"><a href="u64__stats__sync_8h.html#addfaebb71638dbc159aaee907e45fe84">u64_stats_fetch_begin_irq</a></div><div class="ttdeci">static unsigned int u64_stats_fetch_begin_irq(const struct u64_stats_sync *syncp)</div><div class="ttdef"><b>Definition:</b> u64_stats_sync.h:128</div></div>
<div class="ttc" id="structovs__vport__stats_html_a2602d5f9072e762b4a6091874c02fd1c"><div class="ttname"><a href="structovs__vport__stats.html#a2602d5f9072e762b4a6091874c02fd1c">ovs_vport_stats::tx_bytes</a></div><div class="ttdeci">__u64 tx_bytes</div><div class="ttdef"><b>Definition:</b> openvswitch.h:132</div></div>
<div class="ttc" id="structovs__vport__stats_html_ac0233ed277e2568b4471479beaa4b642"><div class="ttname"><a href="structovs__vport__stats.html#ac0233ed277e2568b4471479beaa4b642">ovs_vport_stats::tx_errors</a></div><div class="ttdeci">__u64 tx_errors</div><div class="ttdef"><b>Definition:</b> openvswitch.h:134</div></div>
<div class="ttc" id="structovs__vport__stats_html_adb91be6e2d6695cb19acc87d817191c5"><div class="ttname"><a href="structovs__vport__stats.html#adb91be6e2d6695cb19acc87d817191c5">ovs_vport_stats::tx_packets</a></div><div class="ttdeci">__u64 tx_packets</div><div class="ttdef"><b>Definition:</b> openvswitch.h:130</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_a09b11d813594941c06b3e1e818a9b543"><div class="ttname"><a href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">pcpu_sw_netstats::syncp</a></div><div class="ttdeci">struct u64_stats_sync syncp</div><div class="ttdef"><b>Definition:</b> netdevice.h:174</div></div>
<div class="ttc" id="structvport__err__stats_html_a299aaacfac0fe9d48ddd000674b7816a"><div class="ttname"><a href="structvport__err__stats.html#a299aaacfac0fe9d48ddd000674b7816a">vport_err_stats::tx_dropped</a></div><div class="ttdeci">atomic_long_t tx_dropped</div><div class="ttdef"><b>Definition:</b> vport.h:73</div></div>
<div class="ttc" id="structvport_html_a5cd8a50cb02833a868db549d64052c99"><div class="ttname"><a href="structvport.html#a5cd8a50cb02833a868db549d64052c99">vport::err_stats</a></div><div class="ttdeci">struct vport_err_stats err_stats</div><div class="ttdef"><b>Definition:</b> vport.h:118</div></div>
<div class="ttc" id="structovs__vport__stats_html_a95d0551abc4c1f3874e60fbaa593a63c"><div class="ttname"><a href="structovs__vport__stats.html#a95d0551abc4c1f3874e60fbaa593a63c">ovs_vport_stats::rx_errors</a></div><div class="ttdeci">__u64 rx_errors</div><div class="ttdef"><b>Definition:</b> openvswitch.h:133</div></div>
<div class="ttc" id="structovs__vport__stats_html_ae40f3501f32e41cdf6658cc8725f48e7"><div class="ttname"><a href="structovs__vport__stats.html#ae40f3501f32e41cdf6658cc8725f48e7">ovs_vport_stats::rx_packets</a></div><div class="ttdeci">__u64 rx_packets</div><div class="ttdef"><b>Definition:</b> openvswitch.h:129</div></div>
<div class="ttc" id="structvport_html_a04983f0d17ae4deb6ffb87333f6d4f05"><div class="ttname"><a href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">vport::percpu_stats</a></div><div class="ttdeci">struct pcpu_sw_netstats __percpu * percpu_stats</div><div class="ttdef"><b>Definition:</b> vport.h:116</div></div>
<div class="ttc" id="structovs__vport__stats_html_a91152608a32f597ef28ef5de32b716e9"><div class="ttname"><a href="structovs__vport__stats.html#a91152608a32f597ef28ef5de32b716e9">ovs_vport_stats::rx_dropped</a></div><div class="ttdeci">__u64 rx_dropped</div><div class="ttdef"><b>Definition:</b> openvswitch.h:135</div></div>
<div class="ttc" id="cpumask_8h_html_ad15c4fe55a8b712e3bf1049320f3c3cb"><div class="ttname"><a href="cpumask_8h.html#ad15c4fe55a8b712e3bf1049320f3c3cb">for_each_possible_cpu</a></div><div class="ttdeci">#define for_each_possible_cpu</div><div class="ttdef"><b>Definition:</b> cpumask.h:8</div></div>
<div class="ttc" id="u64__stats__sync_8h_html_a663ca602e197bee607ec46f743c839e1"><div class="ttname"><a href="u64__stats__sync_8h.html#a663ca602e197bee607ec46f743c839e1">u64_stats_fetch_retry_irq</a></div><div class="ttdeci">static bool u64_stats_fetch_retry_irq(const struct u64_stats_sync *syncp, unsigned int start)</div><div class="ttdef"><b>Definition:</b> u64_stats_sync.h:140</div></div>
<div class="ttc" id="structovs__vport__stats_html_a9b32bc999ba296823133077db108027f"><div class="ttname"><a href="structovs__vport__stats.html#a9b32bc999ba296823133077db108027f">ovs_vport_stats::tx_dropped</a></div><div class="ttdeci">__u64 tx_dropped</div><div class="ttdef"><b>Definition:</b> openvswitch.h:136</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html"><div class="ttname"><a href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a></div><div class="ttdef"><b>Definition:</b> netdevice.h:169</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5e0b3ef53961732756eb9c3a5a8c8ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_get_upcall_portids </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_get_upcall_portids - get the upcall_portids of .</p>
<p>: vport from which to retrieve the portids. : sk_buff where portids should be appended.</p>
<p>Retrieves the configuration of the given vport, appending the OVS_VPORT_ATTR_UPCALL_PID attribute which is the array of upcall portids to .</p>
<p>Returns 0 if successful, -EMSGSIZE if  has insufficient room. If an error occurs,  is left unmodified. Must be called with ovs_mutex or rcu_read_lock. </p>
<div class="fragment"><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport__portids.html">vport_portids</a> *<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    ids = <a class="code" href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a>(vport-&gt;<a class="code" href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">upcall_portids</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (vport-&gt;<a class="code" href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">dp</a>-&gt;<a class="code" href="structdatapath.html#a92ce3b704c20f18b3a696f98b6f7d266">user_features</a> &amp; <a class="code" href="openvswitch_8h.html#ad3d54910ac07af143977d6082e222a5f">OVS_DP_F_VPORT_PIDS</a>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> nla_put(skb, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                   ids-&gt;<a class="code" href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">n_ids</a> * <span class="keyword">sizeof</span>(u32), (<span class="keywordtype">void</span> *) ids-&gt;<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span> nla_put_u32(skb, <a class="code" href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a>, ids-&gt;<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>[0]);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div>
<div class="ttc" id="structvport_html_a49fb6f6bf0ac4337853e9242e88ddc42"><div class="ttname"><a href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">vport::dp</a></div><div class="ttdeci">struct datapath * dp</div><div class="ttdef"><b>Definition:</b> vport.h:108</div></div>
<div class="ttc" id="structvport__portids_html"><div class="ttname"><a href="structvport__portids.html">vport_portids</a></div><div class="ttdef"><b>Definition:</b> vport.h:86</div></div>
<div class="ttc" id="openvswitch_8h_html_ad3d54910ac07af143977d6082e222a5f"><div class="ttname"><a href="openvswitch_8h.html#ad3d54910ac07af143977d6082e222a5f">OVS_DP_F_VPORT_PIDS</a></div><div class="ttdeci">#define OVS_DP_F_VPORT_PIDS</div><div class="ttdef"><b>Definition:</b> openvswitch.h:143</div></div>
<div class="ttc" id="structvport_html_a7963679d5c8d3a923eb42faf9d5fb2d1"><div class="ttname"><a href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">vport::upcall_portids</a></div><div class="ttdeci">struct vport_portids __rcu * upcall_portids</div><div class="ttdef"><b>Definition:</b> vport.h:109</div></div>
<div class="ttc" id="structvport__portids_html_aa8570053786f982366b3dfb513479628"><div class="ttname"><a href="structvport__portids.html#aa8570053786f982366b3dfb513479628">vport_portids::ids</a></div><div class="ttdeci">u32 ids[]</div><div class="ttdef"><b>Definition:</b> vport.h:90</div></div>
<div class="ttc" id="openvswitch_8h_html_aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2"><div class="ttname"><a href="openvswitch_8h.html#aae19f7a3f207d3adc0b9a30b79c6464da3afa40888197949fd69c2f5f6076fcc2">OVS_VPORT_ATTR_UPCALL_PID</a></div><div class="ttdef"><b>Definition:</b> openvswitch.h:275</div></div>
<div class="ttc" id="structvport__portids_html_ac76f512a0f0dbe3468b006e66bddc420"><div class="ttname"><a href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">vport_portids::n_ids</a></div><div class="ttdeci">u32 n_ids</div><div class="ttdef"><b>Definition:</b> vport.h:89</div></div>
<div class="ttc" id="structdatapath_html_a92ce3b704c20f18b3a696f98b6f7d266"><div class="ttname"><a href="structdatapath.html#a92ce3b704c20f18b3a696f98b6f7d266">datapath::user_features</a></div><div class="ttdeci">u32 user_features</div><div class="ttdef"><b>Definition:</b> datapath.h:94</div></div>
<div class="ttc" id="datapath_8h_html_a5f2a2c1026f970f0052e77f5ebba33d1"><div class="ttname"><a href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a></div><div class="ttdeci">#define rcu_dereference_ovsl(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:154</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aacc501a60108d387b8fd7535c2e6168f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_init - initialize vport subsystem</p>
<p>Called at module load time to initialize the vport subsystem. </p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="linux_2vport_8c.html#a8d8eed219fbfb344d996f7695a356e5d">dev_table</a> = kzalloc(<a class="code" href="linux_2vport_8c.html#a46b55d1d4d6cc07a83259f332ff555ad">VPORT_HASH_BUCKETS</a> * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> hlist_head),</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                GFP_KERNEL);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="linux_2vport_8c.html#a8d8eed219fbfb344d996f7695a356e5d">dev_table</a>)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="linux_2vport_8c_html_a8d8eed219fbfb344d996f7695a356e5d"><div class="ttname"><a href="linux_2vport_8c.html#a8d8eed219fbfb344d996f7695a356e5d">dev_table</a></div><div class="ttdeci">static struct hlist_head * dev_table</div><div class="ttdef"><b>Definition:</b> vport.c:46</div></div>
<div class="ttc" id="linux_2vport_8c_html_a46b55d1d4d6cc07a83259f332ff555ad"><div class="ttname"><a href="linux_2vport_8c.html#a46b55d1d4d6cc07a83259f332ff555ad">VPORT_HASH_BUCKETS</a></div><div class="ttdeci">#define VPORT_HASH_BUCKETS</div><div class="ttdef"><b>Definition:</b> vport.c:47</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6982e9b904201400a516a90502cdb70d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structvport.html">vport</a>* ovs_vport_locate </td>
          <td>(</td>
          <td class="paramtype">const struct net *&#160;</td>
          <td class="paramname"><em>net</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keyword">struct </span>hlist_head *bucket = <a class="code" href="linux_2vport_8c.html#af8f78ca35e84187b7b26a12676e363bc">hash_bucket</a>(net, name);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport.html">vport</a> *<a class="code" href="structvport.html">vport</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="rculist_8h.html#a482ed6bca0b607f6455d5386f3b1ed75">hlist_for_each_entry_rcu</a>(vport, bucket, <a class="code" href="structvport.html#ae6324a0c2483c3d1600cb29a6f4bcb8d">hash_node</a>)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        if (!strcmp(name, vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;get_name(vport)) &amp;&amp;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            net_eq(<a class="code" href="datapath_8h.html#aef2302004ca1f45133eaef00bb3740eb">ovs_dp_get_net</a>(vport-&gt;<a class="code" href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">dp</a>), net))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            return vport;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    return NULL;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="ttc" id="linux_2vport_8c_html_af8f78ca35e84187b7b26a12676e363bc"><div class="ttname"><a href="linux_2vport_8c.html#af8f78ca35e84187b7b26a12676e363bc">hash_bucket</a></div><div class="ttdeci">static struct hlist_head * hash_bucket(const struct net *net, const char *name)</div><div class="ttdef"><b>Definition:</b> vport.c:74</div></div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="structvport_html_a49fb6f6bf0ac4337853e9242e88ddc42"><div class="ttname"><a href="structvport.html#a49fb6f6bf0ac4337853e9242e88ddc42">vport::dp</a></div><div class="ttdeci">struct datapath * dp</div><div class="ttdef"><b>Definition:</b> vport.h:108</div></div>
<div class="ttc" id="rculist_8h_html_a482ed6bca0b607f6455d5386f3b1ed75"><div class="ttname"><a href="rculist_8h.html#a482ed6bca0b607f6455d5386f3b1ed75">hlist_for_each_entry_rcu</a></div><div class="ttdeci">#define hlist_for_each_entry_rcu(pos, head, member)</div><div class="ttdef"><b>Definition:</b> rculist.h:13</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:106</div></div>
<div class="ttc" id="structvport_html_ae6324a0c2483c3d1600cb29a6f4bcb8d"><div class="ttname"><a href="structvport.html#ae6324a0c2483c3d1600cb29a6f4bcb8d">vport::hash_node</a></div><div class="ttdeci">struct hlist_node hash_node</div><div class="ttdef"><b>Definition:</b> vport.h:112</div></div>
<div class="ttc" id="datapath_8h_html_aef2302004ca1f45133eaef00bb3740eb"><div class="ttname"><a href="datapath_8h.html#aef2302004ca1f45133eaef00bb3740eb">ovs_dp_get_net</a></div><div class="ttdeci">static struct net * ovs_dp_get_net(const struct datapath *dp)</div><div class="ttdef"><b>Definition:</b> datapath.h:157</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b6d24642324a66b7bacab2909bea2dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_ops_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport__ops.html">vport_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">int</span> err = -EEXIST;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport__ops.html">vport_ops</a> *o;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="datapath_8c.html#a092c1f450b78a173c890ed4c56839e1a">ovs_lock</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    list_for_each_entry(o, &amp;vport_ops_list, <a class="code" href="structvport__ops.html#aa0eadb49f41db4919e247ce17dd77aed">list</a>)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    if (ops-&gt;<a class="code" href="flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a> == o-&gt;<a class="code" href="flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a>)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        goto errout;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    list_add_tail(&amp;ops-&gt;<a class="code" href="structvport__ops.html#aa0eadb49f41db4919e247ce17dd77aed">list</a>, &amp;vport_ops_list);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    err = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;errout:</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="datapath_8c.html#ac3ccfd98a880ed6d2480209be0d16680">ovs_unlock</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    return err;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="ttc" id="datapath_8c_html_a092c1f450b78a173c890ed4c56839e1a"><div class="ttname"><a href="datapath_8c.html#a092c1f450b78a173c890ed4c56839e1a">ovs_lock</a></div><div class="ttdeci">void ovs_lock(void)</div><div class="ttdef"><b>Definition:</b> datapath.c:120</div></div>
<div class="ttc" id="flow_8h_html_ab22aaab04f806700def00f32823fcb9e"><div class="ttname"><a href="flow_8h.html#ab22aaab04f806700def00f32823fcb9e">type</a></div><div class="ttdeci">__be16 type</div><div class="ttdef"><b>Definition:</b> flow.h:117</div></div>
<div class="ttc" id="structvport__ops_html_aa0eadb49f41db4919e247ce17dd77aed"><div class="ttname"><a href="structvport__ops.html#aa0eadb49f41db4919e247ce17dd77aed">vport_ops::list</a></div><div class="ttdeci">struct list_head list</div><div class="ttdef"><b>Definition:</b> vport.h:180</div></div>
<div class="ttc" id="structvport__ops_html"><div class="ttname"><a href="structvport__ops.html">vport_ops</a></div><div class="ttdef"><b>Definition:</b> vport.h:162</div></div>
<div class="ttc" id="datapath_8c_html_ac3ccfd98a880ed6d2480209be0d16680"><div class="ttname"><a href="datapath_8c.html#ac3ccfd98a880ed6d2480209be0d16680">ovs_unlock</a></div><div class="ttdeci">void ovs_unlock(void)</div><div class="ttdef"><b>Definition:</b> datapath.c:125</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8659a5c436f2b09d0b6be2c208ee790e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_ops_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport__ops.html">vport_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="datapath_8c.html#a092c1f450b78a173c890ed4c56839e1a">ovs_lock</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    list_del(&amp;ops-&gt;<a class="code" href="structvport__ops.html#aa0eadb49f41db4919e247ce17dd77aed">list</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="datapath_8c.html#ac3ccfd98a880ed6d2480209be0d16680">ovs_unlock</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="ttc" id="datapath_8c_html_a092c1f450b78a173c890ed4c56839e1a"><div class="ttname"><a href="datapath_8c.html#a092c1f450b78a173c890ed4c56839e1a">ovs_lock</a></div><div class="ttdeci">void ovs_lock(void)</div><div class="ttdef"><b>Definition:</b> datapath.c:120</div></div>
<div class="ttc" id="structvport__ops_html_aa0eadb49f41db4919e247ce17dd77aed"><div class="ttname"><a href="structvport__ops.html#aa0eadb49f41db4919e247ce17dd77aed">vport_ops::list</a></div><div class="ttdeci">struct list_head list</div><div class="ttdef"><b>Definition:</b> vport.h:180</div></div>
<div class="ttc" id="datapath_8c_html_ac3ccfd98a880ed6d2480209be0d16680"><div class="ttname"><a href="datapath_8c.html#ac3ccfd98a880ed6d2480209be0d16680">ovs_unlock</a></div><div class="ttdeci">void ovs_unlock(void)</div><div class="ttdef"><b>Definition:</b> datapath.c:125</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad1224e30040beab25f074b3929433f6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_vport_receive </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structovs__tunnel__info.html">ovs_tunnel_info</a> *&#160;</td>
          <td class="paramname"><em>tun_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_receive - pass up received packet to the datapath for processing</p>
<p>: vport that received the packet : skb that was received : tunnel (if any) that carried packet</p>
<p>Must be called with rcu_read_lock. The packet cannot be shared and skb-&gt;data should point to the Ethernet header. The caller must have already called compute_ip_summed() to initialize the checksumming fields. </p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keyword">struct </span><a class="code" href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a> *stats;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow__key.html">sw_flow_key</a> key;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">int</span> error;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    stats = <a class="code" href="percpu_8h.html#a1cd55f287dff5c4a79fc11dd38d47c12">this_cpu_ptr</a>(vport-&gt;<a class="code" href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">percpu_stats</a>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="u64__stats__sync_8h.html#a79de6de9a2c8c4e1c98d78e5689b74f7">u64_stats_update_begin</a>(&amp;stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">syncp</a>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#aef09f7c9a31a557c278f7768f6d54488">rx_packets</a>++;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#ae71ad7ad7c404b7820d022d42c515a70">rx_bytes</a> += skb-&gt;len + (<a class="code" href="if__vlan_8h.html#a0bdf3e26944669a4265c7e717e846215">skb_vlan_tag_present</a>(skb) ? VLAN_HLEN : 0);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="u64__stats__sync_8h.html#a4005b558b0a34d25298936e8d899e980">u64_stats_update_end</a>(&amp;stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">syncp</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="gso_8h.html#a41c183a631fa349a124a3c25724d8d0e">ovs_skb_init_inner_protocol</a>(skb);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="datapath_8h.html#ac337c4d4ddca29916ce8e900038ddd78">OVS_CB</a>(skb)-&gt;input_vport = vport;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="datapath_8h.html#ac337c4d4ddca29916ce8e900038ddd78">OVS_CB</a>(skb)-&gt;egress_tun_info = NULL;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    error = <a class="code" href="flow_8c.html#a88b5c281d297950115033a17dbce5208">ovs_flow_key_extract</a>(tun_info, skb, &amp;key);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (unlikely(error)) {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        kfree_skb(skb);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="datapath_8c.html#aa52cbaf8a4e68129287bfc8ddcde0711">ovs_dp_process_packet</a>(skb, &amp;key);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div>
<div class="ttc" id="datapath_8c_html_aa52cbaf8a4e68129287bfc8ddcde0711"><div class="ttname"><a href="datapath_8c.html#aa52cbaf8a4e68129287bfc8ddcde0711">ovs_dp_process_packet</a></div><div class="ttdeci">void ovs_dp_process_packet(struct sk_buff *skb, struct sw_flow_key *key)</div><div class="ttdef"><b>Definition:</b> datapath.c:260</div></div>
<div class="ttc" id="gso_8h_html_a41c183a631fa349a124a3c25724d8d0e"><div class="ttname"><a href="gso_8h.html#a41c183a631fa349a124a3c25724d8d0e">ovs_skb_init_inner_protocol</a></div><div class="ttdeci">static void ovs_skb_init_inner_protocol(struct sk_buff *skb)</div><div class="ttdef"><b>Definition:</b> gso.h:110</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_ae71ad7ad7c404b7820d022d42c515a70"><div class="ttname"><a href="structpcpu__sw__netstats.html#ae71ad7ad7c404b7820d022d42c515a70">pcpu_sw_netstats::rx_bytes</a></div><div class="ttdeci">u64 rx_bytes</div><div class="ttdef"><b>Definition:</b> netdevice.h:171</div></div>
<div class="ttc" id="datapath_8h_html_ac337c4d4ddca29916ce8e900038ddd78"><div class="ttname"><a href="datapath_8h.html#ac337c4d4ddca29916ce8e900038ddd78">OVS_CB</a></div><div class="ttdeci">#define OVS_CB(skb)</div><div class="ttdef"><b>Definition:</b> datapath.h:108</div></div>
<div class="ttc" id="u64__stats__sync_8h_html_a4005b558b0a34d25298936e8d899e980"><div class="ttname"><a href="u64__stats__sync_8h.html#a4005b558b0a34d25298936e8d899e980">u64_stats_update_end</a></div><div class="ttdeci">static void u64_stats_update_end(struct u64_stats_sync *syncp)</div><div class="ttdef"><b>Definition:</b> u64_stats_sync.h:90</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_a09b11d813594941c06b3e1e818a9b543"><div class="ttname"><a href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">pcpu_sw_netstats::syncp</a></div><div class="ttdeci">struct u64_stats_sync syncp</div><div class="ttdef"><b>Definition:</b> netdevice.h:174</div></div>
<div class="ttc" id="percpu_8h_html_a1cd55f287dff5c4a79fc11dd38d47c12"><div class="ttname"><a href="percpu_8h.html#a1cd55f287dff5c4a79fc11dd38d47c12">this_cpu_ptr</a></div><div class="ttdeci">#define this_cpu_ptr(ptr)</div><div class="ttdef"><b>Definition:</b> percpu.h:7</div></div>
<div class="ttc" id="structsw__flow__key_html"><div class="ttname"><a href="structsw__flow__key.html">sw_flow_key</a></div><div class="ttdef"><b>Definition:</b> flow.h:122</div></div>
<div class="ttc" id="flow_8c_html_a88b5c281d297950115033a17dbce5208"><div class="ttname"><a href="flow_8c.html#a88b5c281d297950115033a17dbce5208">ovs_flow_key_extract</a></div><div class="ttdeci">int ovs_flow_key_extract(const struct ovs_tunnel_info *tun_info, struct sk_buff *skb, struct sw_flow_key *key)</div><div class="ttdef"><b>Definition:</b> flow.c:685</div></div>
<div class="ttc" id="if__vlan_8h_html_a0bdf3e26944669a4265c7e717e846215"><div class="ttname"><a href="if__vlan_8h.html#a0bdf3e26944669a4265c7e717e846215">skb_vlan_tag_present</a></div><div class="ttdeci">#define skb_vlan_tag_present(skb)</div><div class="ttdef"><b>Definition:</b> if_vlan.h:175</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_aef09f7c9a31a557c278f7768f6d54488"><div class="ttname"><a href="structpcpu__sw__netstats.html#aef09f7c9a31a557c278f7768f6d54488">pcpu_sw_netstats::rx_packets</a></div><div class="ttdeci">u64 rx_packets</div><div class="ttdef"><b>Definition:</b> netdevice.h:170</div></div>
<div class="ttc" id="structvport_html_a04983f0d17ae4deb6ffb87333f6d4f05"><div class="ttname"><a href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">vport::percpu_stats</a></div><div class="ttdeci">struct pcpu_sw_netstats __percpu * percpu_stats</div><div class="ttdef"><b>Definition:</b> vport.h:116</div></div>
<div class="ttc" id="u64__stats__sync_8h_html_a79de6de9a2c8c4e1c98d78e5689b74f7"><div class="ttname"><a href="u64__stats__sync_8h.html#a79de6de9a2c8c4e1c98d78e5689b74f7">u64_stats_update_begin</a></div><div class="ttdeci">static void u64_stats_update_begin(struct u64_stats_sync *syncp)</div><div class="ttdef"><b>Definition:</b> u64_stats_sync.h:83</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html"><div class="ttname"><a href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a></div><div class="ttdef"><b>Definition:</b> netdevice.h:169</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad725d17e5e6292efcc21a0d37d6d4402"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_send </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sk_buff *&#160;</td>
          <td class="paramname"><em>skb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_send - send a packet on a device</p>
<p>: vport on which to send the packet : skb to send</p>
<p>Sends the given packet and returns the length of data sent. Either ovs lock or rcu_read_lock must be held. </p>
<div class="fragment"><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;{</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordtype">int</span> sent = vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a70034105b72fdde6d137bbc7e5d55a6a">send</a>(vport, skb);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">if</span> (likely(sent &gt; 0)) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keyword">struct </span><a class="code" href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a> *stats;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        stats = <a class="code" href="percpu_8h.html#a1cd55f287dff5c4a79fc11dd38d47c12">this_cpu_ptr</a>(vport-&gt;<a class="code" href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">percpu_stats</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="u64__stats__sync_8h.html#a79de6de9a2c8c4e1c98d78e5689b74f7">u64_stats_update_begin</a>(&amp;stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">syncp</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a1b3e22436ccc3b5d13124f481eb2261f">tx_packets</a>++;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#ab017757f36d020e04458ef3748fe1d69">tx_bytes</a> += sent;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="u64__stats__sync_8h.html#a4005b558b0a34d25298936e8d899e980">u64_stats_update_end</a>(&amp;stats-&gt;<a class="code" href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">syncp</a>);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sent &lt; 0) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="linux_2vport_8c.html#a76cfadb621b3e59bcf1a0268c1ea9715">ovs_vport_record_error</a>(vport, <a class="code" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582">VPORT_E_TX_ERROR</a>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <a class="code" href="linux_2vport_8c.html#a76cfadb621b3e59bcf1a0268c1ea9715">ovs_vport_record_error</a>(vport, <a class="code" href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14">VPORT_E_TX_DROPPED</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">return</span> sent;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div>
<div class="ttc" id="vport_8h_html_a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14"><div class="ttname"><a href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa38f5ebc68979e7e533166635cc649a14">VPORT_E_TX_DROPPED</a></div><div class="ttdef"><b>Definition:</b> vport.h:186</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_ab017757f36d020e04458ef3748fe1d69"><div class="ttname"><a href="structpcpu__sw__netstats.html#ab017757f36d020e04458ef3748fe1d69">pcpu_sw_netstats::tx_bytes</a></div><div class="ttdeci">u64 tx_bytes</div><div class="ttdef"><b>Definition:</b> netdevice.h:173</div></div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
<div class="ttc" id="u64__stats__sync_8h_html_a4005b558b0a34d25298936e8d899e980"><div class="ttname"><a href="u64__stats__sync_8h.html#a4005b558b0a34d25298936e8d899e980">u64_stats_update_end</a></div><div class="ttdeci">static void u64_stats_update_end(struct u64_stats_sync *syncp)</div><div class="ttdef"><b>Definition:</b> u64_stats_sync.h:90</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_a09b11d813594941c06b3e1e818a9b543"><div class="ttname"><a href="structpcpu__sw__netstats.html#a09b11d813594941c06b3e1e818a9b543">pcpu_sw_netstats::syncp</a></div><div class="ttdeci">struct u64_stats_sync syncp</div><div class="ttdef"><b>Definition:</b> netdevice.h:174</div></div>
<div class="ttc" id="percpu_8h_html_a1cd55f287dff5c4a79fc11dd38d47c12"><div class="ttname"><a href="percpu_8h.html#a1cd55f287dff5c4a79fc11dd38d47c12">this_cpu_ptr</a></div><div class="ttdeci">#define this_cpu_ptr(ptr)</div><div class="ttdef"><b>Definition:</b> percpu.h:7</div></div>
<div class="ttc" id="structvport_html_a04983f0d17ae4deb6ffb87333f6d4f05"><div class="ttname"><a href="structvport.html#a04983f0d17ae4deb6ffb87333f6d4f05">vport::percpu_stats</a></div><div class="ttdeci">struct pcpu_sw_netstats __percpu * percpu_stats</div><div class="ttdef"><b>Definition:</b> vport.h:116</div></div>
<div class="ttc" id="u64__stats__sync_8h_html_a79de6de9a2c8c4e1c98d78e5689b74f7"><div class="ttname"><a href="u64__stats__sync_8h.html#a79de6de9a2c8c4e1c98d78e5689b74f7">u64_stats_update_begin</a></div><div class="ttdeci">static void u64_stats_update_begin(struct u64_stats_sync *syncp)</div><div class="ttdef"><b>Definition:</b> u64_stats_sync.h:83</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html_a1b3e22436ccc3b5d13124f481eb2261f"><div class="ttname"><a href="structpcpu__sw__netstats.html#a1b3e22436ccc3b5d13124f481eb2261f">pcpu_sw_netstats::tx_packets</a></div><div class="ttdeci">u64 tx_packets</div><div class="ttdef"><b>Definition:</b> netdevice.h:172</div></div>
<div class="ttc" id="vport_8h_html_a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582"><div class="ttname"><a href="vport_8h.html#a41291b69ebff49e5bd1af2b88dae3f4aa67aa9ca01bf39dbcf42e1c39bea62582">VPORT_E_TX_ERROR</a></div><div class="ttdef"><b>Definition:</b> vport.h:187</div></div>
<div class="ttc" id="structvport__ops_html_a70034105b72fdde6d137bbc7e5d55a6a"><div class="ttname"><a href="structvport__ops.html#a70034105b72fdde6d137bbc7e5d55a6a">vport_ops::send</a></div><div class="ttdeci">int(* send)(struct vport *, struct sk_buff *)</div><div class="ttdef"><b>Definition:</b> vport.h:175</div></div>
<div class="ttc" id="linux_2vport_8c_html_a76cfadb621b3e59bcf1a0268c1ea9715"><div class="ttname"><a href="linux_2vport_8c.html#a76cfadb621b3e59bcf1a0268c1ea9715">ovs_vport_record_error</a></div><div class="ttdeci">static void ovs_vport_record_error(struct vport *, enum vport_err_type err_type)</div><div class="ttdef"><b>Definition:</b> vport.c:547</div></div>
<div class="ttc" id="structpcpu__sw__netstats_html"><div class="ttname"><a href="structpcpu__sw__netstats.html">pcpu_sw_netstats</a></div><div class="ttdef"><b>Definition:</b> netdevice.h:169</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef24ec45aeec3b86710b64250d73e5bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_set_options </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct nlattr *&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_set_options - modify existing vport device (for kernel callers)</p>
<p>: vport to modify. : New configuration.</p>
<p>Modifies an existing device with the specified configuration (which is dependent on device type). ovs_mutex must be held. </p>
<div class="fragment"><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">if</span> (!vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a2a99b53de4cfaeaf8fb88d41660f5e73">set_options</a>)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">return</span> -EOPNOTSUPP;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> vport-&gt;<a class="code" href="structvport.html#a5af933fc664c1194ac3bbc337da35586">ops</a>-&gt;<a class="code" href="structvport__ops.html#a2a99b53de4cfaeaf8fb88d41660f5e73">set_options</a>(vport, options);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="ttc" id="structvport__ops_html_a2a99b53de4cfaeaf8fb88d41660f5e73"><div class="ttname"><a href="structvport__ops.html#a2a99b53de4cfaeaf8fb88d41660f5e73">vport_ops::set_options</a></div><div class="ttdeci">int(* set_options)(struct vport *, struct nlattr *)</div><div class="ttdef"><b>Definition:</b> vport.h:169</div></div>
<div class="ttc" id="structvport_html_a5af933fc664c1194ac3bbc337da35586"><div class="ttname"><a href="structvport.html#a5af933fc664c1194ac3bbc337da35586">vport::ops</a></div><div class="ttdeci">const struct vport_ops * ops</div><div class="ttdef"><b>Definition:</b> vport.h:114</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1bed2c10bbd0eb6c412875e350135ee5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_vport_set_upcall_portids </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct nlattr *&#160;</td>
          <td class="paramname"><em>ids</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ovs_vport_set_upcall_portids - set upcall portids of .</p>
<p>: vport to modify. : new configuration, an array of port ids.</p>
<p>Sets the vport's upcall_portids to .</p>
<p>Returns 0 if successful, -EINVAL if  is zero length or cannot be parsed as an array of U32.</p>
<p>Must be called with ovs_mutex. </p>
<div class="fragment"><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;{</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">struct </span><a class="code" href="structvport__portids.html">vport_portids</a> *old, *<a class="code" href="structvport__portids.html">vport_portids</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (!nla_len(<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>) || nla_len(<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>) % <span class="keyword">sizeof</span>(u32))</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">return</span> -EINVAL;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    old = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(vport-&gt;<a class="code" href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">upcall_portids</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    vport_portids = kmalloc(<span class="keyword">sizeof</span> *vport_portids + nla_len(<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>),</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                GFP_KERNEL);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">if</span> (!vport_portids)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    vport_portids-&gt;<a class="code" href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">n_ids</a> = nla_len(<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>) / <span class="keyword">sizeof</span>(u32);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    vport_portids-&gt;<a class="code" href="structvport__portids.html#a9828dc460e2dd5ef92f6c4a1eba6bc3b">rn_ids</a> = <a class="code" href="reciprocal__div_8h.html#a78adc7b97028a17a134f8a0cd82c5c82">reciprocal_value</a>(vport_portids-&gt;<a class="code" href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">n_ids</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    nla_memcpy(vport_portids-&gt;<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>, <a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>, nla_len(<a class="code" href="structvport__portids.html#aa8570053786f982366b3dfb513479628">ids</a>));</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    rcu_assign_pointer(vport-&gt;<a class="code" href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">upcall_portids</a>, vport_portids);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (old)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        call_rcu(&amp;old-&gt;<a class="code" href="structvport__portids.html#ab5cbafb043788d6b07ed054824f6167c">rcu</a>, <a class="code" href="linux_2vport_8c.html#af0d1fe416a91b69f19cb2be6eaf89dde">vport_portids_destroy_rcu_cb</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="ttc" id="structvport__portids_html_ab5cbafb043788d6b07ed054824f6167c"><div class="ttname"><a href="structvport__portids.html#ab5cbafb043788d6b07ed054824f6167c">vport_portids::rcu</a></div><div class="ttdeci">struct rcu_head rcu</div><div class="ttdef"><b>Definition:</b> vport.h:88</div></div>
<div class="ttc" id="structvport__portids_html"><div class="ttname"><a href="structvport__portids.html">vport_portids</a></div><div class="ttdef"><b>Definition:</b> vport.h:86</div></div>
<div class="ttc" id="datapath_8h_html_a06ef69170d345fd3996a467dcacf3ff3"><div class="ttname"><a href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a></div><div class="ttdeci">#define ovsl_dereference(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:152</div></div>
<div class="ttc" id="structvport_html_a7963679d5c8d3a923eb42faf9d5fb2d1"><div class="ttname"><a href="structvport.html#a7963679d5c8d3a923eb42faf9d5fb2d1">vport::upcall_portids</a></div><div class="ttdeci">struct vport_portids __rcu * upcall_portids</div><div class="ttdef"><b>Definition:</b> vport.h:109</div></div>
<div class="ttc" id="reciprocal__div_8h_html_a78adc7b97028a17a134f8a0cd82c5c82"><div class="ttname"><a href="reciprocal__div_8h.html#a78adc7b97028a17a134f8a0cd82c5c82">reciprocal_value</a></div><div class="ttdeci">#define reciprocal_value</div><div class="ttdef"><b>Definition:</b> reciprocal_div.h:22</div></div>
<div class="ttc" id="structvport__portids_html_aa8570053786f982366b3dfb513479628"><div class="ttname"><a href="structvport__portids.html#aa8570053786f982366b3dfb513479628">vport_portids::ids</a></div><div class="ttdeci">u32 ids[]</div><div class="ttdef"><b>Definition:</b> vport.h:90</div></div>
<div class="ttc" id="structvport__portids_html_ac76f512a0f0dbe3468b006e66bddc420"><div class="ttname"><a href="structvport__portids.html#ac76f512a0f0dbe3468b006e66bddc420">vport_portids::n_ids</a></div><div class="ttdeci">u32 n_ids</div><div class="ttdef"><b>Definition:</b> vport.h:89</div></div>
<div class="ttc" id="structvport__portids_html_a9828dc460e2dd5ef92f6c4a1eba6bc3b"><div class="ttname"><a href="structvport__portids.html#a9828dc460e2dd5ef92f6c4a1eba6bc3b">vport_portids::rn_ids</a></div><div class="ttdeci">struct reciprocal_value rn_ids</div><div class="ttdef"><b>Definition:</b> vport.h:87</div></div>
<div class="ttc" id="linux_2vport_8c_html_af0d1fe416a91b69f19cb2be6eaf89dde"><div class="ttname"><a href="linux_2vport_8c.html#af0d1fe416a91b69f19cb2be6eaf89dde">vport_portids_destroy_rcu_cb</a></div><div class="ttdeci">static void vport_portids_destroy_rcu_cb(struct rcu_head *rcu)</div><div class="ttdef"><b>Definition:</b> vport.c:372</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4064e2f79bf9d0523fd312d33b9d39e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structvport.html">vport</a>* vport_from_priv </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>priv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>vport_from_priv - lookup vport from private data pointer</p>
<p>: Start of private data area.</p>
<p>It is sometimes useful to translate from a pointer to the private data area to the vport, such as in the case where the private data pointer is the result of a hash table lookup.  must point to the start of the private data area. </p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> (<span class="keyword">struct</span> <a class="code" href="structvport.html">vport</a> *)((u8 *)priv - ALIGN(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structvport.html">vport</a>), <a class="code" href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a>));</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="ttc" id="vport_8h_html_ae7c8121257f401e2981f319ad4bc250b"><div class="ttname"><a href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a></div><div class="ttdeci">#define VPORT_ALIGN</div><div class="ttdef"><b>Definition:</b> vport.h:195</div></div>
<div class="ttc" id="structvport_html"><div class="ttname"><a href="structvport.html">vport</a></div><div class="ttdef"><b>Definition:</b> vport.h:106</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad18aa811f80cfd4c3895d96f7f3f4acd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* vport_priv </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structvport.html">vport</a> *&#160;</td>
          <td class="paramname"><em>vport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>vport_priv - access private data area of vport</p>
<p>: vport to access</p>
<p>If a nonzero size was passed in priv_size of vport_alloc() a private data area was allocated on creation. This allows that area to be accessed and used for any purpose needed by the vport implementer. </p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> (u8 *)(uintptr_t)vport + ALIGN(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> vport), <a class="code" href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="ttc" id="vport_8h_html_ae7c8121257f401e2981f319ad4bc250b"><div class="ttname"><a href="vport_8h.html#ae7c8121257f401e2981f319ad4bc250b">VPORT_ALIGN</a></div><div class="ttdeci">#define VPORT_ALIGN</div><div class="ttdef"><b>Definition:</b> vport.h:195</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_735673ca58647e7dec4e87713fc0822e.html">ovs</a></li><li class="navelem"><a class="el" href="dir_f0eaa0aee046c2546aa3d47fe4e5c43a.html">datapath</a></li><li class="navelem"><a class="el" href="vport_8h.html">vport.h</a></li>
    <li class="footer">Generated on Mon Aug 17 2015 11:15:08 for ovs datapath by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
