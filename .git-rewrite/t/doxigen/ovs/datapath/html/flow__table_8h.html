<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ovs datapath: /home/vladn/git/ovs/datapath/flow_table.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ovs datapath
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('flow__table_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">flow_table.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="kernel_8h_source.html">linux/kernel.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="linux_2netlink_8h_source.html">linux/netlink.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="openvswitch_8h_source.html">linux/openvswitch.h</a>&gt;</code><br />
<code>#include &lt;linux/spinlock.h&gt;</code><br />
<code>#include &lt;<a class="el" href="types_8h_source.html">linux/types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rcupdate_8h_source.html">linux/rcupdate.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="if__ether_8h_source.html">linux/if_ether.h</a>&gt;</code><br />
<code>#include &lt;linux/in6.h&gt;</code><br />
<code>#include &lt;<a class="el" href="jiffies_8h_source.html">linux/jiffies.h</a>&gt;</code><br />
<code>#include &lt;linux/time.h&gt;</code><br />
<code>#include &lt;<a class="el" href="flex__array_8h_source.html">linux/flex_array.h</a>&gt;</code><br />
<code>#include &lt;net/inet_ecn.h&gt;</code><br />
<code>#include &lt;<a class="el" href="ip__tunnels_8h_source.html">net/ip_tunnels.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="flow_8h_source.html">flow.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for flow_table.h:</div>
<div class="dyncontent">
<div class="center"><img src="flow__table_8h__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath_2flow__table_8h" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath_2flow__table_8h" id="_2home_2vladn_2git_2ovs_2datapath_2flow__table_8h">
<area shape="rect" id="node2" href="kernel_8h.html" title="linux/kernel.h" alt="" coords="927,169,1026,196"/><area shape="rect" id="node5" href="linux_2netlink_8h.html" title="linux/netlink.h" alt="" coords="800,169,903,196"/><area shape="rect" id="node7" href="types_8h.html" title="linux/types.h" alt="" coords="459,319,555,345"/><area shape="rect" id="node11" href="openvswitch_8h.html" title="linux/openvswitch.h" alt="" coords="413,169,551,196"/><area shape="rect" id="node12" href="if__ether_8h.html" title="linux/if_ether.h" alt="" coords="495,244,602,271"/><area shape="rect" id="node14" href="rcupdate_8h.html" title="linux/rcupdate.h" alt="" coords="169,169,283,196"/><area shape="rect" id="node16" href="jiffies_8h.html" title="linux/jiffies.h" alt="" coords="1051,169,1145,196"/><area shape="rect" id="node18" href="flex__array_8h.html" title="linux/flex_array.h" alt="" coords="1283,169,1404,196"/><area shape="rect" id="node20" href="ip__tunnels_8h.html" title="net/ip_tunnels.h" alt="" coords="1510,95,1625,121"/><area shape="rect" id="node21" href="flow_8h.html" title="flow.h" alt="" coords="699,95,756,121"/><area shape="rect" id="node6" href="skbuff_8h.html" title="linux/skbuff.h" alt="" coords="685,244,785,271"/><area shape="rect" id="node10" href="net_2netlink_8h.html" title="net/netlink.h" alt="" coords="810,244,903,271"/></map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="flow__table_8h__dep__incl.png" border="0" usemap="#_2home_2vladn_2git_2ovs_2datapath_2flow__table_8hdep" alt=""/></div>
<map name="_2home_2vladn_2git_2ovs_2datapath_2flow__table_8hdep" id="_2home_2vladn_2git_2ovs_2datapath_2flow__table_8hdep">
<area shape="rect" id="node2" href="datapath_8h.html" title="/home/vladn/git/ovs\l/datapath/datapath.h" alt="" coords="2009,95,2150,136"/><area shape="rect" id="node4" href="datapath_8c.html" title="/home/vladn/git/ovs\l/datapath/datapath.c" alt="" coords="202,295,343,337"/><area shape="rect" id="node7" href="linux_2datapath_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/datapath.c" alt="" coords="5,295,177,337"/><area shape="rect" id="node3" href="actions_8c.html" title="/home/vladn/git/ovs\l/datapath/actions.c" alt="" coords="3657,191,3793,233"/><area shape="rect" id="node5" href="vport-internal__dev_8h.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;internal_dev.h" alt="" coords="494,191,689,233"/><area shape="rect" id="node6" href="dp__notify_8c.html" title="/home/vladn/git/ovs\l/datapath/dp_notify.c" alt="" coords="367,295,511,337"/><area shape="rect" id="node8" href="linux_2dp__notify_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/dp_notify.c" alt="" coords="536,295,711,337"/><area shape="rect" id="node9" href="linux_2vport-internal__dev_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;internal_dev.c" alt="" coords="735,288,875,344"/><area shape="rect" id="node10" href="linux_2vport-netdev_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;netdev.c" alt="" coords="971,288,1111,344"/><area shape="rect" id="node11" href="linux_2vport_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport.c" alt="" coords="1277,295,1428,337"/><area shape="rect" id="node12" href="vport-internal__dev_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;internal_dev.c" alt="" coords="1739,295,1934,337"/><area shape="rect" id="node13" href="vport-netdev_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;netdev.c" alt="" coords="2530,295,2693,337"/><area shape="rect" id="node14" href="vport_8c.html" title="/home/vladn/git/ovs\l/datapath/vport.c" alt="" coords="3861,295,3997,337"/><area shape="rect" id="node15" href="flow_8c.html" title="/home/vladn/git/ovs\l/datapath/flow.c" alt="" coords="713,191,849,233"/><area shape="rect" id="node16" href="flow__netlink_8c.html" title="/home/vladn/git/ovs\l/datapath/flow_netlink.c" alt="" coords="873,191,1033,233"/><area shape="rect" id="node17" href="flow__table_8c.html" title="/home/vladn/git/ovs\l/datapath/flow_table.c" alt="" coords="1057,191,1208,233"/><area shape="rect" id="node18" href="linux_2actions_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/actions.c" alt="" coords="1232,191,1396,233"/><area shape="rect" id="node19" href="compat_2vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/compat\l/vxlan.c" alt="" coords="1421,184,1575,240"/><area shape="rect" id="node20" href="linux_2flow_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow.c" alt="" coords="1599,191,1746,233"/><area shape="rect" id="node21" href="linux_2flow__netlink_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow\l_netlink.c" alt="" coords="1770,184,1906,240"/><area shape="rect" id="node22" href="linux_2flow__table_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/flow\l_table.c" alt="" coords="1930,184,2066,240"/><area shape="rect" id="node23" href="linux_2vport-geneve_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;geneve.c" alt="" coords="2091,184,2231,240"/><area shape="rect" id="node24" href="linux_2vport-lisp_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;lisp.c" alt="" coords="2255,184,2395,240"/><area shape="rect" id="node25" href="linux_2vport-stt_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport&#45;stt.c" alt="" coords="2419,191,2590,233"/><area shape="rect" id="node26" href="linux_2vport-vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vport\l&#45;vxlan.c" alt="" coords="2615,184,2755,240"/><area shape="rect" id="node27" href="vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/linux/vxlan.c" alt="" coords="2779,191,2932,233"/><area shape="rect" id="node28" href="vport-geneve_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;geneve.c" alt="" coords="2956,191,3123,233"/><area shape="rect" id="node29" href="vport-lisp_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;lisp.c" alt="" coords="3147,191,3291,233"/><area shape="rect" id="node30" href="vport-stt_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;stt.c" alt="" coords="3315,191,3454,233"/><area shape="rect" id="node31" href="vport-vxlan_8c.html" title="/home/vladn/git/ovs\l/datapath/vport&#45;vxlan.c" alt="" coords="3478,191,3633,233"/></map>
</div>
</div>
<p><a href="flow__table_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmask__cache__entry.html">mask_cache_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmask__array.html">mask_array</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtable__instance.html">table_instance</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structflow__table.html">flow_table</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a07492868e65ba495c86d49df9cf1bc50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a07492868e65ba495c86d49df9cf1bc50">ovs_flow_init</a> (void)</td></tr>
<tr class="separator:a07492868e65ba495c86d49df9cf1bc50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96cce30f7a9c3231d5b5afaf967378eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a96cce30f7a9c3231d5b5afaf967378eb">ovs_flow_exit</a> (void)</td></tr>
<tr class="separator:a96cce30f7a9c3231d5b5afaf967378eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acce701c647d8e59486574fba1be3e10c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#acce701c647d8e59486574fba1be3e10c">ovs_flow_alloc</a> (void)</td></tr>
<tr class="separator:acce701c647d8e59486574fba1be3e10c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2629f2024cffebd33b3e9989085400aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a2629f2024cffebd33b3e9989085400aa">ovs_flow_free</a> (struct <a class="el" href="structsw__flow.html">sw_flow</a> *, <a class="el" href="types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> deferred)</td></tr>
<tr class="separator:a2629f2024cffebd33b3e9989085400aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a352a5f5e249d448bac51e011a6164443"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a352a5f5e249d448bac51e011a6164443">ovs_flow_tbl_init</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *)</td></tr>
<tr class="separator:a352a5f5e249d448bac51e011a6164443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1f39fd4e1ecafd99321016698a709a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a8f1f39fd4e1ecafd99321016698a709a">ovs_flow_tbl_count</a> (const struct <a class="el" href="structflow__table.html">flow_table</a> *table)</td></tr>
<tr class="separator:a8f1f39fd4e1ecafd99321016698a709a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad37dcfdb56d17589ed79b5c4dd38bc76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#ad37dcfdb56d17589ed79b5c4dd38bc76">ovs_flow_tbl_destroy</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *table)</td></tr>
<tr class="separator:ad37dcfdb56d17589ed79b5c4dd38bc76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e424f978318e8c007b3de68854e8dc2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a7e424f978318e8c007b3de68854e8dc2">ovs_flow_tbl_flush</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *<a class="el" href="structflow__table.html">flow_table</a>)</td></tr>
<tr class="separator:a7e424f978318e8c007b3de68854e8dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72ec4f72961a64b1c006978a32554a4c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a72ec4f72961a64b1c006978a32554a4c">ovs_flow_tbl_insert</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *table, struct <a class="el" href="structsw__flow.html">sw_flow</a> *flow, const struct <a class="el" href="structsw__flow__mask.html">sw_flow_mask</a> *mask)</td></tr>
<tr class="separator:a72ec4f72961a64b1c006978a32554a4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa75b8bc2551f9c1a8d65b942a10df89a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#aa75b8bc2551f9c1a8d65b942a10df89a">ovs_flow_tbl_remove</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *table, struct <a class="el" href="structsw__flow.html">sw_flow</a> *flow)</td></tr>
<tr class="separator:aa75b8bc2551f9c1a8d65b942a10df89a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e18d16217cddd0af756b76b72e6ce6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#ab6e18d16217cddd0af756b76b72e6ce6">ovs_flow_tbl_num_masks</a> (const struct <a class="el" href="structflow__table.html">flow_table</a> *table)</td></tr>
<tr class="separator:ab6e18d16217cddd0af756b76b72e6ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2011feb0ef139b04c14890771e97f69"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#aa2011feb0ef139b04c14890771e97f69">ovs_flow_tbl_dump_next</a> (struct <a class="el" href="structtable__instance.html">table_instance</a> *table, u32 *bucket, u32 *idx)</td></tr>
<tr class="separator:aa2011feb0ef139b04c14890771e97f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb87952f9d3b78f48c4f35efb0b41d1a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#adb87952f9d3b78f48c4f35efb0b41d1a">ovs_flow_tbl_lookup_stats</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *, const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *, u32 skb_hash, u32 *n_mask_hit)</td></tr>
<tr class="separator:adb87952f9d3b78f48c4f35efb0b41d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af75c5609b455f9fc2171ab1ef592982e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#af75c5609b455f9fc2171ab1ef592982e">ovs_flow_tbl_lookup</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *, const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *)</td></tr>
<tr class="separator:af75c5609b455f9fc2171ab1ef592982e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad54c8ee8b511e42f2296bcf5ff8d0fd3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#ad54c8ee8b511e42f2296bcf5ff8d0fd3">ovs_flow_tbl_lookup_exact</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *tbl, const struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *match)</td></tr>
<tr class="separator:ad54c8ee8b511e42f2296bcf5ff8d0fd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61adf41ddec6ed85834909231cfa84e0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a61adf41ddec6ed85834909231cfa84e0">ovs_flow_tbl_lookup_ufid</a> (struct <a class="el" href="structflow__table.html">flow_table</a> *, const struct <a class="el" href="structsw__flow__id.html">sw_flow_id</a> *)</td></tr>
<tr class="separator:a61adf41ddec6ed85834909231cfa84e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6f1ec8e9d4ce0159a4d2f9ce383249"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a6c6f1ec8e9d4ce0159a4d2f9ce383249">ovs_flow_cmp</a> (const struct <a class="el" href="structsw__flow.html">sw_flow</a> *, const struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *)</td></tr>
<tr class="separator:a6c6f1ec8e9d4ce0159a4d2f9ce383249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40f76cbd2e168abb1b9744562e24be3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#a40f76cbd2e168abb1b9744562e24be3b">ovs_flow_mask_key</a> (struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *<a class="el" href="flow_8h.html#a6747ad3b5d60480ea073cd12c9b78aaa">dst</a>, const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *<a class="el" href="flow_8h.html#a2e7e37e9dfe6465386d6c500f83ef144">src</a>, const struct <a class="el" href="structsw__flow__mask.html">sw_flow_mask</a> *mask)</td></tr>
<tr class="separator:a40f76cbd2e168abb1b9744562e24be3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab305bee215adea2618069cc592f6ee6b"><td class="memItemLeft" align="right" valign="top">struct kmem_cache *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a></td></tr>
<tr class="separator:ab305bee215adea2618069cc592f6ee6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="acce701c647d8e59486574fba1be3e10c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsw__flow.html">sw_flow</a>* ovs_flow_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow.html">sw_flow</a> *flow;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keyword">struct </span><a class="code" href="structflow__stats.html">flow_stats</a> *stats;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordtype">int</span> node;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    flow = kmem_cache_alloc(<a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a>, GFP_KERNEL);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (!flow)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> ERR_PTR(-ENOMEM);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    flow-&gt;<a class="code" href="structsw__flow.html#aa845bdaabc25d81dcf8b1a7519b35408">sf_acts</a> = NULL;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    flow-&gt;<a class="code" href="structsw__flow.html#a89c162e340693d0bb4977737e2b68c22">mask</a> = NULL;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>.<a class="code" href="structsw__flow__id.html#a7cfead96fedf295e55d6a17857adfbf5">ufid_len</a> = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>.<a class="code" href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">unmasked_key</a> = NULL;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    flow-&gt;<a class="code" href="structsw__flow.html#a7b4a10d23b2824b421527bc2600ef4ba">stats_last_writer</a> = NUMA_NO_NODE;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">/* Initialize the default stat node. */</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    stats = kmem_cache_alloc_node(<a class="code" href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a>,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                      GFP_KERNEL | __GFP_ZERO, 0);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (!stats)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    spin_lock_init(&amp;stats-&gt;<a class="code" href="structflow__stats.html#a1930f864d7fc52f4afeb86714e3e5c07">lock</a>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="rcupdate_8h.html#ad30f6689018c0dc0178126e1e12897e9">RCU_INIT_POINTER</a>(flow-&gt;<a class="code" href="structsw__flow.html#a5ccc743bcf16038ab0cf5dda88565f33">stats</a>[0], stats);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    for_each_node(node)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        if (node != 0)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="rcupdate_8h.html#ad30f6689018c0dc0178126e1e12897e9">RCU_INIT_POINTER</a>(flow-&gt;stats[node], NULL);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    return flow;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;err:</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    kmem_cache_free(<a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a>, flow);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    return ERR_PTR(-ENOMEM);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="ttc" id="structsw__flow_html_aa845bdaabc25d81dcf8b1a7519b35408"><div class="ttname"><a href="structsw__flow.html#aa845bdaabc25d81dcf8b1a7519b35408">sw_flow::sf_acts</a></div><div class="ttdeci">struct sw_flow_actions __rcu * sf_acts</div><div class="ttdef"><b>Definition:</b> flow.h:235</div></div>
<div class="ttc" id="structsw__flow_html_a5ccc743bcf16038ab0cf5dda88565f33"><div class="ttname"><a href="structsw__flow.html#a5ccc743bcf16038ab0cf5dda88565f33">sw_flow::stats</a></div><div class="ttdeci">struct flow_stats __rcu * stats[]</div><div class="ttdef"><b>Definition:</b> flow.h:236</div></div>
<div class="ttc" id="structsw__flow_html"><div class="ttname"><a href="structsw__flow.html">sw_flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:223</div></div>
<div class="ttc" id="flow__table_8c_html_ab00a8de93e918b8aba331f4872a2c97c"><div class="ttname"><a href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a></div><div class="ttdeci">static struct kmem_cache * flow_cache</div><div class="ttdef"><b>Definition:</b> flow_table.c:57</div></div>
<div class="ttc" id="structsw__flow__id_html_a7cfead96fedf295e55d6a17857adfbf5"><div class="ttname"><a href="structsw__flow__id.html#a7cfead96fedf295e55d6a17857adfbf5">sw_flow_id::ufid_len</a></div><div class="ttdeci">u32 ufid_len</div><div class="ttdef"><b>Definition:</b> flow.h:202</div></div>
<div class="ttc" id="structsw__flow_html_a6e6645eec909d54871675be30000c0b9"><div class="ttname"><a href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">sw_flow::id</a></div><div class="ttdeci">struct sw_flow_id id</div><div class="ttdef"><b>Definition:</b> flow.h:233</div></div>
<div class="ttc" id="rcupdate_8h_html_ad30f6689018c0dc0178126e1e12897e9"><div class="ttname"><a href="rcupdate_8h.html#ad30f6689018c0dc0178126e1e12897e9">RCU_INIT_POINTER</a></div><div class="ttdeci">#define RCU_INIT_POINTER(p, v)</div><div class="ttdef"><b>Definition:</b> rcupdate.h:34</div></div>
<div class="ttc" id="structflow__stats_html"><div class="ttname"><a href="structflow__stats.html">flow_stats</a></div><div class="ttdef"><b>Definition:</b> flow.h:215</div></div>
<div class="ttc" id="structsw__flow_html_a89c162e340693d0bb4977737e2b68c22"><div class="ttname"><a href="structsw__flow.html#a89c162e340693d0bb4977737e2b68c22">sw_flow::mask</a></div><div class="ttdeci">struct sw_flow_mask * mask</div><div class="ttdef"><b>Definition:</b> flow.h:234</div></div>
<div class="ttc" id="structflow__stats_html_a1930f864d7fc52f4afeb86714e3e5c07"><div class="ttname"><a href="structflow__stats.html#a1930f864d7fc52f4afeb86714e3e5c07">flow_stats::lock</a></div><div class="ttdeci">spinlock_t lock</div><div class="ttdef"><b>Definition:</b> flow.h:219</div></div>
<div class="ttc" id="structsw__flow__id_html_a5d62dce79569cb8c25a43f4039e5df3c"><div class="ttname"><a href="structsw__flow__id.html#a5d62dce79569cb8c25a43f4039e5df3c">sw_flow_id::unmasked_key</a></div><div class="ttdeci">struct sw_flow_key * unmasked_key</div><div class="ttdef"><b>Definition:</b> flow.h:205</div></div>
<div class="ttc" id="flow__table_8h_html_ab305bee215adea2618069cc592f6ee6b"><div class="ttname"><a href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a></div><div class="ttdeci">struct kmem_cache * flow_stats_cache</div></div>
<div class="ttc" id="structsw__flow_html_a7b4a10d23b2824b421527bc2600ef4ba"><div class="ttname"><a href="structsw__flow.html#a7b4a10d23b2824b421527bc2600ef4ba">sw_flow::stats_last_writer</a></div><div class="ttdeci">int stats_last_writer</div><div class="ttdef"><b>Definition:</b> flow.h:229</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6c6f1ec8e9d4ce0159a4d2f9ce383249"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a> ovs_flow_cmp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;{</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a>(&amp;flow-&gt;id))</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flow__table_8c.html#ae52adc695ca936e630f8a4a61753520d">flow_cmp_masked_key</a>(flow, match-&gt;key, &amp;match-&gt;range);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__table_8c.html#a0dd59a846abd3c41f19357b2223b10a9">ovs_flow_cmp_unmasked_key</a>(flow, match);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="ttc" id="flow__table_8c_html_ae52adc695ca936e630f8a4a61753520d"><div class="ttname"><a href="flow__table_8c.html#ae52adc695ca936e630f8a4a61753520d">flow_cmp_masked_key</a></div><div class="ttdeci">static bool flow_cmp_masked_key(const struct sw_flow *flow, const struct sw_flow_key *key, const struct sw_flow_key_range *range)</div><div class="ttdef"><b>Definition:</b> flow_table.c:529</div></div>
<div class="ttc" id="flow__table_8c_html_a0dd59a846abd3c41f19357b2223b10a9"><div class="ttname"><a href="flow__table_8c.html#a0dd59a846abd3c41f19357b2223b10a9">ovs_flow_cmp_unmasked_key</a></div><div class="ttdeci">static bool ovs_flow_cmp_unmasked_key(const struct sw_flow *flow, const struct sw_flow_match *match)</div><div class="ttdef"><b>Definition:</b> flow_table.c:536</div></div>
<div class="ttc" id="flow_8h_html_a995966854ceb0b5a72ff027c12ccf426"><div class="ttname"><a href="flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a></div><div class="ttdeci">static bool ovs_identifier_is_ufid(const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow.h:257</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96cce30f7a9c3231d5b5afaf967378eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_flow_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;{</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    kmem_cache_destroy(<a class="code" href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    kmem_cache_destroy(<a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a>);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;}</div>
<div class="ttc" id="flow__table_8c_html_ab00a8de93e918b8aba331f4872a2c97c"><div class="ttname"><a href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a></div><div class="ttdeci">static struct kmem_cache * flow_cache</div><div class="ttdef"><b>Definition:</b> flow_table.c:57</div></div>
<div class="ttc" id="flow__table_8h_html_ab305bee215adea2618069cc592f6ee6b"><div class="ttname"><a href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a></div><div class="ttdeci">struct kmem_cache * flow_stats_cache</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2629f2024cffebd33b3e9989085400aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_flow_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#afaa87723b8417d40fcf45b7330261ef9">bool</a>&#160;</td>
          <td class="paramname"><em>deferred</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (!flow)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (deferred)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        call_rcu(&amp;flow-&gt;rcu, <a class="code" href="flow__table_8c.html#a38fd2d883e505bba412320f3216dc377">rcu_free_flow_callback</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="flow__table_8c.html#af6a50f2fb2e93732e8d706dd7cf67c9b">flow_free</a>(flow);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="ttc" id="flow__table_8c_html_af6a50f2fb2e93732e8d706dd7cf67c9b"><div class="ttname"><a href="flow__table_8c.html#af6a50f2fb2e93732e8d706dd7cf67c9b">flow_free</a></div><div class="ttdeci">static void flow_free(struct sw_flow *flow)</div><div class="ttdef"><b>Definition:</b> flow_table.c:147</div></div>
<div class="ttc" id="flow__table_8c_html_a38fd2d883e505bba412320f3216dc377"><div class="ttname"><a href="flow__table_8c.html#a38fd2d883e505bba412320f3216dc377">rcu_free_flow_callback</a></div><div class="ttdeci">static void rcu_free_flow_callback(struct rcu_head *rcu)</div><div class="ttdef"><b>Definition:</b> flow_table.c:161</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a07492868e65ba495c86d49df9cf1bc50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_flow_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;{</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    BUILD_BUG_ON(__alignof__(<span class="keyword">struct</span> <a class="code" href="structsw__flow__key.html">sw_flow_key</a>) % __alignof__(<span class="keywordtype">long</span>));</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    BUILD_BUG_ON(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structsw__flow__key.html">sw_flow_key</a>) % <span class="keyword">sizeof</span>(<span class="keywordtype">long</span>));</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a> = kmem_cache_create(<span class="stringliteral">&quot;sw_flow&quot;</span>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structsw__flow.html">sw_flow</a>)</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                       + (nr_node_ids</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                      * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structflow__stats.html">flow_stats</a> *)),</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                       0, 0, NULL);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a> == NULL)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        = kmem_cache_create(<span class="stringliteral">&quot;sw_flow_stats&quot;</span>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structflow__stats.html">flow_stats</a>),</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    0, SLAB_HWCACHE_ALIGN, NULL);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a> == NULL) {</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        kmem_cache_destroy(<a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a>);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <a class="code" href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a> = NULL;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;}</div>
<div class="ttc" id="structsw__flow_html"><div class="ttname"><a href="structsw__flow.html">sw_flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:223</div></div>
<div class="ttc" id="flow__table_8c_html_ab00a8de93e918b8aba331f4872a2c97c"><div class="ttname"><a href="flow__table_8c.html#ab00a8de93e918b8aba331f4872a2c97c">flow_cache</a></div><div class="ttdeci">static struct kmem_cache * flow_cache</div><div class="ttdef"><b>Definition:</b> flow_table.c:57</div></div>
<div class="ttc" id="structsw__flow__key_html"><div class="ttname"><a href="structsw__flow__key.html">sw_flow_key</a></div><div class="ttdef"><b>Definition:</b> flow.h:122</div></div>
<div class="ttc" id="structflow__stats_html"><div class="ttname"><a href="structflow__stats.html">flow_stats</a></div><div class="ttdef"><b>Definition:</b> flow.h:215</div></div>
<div class="ttc" id="flow__table_8h_html_ab305bee215adea2618069cc592f6ee6b"><div class="ttname"><a href="flow__table_8h.html#ab305bee215adea2618069cc592f6ee6b">flow_stats_cache</a></div><div class="ttdeci">struct kmem_cache * flow_stats_cache</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a40f76cbd2e168abb1b9744562e24be3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_flow_mask_key </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__mask.html">sw_flow_mask</a> *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> *m = (<span class="keyword">const</span> <span class="keywordtype">long</span> *)((<span class="keyword">const</span> u8 *)&amp;mask-&gt;<a class="code" href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">key</a> +</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                mask-&gt;<a class="code" href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">range</a>.<a class="code" href="structsw__flow__key__range.html#a3139158cea80b4e5af36967f3748e846">start</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">long</span> *s = (<span class="keyword">const</span> <span class="keywordtype">long</span> *)((<span class="keyword">const</span> u8 *)src +</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                mask-&gt;<a class="code" href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">range</a>.<a class="code" href="structsw__flow__key__range.html#a3139158cea80b4e5af36967f3748e846">start</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">long</span> *d = (<span class="keywordtype">long</span> *)((u8 *)dst + mask-&gt;<a class="code" href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">range</a>.<a class="code" href="structsw__flow__key__range.html#a3139158cea80b4e5af36967f3748e846">start</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">/* The memory outside of the &#39;mask-&gt;range&#39; are not set since</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">     * further operations on &#39;dst&#39; only uses contents within</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">     * &#39;mask-&gt;range&#39;.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="flow__table_8c.html#a1b494e4862736de33cbbd7cd72ee8521">range_n_bytes</a>(&amp;mask-&gt;<a class="code" href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">range</a>); i += <span class="keyword">sizeof</span>(long))</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        *d++ = *s++ &amp; *m++;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="ttc" id="structsw__flow__mask_html_aa6062c0e580d516ff2d9ce8f9611432b"><div class="ttname"><a href="structsw__flow__mask.html#aa6062c0e580d516ff2d9ce8f9611432b">sw_flow_mask::range</a></div><div class="ttdeci">struct sw_flow_key_range range</div><div class="ttdef"><b>Definition:</b> flow.h:189</div></div>
<div class="ttc" id="flow__table_8c_html_a1b494e4862736de33cbbd7cd72ee8521"><div class="ttname"><a href="flow__table_8c.html#a1b494e4862736de33cbbd7cd72ee8521">range_n_bytes</a></div><div class="ttdeci">static u16 range_n_bytes(const struct sw_flow_key_range *range)</div><div class="ttdef"><b>Definition:</b> flow_table.c:60</div></div>
<div class="ttc" id="structsw__flow__key__range_html_a3139158cea80b4e5af36967f3748e846"><div class="ttname"><a href="structsw__flow__key__range.html#a3139158cea80b4e5af36967f3748e846">sw_flow_key_range::start</a></div><div class="ttdeci">unsigned short int start</div><div class="ttdef"><b>Definition:</b> flow.h:182</div></div>
<div class="ttc" id="structsw__flow__mask_html_a52db0284fdd4579a5f30dee0837a7485"><div class="ttname"><a href="structsw__flow__mask.html#a52db0284fdd4579a5f30dee0837a7485">sw_flow_mask::key</a></div><div class="ttdeci">struct sw_flow_key key</div><div class="ttdef"><b>Definition:</b> flow.h:190</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8f1f39fd4e1ecafd99321016698a709a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_flow_tbl_count </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span> table-&gt;<a class="code" href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">count</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="ttc" id="structflow__table_html_a97cae1e714c6dcfe0d39ce4cff371786"><div class="ttname"><a href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">flow_table::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> flow_table.h:65</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad37dcfdb56d17589ed79b5c4dd38bc76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_flow_tbl_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti = <a class="code" href="rcupdate_8h.html#a9e866c0e8ba667e053cb8f59af572157">rcu_dereference_raw</a>(table-&gt;<a class="code" href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">ti</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ufid_ti = <a class="code" href="rcupdate_8h.html#a9e866c0e8ba667e053cb8f59af572157">rcu_dereference_raw</a>(table-&gt;<a class="code" href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">ufid_ti</a>);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    free_percpu(table-&gt;<a class="code" href="structflow__table.html#a7395c72250199771559f2aaf32da5d0d">mask_cache</a>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    kfree(<a class="code" href="rcupdate_8h.html#a9e866c0e8ba667e053cb8f59af572157">rcu_dereference_raw</a>(table-&gt;<a class="code" href="structflow__table.html#a0e568d59590f38936b714555597505be">mask_array</a>));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="flow__table_8c.html#a5abf80651b67f4198a34f7a94e116ec6">table_instance_destroy</a>(ti, ufid_ti, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="ttc" id="structflow__table_html_a49d708e68608d510f6d25a16a14fd565"><div class="ttname"><a href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">flow_table::ti</a></div><div class="ttdeci">struct table_instance __rcu * ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:60</div></div>
<div class="ttc" id="flow__table_8c_html_a5abf80651b67f4198a34f7a94e116ec6"><div class="ttname"><a href="flow__table_8c.html#a5abf80651b67f4198a34f7a94e116ec6">table_instance_destroy</a></div><div class="ttdeci">static void table_instance_destroy(struct table_instance *ti, struct table_instance *ufid_ti, bool deferred)</div><div class="ttdef"><b>Definition:</b> flow_table.c:316</div></div>
<div class="ttc" id="rcupdate_8h_html_a9e866c0e8ba667e053cb8f59af572157"><div class="ttname"><a href="rcupdate_8h.html#a9e866c0e8ba667e053cb8f59af572157">rcu_dereference_raw</a></div><div class="ttdeci">#define rcu_dereference_raw(p)</div><div class="ttdef"><b>Definition:</b> rcupdate.h:15</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="structflow__table_html_aa29e185501af8dcd15549ee157c6c047"><div class="ttname"><a href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">flow_table::ufid_ti</a></div><div class="ttdeci">struct table_instance __rcu * ufid_ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:61</div></div>
<div class="ttc" id="structflow__table_html_a0e568d59590f38936b714555597505be"><div class="ttname"><a href="structflow__table.html#a0e568d59590f38936b714555597505be">flow_table::mask_array</a></div><div class="ttdeci">struct mask_array __rcu * mask_array</div><div class="ttdef"><b>Definition:</b> flow_table.h:63</div></div>
<div class="ttc" id="structflow__table_html_a7395c72250199771559f2aaf32da5d0d"><div class="ttname"><a href="structflow__table.html#a7395c72250199771559f2aaf32da5d0d">flow_table::mask_cache</a></div><div class="ttdeci">struct mask_cache_entry __percpu * mask_cache</div><div class="ttdef"><b>Definition:</b> flow_table.h:62</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa2011feb0ef139b04c14890771e97f69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsw__flow.html">sw_flow</a>* ovs_flow_tbl_dump_next </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structtable__instance.html">table_instance</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow.html">sw_flow</a> *flow;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keyword">struct </span>hlist_head *head;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">int</span> ver;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    ver = ti-&gt;node_ver;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">while</span> (*bucket &lt; ti-&gt;n_buckets) {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        i = 0;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        head = flex_array_get(ti-&gt;buckets, *bucket);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="rculist_8h.html#a482ed6bca0b607f6455d5386f3b1ed75">hlist_for_each_entry_rcu</a>(flow, head, <a class="code" href="structflow__table.html">flow_table</a>.node[ver]) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">if</span> (i &lt; *last) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                i++;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            *last = i + 1;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">return</span> flow;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        (*bucket)++;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        *last = 0;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
<div class="ttc" id="structsw__flow_html"><div class="ttname"><a href="structsw__flow.html">sw_flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:223</div></div>
<div class="ttc" id="rculist_8h_html_a482ed6bca0b607f6455d5386f3b1ed75"><div class="ttname"><a href="rculist_8h.html#a482ed6bca0b607f6455d5386f3b1ed75">hlist_for_each_entry_rcu</a></div><div class="ttdeci">#define hlist_for_each_entry_rcu(pos, head, member)</div><div class="ttdef"><b>Definition:</b> rculist.h:13</div></div>
<div class="ttc" id="structflow__table_html"><div class="ttname"><a href="structflow__table.html">flow_table</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:59</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7e424f978318e8c007b3de68854e8dc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_flow_tbl_flush </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>flow_table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;{</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *old_ti, *new_ti;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *old_ufid_ti, *new_ufid_ti;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    new_ti = <a class="code" href="flow__table_8c.html#afa79f1c5220d4487a4236884110b9f13">table_instance_alloc</a>(<a class="code" href="flow__table_8c.html#a84843442d8db7eda5192117e7c6b2997">TBL_MIN_BUCKETS</a>);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> (!new_ti)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    new_ufid_ti = <a class="code" href="flow__table_8c.html#afa79f1c5220d4487a4236884110b9f13">table_instance_alloc</a>(<a class="code" href="flow__table_8c.html#a84843442d8db7eda5192117e7c6b2997">TBL_MIN_BUCKETS</a>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">if</span> (!new_ufid_ti)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">goto</span> err_free_ti;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    old_ti = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(flow_table-&gt;<a class="code" href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">ti</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    old_ufid_ti = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(flow_table-&gt;<a class="code" href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">ufid_ti</a>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    rcu_assign_pointer(flow_table-&gt;<a class="code" href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">ti</a>, new_ti);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    rcu_assign_pointer(flow_table-&gt;<a class="code" href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">ufid_ti</a>, new_ufid_ti);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    flow_table-&gt;<a class="code" href="structflow__table.html#a82c7cfef05b2898b3ffb3b6cb6fdc6a4">last_rehash</a> = jiffies;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    flow_table-&gt;<a class="code" href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">count</a> = 0;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    flow_table-&gt;<a class="code" href="structflow__table.html#ad8ff1e259e64690608d9552f0b467bf0">ufid_count</a> = 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="flow__table_8c.html#a5abf80651b67f4198a34f7a94e116ec6">table_instance_destroy</a>(old_ti, old_ufid_ti, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;err_free_ti:</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="flow__table_8c.html#a4699ad0074a999c5f80e77a8ff1b0ebc">__table_instance_destroy</a>(new_ti);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="ttc" id="structflow__table_html_a49d708e68608d510f6d25a16a14fd565"><div class="ttname"><a href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">flow_table::ti</a></div><div class="ttdeci">struct table_instance __rcu * ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:60</div></div>
<div class="ttc" id="flow__table_8c_html_afa79f1c5220d4487a4236884110b9f13"><div class="ttname"><a href="flow__table_8c.html#afa79f1c5220d4487a4236884110b9f13">table_instance_alloc</a></div><div class="ttdeci">static struct table_instance * table_instance_alloc(int new_size)</div><div class="ttdef"><b>Definition:</b> flow_table.c:198</div></div>
<div class="ttc" id="flow__table_8c_html_a5abf80651b67f4198a34f7a94e116ec6"><div class="ttname"><a href="flow__table_8c.html#a5abf80651b67f4198a34f7a94e116ec6">table_instance_destroy</a></div><div class="ttdeci">static void table_instance_destroy(struct table_instance *ti, struct table_instance *ufid_ti, bool deferred)</div><div class="ttdef"><b>Definition:</b> flow_table.c:316</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="structflow__table_html_a82c7cfef05b2898b3ffb3b6cb6fdc6a4"><div class="ttname"><a href="structflow__table.html#a82c7cfef05b2898b3ffb3b6cb6fdc6a4">flow_table::last_rehash</a></div><div class="ttdeci">unsigned long last_rehash</div><div class="ttdef"><b>Definition:</b> flow_table.h:64</div></div>
<div class="ttc" id="flow__table_8c_html_a4699ad0074a999c5f80e77a8ff1b0ebc"><div class="ttname"><a href="flow__table_8c.html#a4699ad0074a999c5f80e77a8ff1b0ebc">__table_instance_destroy</a></div><div class="ttdeci">static void __table_instance_destroy(struct table_instance *ti)</div><div class="ttdef"><b>Definition:</b> flow_table.c:192</div></div>
<div class="ttc" id="datapath_8h_html_a06ef69170d345fd3996a467dcacf3ff3"><div class="ttname"><a href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a></div><div class="ttdeci">#define ovsl_dereference(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:152</div></div>
<div class="ttc" id="structflow__table_html_aa29e185501af8dcd15549ee157c6c047"><div class="ttname"><a href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">flow_table::ufid_ti</a></div><div class="ttdeci">struct table_instance __rcu * ufid_ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:61</div></div>
<div class="ttc" id="flow__table_8c_html_a84843442d8db7eda5192117e7c6b2997"><div class="ttname"><a href="flow__table_8c.html#a84843442d8db7eda5192117e7c6b2997">TBL_MIN_BUCKETS</a></div><div class="ttdeci">#define TBL_MIN_BUCKETS</div><div class="ttdef"><b>Definition:</b> flow_table.c:49</div></div>
<div class="ttc" id="structflow__table_html_a97cae1e714c6dcfe0d39ce4cff371786"><div class="ttname"><a href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">flow_table::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> flow_table.h:65</div></div>
<div class="ttc" id="structflow__table_html_ad8ff1e259e64690608d9552f0b467bf0"><div class="ttname"><a href="structflow__table.html#ad8ff1e259e64690608d9552f0b467bf0">flow_table::ufid_count</a></div><div class="ttdeci">unsigned int ufid_count</div><div class="ttdef"><b>Definition:</b> flow_table.h:66</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a352a5f5e249d448bac51e011a6164443"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_flow_tbl_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti, *ufid_ti;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmask__array.html">mask_array</a> *ma;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    table-&gt;mask_cache = __alloc_percpu(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structmask__cache__entry.html">mask_cache_entry</a>) *</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                      <a class="code" href="flow__table_8c.html#af961440482d56f3b26f232774a37c9c5">MC_HASH_ENTRIES</a>, __alignof__(<span class="keyword">struct</span> <a class="code" href="structmask__cache__entry.html">mask_cache_entry</a>));</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span> (!table-&gt;mask_cache)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    ma = <a class="code" href="flow__table_8c.html#a327b2f9873b81f7b7920e85c366cc96e">tbl_mask_array_alloc</a>(<a class="code" href="flow__table_8c.html#a8240394ae842a0ba76d82f50744ced0a">MASK_ARRAY_SIZE_MIN</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (!ma)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">goto</span> free_mask_cache;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    ti = <a class="code" href="flow__table_8c.html#afa79f1c5220d4487a4236884110b9f13">table_instance_alloc</a>(<a class="code" href="flow__table_8c.html#a84843442d8db7eda5192117e7c6b2997">TBL_MIN_BUCKETS</a>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (!ti)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">goto</span> free_mask_array;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    ufid_ti = <a class="code" href="flow__table_8c.html#afa79f1c5220d4487a4236884110b9f13">table_instance_alloc</a>(<a class="code" href="flow__table_8c.html#a84843442d8db7eda5192117e7c6b2997">TBL_MIN_BUCKETS</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span> (!ufid_ti)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">goto</span> free_ti;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    rcu_assign_pointer(table-&gt;ti, ti);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    rcu_assign_pointer(table-&gt;ufid_ti, ufid_ti);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    rcu_assign_pointer(table-&gt;mask_array, ma);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    table-&gt;last_rehash = jiffies;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    table-&gt;count = 0;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    table-&gt;ufid_count = 0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;free_ti:</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="flow__table_8c.html#a4699ad0074a999c5f80e77a8ff1b0ebc">__table_instance_destroy</a>(ti);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;free_mask_array:</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    kfree(ma);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;free_mask_cache:</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    free_percpu(table-&gt;mask_cache);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">return</span> -ENOMEM;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="ttc" id="flow__table_8c_html_afa79f1c5220d4487a4236884110b9f13"><div class="ttname"><a href="flow__table_8c.html#afa79f1c5220d4487a4236884110b9f13">table_instance_alloc</a></div><div class="ttdeci">static struct table_instance * table_instance_alloc(int new_size)</div><div class="ttdef"><b>Definition:</b> flow_table.c:198</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="structmask__array_html"><div class="ttname"><a href="structmask__array.html">mask_array</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:44</div></div>
<div class="ttc" id="flow__table_8c_html_a8240394ae842a0ba76d82f50744ced0a"><div class="ttname"><a href="flow__table_8c.html#a8240394ae842a0ba76d82f50744ced0a">MASK_ARRAY_SIZE_MIN</a></div><div class="ttdeci">#define MASK_ARRAY_SIZE_MIN</div><div class="ttdef"><b>Definition:</b> flow_table.c:50</div></div>
<div class="ttc" id="structmask__cache__entry_html"><div class="ttname"><a href="structmask__cache__entry.html">mask_cache_entry</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:39</div></div>
<div class="ttc" id="flow__table_8c_html_a4699ad0074a999c5f80e77a8ff1b0ebc"><div class="ttname"><a href="flow__table_8c.html#a4699ad0074a999c5f80e77a8ff1b0ebc">__table_instance_destroy</a></div><div class="ttdeci">static void __table_instance_destroy(struct table_instance *ti)</div><div class="ttdef"><b>Definition:</b> flow_table.c:192</div></div>
<div class="ttc" id="flow__table_8c_html_a84843442d8db7eda5192117e7c6b2997"><div class="ttname"><a href="flow__table_8c.html#a84843442d8db7eda5192117e7c6b2997">TBL_MIN_BUCKETS</a></div><div class="ttdeci">#define TBL_MIN_BUCKETS</div><div class="ttdef"><b>Definition:</b> flow_table.c:49</div></div>
<div class="ttc" id="flow__table_8c_html_a327b2f9873b81f7b7920e85c366cc96e"><div class="ttname"><a href="flow__table_8c.html#a327b2f9873b81f7b7920e85c366cc96e">tbl_mask_array_alloc</a></div><div class="ttdeci">static struct mask_array * tbl_mask_array_alloc(int size)</div><div class="ttdef"><b>Definition:</b> flow_table.c:226</div></div>
<div class="ttc" id="flow__table_8c_html_af961440482d56f3b26f232774a37c9c5"><div class="ttname"><a href="flow__table_8c.html#af961440482d56f3b26f232774a37c9c5">MC_HASH_ENTRIES</a></div><div class="ttdeci">#define MC_HASH_ENTRIES</div><div class="ttdef"><b>Definition:</b> flow_table.c:54</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a72ec4f72961a64b1c006978a32554a4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_flow_tbl_insert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname"><em>flow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__mask.html">sw_flow_mask</a> *&#160;</td>
          <td class="paramname"><em>mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;{</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    err = <a class="code" href="flow__table_8c.html#a1ceded3a19f98e73b3c10faf2f2532f5">flow_mask_insert</a>(table, flow, mask);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="flow__table_8c.html#a66f2b72d1c755346c4865714e51cfcf4">flow_key_insert</a>(table, flow);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a>(&amp;flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>))</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <a class="code" href="flow__table_8c.html#a36540c6298f41907b7c088b34116346d">flow_ufid_insert</a>(table, flow);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;}</div>
<div class="ttc" id="flow__table_8c_html_a36540c6298f41907b7c088b34116346d"><div class="ttname"><a href="flow__table_8c.html#a36540c6298f41907b7c088b34116346d">flow_ufid_insert</a></div><div class="ttdeci">static void flow_ufid_insert(struct flow_table *table, struct sw_flow *flow)</div><div class="ttdef"><b>Definition:</b> flow_table.c:945</div></div>
<div class="ttc" id="flow_8h_html_a995966854ceb0b5a72ff027c12ccf426"><div class="ttname"><a href="flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a></div><div class="ttdeci">static bool ovs_identifier_is_ufid(const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow.h:257</div></div>
<div class="ttc" id="structsw__flow_html_a6e6645eec909d54871675be30000c0b9"><div class="ttname"><a href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">sw_flow::id</a></div><div class="ttdeci">struct sw_flow_id id</div><div class="ttdef"><b>Definition:</b> flow.h:233</div></div>
<div class="ttc" id="flow__table_8c_html_a66f2b72d1c755346c4865714e51cfcf4"><div class="ttname"><a href="flow__table_8c.html#a66f2b72d1c755346c4865714e51cfcf4">flow_key_insert</a></div><div class="ttdeci">static void flow_key_insert(struct flow_table *table, struct sw_flow *flow)</div><div class="ttdef"><b>Definition:</b> flow_table.c:921</div></div>
<div class="ttc" id="flow__table_8c_html_a1ceded3a19f98e73b3c10faf2f2532f5"><div class="ttname"><a href="flow__table_8c.html#a1ceded3a19f98e73b3c10faf2f2532f5">flow_mask_insert</a></div><div class="ttdeci">static int flow_mask_insert(struct flow_table *tbl, struct sw_flow *flow, const struct sw_flow_mask *new)</div><div class="ttdef"><b>Definition:</b> flow_table.c:868</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af75c5609b455f9fc2171ab1ef592982e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsw__flow.html">sw_flow</a>* ovs_flow_tbl_lookup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;{</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti = <a class="code" href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a>(tbl-&gt;ti);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmask__array.html">mask_array</a> *ma = <a class="code" href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a>(tbl-&gt;mask_array);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    u32 <a class="code" href="compiler-gcc_8h.html#a4df9005d46835d584f7e924597114061">__always_unused</a> n_mask_hit;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    u32 index = 0;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="flow__table_8c.html#a66b2913ba658b83a167b83e5f5ec465a">flow_lookup</a>(tbl, ti, ma, key, &amp;n_mask_hit, &amp;index);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div>
<div class="ttc" id="compiler-gcc_8h_html_a4df9005d46835d584f7e924597114061"><div class="ttname"><a href="compiler-gcc_8h.html#a4df9005d46835d584f7e924597114061">__always_unused</a></div><div class="ttdeci">#define __always_unused</div><div class="ttdef"><b>Definition:</b> compiler-gcc.h:12</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="structmask__array_html"><div class="ttname"><a href="structmask__array.html">mask_array</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:44</div></div>
<div class="ttc" id="flow__table_8c_html_a66b2913ba658b83a167b83e5f5ec465a"><div class="ttname"><a href="flow__table_8c.html#a66b2913ba658b83a167b83e5f5ec465a">flow_lookup</a></div><div class="ttdeci">static struct sw_flow * flow_lookup(struct flow_table *tbl, struct table_instance *ti, const struct mask_array *ma, const struct sw_flow_key *key, u32 *n_mask_hit, u32 *index)</div><div class="ttdef"><b>Definition:</b> flow_table.c:572</div></div>
<div class="ttc" id="datapath_8h_html_a5f2a2c1026f970f0052e77f5ebba33d1"><div class="ttname"><a href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a></div><div class="ttdeci">#define rcu_dereference_ovsl(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:154</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad54c8ee8b511e42f2296bcf5ff8d0fd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsw__flow.html">sw_flow</a>* ovs_flow_tbl_lookup_exact </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>tbl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__match.html">sw_flow_match</a> *&#160;</td>
          <td class="paramname"><em>match</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmask__array.html">mask_array</a> *ma = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(tbl-&gt;<a class="code" href="structflow__table.html#a0e568d59590f38936b714555597505be">mask_array</a>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">/* Always called under ovs-mutex. */</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; ma-&gt;<a class="code" href="structmask__array.html#ad981d54486b5dd03bdb4ad20b740171e">max</a>; i++) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(tbl-&gt;<a class="code" href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">ti</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        u32 <a class="code" href="compiler-gcc_8h.html#a4df9005d46835d584f7e924597114061">__always_unused</a> n_mask_hit;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keyword">struct </span><a class="code" href="structsw__flow__mask.html">sw_flow_mask</a> *mask;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keyword">struct </span><a class="code" href="structsw__flow.html">sw_flow</a> *flow;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        mask = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(ma-&gt;<a class="code" href="structmask__array.html#a92da2b0ebde32eb6f76a134dc2d61d79">masks</a>[i]);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">if</span> (!mask)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        flow = <a class="code" href="flow__table_8c.html#ac32c042a5b0b7a5de7c1e43f7187f92b">masked_flow_lookup</a>(ti, match-&gt;<a class="code" href="structsw__flow__match.html#a4030aac38105b63798ea11f43f506372">key</a>, mask, &amp;n_mask_hit);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span> (flow &amp;&amp; <a class="code" href="flow_8h.html#a3bfeaa297d8807b969a14f1cde78d21b">ovs_identifier_is_key</a>(&amp;flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>) &amp;&amp;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <a class="code" href="flow__table_8c.html#a0dd59a846abd3c41f19357b2223b10a9">ovs_flow_cmp_unmasked_key</a>(flow, match))</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <span class="keywordflow">return</span> flow;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div>
<div class="ttc" id="structsw__flow__mask_html"><div class="ttname"><a href="structsw__flow__mask.html">sw_flow_mask</a></div><div class="ttdef"><b>Definition:</b> flow.h:186</div></div>
<div class="ttc" id="compiler-gcc_8h_html_a4df9005d46835d584f7e924597114061"><div class="ttname"><a href="compiler-gcc_8h.html#a4df9005d46835d584f7e924597114061">__always_unused</a></div><div class="ttdeci">#define __always_unused</div><div class="ttdef"><b>Definition:</b> compiler-gcc.h:12</div></div>
<div class="ttc" id="structsw__flow_html"><div class="ttname"><a href="structsw__flow.html">sw_flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:223</div></div>
<div class="ttc" id="structflow__table_html_a49d708e68608d510f6d25a16a14fd565"><div class="ttname"><a href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">flow_table::ti</a></div><div class="ttdeci">struct table_instance __rcu * ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:60</div></div>
<div class="ttc" id="flow__table_8c_html_a0dd59a846abd3c41f19357b2223b10a9"><div class="ttname"><a href="flow__table_8c.html#a0dd59a846abd3c41f19357b2223b10a9">ovs_flow_cmp_unmasked_key</a></div><div class="ttdeci">static bool ovs_flow_cmp_unmasked_key(const struct sw_flow *flow, const struct sw_flow_match *match)</div><div class="ttdef"><b>Definition:</b> flow_table.c:536</div></div>
<div class="ttc" id="structmask__array_html_a92da2b0ebde32eb6f76a134dc2d61d79"><div class="ttname"><a href="structmask__array.html#a92da2b0ebde32eb6f76a134dc2d61d79">mask_array::masks</a></div><div class="ttdeci">struct sw_flow_mask __rcu * masks[]</div><div class="ttdef"><b>Definition:</b> flow_table.h:47</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="structmask__array_html"><div class="ttname"><a href="structmask__array.html">mask_array</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:44</div></div>
<div class="ttc" id="structsw__flow_html_a6e6645eec909d54871675be30000c0b9"><div class="ttname"><a href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">sw_flow::id</a></div><div class="ttdeci">struct sw_flow_id id</div><div class="ttdef"><b>Definition:</b> flow.h:233</div></div>
<div class="ttc" id="datapath_8h_html_a06ef69170d345fd3996a467dcacf3ff3"><div class="ttname"><a href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a></div><div class="ttdeci">#define ovsl_dereference(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:152</div></div>
<div class="ttc" id="structflow__table_html_a0e568d59590f38936b714555597505be"><div class="ttname"><a href="structflow__table.html#a0e568d59590f38936b714555597505be">flow_table::mask_array</a></div><div class="ttdeci">struct mask_array __rcu * mask_array</div><div class="ttdef"><b>Definition:</b> flow_table.h:63</div></div>
<div class="ttc" id="structmask__array_html_ad981d54486b5dd03bdb4ad20b740171e"><div class="ttname"><a href="structmask__array.html#ad981d54486b5dd03bdb4ad20b740171e">mask_array::max</a></div><div class="ttdeci">int max</div><div class="ttdef"><b>Definition:</b> flow_table.h:46</div></div>
<div class="ttc" id="structsw__flow__match_html_a4030aac38105b63798ea11f43f506372"><div class="ttname"><a href="structsw__flow__match.html#a4030aac38105b63798ea11f43f506372">sw_flow_match::key</a></div><div class="ttdeci">struct sw_flow_key * key</div><div class="ttdef"><b>Definition:</b> flow.h:194</div></div>
<div class="ttc" id="flow_8h_html_a3bfeaa297d8807b969a14f1cde78d21b"><div class="ttname"><a href="flow_8h.html#a3bfeaa297d8807b969a14f1cde78d21b">ovs_identifier_is_key</a></div><div class="ttdeci">static bool ovs_identifier_is_key(const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow.h:262</div></div>
<div class="ttc" id="flow__table_8c_html_ac32c042a5b0b7a5de7c1e43f7187f92b"><div class="ttname"><a href="flow__table_8c.html#ac32c042a5b0b7a5de7c1e43f7187f92b">masked_flow_lookup</a></div><div class="ttdeci">static struct sw_flow * masked_flow_lookup(struct table_instance *ti, const struct sw_flow_key *unmasked, const struct sw_flow_mask *mask, u32 *n_mask_hit)</div><div class="ttdef"><b>Definition:</b> flow_table.c:547</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adb87952f9d3b78f48c4f35efb0b41d1a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsw__flow.html">sw_flow</a>* ovs_flow_tbl_lookup_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__key.html">sw_flow_key</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>skb_hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 *&#160;</td>
          <td class="paramname"><em>n_mask_hit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;{</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmask__array.html">mask_array</a> *ma = rcu_dereference(tbl-&gt;mask_array);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti = rcu_dereference(tbl-&gt;ti);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmask__cache__entry.html">mask_cache_entry</a> *entries, *ce;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow.html">sw_flow</a> *flow;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    u32 <a class="code" href="structsw__flow.html#a7a33a6a5c62113ffe949a700ef648a71">hash</a>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordtype">int</span> seg;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    *n_mask_hit = 0;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (unlikely(!skb_hash)) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        u32 mask_index = 0;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="flow__table_8c.html#a66b2913ba658b83a167b83e5f5ec465a">flow_lookup</a>(tbl, ti, ma, <a class="code" href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">key</a>, n_mask_hit, &amp;mask_index);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="comment">/* Pre and post recirulation flows usually have the same skb_hash</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">     * value. To avoid hash collisions, rehash the &#39;skb_hash&#39; with</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">     * &#39;recirc_id&#39;.  */</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">key</a>-&gt;<a class="code" href="structsw__flow__key.html#a7e51857c88ad6b0bf90551d0b6e2607b">recirc_id</a>)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        skb_hash = jhash_1word(skb_hash, <a class="code" href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">key</a>-&gt;<a class="code" href="structsw__flow__key.html#a7e51857c88ad6b0bf90551d0b6e2607b">recirc_id</a>);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    ce = NULL;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    hash = skb_hash;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    entries = <a class="code" href="percpu_8h.html#a1cd55f287dff5c4a79fc11dd38d47c12">this_cpu_ptr</a>(tbl-&gt;mask_cache);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">/* Find the cache entry &#39;ce&#39; to operate on. */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">for</span> (seg = 0; seg &lt; <a class="code" href="flow__table_8c.html#ab95179a8dc622b08ce82308fe001d788">MC_HASH_SEGS</a>; seg++) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordtype">int</span> index = hash &amp; (<a class="code" href="flow__table_8c.html#af961440482d56f3b26f232774a37c9c5">MC_HASH_ENTRIES</a> - 1);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keyword">struct </span><a class="code" href="structmask__cache__entry.html">mask_cache_entry</a> *e;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        e = &amp;entries[index];</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a> == <a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a>) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            flow = <a class="code" href="flow__table_8c.html#a66b2913ba658b83a167b83e5f5ec465a">flow_lookup</a>(tbl, ti, ma, key, n_mask_hit,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                       &amp;e-&gt;<a class="code" href="structmask__cache__entry.html#a87faeaec562bcab421cb208dfc0ef5f0">mask_index</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordflow">if</span> (!flow)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                e-&gt;<a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a> = 0;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <span class="keywordflow">return</span> flow;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">if</span> (!ce || e-&gt;<a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a> &lt; ce-&gt;<a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a>)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            ce = e;  <span class="comment">/* A better replacement cache candidate. */</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        hash &gt;&gt;= <a class="code" href="flow__table_8c.html#aba54fb364af2c9465bb632f82e4631d7">MC_HASH_SHIFT</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">/* Cache miss, do full lookup. */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    flow = <a class="code" href="flow__table_8c.html#a66b2913ba658b83a167b83e5f5ec465a">flow_lookup</a>(tbl, ti, ma, key, n_mask_hit, &amp;ce-&gt;<a class="code" href="structmask__cache__entry.html#a87faeaec562bcab421cb208dfc0ef5f0">mask_index</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (flow)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        ce-&gt;<a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a> = <a class="code" href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">skb_hash</a>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> flow;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
<div class="ttc" id="structsw__flow_html"><div class="ttname"><a href="structsw__flow.html">sw_flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:223</div></div>
<div class="ttc" id="flow__table_8c_html_ab95179a8dc622b08ce82308fe001d788"><div class="ttname"><a href="flow__table_8c.html#ab95179a8dc622b08ce82308fe001d788">MC_HASH_SEGS</a></div><div class="ttdeci">#define MC_HASH_SEGS</div><div class="ttdef"><b>Definition:</b> flow_table.c:55</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="structmask__array_html"><div class="ttname"><a href="structmask__array.html">mask_array</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:44</div></div>
<div class="ttc" id="structmask__cache__entry_html_a87faeaec562bcab421cb208dfc0ef5f0"><div class="ttname"><a href="structmask__cache__entry.html#a87faeaec562bcab421cb208dfc0ef5f0">mask_cache_entry::mask_index</a></div><div class="ttdeci">u32 mask_index</div><div class="ttdef"><b>Definition:</b> flow_table.h:41</div></div>
<div class="ttc" id="structsw__flow__key_html_a7e51857c88ad6b0bf90551d0b6e2607b"><div class="ttname"><a href="structsw__flow__key.html#a7e51857c88ad6b0bf90551d0b6e2607b">sw_flow_key::recirc_id</a></div><div class="ttdeci">u32 recirc_id</div><div class="ttdef"><b>Definition:</b> flow.h:132</div></div>
<div class="ttc" id="structmask__cache__entry_html"><div class="ttname"><a href="structmask__cache__entry.html">mask_cache_entry</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:39</div></div>
<div class="ttc" id="percpu_8h_html_a1cd55f287dff5c4a79fc11dd38d47c12"><div class="ttname"><a href="percpu_8h.html#a1cd55f287dff5c4a79fc11dd38d47c12">this_cpu_ptr</a></div><div class="ttdeci">#define this_cpu_ptr(ptr)</div><div class="ttdef"><b>Definition:</b> percpu.h:7</div></div>
<div class="ttc" id="structmask__cache__entry_html_a45ae5222badf95e1c919a0d6d0090b6f"><div class="ttname"><a href="structmask__cache__entry.html#a45ae5222badf95e1c919a0d6d0090b6f">mask_cache_entry::skb_hash</a></div><div class="ttdeci">u32 skb_hash</div><div class="ttdef"><b>Definition:</b> flow_table.h:40</div></div>
<div class="ttc" id="structsw__flow_html_a14b83cbd65275bda4e97ae35500d26d8"><div class="ttname"><a href="structsw__flow.html#a14b83cbd65275bda4e97ae35500d26d8">sw_flow::key</a></div><div class="ttdeci">struct sw_flow_key key</div><div class="ttdef"><b>Definition:</b> flow.h:232</div></div>
<div class="ttc" id="flow__table_8c_html_a66b2913ba658b83a167b83e5f5ec465a"><div class="ttname"><a href="flow__table_8c.html#a66b2913ba658b83a167b83e5f5ec465a">flow_lookup</a></div><div class="ttdeci">static struct sw_flow * flow_lookup(struct flow_table *tbl, struct table_instance *ti, const struct mask_array *ma, const struct sw_flow_key *key, u32 *n_mask_hit, u32 *index)</div><div class="ttdef"><b>Definition:</b> flow_table.c:572</div></div>
<div class="ttc" id="flow__table_8c_html_aba54fb364af2c9465bb632f82e4631d7"><div class="ttname"><a href="flow__table_8c.html#aba54fb364af2c9465bb632f82e4631d7">MC_HASH_SHIFT</a></div><div class="ttdeci">#define MC_HASH_SHIFT</div><div class="ttdef"><b>Definition:</b> flow_table.c:53</div></div>
<div class="ttc" id="flow__table_8c_html_af961440482d56f3b26f232774a37c9c5"><div class="ttname"><a href="flow__table_8c.html#af961440482d56f3b26f232774a37c9c5">MC_HASH_ENTRIES</a></div><div class="ttdeci">#define MC_HASH_ENTRIES</div><div class="ttdef"><b>Definition:</b> flow_table.c:54</div></div>
<div class="ttc" id="structsw__flow_html_a7a33a6a5c62113ffe949a700ef648a71"><div class="ttname"><a href="structsw__flow.html#a7a33a6a5c62113ffe949a700ef648a71">sw_flow::hash</a></div><div class="ttdeci">u32 hash</div><div class="ttdef"><b>Definition:</b> flow.h:227</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a61adf41ddec6ed85834909231cfa84e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsw__flow.html">sw_flow</a>* ovs_flow_tbl_lookup_ufid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structsw__flow__id.html">sw_flow_id</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti = <a class="code" href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a>(tbl-&gt;ufid_ti);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keyword">struct </span><a class="code" href="structsw__flow.html">sw_flow</a> *flow;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keyword">struct </span>hlist_head *head;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    u32 hash;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    hash = <a class="code" href="flow__table_8c.html#aaf879648c325750d8ff234382797f3af">ufid_hash</a>(ufid);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    head = <a class="code" href="flow__table_8c.html#aed00deae6497143255e822e293592558">find_bucket</a>(ti, hash);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="rculist_8h.html#a482ed6bca0b607f6455d5386f3b1ed75">hlist_for_each_entry_rcu</a>(flow, head, ufid_table.<a class="code" href="structsw__flow.html#ad56483ca56d2f95857eee360e934fcf2">node</a>[ti-&gt;<a class="code" href="structtable__instance.html#ab992e9218f85e3b5193ae47e8fbf3f32">node_ver</a>]) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">if</span> (flow-&gt;<a class="code" href="structsw__flow.html#af5dad10ae036092f5a26cfebb050a03a">ufid_table</a>.<a class="code" href="structsw__flow.html#a7a33a6a5c62113ffe949a700ef648a71">hash</a> == hash &amp;&amp;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <a class="code" href="flow__table_8c.html#aed32909e9cc5bd5644d1eb39184a5615">ovs_flow_cmp_ufid</a>(flow, ufid))</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="keywordflow">return</span> flow;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div>
<div class="ttc" id="structsw__flow_html"><div class="ttname"><a href="structsw__flow.html">sw_flow</a></div><div class="ttdef"><b>Definition:</b> flow.h:223</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="flow__table_8c_html_aed32909e9cc5bd5644d1eb39184a5615"><div class="ttname"><a href="flow__table_8c.html#aed32909e9cc5bd5644d1eb39184a5615">ovs_flow_cmp_ufid</a></div><div class="ttdeci">static bool ovs_flow_cmp_ufid(const struct sw_flow *flow, const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow_table.c:715</div></div>
<div class="ttc" id="flow__table_8c_html_aaf879648c325750d8ff234382797f3af"><div class="ttname"><a href="flow__table_8c.html#aaf879648c325750d8ff234382797f3af">ufid_hash</a></div><div class="ttdeci">static u32 ufid_hash(const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow_table.c:710</div></div>
<div class="ttc" id="flow__table_8c_html_aed00deae6497143255e822e293592558"><div class="ttname"><a href="flow__table_8c.html#aed00deae6497143255e822e293592558">find_bucket</a></div><div class="ttdeci">static struct hlist_head * find_bucket(struct table_instance *ti, u32 hash)</div><div class="ttdef"><b>Definition:</b> flow_table.c:394</div></div>
<div class="ttc" id="rculist_8h_html_a482ed6bca0b607f6455d5386f3b1ed75"><div class="ttname"><a href="rculist_8h.html#a482ed6bca0b607f6455d5386f3b1ed75">hlist_for_each_entry_rcu</a></div><div class="ttdeci">#define hlist_for_each_entry_rcu(pos, head, member)</div><div class="ttdef"><b>Definition:</b> rculist.h:13</div></div>
<div class="ttc" id="structtable__instance_html_ab992e9218f85e3b5193ae47e8fbf3f32"><div class="ttname"><a href="structtable__instance.html#ab992e9218f85e3b5193ae47e8fbf3f32">table_instance::node_ver</a></div><div class="ttdeci">int node_ver</div><div class="ttdef"><b>Definition:</b> flow_table.h:54</div></div>
<div class="ttc" id="structsw__flow_html_ad56483ca56d2f95857eee360e934fcf2"><div class="ttname"><a href="structsw__flow.html#ad56483ca56d2f95857eee360e934fcf2">sw_flow::node</a></div><div class="ttdeci">struct hlist_node node[2]</div><div class="ttdef"><b>Definition:</b> flow.h:226</div></div>
<div class="ttc" id="structsw__flow_html_af5dad10ae036092f5a26cfebb050a03a"><div class="ttname"><a href="structsw__flow.html#af5dad10ae036092f5a26cfebb050a03a">sw_flow::ufid_table</a></div><div class="ttdeci">struct sw_flow::@32 ufid_table</div></div>
<div class="ttc" id="structsw__flow_html_a7a33a6a5c62113ffe949a700ef648a71"><div class="ttname"><a href="structsw__flow.html#a7a33a6a5c62113ffe949a700ef648a71">sw_flow::hash</a></div><div class="ttdeci">u32 hash</div><div class="ttdef"><b>Definition:</b> flow.h:227</div></div>
<div class="ttc" id="datapath_8h_html_a5f2a2c1026f970f0052e77f5ebba33d1"><div class="ttname"><a href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a></div><div class="ttdeci">#define rcu_dereference_ovsl(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:154</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6e18d16217cddd0af756b76b72e6ce6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ovs_flow_tbl_num_masks </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;{</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keyword">struct </span><a class="code" href="structmask__array.html">mask_array</a> *ma;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    ma = <a class="code" href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a>(table-&gt;<a class="code" href="structflow__table.html#a0e568d59590f38936b714555597505be">mask_array</a>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">return</span> ma-&gt;<a class="code" href="structmask__array.html#a55b8fb7e2d7ad8a5725a749645f73b5a">count</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;}</div>
<div class="ttc" id="structmask__array_html"><div class="ttname"><a href="structmask__array.html">mask_array</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:44</div></div>
<div class="ttc" id="structflow__table_html_a0e568d59590f38936b714555597505be"><div class="ttname"><a href="structflow__table.html#a0e568d59590f38936b714555597505be">flow_table::mask_array</a></div><div class="ttdeci">struct mask_array __rcu * mask_array</div><div class="ttdef"><b>Definition:</b> flow_table.h:63</div></div>
<div class="ttc" id="structmask__array_html_a55b8fb7e2d7ad8a5725a749645f73b5a"><div class="ttname"><a href="structmask__array.html#a55b8fb7e2d7ad8a5725a749645f73b5a">mask_array::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> flow_table.h:46</div></div>
<div class="ttc" id="datapath_8h_html_a5f2a2c1026f970f0052e77f5ebba33d1"><div class="ttname"><a href="datapath_8h.html#a5f2a2c1026f970f0052e77f5ebba33d1">rcu_dereference_ovsl</a></div><div class="ttdeci">#define rcu_dereference_ovsl(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:154</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa75b8bc2551f9c1a8d65b942a10df89a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ovs_flow_tbl_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structflow__table.html">flow_table</a> *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsw__flow.html">sw_flow</a> *&#160;</td>
          <td class="paramname"><em>flow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ti = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(table-&gt;<a class="code" href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">ti</a>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keyword">struct </span><a class="code" href="structtable__instance.html">table_instance</a> *ufid_ti = <a class="code" href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a>(table-&gt;<a class="code" href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">ufid_ti</a>);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    BUG_ON(table-&gt;<a class="code" href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">count</a> == 0);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    hlist_del_rcu(&amp;flow-&gt;<a class="code" href="structsw__flow.html#abca0040cced6a4a84d1a8941764fb5d6">flow_table</a>.<a class="code" href="structsw__flow.html#ad56483ca56d2f95857eee360e934fcf2">node</a>[ti-&gt;<a class="code" href="structtable__instance.html#ab992e9218f85e3b5193ae47e8fbf3f32">node_ver</a>]);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    table-&gt;<a class="code" href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">count</a>--;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a>(&amp;flow-&gt;<a class="code" href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">id</a>)) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        hlist_del_rcu(&amp;flow-&gt;<a class="code" href="structsw__flow.html#af5dad10ae036092f5a26cfebb050a03a">ufid_table</a>.<a class="code" href="structsw__flow.html#ad56483ca56d2f95857eee360e934fcf2">node</a>[ufid_ti-&gt;<a class="code" href="structtable__instance.html#ab992e9218f85e3b5193ae47e8fbf3f32">node_ver</a>]);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        table-&gt;<a class="code" href="structflow__table.html#ad8ff1e259e64690608d9552f0b467bf0">ufid_count</a>--;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="comment">/* RCU delete the mask. &#39;flow-&gt;mask&#39; is not NULLed, as it should be</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">     * accessible as long as the RCU read lock is held.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="flow__table_8c.html#a67796467285f769eda43c39ae058d997">flow_mask_remove</a>(table, flow-&gt;<a class="code" href="structsw__flow.html#a89c162e340693d0bb4977737e2b68c22">mask</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;}</div>
<div class="ttc" id="structflow__table_html_a49d708e68608d510f6d25a16a14fd565"><div class="ttname"><a href="structflow__table.html#a49d708e68608d510f6d25a16a14fd565">flow_table::ti</a></div><div class="ttdeci">struct table_instance __rcu * ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:60</div></div>
<div class="ttc" id="structsw__flow_html_abca0040cced6a4a84d1a8941764fb5d6"><div class="ttname"><a href="structsw__flow.html#abca0040cced6a4a84d1a8941764fb5d6">sw_flow::flow_table</a></div><div class="ttdeci">struct sw_flow::@32 flow_table</div></div>
<div class="ttc" id="structtable__instance_html"><div class="ttname"><a href="structtable__instance.html">table_instance</a></div><div class="ttdef"><b>Definition:</b> flow_table.h:50</div></div>
<div class="ttc" id="flow__table_8c_html_a67796467285f769eda43c39ae058d997"><div class="ttname"><a href="flow__table_8c.html#a67796467285f769eda43c39ae058d997">flow_mask_remove</a></div><div class="ttdeci">static void flow_mask_remove(struct flow_table *tbl, struct sw_flow_mask *mask)</div><div class="ttdef"><b>Definition:</b> flow_table.c:782</div></div>
<div class="ttc" id="flow_8h_html_a995966854ceb0b5a72ff027c12ccf426"><div class="ttname"><a href="flow_8h.html#a995966854ceb0b5a72ff027c12ccf426">ovs_identifier_is_ufid</a></div><div class="ttdeci">static bool ovs_identifier_is_ufid(const struct sw_flow_id *sfid)</div><div class="ttdef"><b>Definition:</b> flow.h:257</div></div>
<div class="ttc" id="structsw__flow_html_a6e6645eec909d54871675be30000c0b9"><div class="ttname"><a href="structsw__flow.html#a6e6645eec909d54871675be30000c0b9">sw_flow::id</a></div><div class="ttdeci">struct sw_flow_id id</div><div class="ttdef"><b>Definition:</b> flow.h:233</div></div>
<div class="ttc" id="datapath_8h_html_a06ef69170d345fd3996a467dcacf3ff3"><div class="ttname"><a href="datapath_8h.html#a06ef69170d345fd3996a467dcacf3ff3">ovsl_dereference</a></div><div class="ttdeci">#define ovsl_dereference(p)</div><div class="ttdef"><b>Definition:</b> datapath.h:152</div></div>
<div class="ttc" id="structflow__table_html_aa29e185501af8dcd15549ee157c6c047"><div class="ttname"><a href="structflow__table.html#aa29e185501af8dcd15549ee157c6c047">flow_table::ufid_ti</a></div><div class="ttdeci">struct table_instance __rcu * ufid_ti</div><div class="ttdef"><b>Definition:</b> flow_table.h:61</div></div>
<div class="ttc" id="structsw__flow_html_a89c162e340693d0bb4977737e2b68c22"><div class="ttname"><a href="structsw__flow.html#a89c162e340693d0bb4977737e2b68c22">sw_flow::mask</a></div><div class="ttdeci">struct sw_flow_mask * mask</div><div class="ttdef"><b>Definition:</b> flow.h:234</div></div>
<div class="ttc" id="structtable__instance_html_ab992e9218f85e3b5193ae47e8fbf3f32"><div class="ttname"><a href="structtable__instance.html#ab992e9218f85e3b5193ae47e8fbf3f32">table_instance::node_ver</a></div><div class="ttdeci">int node_ver</div><div class="ttdef"><b>Definition:</b> flow_table.h:54</div></div>
<div class="ttc" id="structsw__flow_html_ad56483ca56d2f95857eee360e934fcf2"><div class="ttname"><a href="structsw__flow.html#ad56483ca56d2f95857eee360e934fcf2">sw_flow::node</a></div><div class="ttdeci">struct hlist_node node[2]</div><div class="ttdef"><b>Definition:</b> flow.h:226</div></div>
<div class="ttc" id="structflow__table_html_a97cae1e714c6dcfe0d39ce4cff371786"><div class="ttname"><a href="structflow__table.html#a97cae1e714c6dcfe0d39ce4cff371786">flow_table::count</a></div><div class="ttdeci">unsigned int count</div><div class="ttdef"><b>Definition:</b> flow_table.h:65</div></div>
<div class="ttc" id="structflow__table_html_ad8ff1e259e64690608d9552f0b467bf0"><div class="ttname"><a href="structflow__table.html#ad8ff1e259e64690608d9552f0b467bf0">flow_table::ufid_count</a></div><div class="ttdeci">unsigned int ufid_count</div><div class="ttdef"><b>Definition:</b> flow_table.h:66</div></div>
<div class="ttc" id="structsw__flow_html_af5dad10ae036092f5a26cfebb050a03a"><div class="ttname"><a href="structsw__flow.html#af5dad10ae036092f5a26cfebb050a03a">sw_flow::ufid_table</a></div><div class="ttdeci">struct sw_flow::@32 ufid_table</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ab305bee215adea2618069cc592f6ee6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kmem_cache* flow_stats_cache</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_735673ca58647e7dec4e87713fc0822e.html">ovs</a></li><li class="navelem"><a class="el" href="dir_f0eaa0aee046c2546aa3d47fe4e5c43a.html">datapath</a></li><li class="navelem"><a class="el" href="flow__table_8h.html">flow_table.h</a></li>
    <li class="footer">Generated on Mon Aug 17 2015 11:15:08 for ovs datapath by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
